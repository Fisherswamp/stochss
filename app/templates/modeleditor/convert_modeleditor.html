{% extends "modeleditor.html" %}
{% block title%}Convert Concentration Model to Population{% endblock %}
{% block modeleditorcontent %}
<div class="span9">
    <div class="row-fluid">
        <div class="well form">

	    <h3><a default> Convert concentration model to population model for mass-action kinetics </a>&raquo; </h3>

            <br />

            While concentration-based models can be only simulated employing only the deterministic solver (ODE), the newly-created population-based model can be simulated employing both the deterministic and stochastic solvers (SSA, Tau-leaping)

          <div style="display: none;" id="modelSelect">
            {{ modelName }}
            <!--<h3>1. Select a concentration model:</h3>
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th width="15pt"></th>
                  <th>Model Name</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>-->
          </div>
          <br />
          <br />

          <div id="volumeChoose">
            <h3>1. Choose a conversion volume:</h3>

            Choose the volume parameter to give resultant population values that make sense. Because strict concentration units are not enforced by StochSS, the units of volume are entirely a function of the input model.

            <br />
            <br />

            <div class="alert alert-block alert-info">Note: Due to rounding, the ratios of the population values may be different from that of the concentration equivalents</div>

            <br />

            Volume:<br />
            <input class="volume" type="text" style="width: 100px;" class="id update_box auto_complete" />
            <span class="msgbox" style="color:red;"></span>
            
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Concentration initial value</th>
                  <th>Population initial value</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>

          <br />
          <div id="reactionVerify">
            <h3>2. Verify reactions:</h3>

            Verify here that the model conversion worked as expected. Only mass-action reactions can be converted automatically. Propensities for custom reactions will simply be copied to the new model when it is created. They can be modified from there.

            <br />
            <br />

            <div class="alert alert-block alert-info">Note: The conversion will work even if this table reports errors</div>

            <br />

            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Reaction</th>
                  <th>Expression</th>
                  <th>Propensity</th>
                  <th>Converted Successfully?</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>

          <br />
          <div id="createModel">
            <h3>3. Create new model:</h3>
            Name:<br />
            <input type="text" style="width: 200px;" class="modelName id update_box auto_complete" /><br /><br />
            <button class="createModel btn btn-primary" style="float: right;">Create Model</button>
            <br />
            <br />
            <div id="msg" />
          </div>
	</div>
    </div>
</div>
<!--WHY DOES THIS HAVE TO BE HERE?-->
</div>

{% endblock %}

{% block jscontent %}
<script src = "/static/js/jquery-ui-1.10.3/js/jquery-1.9.1.js"></script>
<script src = "/static/js/jquery-ui-1.10.3/js/jquery-ui-1.10.3.custom.js"></script>
<script type="text/javascript" src = "/static/js/underscore.js"></script>
<script type="text/javascript" src = "/static/utils.js"></script>
<script type="text/javascript" src = "/static/js/backbone.js"></script>
<script type="text/javascript" src = "/static/model/stochkit.js"></script>

<script type="text/javascript" src = "/static/convert/convert_modeleditor.js"></script>
{% endblock %}
