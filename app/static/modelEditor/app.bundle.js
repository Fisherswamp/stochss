!function e(t,i,n){function r(o,s){if(!i[o]){if(!t[o]){var h="function"==typeof require&&require
if(!s&&h)return h(o,!0)
if(a)return a(o,!0)
var l=new Error("Cannot find module '"+o+"'")
throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}}
t[o][0].call(c.exports,function(e){var i=t[o][1][e]
return r(i?i:e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o])
return r}({1:[function(e,t,i){var n=e("jquery"),r=e("underscore"),a=(e("clientconfig"),e("ampersand-view")),o=(e("ampersand-model"),e("ampersand-rest-collection")),s=e("./forms/model"),h=e("./select/model-collection"),l=e("./models/model"),c=e("domready"),u=e("./models/mesh"),d=e("./models/mesh-collection"),p=(e("./forms/mesh-collection"),e("url-parse")),f=a.extend({props:{selected:"object",modelNameText:"string"},bindings:{modelNameText:{type:"text",hook:"modelName"},selected:[{type:"toggle",selector:".reqModel"}]},updateModelNameText:function(){this.selected?this.modelNameText="(current: "+this.selected.name+")":this.modelNameText=""},updateSaveMessage:function(e,t){var i=n(this.queryByHook("saveMessage"))
"boolean"==typeof e?e?(i.removeClass("alert-error"),i.addClass("alert-success"),i.text(t)):(i.removeClass("alert-success"),i.addClass("alert-error"),i.text(t)):"saved"==this.selected.saveState?(i.removeClass("alert-error"),i.addClass("alert-success"),i.text("Saved")):"saving"==this.selected.saveState?(i.removeClass("alert-success alert-error"),i.text("Saving...")):"failed"==this.selected.saveState?(i.removeClass("alert-success"),i.addClass("alert-error"),i.text("Model Save Failed!")):"invalid"==this.selected.saveState&&(i.removeClass("alert-success"),i.addClass("alert-error"),i.text(this.message))},updateValid:function(){this.modelSelector.updateValid(),this.valid=this.modelSelector.valid,this.message="",this.modelSelector.valid||(this.message=this.modelSelector.message),this.modelEditor&&(this.modelEditor.updateValid(),this.valid=this.valid&&this.modelEditor.valid,this.modelEditor.valid||0!=this.message.length||(this.message=this.modelEditor.message))},update:function(){this.updateModelNameText()
var e=this.valid
this.updateValid(),this.valid||this.updateSaveMessage(!1,this.message),e!=this.valid&&0==e&&this.saveModel()},saveModel:function(e){this.updateValid(),this.valid?this.selected&&this.selected.saveModel():this.valid||this.updateSaveMessage(!1,this.message)},initialize:function(e,t){a.prototype.initialize.call(this,e,t),this.meshCollection=e.meshCollection,n("[data-hook='exportToPublic']").click(r.bind(this.exportModel,this)),n("[data-hook='exportToZip']").click(r.bind(this.exportModelAsZip,this)),n('[data-hook="duplicateLink"]').click(r.bind(function(){this.modelEditor.duplicateModel()},this)),n('[data-hook="convertToPopulationLink"]').click(r.bind(function(){this.modelEditor.convertToPopulation(),n(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".speciesAccordion").find("a").first()[0].click(),n(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".parametersAccordion").find("a").first()[0].click(),n(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),n(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),n(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".reactionsAccordion").find("a").first()[0].click()},this)),n('[data-hook="convertToSpatialLink"]').click(r.bind(function(){this.modelEditor.convertToSpatial(),n(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".speciesAccordion").find("a").first()[0].click(),n(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".parametersAccordion").find("a").first()[0].click(),n(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),n(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),n(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".reactionsAccordion").find("a").first()[0].click()},this))},remove:function(){n('[data-hook="duplicateLink"]').off("click"),n('[data-hook="convertToPopulationLink"]').off("click"),n('[data-hook="convertToSpatialLink"]').off("click"),f.prototype.remove.apply(this,arguments)},selectModel:function(){this.modelSelector.selected&&(this.modelEditor&&(this.modelEditor.remove(),this.stopListening(this.selected),delete this.modelEditor),this.modelEditor=new s({el:n("<div>").appendTo(this.queryByHook("editor"))[0],model:this.modelSelector.selected,meshCollection:this.meshCollection,parent:this}),this.listenTo(this.modelSelector.selected,"remove",r.bind(this.modelDeleted,this)),this.listenTo(this.modelSelector.selected,"requestSave",r.bind(this.saveModel,this)),this.listenTo(this.modelSelector.selected,"change:saveState",r.bind(this.updateSaveMessage,this)),this.registerSubview(this.modelEditor),this.modelEditor.render(),n(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".speciesAccordion").find("a").first()[0].click(),n(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".parametersAccordion").find("a").first()[0].click(),n(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),n(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),n(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".reactionsAccordion").find("a").first()[0].click(),this.selected=this.modelSelector.selected),this.updateModelNameText()},exportModel:function(){var e=n(this.queryByHook("saveMessage"))
e.removeClass("alert-success alert-error"),e.text("Duplicating model...")
var t=n.ajax({type:"GET",url:"/publicModels/names",async:!1,dataType:"JSON"}).responseJSON,i=t.map(function(e){return e.name})
model=new l(this.modelSelector.selected.toJSON())
for(var a=model.name;r.contains(i,a);)a=model.name+"_"+Math.random().toString(36).substr(2,3)
model.name=a,model.is_public=!0,model.id=void 0,model.setupMesh(this.meshCollection),m.add(model),e.text("Saving model..."),model.save(void 0,{success:r.bind(this.modelSaved,this),error:r.bind(this.modelNotSaved,this)})},modelSaved:function(){var e=n(this.queryByHook("saveMessage"))
e.removeClass("alert-error"),e.addClass("alert-success"),e.text("Saved model to public library"),window.location="/publicLibrary"},modelNotSaved:function(){var e=n(this.queryByHook("saveMessage"))
e.removeClass("alert-success"),e.addClass("alert-error"),e.text("Error! Model not saved to public library!")},modelDeleted:function(){this.modelEditor&&(this.modelEditor.remove(),this.stopListening(this.modelSelector.selected),this.selected=void 0,delete this.modelEditor),this.updateModelNameText()},exportModelAsZip:function(){n.ajax({type:"GET",url:"/modeleditor",data:{reqType:"exportToZip",id:this.modelSelector.selected.id},dataType:"json",success:r.bind(this.forwardToFile,this)})},exportModelAsXML:function(){n.ajax({type:"GET",url:"/modeleditor",data:{reqType:"exportToXML",id:this.modelSelector.selected.id},dataType:"json",success:r.bind(this.forwardToFile,this)})},forwardToFile:function(e){if(e.url)window.location=e.url
else{var t=n(this.queryByHook("saveMessage"))
t.removeClass("alert-success"),t.addClass("alert-error"),t.text(e.msg)}},render:function(){n(this.queryByHook("modelSelect")).empty()
var e,t=new p(document.URL,!0)
if(t.query.select)e=this.collection.get(parseInt(t.query.select),"id")
else if(t.query.model_edited)for(var i=0;i<this.collection.models.length;i++)this.collection.at(i).name==t.query.model_edited&&(e=this.collection.at(i))
return this.modelSelector=this.renderSubview(new h({collection:this.collection,meshCollection:this.meshCollection,parent:this,selected:e}),this.queryByHook("modelSelect")),this.selectModel(),this.modelSelector.on("change:selected",r.bind(this.selectModel,this)),this}})
ModelCollection=o.extend({url:"/models",model:l}),PublicModelCollection=o.extend({url:"/publicModels",model:l}),d=o.extend({url:"/meshes",model:u})
var m=new PublicModelCollection,g=new ModelCollection,v=new d,y=!1,w=!1,b=!1
g.fetch({success:function(e,i,n){y=!0,w&&b&&t.exports.blastoff()}}),v.fetch({success:function(e,i,n){w=!0,y&&b&&t.exports.blastoff()}}),m.fetch({success:function(e,i,n){b=!0,w&&y&&t.exports.blastoff()}}),t.exports={blastoff:function(){var e=(window.app=this,n(".modelEditor")[0])
e||(e=document.body),c(function(){for(var t=0;t<g.models.length;t++)g.models[t].setupMesh(v),g.models[t].saveState="saved"
var i=new f({el:e,collection:g,meshCollection:v})
i.render()})}}},{"./forms/mesh-collection":11,"./forms/model":15,"./models/mesh":35,"./models/mesh-collection":34,"./models/model":36,"./select/model-collection":583,"ampersand-model":109,"ampersand-rest-collection":124,"ampersand-view":451,clientconfig:557,domready:559,jquery:560,underscore:578,"url-parse":579}],2:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("./reaction"),s=e("./parameter-collection"),h=e("./specie-collection"),l=e("./reaction-collection"),c=e("ampersand-input-view"),u=e("../forms/tests")
t.exports=a.extend({template:r(".convertToPopulationTemplate").text(),props:{volume:"Number"},initialize:function(){a.prototype.initialize.apply(this,arguments),this.volume=1},events:{"click [data-hook=finishConvertToPopulationButton]":"clickConvertToPopulation","click [data-hook=cancelConvertToPopulationButton]":"clickCancel"},bindings:{"model.type":{type:"text",hook:"type"}},clickConvertToPopulation:function(){this.parent.convertToPopulation()},clickCancel:function(){this.parent.cancelConvertToPopulation()},update:function(e){"volume"==e.name&&e.valid&&(this.volume=Number(e.value))},convertToPopulation:function(){for(var e=this.model.species.models,t=0;t<e.length;t++)e[t].initialCondition=Math.floor(this.volume*e[t].initialCondition)
for(var i=this.model.reactions.models,r=this.model.parameters.models,e=this.model.species.models,t=0;t<i.length;t++)if("custom"!=i[t].type){var a=o.computeConversionFactor(i[t],this.volume)
if(a&&a.length>0){for(var s=i[t].rate.name+"_",h=0;n.findWhere(r,{name:s+h})||n.findWhere(e,{name:s+h});)h+=1
var l=this.model.parameters.addParameter(s+h,i[t].rate.value+a)
i[t].rate=l}}this.model.units="population"},render:function(){a.prototype.render.apply(this,arguments)
var e=this.model
return this.subViews=[new h({el:this.el.querySelector("[data-hook='specie']"),collection:e.species}),new s({el:this.el.querySelector("[data-hook='parameter']"),collection:e.parameters}),new l({el:this.el.querySelector("[data-hook='reaction']"),collection:e.reactions}),new c({el:this.el.querySelector("[data-hook='volume']"),label:"",name:"volume",value:this.volume,required:!0,placeholder:"Volume",tests:[].concat(u.nonzero())})],this.subViews.forEach(n.bind(function(e){this.registerSubview(e),e.render()},this)),r(this.el).find("input").prop("autocomplete","off"),this}})},{"../forms/tests":30,"./parameter-collection":3,"./reaction":6,"./reaction-collection":5,"./specie-collection":7,"ampersand-input-view":108,"ampersand-view":451,jquery:560,underscore:578}],3:[function(e,t,i){var n=(e("jquery"),e("ampersand-view")),r=e("./parameter"),a=e("../forms/paginated-collection-view"),o=n.extend({template:"<div><div data-hook='parametersTable'></div></div>",render:function(){var e="<div>   <h3>Parameters</h3>   <table class='table table-bordered' data-hook='table'>     <thead>       <th width='120px'>Name</th><th width='120px'>Value</th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>"
return n.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new a({template:e,collection:this.collection,viewModel:r,parent:this,limit:10}),this.queryByHook("parametersTable")),this}})
t.exports=o},{"../forms/paginated-collection-view":19,"./parameter":4,"ampersand-view":451,jquery:560}],4:[function(e,t,i){var n=(e("underscore"),e("jquery"),e("ampersand-view"))
t.exports=n.extend({template:"<tr><td data-hook='name'></td><td data-hook='value'></td></tr>",bindings:{"model.name":{type:"text",hook:"name"},"model.value":{type:"text",hook:"value"}}})},{"ampersand-view":451,jquery:560,underscore:578}],5:[function(e,t,i){var n=(e("jquery"),e("ampersand-view")),r=e("./reaction"),a=e("../forms/paginated-collection-view"),o=n.extend({template:"<div><div data-hook='reactionTable'></div></div>",render:function(){var e="<div>   <h3>Reactions</h3>   <table class='table table-bordered' data-hook='table'>     <thead>       <th width='120px'>Name</th><th>Rate</th><th>Summary</th><th>Result</th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>"
return n.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new a({template:e,collection:this.collection,viewModel:r,parent:this,limit:10}),this.queryByHook("reactionTable")),this}})
t.exports=o},{"../forms/paginated-collection-view":19,"./reaction":6,"ampersand-view":451,jquery:560}],6:[function(e,t,i){var n=(e("underscore"),e("jquery")),r=e("ampersand-view"),a=e("../forms/reaction"),o=e("katex"),s=r.extend({template:"<tr><td data-hook='name'></td><td data-hook='parameter'></td><td data-hook='equation'></td><td data-hook='latex'></td><td data-hook='result'></td></tr>",volumeChange:function(e){var t=s.computeConversionFactor(this.model,this.baseView.volume),i=n(this.queryByHook("result")),r="X"
this.model.rate&&this.model.rate.name&&(r=this.model.rate.name),"massaction"!=this.model.type&&"custom"!=this.model.type?"undefined"!=typeof t?(o.render((r+t).replace(/_/g,"\\_"),this.queryByHook("parameter")),i.text("Successfully converted")):(o.render(r.replace(/_/g,"\\_"),this.queryByHook("parameter")),i.text("Failed, valid mass action, but invalid under SSA assumptions")):"massaction"==this.model.type?"undefined"!=typeof t?(o.render((r+t).replace(/_/g,"\\_"),this.queryByHook("parameter")),i.text("Successfully converted")):(o.render(r.replace(/_/g,"\\_"),this.queryByHook("parameter")),i.text("Failed, valid mass action, but invalid under SSA assumptions")):i.text("Cannot convert custom propensities automatically")},redrawLatex:a.prototype.redrawLatex,bindings:{"model.name":{type:"text",hook:"name"},modelType:[{type:"switch",cases:{notCustom:'[data-hook="parameter"]',custom:'[data-hook="equation"]'}}]},derived:{modelType:{deps:["model.type"],fn:function(){return"custom"==this.model.type?"custom":"notCustom"}}},render:function(){return r.prototype.render.apply(this,arguments),this.baseView=this.parent.parent.parent,this.listenToAndRun(this.baseView,"change:volume",this.volumeChange),this.redrawLatex(),this}})
s.computeConversionFactor=function(e,t){for(var i=e.reactants.models,n=i.length,r=0,a=!0,o=null,s=0;s<i.length;s++){var h=i[s].specie
null!=o&&o!=h&&(a=!1),r+=Number(i[s].stoichiometry),o=h}return"custom"!=e.type?0==n?" * "+t:1==n&&1==r?"":1!=n&&2!=n||2!=r?void 0:1==a&&2==r?" * 2 / "+t:" / "+t:void 0},t.exports=s},{"../forms/reaction":24,"ampersand-view":451,jquery:560,katex:561,underscore:578}],7:[function(e,t,i){var n=(e("jquery"),e("ampersand-view")),r=e("./specie"),a=e("../forms/paginated-collection-view"),o=n.extend({template:"<div><div data-hook='speciesTable'></div></div>",render:function(){var e="<div>   <h3>Species</h3>   <table class='table table-bordered' data-hook='table'>     <thead>       <th width='120px'>Name</th><th width='120px'>Initial Condition</th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>"
return n.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new a({template:e,collection:this.collection,viewModel:r,parent:this,limit:10}),this.queryByHook("speciesTable")),this}})
t.exports=o},{"../forms/paginated-collection-view":19,"./specie":8,"ampersand-view":451,jquery:560}],8:[function(e,t,i){var n=(e("underscore"),e("jquery")),r=e("ampersand-view")
t.exports=r.extend({template:"<tr><td data-hook='name'></td><td data-hook='initialCondition'></td></tr>",bindings:{"model.name":{type:"text",hook:"name"}},volumeChange:function(){n(this.queryByHook("initialCondition")).text(Math.floor(this.model.initialCondition*this.baseView.volume))},render:function(){return r.prototype.render.apply(this,arguments),this.baseView=this.parent.parent.parent,this.listenToAndRun(this.baseView,"change:volume",this.volumeChange),this}})},{"ampersand-view":451,jquery:560,underscore:578}],9:[function(e,t,i){var n=e("jquery"),r=e("ampersand-view"),a=e("ampersand-form-view"),o=(e("ampersand-input-view"),e("ampersand-select-view"),e("./initial-condition")),s=e("./paginated-collection-view"),h=(e("./tests"),a.extend({submitCallback:function(e){var t=this.collection.addScatterInitialCondition(this.baseModel.species.at(0),0,this.baseModel.mesh.uniqueSubdomains.at(0).name)
this.selectView.select(t,!0)},initialize:function(e,t){this.collection=t.collection,this.selectView=e.selectView,this.baseModel=this.collection.parent},render:function(){a.prototype.render.apply(this,arguments),this.button=n('<button class="btn btn-large btn-primary" type="submit">Add Initial Condition</button>').appendTo(n(this.el))}})),l=r.extend({template:"<div>  <div data-hook='initialConditionCollection'></div>   <br />  <form data-hook='addInitialConditionForm'></form></div>",props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent.update()},render:function(){this.baseModel=this.collection.parent
var e="<div>   <table data-hook='table'>    <thead>      <th></th><th>Type</th><th>Species</th><th>Details</th>    </thead>    <tbody data-hook='items'>     </tbody>   </table>  <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>"
return r.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new s({template:e,collection:this.collection,viewModel:o,parent:this,limit:10}),this.queryByHook("initialConditionCollection")),this.addForm=new h({el:this.el.querySelector("[data-hook=addInitialConditionForm]"),selectView:this.selectView},{collection:this.collection}),this}})
t.exports=l},{"./initial-condition":10,"./paginated-collection-view":19,"./tests":30,"ampersand-form-view":104,"ampersand-input-view":108,"ampersand-select-view":142,"ampersand-view":451,jquery:560}],10:[function(e,t,i){var n=e("underscore"),r=(e("jquery"),e("ampersand-view")),a=(e("./modifying-input-view"),e("./modifying-number-input-view")),o=e("ampersand-select-view"),s=e("./modifying-select-view"),h=(e("./subdomain"),e("./tests"))
t.exports=r.extend({template:"<tr data-hook='row'>   <td valign='top'>     <button class='btn' data-hook='delete'>x</button>   </td>   <td data-hook='typeSelect' valign='top'></td>   <td data-hook='specie' valign='top'></td>   <td data-hook='details' valign='top'>     <table>       <tr>         <td>Count:</td><td><div data-hook='count'></div></td>       </tr>       <tbody data-hook='xyz'>         <tr><td>X:</td><td><div data-hook='X'></div></td></tr>         <tr><td>Y:</td><td><div data-hook='Y'></div></td></tr>         <tr><td>Z:</td><td><div data-hook='Z'></div></td></tr>       </tbody>       <tbody data-hook='subdomainTbody'>         <tr><td>Subdomain</td><td><div data-hook='subdomain'></div></td></tr>       </tbody>     </table>   </td> </tr>",props:{valid:"boolean",message:"string"},updateValid:function(){var e=!0,t=""
try{for(var i=0;i<this._subviews.length&&("undefined"!=typeof this._subviews[i].valid&&(e=e&&this._subviews[i].valid,t="Invalid initial condition, please fix"),e);i++);}catch(n){}this.valid=e,this.message=t},update:function(e){"type"==e.name?this.model.type=e.value:"specie"==e.name?this.model.specie=e.value:"subdomain"==e.name&&"undefined"!=typeof e.value&&e.value.length>0&&(this.model.subdomain=Number(e.value)),this.updateValid(),this.parent&&this.parent.update&&this.parent.update()},removeThis:function(){this.model.collection.remove(this.model)},events:{'click [data-hook="delete"]':"removeThis"},derived:{subdomainOrXYZ:{deps:["model.type"],fn:function(){return"scatter"==this.model.type||"distribute"==this.model.type?"subdomain":"xyz"}},invalid:{deps:["valid"],fn:function(){return!this.valid}}},bindings:{subdomainOrXYZ:{type:"switch",cases:{subdomain:'[data-hook="subdomainTbody"]',xyz:'[data-hook="xyz"]'}},invalid:{type:"booleanClass",name:"invalidRow",hook:"row"}},initialize:function(){r.prototype.initialize.apply(this,arguments),this.updateValid()},renderSubdomainSelector:function(){this.subdomainSelector&&this.subdomainSelector.remove()
var e=this.baseModel.mesh.uniqueSubdomains.map(function(e){return[String(e.name),String(e.name)]})
this.subdomainSelector=this.renderSubview(new o({template:'<div><select></select><div data-hook="message-container"><div class="message" data-hook="message-text"></div></div></div>',label:"",name:"subdomain",value:String(this.model.subdomain),options:e,unselectedText:"Select subdomain",parent:this,required:!0}),this.el.querySelector('[data-hook="subdomain"]')),this.update(this.subdomainSelector)},render:function(){return r.prototype.render.apply(this,arguments),this.baseModel=this.collection.parent,this.renderSubview(new o({template:'<div><select></select><div data-hook="message-container"><div class="message" data-hook="message-text"></div></div></div>',label:"",name:"type",parent:this,value:this.model.type,options:[["scatter","Scatter"],["place","Place"],["distribute","Distribute Uniformly"]],required:!0}),this.el.querySelector("[data-hook='typeSelect']")),this.renderSubview(new a({label:"",name:"count",value:this.model.count,required:!1,parent:this,placeholder:"Count",model:this.model,tests:[].concat(h.positive(),h.integer())}),this.el.querySelector("[data-hook='count']")),this.renderSubview(new a({label:"",name:"X",value:this.model.X,required:!1,parent:this,placeholder:"X",model:this.model,tests:[].concat(h.isNumber())}),this.el.querySelector("[data-hook='X']")),this.renderSubview(new a({label:"",name:"Y",value:this.model.Y,parent:this,required:!1,placeholder:"Y",model:this.model,tests:[].concat(h.isNumber())}),this.el.querySelector("[data-hook='Y']")),this.renderSubview(new a({label:"",name:"Z",value:this.model.Z,parent:this,required:!1,placeholder:"Z",model:this.model,tests:[].concat(h.isNumber())}),this.el.querySelector("[data-hook='Z']")),this.renderSubview(new s({template:'<div><select></select><div data-hook="message-container"><div class="message" data-hook="message-text"></div></div></div>',label:"",name:"specie",value:this.model.specie,options:this.baseModel.species,unselectedText:"Pick species",parent:this,required:!0,idAttribute:"cid",textAttribute:"name",yieldModel:!0}),this.el.querySelector("[data-hook='specie']")),this.listenToAndRun(this.baseModel,"change:mesh",n.bind(this.renderSubdomainSelector,this)),this.updateValid(),this}})},{"./modifying-input-view":16,"./modifying-number-input-view":17,"./modifying-select-view":18,"./subdomain":29,"./tests":30,"ampersand-select-view":142,"ampersand-view":451,jquery:560,underscore:578}],11:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("ampersand-subcollection"),s=e("./mesh"),h=e("../models/mesh"),l=(e("blueimp-file-upload"),e("./paginated-collection-view")),c=e("./mesh-description"),u=(e("../forms/tests.js"),a.extend({template:r(".meshCollectionAddTemplate").text(),props:{meshFileData:"object"},derived:{notValid:{deps:["meshFileData"],fn:function(){return!Boolean(this.meshFileData)}}},bindings:{notValid:{type:"booleanAttribute",hook:"meshUploadButton",name:"disabled"}},initialize:function(e,t){a.prototype.initialize.apply(this,arguments),this.collection=t.collection},events:{"click [data-hook=meshUploadButton]":"handleMeshUploadButton","click [data-hook=resetFormButton]":"meshReset"},updateMessage:function(e,t){var i=r(this.el).find(e)
if(i.html(""),!t||!n.has(t,"status"))return void i.text("").prop("class","").hide()
var a=t.msg
i.html(a),t.status?i.prop("class","alert alert-success"):i.prop("class","alert alert-error"),i.show()},render:function(){a.prototype.render.apply(this,arguments),r(this.el).find("#meshDataUpload").fileupload({url:"/FileServer/large/meshFiles",dataType:"json",replaceFileInput:!1,add:n.bind(this.handleMeshDataAdd,this),done:n.bind(this.handleMeshUploadFinish,this)}),r(this.el).find("#subdomainDataUpload").fileupload({url:"/FileServer/large/subdomainFiles",dataType:"json",replaceFileInput:!1,add:n.bind(this.handleSubdomainsDataAdd,this)})},handleMeshUploadButton:function(e){this.meshFileData&&(this.meshFileData.submit(),this.meshSubmitted=!0,this.updateMessage(r(this.el).find("#meshDataUploadStatus"),{status:!0,msg:"Uploading mesh..."})),this.subdomainsFileData&&(this.reader=new FileReader,this.reader.onload=n.bind(this.handleSubdomainsUploadFinish,this),this.reader.readAsText(this.subdomainsFileData.files[0]),this.subdomainsSubmitted=!0,this.updateMessage(r(this.el).find("#subdomainDataUploadStatus"),{status:!0,msg:"Uploading subdomain..."})),this.name=r(this.el).find(".name").val(),this.description=r(this.el).find(".descriptionText").val()},handleMeshDataAdd:function(e,t){this.meshFileData&&(this.meshFileData=null,delete this.meshSubmitted,delete this.meshFileId)
var i=t.files[0].name.split("."),n=i[i.length-1]
if("xml"!=n.toLowerCase())return void this.updateMessage(r(this.el).find("#meshDataUploadStatus"),{status:!1,msg:"Mesh file must be a .xml"})
r(e.target).prop("title",t.files[0].name)
var a,o=r(this.el).find(".name")
a=""==o.val().trim()?t.files[0].name.split(".")[0]:o.val().trim(),o.val(a),this.meshFileData=t},handleSubdomainsDataAdd:function(e,t){this.subdomainFileData&&(delete this.subdomainsFileData,delete this.subdomainsSubmitted,delete this.subdomains,delete this.uniqueSubdomains)
var i=t.files[0].name.split("."),n=i[i.length-1]
return"txt"!=n.toLowerCase()?void this.updateMessage(r(this.el).find("#subdomainDataUploadStatus"),{status:!1,msg:"Subdomain file must be a .txt"}):void(this.subdomainsFileData=t)},handleMeshUploadFinish:function(e,t){this.meshFileId=t.result[0].id,this.updateMessage(r(this.el).find("#meshDataUploadStatus"),{status:!0,msg:"Mesh uploaded"}),this.createMeshWrapper()},handleSubdomainsUploadFinish:function(e){for(var t=e.target.result.split("\n"),i=[],a=0;a<t.length;a++){var o=t[a].split(",")
2==o.length&&i.push([parseInt(o[0]),parseInt(o[1])])}this.subdomains=n.map(n.sortBy(i,function(e){return e[0]}),function(e){return e[1]}),this.uniqueSubdomains=n.unique(this.subdomains),this.updateMessage(r(this.el).find("#subdomainDataUploadStatus"),{status:!0,msg:"Subdomains uploaded"}),this.createMeshWrapper()},createMeshWrapper:function(){var e={}
if(this.meshSubmitted&&this.meshFileId&&(e.meshFileId=this.meshFileId,e.name=this.name,e.description=this.description,this.subdomainsSubmitted&&this.subdomains?(e.subdomains=this.subdomains,e.uniqueSubdomains=this.uniqueSubdomains):(e.subdomains=[],e.uniqueSubdomains=[1]),e.undeletable=!1,!this.subdomainsFiledata||this.subdomains)){var t=new h(e)
this.mesh=t,this.handleMeshWrapperCreated()}},handleMeshWrapperCreated:function(){this.collection.add(this.mesh),this.mesh.save(),this.parent.selectModel(this.mesh),this.meshReset()},meshReset:function(){this.updateMessage("#subdomainDataUploadStatus"),this.updateMessage("#meshDataUploadStatus"),this.meshFileData=null,delete this.meshSubmitted,delete this.meshFileId,delete this.subdomainsFileData,delete this.subdomainsSubmitted,delete this.subdomains,delete this.uniqueSubdomains,r("#meshForm")[0].reset()}})),d=a.extend({template:r(".meshCollectionTemplate").text(),props:{selected:"object"},initialize:function(e,t){a.prototype.initialize.call(this,e,t),this.subCollection=new o(this.collection,{where:{ghost:!1}})},selectModel:function(){this.selected=this.selectView.value,r(this.el).find("#collapseThree2").hasClass("in")&&r(this.el).find("[data-hook='meshLibraryAccordion'] a")[0].click(),this.model.mesh=this.selected,this.model.meshId=this.selected.id,this.selected.description?(r(this.el).find(".descriptionContainer").show(),r(this.el).find(".description").text(this.selected.description)):r(this.el).find(".descriptionContainer").hide()},render:function(){var e="<div>   <table cellpadding='0' cellspacing='0' border='0' class='table table-striped table-bordered' data-hook='table'>     <thead><tr><th>Delete</th><th>Select</th><th style='width: 100%'>Mesh Name</th></tr></thead>     <tbody data-hook='items'></tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>"
return a.prototype.render.apply(this,arguments),this.descriptionView=this.renderSubview(new c({parent:this,baseModel:this.model,model:this.model.mesh}),this.queryByHook("meshDescription")),this.selectView=this.renderSubview(new l({template:e,collection:this.subCollection,viewModel:s,limit:10,autoSelect:!Boolean(this.model.mesh)}),this.queryByHook("meshTable")),this.selectView.select(this.model.mesh),this.listenToAndRun(this.selectView,"change:value",n.bind(this.selectModel,this)),this.addForm=new u({el:this.el.querySelector("[data-hook=addMeshForm]"),parent:this},{collection:this.collection}),this.addForm.render(),this}})
t.exports=d},{"../forms/tests.js":30,"../models/mesh":35,"./mesh":13,"./mesh-description":12,"./paginated-collection-view":19,"ampersand-subcollection":237,"ampersand-view":451,"blueimp-file-upload":551,jquery:560,underscore:578}],12:[function(e,t,i){{var n=(e("underscore"),e("jquery"),e("ampersand-view"))
e("./tests")}t.exports=n.extend({template:'<div>     <div>         <h5>Mesh Name:</h5>         <div data-hook="name">         </div>     </div>     <div data-hook="descriptionContainer">         <br />         <div>             <h5>Mesh Description:</h5>             <pre data-hook="description">             </pre>         </div>     </div> </div>',bindings:{"model.name":{type:"text",hook:"name"},"model.description":[{type:"text",hook:"description"},{type:"toggle",hook:"descriptionContainer"}]},initialize:function(e){n.prototype.initialize.apply(this,arguments),this.baseModel=e.baseModel,this.model=e.model,this.listenToAndRun(this.baseModel,"change:mesh",this.changeModel)},changeModel:function(){this.model=this.baseModel.mesh}})},{"./tests":30,"ampersand-view":451,jquery:560,underscore:578}],13:[function(e,t,i){var n=(e("underscore"),e("jquery")),r=e("ampersand-view")
t.exports=r.extend({template:'<tr>   <td>     <button type="button" class="btn btn-default" data-hook="delete">       x     </button>   </td>   <td>     <input type="radio" name="mesh" />   </td>   <td data-hook="name">   </td> </tr>',bindings:{"model.name":{type:"text",hook:"name"},"model.description":{type:"text",hook:"description"},"model.deletable":{type:"toggle",hook:"delete"}},events:{"click input":"selectSelf","click button":"removeModel"},selectSelf:function(){this.parent.select(this.model)},select:function(){n(this.el).find("button").prop("disabled",!0),n(this.el).find("input[type='radio']").prop("checked",!0)},deSelect:function(){n(this.el).find("button").prop("disabled",!1)},removeModel:function(){this.model.destroy()},render:function(){r.prototype.render.apply(this,arguments)
this.model
return this}})},{"ampersand-view":451,jquery:560,underscore:578}],14:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("three"),s=e("three-orbit-controls")(o),h=e("./subdomain")
t.exports=a.extend({template:r(".mesh3dTemplate").text(),remove:function(){this.removing=!0,delete this.camera,delete this.renderer,delete this.controls,a.prototype.remove.apply(this,arguments)},updateWorldCamera:function(){this.camera2.position.subVectors(this.camera.position,this.controls.target),this.camera2.position.setLength(1.8),this.camera2.lookAt(this.scene2.position)},renderFrame:function(){"undefined"!=typeof this.renderer&&(this.renderer.render(this.scene,this.camera),this.updateWorldCamera(),this.renderer2.render(this.scene2,this.camera2),requestAnimationFrame(n.bind(this.renderFrame,this)),this.controls.update())},update:function(e){var t=e.value.model,i=e.value.checked
i?this.subdomains=n.union(this.subdomains,[t.name]):this.subdomains=n.difference(this.subdomains,[t.name]),this.highLightSubdomains(this.subdomains)},highLightSubdomains:function(e){for(var t=this.model.mesh.subdomains,i=new Array(t.length),r=0;r<t.length;r++)n.contains(e,t[r])?i[r]=new o.Color(10035712):i[r]=new o.Color(153)
this.redrawColors(i)},redrawColors:function(e){for(var t=0;t<this.mesh.geometry.faces.length;t++)for(var i=["a","b","c"],n=this.mesh.geometry.faces[t],r=0;3>r;r++){var a=n[i[r]]
n.vertexColors[r]=e[a]}this.mesh.geometry.colorsNeedUpdate=!0},addGui:function(){r(this.queryByHook("container")).show(),r(this.queryByHook("zoomPlus_btn")).click(n.bind(function(){this.controls.dollyOut()},this)),r(this.queryByHook("zoomMinus_btn")).click(n.bind(function(){this.controls.dollyIn()},this)),r(this.queryByHook("panLeft_btn")).click(n.bind(function(){this.controls.panLeft(-.1)},this)),r(this.queryByHook("panRight_btn")).click(n.bind(function(){this.controls.panLeft(.1)},this)),r(this.queryByHook("panUp_btn")).click(n.bind(function(){this.controls.panUp(-.1)},this)),r(this.queryByHook("panDown_btn")).click(n.bind(function(){this.controls.panUp(.1)},this)),r(this.queryByHook("rotateUp_btn")).click(n.bind(function(){this.controls.rotateUp(.5)},this)),r(this.queryByHook("rotateDown_btn")).click(n.bind(function(){this.controls.rotateUp(-.5)},this)),r(this.queryByHook("rotateRight_btn")).click(n.bind(function(){this.controls.rotateLeft(.5)},this)),r(this.queryByHook("rotateLeft_btn")).click(n.bind(function(){this.controls.rotateLeft(-.5)},this)),r(this.queryByHook("reset_btn")).click(n.bind(function(){this.controls.reset(),this.camera.position.z=1.5},this))},createText:function(e,t,i,n){var r=document.createElement("canvas"),a=r.getContext("2d")
a.font="Bold 20px Arial",a.fillStyle="rgba(0,0,0,0.95)",a.fillText(e,20,20)
var s=new o.Texture(r)
s.needsUpdate=!0
var h=new o.MeshBasicMaterial({map:s,side:o.DoubleSide})
h.transparent=!0
var l=new o.Mesh(new o.PlaneGeometry(1,1),h)
l.position.set(t,i,n),this.scene2.add(l)},addAxes:function(){var e=r(this.queryByHook("inset")).empty(),t=new o.OrthographicCamera(-1,1,1,-1,1,1e3)
this.camera2=t
var i=new o.WebGLRenderer({alpha:!0})
i.setClearColor(0,0),i.setSize(this.d_width/5,this.d_width/5),r(i.domElement).appendTo(e),this.renderer2=i
var n=new o.Scene
this.scene2=n
var a=new o.Vector3(1,0,0),s=new o.Vector3(0,0,0),h=16711680,l=new o.LineBasicMaterial({color:h}),c=new o.Geometry
c.vertices.push(s,a)
var u=new o.Line(c,l)
this.createText("X",1.25,-.3,0),this.scene2.add(u),a=new o.Vector3(0,1,0),s=new o.Vector3(0,0,0),h=255,l=new o.LineBasicMaterial({color:h}),c=new o.Geometry,c.vertices.push(s,a),u=new o.Line(c,l),this.createText("Y",.5,.5,0),n.add(u),a=new o.Vector3(0,0,1),s=new o.Vector3(0,0,0),h=65280,l=new o.LineBasicMaterial({color:h}),c=new o.Geometry,c.vertices.push(s,a),u=new o.Line(c,l),this.createText("Z",.5,-.4,.9),n.add(u)},meshDataPreview:function(){var e=this.model.mesh.threeJsMesh
if(!window.WebGLRenderingContext)return void r(this.queryByHook("mesh")).html('<center><h2 style="color: red;">WebGL Not Supported</h2><br /> <ul><li>Download an updated Firefox or Chromium to use StochSS (both come with WebGL support)</li> <li>It may be necessary to update system video drivers to make this work</li></ul></center>')
if("undefined"==typeof this.webGL){var t=document.createElement("canvas")
this.webGL=Boolean(t.getContext("webgl")),delete t}if(!this.webGL)return void r(this.queryByHook("mesh")).html('<center><h2 style="color: red;">WebGL Disabled</h2><br /> <ul><li>In Safari and certain older browsers, this must be enabled manually</li> <li>Browsers can also throw this error when they detect old or incompatible video drivers</li> <li>Enable WebGL, or try using StochSS in an up to date Chrome or Firefox browser</li> </ul></center>')
if(this.renderer)delete this.scene
else{var i=new o.Scene,n=r(this.el).width()
this.d_width=n
var a=.75*n
this.d_height=a
var h=new o.PerspectiveCamera(75,4/3,.1,1e3),l=new o.WebGLRenderer
l.setSize(n,a),l.setClearColor(16777215,1),this.rendererDom=r(l.domElement).appendTo(this.queryByHook("mesh"))
var c=new s(h,l.domElement)
c.noZoom=!0,h.position.z=1.5,this.camera=h,this.renderer=l,this.controls=c,this.addGui(),this.addAxes()}var i=new o.Scene,u=new o.JSONLoader,d=u.parse(e),p=new o.MeshBasicMaterial({vertexColors:o.VertexColors,wireframe:!0})
p.side=o.DoubleSide,mesh=new o.Mesh(d.geometry,p),i.add(mesh),this.mesh=mesh,delete u,delete p
var f=new o.AmbientLight(0)
i.add(f),hemiLight=new o.HemisphereLight(0,65280,.6),i.add(hemiLight)
var m=new o.DirectionalLight(16777215)
m.position.set(1,1,1).normalize(),i.add(m),this.scene=i,this.highLightSubdomains([]),this.rendererInitialized||(this.rendererInitialized=!0,this.renderFrame())},downloadNewMesh:function(){this.subdomainsView&&this.subdomainsView.remove(),this.subdomainsView=this.renderCollection(this.model.mesh.uniqueSubdomains,h,this.queryByHook("subdomains")),this.subdomains=[],this.model.mesh.downloadMesh(n.bind(this.meshDataPreview,this))},render:function(){return a.prototype.render.apply(this,arguments),this.listenToAndRun(this.model,"change:mesh",n.bind(this.downloadNewMesh,this)),this}})},{"./subdomain":29,"ampersand-view":451,jquery:560,three:577,"three-orbit-controls":576,underscore:578}],15:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("../models/model"),s=e("./parameter-collection"),h=e("./specie-collection"),l=e("./reaction-collection"),c=e("./mesh-collection"),u=e("./initial-condition-collection"),d=e("../convertToPopulation/model"),p=e("./mesh3d")
t.exports=a.extend({template:r(".modelEditorTemplate").text(),props:{state:"string",valid:"boolean"},bindings:{"model.name":{type:"text",hook:"modelName"}},events:{"click [data-hook='convertToPopulationButton']":"convertToPopulation","click [data-hook='doneSelectButton']":"doneSelect"},doneSelect:function(){r(this.el).find('[data-hook="meshDescriptionAccordion"] .accordion-body').first().hasClass("in")||r(this.el).find('[data-hook="meshDescriptionAccordion"] a').first()[0].click(),r(this.el).find('[data-hook="meshLibraryAccordion"] .accordion-body').first().hasClass("in")&&r(this.el).find('[data-hook="meshLibraryAccordion"] a').first()[0].click()},updateValid:function(){for(var e=!0,t="",i=0;i<this.subViews.length&&(this.subViews[i].updateValid&&this.subViews[i].updateValid(),"undefined"!=typeof this.subViews[i].valid&&(e=e&&this.subViews[i].valid,t=this.subViews[i].message),e);i++);this.valid=e,this.message=t},update:function(){this.updateValid(),this.parent&&this.parent.update&&this.parent.update()},duplicateModel:function(){for(var e=new o(this.model.toJSON()),t=this.model.collection.map(function(e){return e.name});;){var i=this.model.name+"_"+Math.random().toString(36).substr(2,3)
if(!n.contains(t,i)){e.name=i
break}}e.id=void 0,e.setupMesh(this.model.mesh.collection),this.model.collection.add(e),e.save()},convertToPopulation:function(){"concentration"==this.state?(this.state="converting",this.remove(),this.render()):"converting"==this.state&&(this.modelConverter.convertToPopulation(),this.state="population",this.remove(),this.render())},cancelConvertToPopulation:function(){"converting"==this.state&&(this.state="concentration",this.remove(),this.render())},convertToSpatial:function(){"population"==this.state&&(this.state="spatial",this.model.isSpatial=!0,this.remove(),this.render())},updateVisibility:function(){"concentration"==this.state?(r(this.el).find('[data-hook="editor"]').show(),r('[data-hook="convertToPopulationLink"]').show(),r(this.el).find('[data-hook="convertToPopulation"]').hide(),r('[data-hook="convertToSpatialLink"]').hide(),r(this.el).find(".spatial").hide()):"converting"==this.state?(r(this.el).find('[data-hook="convertToPopulation"]').show(),r(this.el).find('[data-hook="editor"]').hide(),r('[data-hook="convertToPopulationLink"]').hide(),r('[data-hook="convertToSpatialLink"]').hide(),r(this.el).find(".spatial").hide()):"population"==this.state?(r(this.el).find('[data-hook="convertToPopulation"]').hide(),r('[data-hook="convertToPopulationLink"]').hide(),r(this.el).find('[data-hook="editor"]').show(),r('[data-hook="convertToSpatialLink"]').show(),r(this.el).find(".spatial").hide(),r(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||r(this.el).find(".speciesAccordion").find("a").first()[0].click(),r(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||r(this.el).find(".parametersAccordion").find("a").first()[0].click(),r(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||r(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),r(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||r(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),r(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||r(this.el).find(".reactionsAccordion").find("a").first()[0].click()):"spatial"==this.state&&(r(this.el).find('[data-hook="convertToPopulation"]').hide(),r('[data-hook="convertToPopulationLink"]').hide(),r(this.el).find('[data-hook="editor"]').show(),r('[data-hook="convertToSpatialLink"]').hide(),r(this.el).find(".spatial").show())},initialize:function(e){this.listenTo(this.model,"duplicateLink",n.bind(this.duplicateModel,this)),this.listenTo(this.model,"convertToPopulationLink",n.bind(this.convertToPopulation,this)),this.listenTo(this.model,"convertToSpatialLink",n.bind(this.convertToSpatial,this)),this.model.isSpatial?this.state="spatial":this.state=this.model.units,this.meshCollection=e.meshCollection,this.on("change:state",this.updateVisibility)},remove:function(){"undefined"!=typeof this.subViews&&(this.subViews.forEach(function(e){e.remove(),delete e}),this.subViews=void 0),r(this.el).empty()},render:function(){if(a.prototype.render.apply(this,arguments),!this.model)return this
var e=this.model
this.modelConverter=new d({parent:this,el:r("<div>").appendTo(this.el.querySelector("[data-hook='convertToPopulation']"))[0],model:this.model}),this.subViews=[new h({parent:this,el:r("<div>").appendTo(this.el.querySelector("[data-hook='specie']"))[0],collection:e.species}),new s({parent:this,el:r("<div>").appendTo(this.el.querySelector("[data-hook='parameter']"))[0],collection:e.parameters}),new l({parent:this,el:r("<div>").appendTo(this.el.querySelector("[data-hook='reaction']"))[0],collection:e.reactions}),new u({parent:this,el:r("<div>").appendTo(this.el.querySelector("[data-hook='initialConditions']"))[0],collection:this.model.initialConditions}),new c({parent:this,el:r("<div>").appendTo(this.el.querySelector("[data-hook='mesh']"))[0],model:this.model,collection:this.meshCollection}),new p({parent:this,el:r("<div>").appendTo(this.el.querySelector("[data-hook='mesh3d']"))[0],model:this.model,collection:this.meshCollection}),this.modelConverter],this.subViews.forEach(n.bind(function(e){this.registerSubview(e),e.render()},this)),this.updateVisibility()
var t=r(this.queryByHook("saveMessage"))
return t.removeClass("alert-error"),t.addClass("alert-success"),t.text("Saved"),this}})},{"../convertToPopulation/model":2,"../models/model":36,"./initial-condition-collection":9,"./mesh-collection":11,"./mesh3d":14,"./parameter-collection":20,"./reaction-collection":22,"./specie-collection":25,"ampersand-view":451,jquery:560,underscore:578}],16:[function(e,t,i){var n=e("jquery"),r=e("underscore"),a=e("ampersand-input-view")
ModifyingInputView=a.extend({initialize:function(e,t){a.prototype.initialize.call(this,e,t),this._derived.valid.cache=!1,this.on("change:value",r.bind(this.setModelVariable,this))},render:function(){a.prototype.render.call(this),n(this.el).find("input").prop("autocomplete","off")},setModelVariable:function(e,t,i){this.valid&&(this.model[this.name]=this.value)}}),t.exports=ModifyingInputView},{"ampersand-input-view":108,jquery:560,underscore:578}],17:[function(e,t,i){var n=(e("jquery"),e("underscore"),e("./modifying-input-view"))
ModifyingNumberInputView=n.extend({setModelVariable:function(e,t,i){this.valid&&(this.model[this.name]=Number(this.value))}}),t.exports=ModifyingNumberInputView},{"./modifying-input-view":16,jquery:560,underscore:578}],18:[function(e,t,i){var n=(e("jquery"),e("underscore")),r=e("ampersand-select-view"),a=n.extend(r,{initialize:function(e,t){InputView.prototype.initialize.call(this,e,t),this.on("change:value",n.bind(this.setModelVariable,this))},setModelVariable:function(e,t,i){this.valid&&(this.model[this.name]=this.value)}})
t.exports=a},{"ampersand-select-view":142,jquery:560,underscore:578}],19:[function(e,t,i){var n=e("ampersand-view"),r=e("ampersand-subcollection"),a=e("underscore"),o=n.extend({updateValid:function(){var e=!0,t=""
if(this.subCollectionViews)for(var i=0;i<this.subCollectionViews.views.length&&(this.subCollectionViews.views[i].updateValid&&this.subCollectionViews.views[i].updateValid(),"undefined"!=typeof this.subCollectionViews.views[i].valid&&(e=e&&this.subCollectionViews.views[i].valid,t=this.subCollectionViews.views[i].message),e);i++);this.valid=e,this.message=t},update:function(){this.parent&&this.parent.update&&this.parent.update()},initialize:function(e,t){n.prototype.initialize.call(this,e,t),this.limit=e.limit,this.viewModel=e.viewModel,this.offset=0,"undefined"!=typeof e.autoSelect?this.autoSelect=e.autoSelect:this.autoSelect=!0,this.listenTo(this.collection,"add remove",this.updateModelCount.bind(this)),this.subCollection=new r(this.collection,{limit:this.limit,offset:this.offset}),this.subCollection.parent=this.collection.parent},selectIfVisible:function(){if(this.view&&this.view.deSelect&&this.view.deSelect(),this.subCollectionViews)for(var e=0;e<this.subCollection.models.length;e++)if(this.value==this.subCollection.models[e])return this.view=this.subCollectionViews._getViewByModel(this.value),void(this.view&&"function"==typeof this.view.select&&this.view.select())},select:function(e,t,i){this.view&&this.view.deSelect&&this.view.deSelect()
for(var n=0;n<this.subCollection.models.length;n++)if(e==this.subCollection.models[n]){if(this.view=this.subCollectionViews._getViewByModel(e),this.view&&("function"==typeof this.view.select&&this.view.select(),t)){var r=$(this.view.el).find("input[type=text]").filter(":visible").last()
r&&r.focus()}return void((this.value!=e||this.force)&&(this.value=e))}var n
for(n=0;n<this.collection.models.length;n++)if(e==this.collection.models[n]){if(n==this.collection.models.length-1?this.offset=Math.max(0,n+1-this.limit):this.offset=n,this.subCollection.configure({limit:this.limit,offset:this.offset}),this.view=this.subCollectionViews._getViewByModel(e),this.view&&("function"==typeof this.view.select&&this.view.select(),t)){var r=$(this.view.el).find("input[type=text]").filter(":visible").last()
r&&r.focus()}(this.value!=e||this.force)&&(this.value=e)
break}(this.value!=e||this.force)&&(this.value=e)},shiftPlus:function(e){this.offset+this.limit<this.collection.models.length&&(this.offset=this.offset+this.limit),this.subCollection.configure({limit:this.limit,offset:this.offset}),this.subCollection.on("add",a.bind(this.selectIfVisible,this)),this.selectIfVisible(),e.preventDefault()},shiftMinus:function(e){this.offset-this.limit>=0?this.offset=this.offset-this.limit:this.offset=0,this.subCollection.configure({limit:this.limit,offset:this.offset}),this.selectIfVisible(),e.preventDefault()},events:{"click [data-hook='next']":"shiftPlus","click [data-hook='previous']":"shiftMinus"},props:{valid:"boolean",message:"string",value:"object",offset:"number",modelCount:"number",overLimit:"boolean"},bindings:{modelCount:[{type:"toggle",selector:"div"},{type:"text",hook:"total"}],overLimit:{type:"toggle",hook:"nav"},leftPosition:{type:"text",hook:"leftPosition"},rightPosition:{type:"text",hook:"rightPosition"}},derived:{leftPosition:{deps:["offset"],fn:function(){return this.offset+1}},rightPosition:{deps:["offset","modelCount"],fn:function(){return Math.min(this.modelCount,this.offset+10)}}},updateModelCount:function(){this.modelCount=this.collection.models.length,this.overLimit=!(this.collection.models.length>this.limit),this.overLimit=this.collection.models.length>this.limit},render:function(){return n.prototype.render.apply(this,arguments),this.subCollectionViews=this.renderCollection(this.subCollection,this.viewModel,this.el.querySelector("[data-hook=table]")),this.value?this.select(this.value,!0,!0):this.autoSelect&&this.collection.models.length>0&&this.select(this.collection.models[0]),this.updateModelCount(),this}})
t.exports=o},{"ampersand-subcollection":237,"ampersand-view":451,underscore:578}],20:[function(e,t,i){var n=e("jquery"),r=e("ampersand-view"),a=e("ampersand-form-view"),o=(e("ampersand-input-view"),e("./parameter")),s=e("./paginated-collection-view"),h=(e("./tests"),a.extend({submitCallback:function(e){for(var t=this.collection.models.length,i="k"+t,n=this.collection.map(function(e){return e.name});_.contains(n,i);)t+=1,i="k"+t
this.selectView.select(this.collection.addParameter(i,"0"),!0)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e,t){this.collection=t.collection,this.selectView=e.selectView},render:function(){a.prototype.render.apply(this,arguments),this.button=n('<button class="btn btn-large btn-primary" type="submit">Add Parameter</button>').appendTo(n(this.el))}})),l=r.extend({template:"<div>   <div data-hook='collection'></div>   <br />   <form data-hook='addParametersForm'></form> </div>",props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent.update()},initialize:function(e,t){r.prototype.initialize.call(this,e,t)},render:function(){return r.prototype.render.apply(this,arguments),collectionTemplate="<div>   <table width='100%' data-hook='table'>     <thead>       <th width='120px'>Name</th><th width='120px'>Value</th><th></th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>",this.selectView=this.renderSubview(new s({template:collectionTemplate,collection:this.collection,viewModel:o,parent:this,limit:10}),this.queryByHook("collection")),this.addForm=new h({el:this.el.querySelector("[data-hook=addParametersForm]"),selectView:this.selectView},{collection:this.collection}),this}})
t.exports=l},{"./paginated-collection-view":19,"./parameter":21,"./tests":30,"ampersand-form-view":104,"ampersand-input-view":108,"ampersand-view":451,jquery:560}],21:[function(e,t,i){var n=(e("underscore"),e("jquery")),r=e("ampersand-view"),a=e("./modifying-input-view"),o=(e("./modifying-number-input-view"),e("./tests"))
t.exports=r.extend({template:"<tr data-hook='row'><td data-hook='name'></td><td data-hook='value'></td><td><button class='btn' data-hook='delete'>x</button></td></tr>",props:{valid:"boolean",message:"string"},derived:{invalid:{deps:["valid"],fn:function(){return!this.valid}}},updateValid:function(){var e=!0,t=""
if(this._subviews)for(var i=0;i<this._subviews.length&&("undefined"!=typeof this._subviews[i].valid&&(e=e&&this._subviews[i].valid,t="Invalid parameter, please fix"),e);i++);this.valid=e,this.message=t},update:function(){this.updateValid(),this.parent&&this.parent.update&&this.parent.update()},removeParameter:function(){this.model.collection.remove(this.model)},events:{'click [data-hook="delete"]':"removeParameter"},bindings:{invalid:{type:"booleanClass",name:"invalidRow",hook:"row"},"model.inUse":{type:"booleanAttribute",hook:"delete",name:"disabled"}},initialize:function(){r.prototype.initialize.apply(this,arguments),this.updateValid()},render:function(){return r.prototype.render.apply(this,arguments),this.renderSubview(new a({label:"",name:"name",value:this.model.name,required:!1,placeholder:"Name",parent:this,model:this.model,tests:[].concat(o.naming(this.model.collection,this.model),o.naming(this.model.collection.parent.species,this.model,"between species and parameters"))}),this.el.querySelector("[data-hook='name']")),this.renderSubview(new a({label:"",name:"value",value:this.model.value,required:!1,placeholder:"Value",parent:this,model:this.model,tests:[]}),this.el.querySelector("[data-hook='value']")),n(this.el).find('[data-hook="label"]').hide(),this.updateValid(),this}})},{"./modifying-input-view":16,"./modifying-number-input-view":17,"./tests":30,"ampersand-view":451,jquery:560,underscore:578}],22:[function(e,t,i){var n=e("jquery"),r=e("ampersand-view"),a=e("ampersand-form-view"),o=(e("ampersand-input-view"),e("ampersand-select-view"),e("./reaction-detail")),s=e("./reaction"),h=(e("ampersand-subcollection"),e("./paginated-collection-view")),l=e("katex"),c=(e("./tests"),a.extend({submitCallback:function(e,t){var i,n=this.baseModel.mesh.uniqueSubdomains.map(function(e){return e.name}),r=0,a=0
"creation"==e?(r=0,a=1):"destruction"==e&&(r=1,a=0),"change"==e&&(r=1,a=1),"merge"==e&&(r=2,a=1),"dimerization"==e&&(r=1,a=1),"split"==e&&(r=1,a=2),"four"==e&&(r=2,a=2)
for(var o=[],s=[],h=0;r>h;h++)o.push([this.baseModel.species.at(h),1])
for(var h=0;a>h;h++)s.push([this.baseModel.species.at(h),1])
"dimerization"==e&&(o[0][1]=2)
for(var h=this.collection.models.length,l="R"+h,c=this.collection.map(function(e){return e.name});_.contains(c,l);)h+=1,l="R"+h
var u=this.baseModel.parameters.at(0)
i=this.collection.addMassActionReaction(l,e,u,o,s,n),this.selectView.select(i,!0),t.preventDefault()},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},update:function(e){a.prototype.update.apply(this,arguments)},initialize:function(e,t){this.collection=t.collection,this.selectView=e.selectView,this.baseModel=this.collection.parent},render:function(){a.prototype.render.apply(this,arguments),this.update({name:"type",value:"massaction"}),n(this.el).find("input").prop("autocomplete","off"),this.buttonTemplate='<div class="btn-group dropup">   <button class="btn btn-large btn-primary dropdown-toggle" data-toggle="dropdown">     Add Reaction     <span class="caret"></span>   </button>   <ul class="dropdown-menu">     <li><a data-hook="creation" tabindex="-1" href="#"></a></li>     <li><a data-hook="destruction" tabindex="-1" href="#"></a></li>     <li><a data-hook="change" tabindex="-1" href="#"></a></li>     <li><a data-hook="dimerization" tabindex="-1" href="#"></a></li>     <li><a data-hook="merge" tabindex="-1" href="#"></a></li>     <li><a data-hook="split" tabindex="-1" href="#"></a></li>     <li><a data-hook="four" tabindex="-1" href="#"></a></li>     <li><a data-hook="massaction" tabindex="-1" href="#">Custom mass action</a></li>     <li><a data-hook="custom" tabindex="-1" href="#">Custom propensity</a></li>   </ul> </div>',this.button=n(this.buttonTemplate).appendTo(n(this.el)),l.render("\\emptyset \\rightarrow A",n(this.el).find("[data-hook=creation]")[0]),l.render("A \\rightarrow \\emptyset",n(this.el).find("[data-hook=destruction]")[0]),l.render("A \\rightarrow B",n(this.el).find("[data-hook=change]")[0]),l.render("A + A \\rightarrow B",n(this.el).find("[data-hook=dimerization]")[0]),l.render("A + B \\rightarrow C",n(this.el).find("[data-hook=merge]")[0]),l.render("A \\rightarrow B + C",n(this.el).find("[data-hook=split]")[0]),l.render("A + B \\rightarrow C + D",n(this.el).find("[data-hook=four]")[0]),n(this.el).find("[data-hook=creation]").click(_.bind(_.partial(this.submitCallback,"creation"),this)),n(this.el).find("[data-hook=destruction]").click(_.bind(_.partial(this.submitCallback,"destruction"),this)),n(this.el).find("[data-hook=change]").click(_.bind(_.partial(this.submitCallback,"change"),this)),n(this.el).find("[data-hook=dimerization]").click(_.bind(_.partial(this.submitCallback,"dimerization"),this)),n(this.el).find("[data-hook=merge]").click(_.bind(_.partial(this.submitCallback,"merge"),this)),n(this.el).find("[data-hook=split]").click(_.bind(_.partial(this.submitCallback,"split"),this)),n(this.el).find("[data-hook=four]").click(_.bind(_.partial(this.submitCallback,"four"),this)),n(this.el).find("[data-hook=massaction]").click(_.bind(_.partial(this.submitCallback,"massaction"),this)),n(this.el).find("[data-hook=custom]").click(_.bind(_.partial(this.submitCallback,"custom"),this))}})),u=r.extend({props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.selectView.valid||(this.message=this.selectView.message)):(this.valid=!0,this.message="")},update:function(){this.parent.update()},initialize:function(e,t){r.prototype.initialize.call(this,e,t)},remove:function(){this.removeDetailView(),r.prototype.remove.apply(this,arguments)},handleCollectionRemove:function(e,t){e==this.selectView.value&&(this.removeDetailView(),this.selectView.select(this.collection.at(0)))},removeDetailView:function(){"undefined"!=typeof this.detailView&&(this.detailView.remove(),delete this.detailView)},select:function(){this.removeDetailView()
var e=this.selectView.value
e&&(this.detailView=new o({el:n("<div>").appendTo(this.queryByHook("reactionEditorWorkspace"))[0],model:e,parent:this}),this.detailView.render())},render:function(){var e
e=this.collection.parent.isSpatial?"Define reactions. Select from the given reaction templates, or use the custom types. Using templated reaction types will help eliminate errors. For non-linear reactions, use the custom propensity type. Reactions can be restricted to specific subdomains.":"Define reactions. Select from the given reaction templates, or use the custom types. Using templated reaction types will help eliminate errors. For non-linear reactions, use the custom propensity type.",this.template="<div>"+e+"  <div>    <div data-hook='collection'></div>    <div data-hook='reactionEditorWorkspace'></div>  </div>   <div style='clear: both;'>     <br />     <form data-hook='addReactionForm'></form>  </div> </div>",this.baseModel=this.collection.parent
var t=""
return t="<div>  <table data-hook='table'>    <thead>      <th width='25px'>Edit</th><th width='120px'>Name</th><th>Summary</th><th width='40px'>Delete</th>    </thead>    <tbody data-hook='items'>    </tbody>  </table>  <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>",r.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new h({template:t,collection:this.collection,viewModel:s,parent:this,limit:10}),this.queryByHook("collection")),this.addForm=new c({el:this.el.querySelector("[data-hook=addReactionForm]"),selectView:this.selectView},{collection:this.collection}),this.listenToAndRun(this.selectView,"change:value",_.bind(this.select,this)),this.listenTo(this.collection,"remove",_.bind(this.handleCollectionRemove,this)),this}})
t.exports=u},{"./paginated-collection-view":19,"./reaction":24,"./reaction-detail":23,"./tests":30,"ampersand-form-view":104,"ampersand-input-view":108,"ampersand-select-view":142,"ampersand-subcollection":237,"ampersand-view":451,jquery:560,katex:561}],23:[function(e,t,i){{var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("./modifying-input-view"),s=(e("./modifying-number-input-view"),e("./stoich-specie-collection")),h=e("./subdomain"),l=e("ampersand-select-view"),c=e("./reaction"),u=e("katex")
e("./tests")}t.exports=a.extend({update:function(e){if("type"==e.name){if("custom"!=e.name&&null==this.model.rate&&(this.model.rate=this.rateSelect.value),"custom"!=e.value&&"massaction"!=e.value){var t,i
for("creation"==e.value?(t=0,i=1):"destruction"==e.value&&(t=1,i=0),"merge"==e.value&&(t=2,i=1),"change"==e.value&&(t=1,i=1),"dimerization"==e.value&&(t=1,i=1),"split"==e.value&&(t=1,i=2),"four"==e.value&&(t=2,i=2);this.model.reactants.length>t;)this.model.reactants.remove(this.model.reactants.at(0))
for(;this.model.products.length>i;)this.model.products.remove(this.model.products.at(0))
for(;this.model.reactants.length<t;)this.model.reactants.addStoichSpecie(null,1)
for(;this.model.products.length<i;)this.model.products.addStoichSpecie(null,1)
"dimerization"==e.value?this.model.reactants.at(0).stoichiometry=2:this.model.reactants.each(function(e){e.stoichiometry=1}),this.model.products.each(function(e){e.stoichiometry=1})}this.model.type=e.value}else"parameter"==e.name?this.model.rate=e.value:"subdomains"==e.name&&(e.value.checked?this.model.subdomains=n.union(this.model.subdomains,[e.value.model.name]):this.model.subdomains=n.difference(this.model.subdomains,[e.value.model.name]))},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.model=e.model,this.collection=this.model.collection.parent.mesh.uniqueSubdomains},renderSubdomains:function(){this.subdomainsView&&this.subdomainsView.remove(),this.subdomainsView=this.renderCollection(this.baseModel.mesh.uniqueSubdomains,h,this.el.querySelector('[data-hook="subdomains"]')),this.updateSelected()},updateSelected:function(){var e=this.collection.map(function(e){return e.name})
this.subdomains=n.intersection(this.subdomains,e)
for(var t=r(this.queryByHook("subdomains")).find("input"),i=0;i<t.length;i++)n.contains(this.subdomains,this.baseModel.mesh.uniqueSubdomains.models[i].name)&&r(t.get(i)).prop("checked",!0)},redrawLatex:c.prototype.redrawLatex,bindings:{massAction:{type:"toggle",hook:"parameter"},showCustom:{type:"toggle",hook:"custom"},notValid:{type:"toggle",hook:"reactionMessage"},validMessage:{type:"text",hook:"reactionMessage"}},derived:{massAction:{deps:["model.type"],fn:function(){return"custom"!=this.model.type}},showCustom:{deps:["model.type"],fn:function(){return"custom"==this.model.type}},validMessage:{deps:["model.type","model.rate","model.reactants","model.products"],fn:function(){if("custom"!=this.model.type&&!this.model.rate)return"Select a valid rate parameter!"
var e,t
"creation"==this.model.type?(e=0,t=1):"destruction"==this.model.type&&(e=1,t=0),"merge"==this.model.type&&(e=2,t=1),"change"==this.model.type&&(e=1,t=1),"dimerization"==this.model.type&&(e=1,t=1),"split"==this.model.type&&(e=1,t=2),"four"==this.model.type&&(e=2,t=2),"massaction"==this.model.type&&(e=this.model.reactants.models.length,t=this.model.products.models.length)
for(var i=0;e>i;i++){if(!this.model.reactants.at(i))return"Not enough reactants!"
if(!this.model.reactants.at(i).specie)return"Select valid reactants!"}for(var i=0;t>i;i++){if(!this.model.products.at(i))return"Not enough products!"
if(!this.model.products.at(i).specie)return"Select valid products!"}return!0}},notValid:{deps:["model.valid"],fn:function(){return!this.model.valid}}},render:function(){this.baseModel=this.model.collection.parent,this.baseModel.isSpatial?this.template="<div> <div class='reactionDetail'><center><div data-hook='latex' class='largeLatex'></div></center> <div data-hook='typeSelect'></div> <div data-hook='parameter'></div> <div data-hook='custom'></div> <div>Subdomains reaction can occur in:</div> <div data-hook='subdomains'></div>   <table width='100%' data-hook='advanced'>    <tr>       <td style='vertical-align:top'><div data-hook='reactants'></div></td>      <td style='vertical-align:top'><div data-hook='products'></div></td>    </tr>  </table>  <br>  <div class='alert alert-error' data-hook='reactionMessage'></div> </div></div>":this.template="<div><div class='reactionDetail'><center><div data-hook='latex' class='largeLatex'></div></center> <div data-hook='typeSelect'></div> <div data-hook='parameter'></div> <div data-hook='custom'></div>   <table width='100%' data-hook='advanced'>    <tr>       <td style='vertical-align:top'><div data-hook='reactants'></div></td>      <td style='vertical-align:top'><div data-hook='products'></div></td>    </tr>  </table>  <br>   <div class='alert alert-error' data-hook='reactionMessage'></div> </div></div>",a.prototype.render.apply(this,arguments),this.listenTo(this.model,"change",n.bind(this.redrawLatex,this)),this.listenTo(this.baseModel.species,"change:name",n.bind(this.redrawLatex,this)),this.listenTo(this.model.reactants,"add remove change",n.bind(this.redrawLatex,this)),this.listenToAndRun(this.model.products,"add remove change",n.bind(this.redrawLatex,this))
var e=[],t=r("<div>")
u.render("\\emptyset \\rightarrow A",t[0]),e.push(["creation",t.html()]),u.render("A \\rightarrow \\emptyset",t[0]),e.push(["destruction",t.html()]),u.render("A \\rightarrow B",t[0]),e.push(["change",t.html()]),u.render("A + A \\rightarrow B",t[0]),e.push(["dimerization",t.html()]),u.render("A + B \\rightarrow C",t[0]),e.push(["merge",t.html()]),u.render("A \\rightarrow B + C",t[0]),e.push(["split",t.html()]),u.render("A + B \\rightarrow C + D",t[0]),e.push(["four",t.html()]),e.push(["massaction","Custom mass action"]),e.push(["custom","Custom propensity"]),this.renderSubview(new l({label:"Reaction Type: ",name:"type",value:this.model.type,options:e,required:!0}),this.el.querySelector("[data-hook='typeSelect']"))
var i=this.model.rate
return null==i&&(i=this.baseModel.parameters.at(0)),this.rateSelect=this.renderSubview(new l({label:"Rate parameter: ",name:"parameter",value:i,unselectedText:"Select a parameter",options:this.baseModel.parameters,required:!1,idAttribute:"cid",textAttribute:"name",yieldModel:!0}),this.el.querySelector("[data-hook='parameter']")),this.renderSubview(new o({label:"Custom rate equation: ",name:"equation",value:this.model.equation,required:!1,placeholder:"",model:this.model,tests:[]}),this.el.querySelector("[data-hook='custom']")),this.baseModel.isSpatial&&(this.renderSubdomains(),this.listenToAndRun(this.baseModel,"change:mesh",n.bind(this.renderSubdomains,this))),this.listenToAndRun(this.baseModel.mesh.uniqueSubdomains,"add remove change",this.updateSelected),this.renderSubview(new s({label:"Reactants",collection:this.model.reactants}),this.el.querySelector("[data-hook='reactants']")),this.renderSubview(new s({label:"Products",collection:this.model.products}),this.el.querySelector("[data-hook='products']")),this}})},{"./modifying-input-view":16,"./modifying-number-input-view":17,"./reaction":24,"./stoich-specie-collection":27,"./subdomain":29,"./tests":30,"ampersand-select-view":142,"ampersand-view":451,jquery:560,katex:561,underscore:578}],24:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("./modifying-input-view"),s=(e("./modifying-number-input-view"),e("./stoich-specie-collection"),e("./subdomain"),e("ampersand-select-view"),e("katex")),h=e("./tests")
t.exports=a.extend({template:"<tr data-hook='row'>    <td><center><input type='radio' name='reaction' data-hook='radio'></center></td>    <td><center><span data-hook='name'></span></center></td>     <td><center><span data-hook='latex'></span></center></td>     <td><center><button class='btn' data-hook='remove'>x</button></center></td>  </tr>",props:{valid:"boolean",message:"string"},updateValid:function(){this.valid=(!this.nameBox||this.nameBox.valid)&&!this.notValid,this.message="",this.valid||(this.message="Invalid reaction, please fix")},update:function(e){this.updateValid(),this.parent&&this.parent.update&&this.parent.update()},redrawLatex:function(e){var t="",i=this.model.reactants.models.length
if(0==i)t="\\emptyset"
else for(var n=0;i>n;n++){var r=this.model.reactants.models[n],a=r.specie?r.specie.name:"X"
t+=r.stoichiometry>1?r.stoichiometry+a:a,i-1>n&&(t+=" + ")}t+=" \\rightarrow "
var o=this.model.products.models.length
if(0==o)t+="\\emptyset"
else for(var n=0;o>n;n++){var r=this.model.products.models[n],a=r.specie?r.specie.name:"X"
t+=r.stoichiometry>1?r.stoichiometry+a:a,o-1>n&&(t+=" + ")}t=t.replace(/_/g,"\\_"),s.render(t,this.queryByHook("latex"))},removeModel:function(){confirm("Are you sure you want to delete reaction "+this.model.name+"?")&&this.model.collection.remove(this.model)},selectMe:function(){this.parent.select(this.model)},select:function(){r(this.el).find("[data-hook='radio']").prop("checked",!0)},derived:{invalid:{deps:["model.valid","valid"],fn:function(){return!(this.model.valid&&this.valid)}}},bindings:{invalid:{type:"booleanClass",hook:"row",name:"invalidRow"}},events:{"click [data-hook='remove']":"removeModel","click [data-hook='radio']":"selectMe"},remove:function(){this.stopListening(),a.prototype.remove.apply(this,arguments)},initialize:function(){a.prototype.render.apply(this,arguments),this.updateValid()},render:function(){return this.baseModel=this.model.collection.parent,a.prototype.render.apply(this,arguments),this.listenTo(this.model,"change",n.bind(this.update,this)),this.listenTo(this.model,"change",n.bind(this.redrawLatex,this)),this.listenTo(this.model.reactants,"add remove change",n.bind(this.redrawLatex,this)),this.listenToAndRun(this.model.products,"add remove change",n.bind(this.redrawLatex,this)),this.nameBox=this.renderSubview(new o({label:"",name:"name",value:this.model.name,parent:this,required:!1,placeholder:"Name",model:this.model,tests:[].concat(h.naming(this.model.collection,this.model))}),this.el.querySelector("[data-hook='name']")),this.updateValid(),this}})},{"./modifying-input-view":16,"./modifying-number-input-view":17,"./stoich-specie-collection":27,"./subdomain":29,"./tests":30,"ampersand-select-view":142,"ampersand-view":451,jquery:560,katex:561,underscore:578}],25:[function(e,t,i){var n=e("jquery"),r=e("ampersand-view"),a=e("ampersand-form-view"),o=(e("ampersand-input-view"),e("./specie")),s=e("./paginated-collection-view"),h=(e("./tests"),a.extend({submitCallback:function(e){for(var t=this.baseModel.mesh.uniqueSubdomains.map(function(e){return e.name}),i=this.collection.models.length,n="S"+i,r=this.collection.map(function(e){return e.name});_.contains(r,n);)i+=1,n="S"+i
var a=this.collection.addSpecie(n,0,0,t)
this.selectView.select(a,!0)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e,t){this.collection=t.collection,this.baseModel=this.collection.parent,this.selectView=e.selectView},render:function(){a.prototype.render.apply(this,arguments),n(this.el).find("input").prop("autocomplete","off"),this.button=n('<button class="btn btn-large btn-primary" type="submit">Add Species</button>').appendTo(n(this.el))}})),l=r.extend({template:"<div>   <div data-hook='collection'></div>   <br />   <form data-hook='addSpeciesForm'></form> </div>",props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent.update()},initialize:function(e,t){r.prototype.initialize.call(this,e,t)},render:function(){var e
e=this.collection.parent.isSpatial?"Define species and their spatial properties. Species have a single diffusion coefficient for the entire model, but can be limited to only diffuse into certain subdomains.":"Define species and their initial conditions. For concentration models this is a positive floating point value and for population models this is an integer."
var t="<div>"+e+"<table width='100%' data-hook='table'>     <thead> <th width='120px'>Name</th><th width='120px'>"+(this.collection.parent.isSpatial?"Diffusion coefficient":"Initial Condition")+"</th>"+(this.collection.parent.isSpatial?"<th width='120px'>Active in subdomains</th>":"")+"<th></th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>"
return r.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new s({template:t,collection:this.collection,viewModel:o,parent:this,limit:10}),this.queryByHook("collection")),this.addForm=new h({el:this.el.querySelector("[data-hook=addSpeciesForm]"),selectView:this.selectView},{collection:this.collection}),this}})
t.exports=l},{"./paginated-collection-view":19,"./specie":26,"./tests":30,"ampersand-form-view":104,"ampersand-input-view":108,"ampersand-view":451,jquery:560}],26:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("./modifying-input-view"),s=e("./modifying-number-input-view"),h=e("./subdomain"),l=e("./tests")
t.exports=a.extend({removeSpecies:function(){this.model.collection.remove(this.model)},props:{valid:"boolean",message:"string"},derived:{invalid:{deps:["valid"],fn:function(){return!this.valid}}},events:{'click [data-hook="delete"]':"removeSpecies"},bindings:{"model.inUse":{type:"booleanAttribute",hook:"delete",name:"disabled"},invalid:{type:"booleanClass",name:"invalidRow",hook:"row"}},initialize:function(){a.prototype.initialize.apply(this,arguments),this.baseModel=this.model.collection.parent,this.updateValid()},updateValid:function(){var e=!0,t=""
if(this._subviews)for(var i=0;i<this._subviews.length&&("undefined"!=typeof this._subviews[i].valid&&(e=e&&this._subviews[i].valid,t="Invalid species, please fix"),e);i++);this.valid=e,this.message=t},update:function(e){if("subdomains"==e.name){var t=e.value.model,i=e.value.checked
i?this.model.subdomains=n.union(this.model.subdomains,[t.name]):this.model.subdomains=n.difference(this.model.subdomains,[t.name])}this.updateValid(),this.parent&&this.parent.update&&this.parent.update()},updateSelected:function(){var e=this.baseModel.mesh.uniqueSubdomains.map(function(e){return e.name})
this.model.subdomains=n.intersection(this.model.subdomains,e)
for(var t=r(this.queryByHook("subdomains")).find("input"),i=0;i<t.length;i++)n.contains(this.model.subdomains,this.baseModel.mesh.uniqueSubdomains.models[i].name)&&r(t.get(i)).prop("checked",!0)},renderSubdomains:function(){this.subdomainsView&&this.subdomainsView.remove(),this.subdomainsView=this.renderCollection(this.baseModel.mesh.uniqueSubdomains,h,this.queryByHook("subdomains")),this.updateSelected()},render:function(){return this.baseModel.isSpatial?this.template="<tr data-hook='row'><td data-hook='name'></td><td data-hook='diffusion'></td><td><center><div data-hook='subdomains'></div></center></td><td><button class='btn' data-hook='delete'>x</button></td></tr>":this.template="<tr data-hook='row'><td data-hook='name'></td><td data-hook='initialCondition'></td><td><button class='btn' data-hook='delete'>x</button></td></tr>",a.prototype.render.apply(this,arguments),this.renderSubview(new o({label:"",name:"name",value:this.model.name,required:!1,placeholder:"Name",model:this.model,parent:this,tests:[].concat(l.naming(this.model.collection,this.model),l.naming(this.model.collection.parent.parameters,this.model,"between species and parameters"))}),this.el.querySelector("[data-hook='name']")),this.baseModel.isSpatial?(this.renderSubview(new s({label:"",name:"diffusion",value:this.model.diffusion,required:!1,placeholder:"Diffusion Constant",model:this.model,parent:this,tests:[].concat(l.isNumber(),l.positive())}),this.el.querySelector("[data-hook='diffusion']")),this.renderSubdomains(),this.listenToAndRun(this.baseModel,"change:mesh",n.bind(this.renderSubdomains,this))):this.renderSubview(new s({label:"",name:"initialCondition",value:this.model.initialCondition,required:!1,placeholder:"Initial Condition",model:this.model,parent:this,tests:[].concat(l.nonzero(),l.units(this.model.collection.parent))}),this.el.querySelector("[data-hook='initialCondition']")),this.updateValid(),this}})},{"./modifying-input-view":16,"./modifying-number-input-view":17,"./subdomain":29,"./tests":30,"ampersand-view":451,jquery:560,underscore:578}],27:[function(e,t,i){var n=e("jquery"),r=e("ampersand-view"),a=e("ampersand-form-view"),o=(e("ampersand-input-view"),e("./stoich-specie")),s=e("ampersand-select-view"),h=(e("./tests"),a.extend({submitCallback:function(e){this.collection.addStoichSpecie(e.specie,1)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e,t){this.collection=t.collection,this.baseModel=this.collection.parent.collection.parent,this.fields=[new s({template:"<span><select></select></span>",label:"",name:"specie",unselectedText:"Add species",options:this.baseModel.species,required:!0,idAttribute:"cid",textAttribute:"name",yieldModel:!0})]},render:function(){a.prototype.render.apply(this,arguments),n(this.el).find("input").prop("autocomplete","off"),this.button=n('<button type="submit">Add</button>').appendTo(n(this.el))}})),l=r.extend({template:"<div><h4><span data-hook='label'></span></h4><table height='100%'><tr><td valign='top'><table data-hook='stoichSpecieTable'></table></td><tr/><tr><td valign='bottom'><div data-hook='addStoichSpecieDiv'><form data-hook='addStoichSpecieForm'></form></div></td></tr></table></div>",initialize:function(e,t){r.prototype.initialize.call(this,e,t),this.reaction=this.collection.parent,this.listenToAndRun(this.reaction,"change:type",_.bind(this.setReactionType,this))},setReactionType:function(){this.reactionType=this.reaction.type},props:{reactionType:"string",showCustomOverride:"boolean",label:"string"},derived:{showCustom:{deps:["reactionType"],fn:function(){return this.showCustomOverride||"custom"==this.reactionType||"massaction"==this.reactionType}}},bindings:{showCustom:{type:"toggle",hook:"addStoichSpecieDiv"},label:{type:"text",hook:"label"}},render:function(){return r.prototype.render.apply(this,arguments),this.renderCollection(this.collection,o,this.el.querySelector("[data-hook=stoichSpecieTable]"),{showCustomOverride:this.showCustomOverride}),this.addForm=new h({el:this.el.querySelector("[data-hook=addStoichSpecieForm]")},{collection:this.collection}),this}})
t.exports=l},{"./stoich-specie":28,"./tests":30,"ampersand-form-view":104,"ampersand-input-view":108,"ampersand-select-view":142,"ampersand-view":451,jquery:560}],28:[function(e,t,i){{var n=e("underscore"),r=(e("jquery"),e("ampersand-view")),a=e("./modifying-select-view")
e("./modifying-number-input-view"),e("./tests")}t.exports=r.extend({template:"<tr><td><button data-hook='plus'>+</button></td><td><div data-hook='stoichiometry'></div></td><td><button data-hook='minus'>-</button></td><td data-hook='specie'></td><td><button data-hook='delete'>x</button></td></tr>",update:function(e){e.valid?this.model[e.name]=e.value:this.model[e.name]=null},initialize:function(){r.prototype.initialize.apply(this,arguments),this.showCustomOverride=this.parent.showCustomOverride,this.reaction=this.model.collection.parent,this.listenToAndRun(this.reaction,"change:type",n.bind(this.setReactionType,this))},setReactionType:function(){this.reactionType=this.reaction.type},props:{reactionType:"string",showCustomOverride:"boolean"},derived:{massAction:{deps:["reactionType"],fn:function(){return"custom"!=this.reactionType}},showCustom:{deps:["reactionType"],fn:function(){return this.showCustomOverride||"massaction"==this.reactionType||"custom"==this.reactionType}}},bindings:{"model.stoichiometry":{type:"text",hook:"stoichiometry"},showCustom:{type:"toggle",selector:"button"}},events:{"click [data-hook='delete']":"deleteModel","click [data-hook='plus']":"addOne","click [data-hook='minus']":"subtractOne"},deleteModel:function(){this.model.collection.remove(this.model)},addOne:function(){this.model.stoichiometry=this.model.stoichiometry+1},subtractOne:function(){this.model.stoichiometry>=2&&(this.model.stoichiometry=this.model.stoichiometry-1)},render:function(){return r.prototype.render.apply(this,arguments),this.baseModel=this.model.collection.parent.collection.parent,this.renderSubview(new a({template:'<span><select></select><span data-hook="message-container"></span>',label:"",name:"specie",value:this.model.specie,options:this.baseModel.species,unselectedText:"Pick species",required:!0,idAttribute:"cid",textAttribute:"name",yieldModel:!0}),this.el.querySelector("[data-hook='specie']")),this}})},{"./modifying-number-input-view":17,"./modifying-select-view":18,"./tests":30,"ampersand-view":451,jquery:560,underscore:578}],29:[function(e,t,i){{var n=e("underscore"),r=(e("jquery"),e("ampersand-view")),a=e("ampersand-checkbox-view")
e("./tests")}t.exports=r.extend({template:"<span data-hook='checkbox'></span>",update:function(e){this.parent.update({name:"subdomains",value:{model:this.model,checked:e.value}})},initialize:function(e){r.prototype.initialize.apply(this,arguments),this.specie=e.specie},render:function(){r.prototype.render.apply(this,arguments)
var e=n.contains(this.parent.model.subdomains,this.model.name)
return this.renderSubview(new a({name:"checked",template:'<span><span data-hook="label"></span><input type="checkbox"><span data-hook="message-container"><span data-hook="message-text"></span></span></span>&nbsp;',label:this.model.name,value:e,required:!1,parent:this}),this.queryByHook("checkbox")),this}})},{"./tests":30,"ampersand-checkbox-view":49,"ampersand-view":451,jquery:560,underscore:578}],30:[function(e,t,i){var n=e("underscore")
t.exports={naming:function(e,t,i){return[function(e){return""!=e&&/^[0-9][a-zA-Z0-9_]*$/.test(e)?"Cannot start with number":void 0},function(e){return""==e||/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)?void 0:"Letters, numbers, underscores only. Start with letter/underscore"},function(r){return e&&!e.every(n.bind(function(e){return e.name!=r||e==t},this))?"Name must be unique"+(i?" "+i:""):void 0}]},isNumber:function(){return function(e){return null==e||void 0==typeof e||"string"==typeof e&&0==e.length?"Entry must be non-empty":0>e||e>0||0==e?void 0:"Entry must be a number"}},positive:function(){return function(e){return 0>e?"Number must be positive":void 0}},nonzero:function(){return function(e){return 0>e?"Number must be greater than 0":void 0}},units:function(e){return function(t){return e&&"population"==e.units&&t%1!=0?"Initial condition must be an integer":void 0}},integer:function(){return function(e){return e%1!=0?"Must be integer":void 0}}}},{underscore:578}],31:[function(e,t,i){var n=e("ampersand-collection")
t.exports=n.extend({remove:function(e){e.stopListening(),n.prototype.remove.apply(this,arguments)}})},{"ampersand-collection":51}],32:[function(e,t,i){var n=e("./collection"),r=e("./initial-condition")
t.exports=n.extend({model:r,addScatterInitialCondition:function(e,t,i){return this.add({specie:e,type:"scatter",subdomain:i,count:t,X:0,Y:0,Z:0})},addPlaceInitialCondition:function(e,t,i,n,r){var a=this.parent.mesh.uniqueSubdomains.at(0)
return this.add({specie:e,type:"place",count:t,subdomain:a,X:i,Y:n,Z:r})},addDistributeUniformlyInitialCondition:function(e,t,i){return this.add({specie:e,type:"distribute",subdomain:i,count:t,X:0,Y:0,Z:0})}})},{"./collection":31,"./initial-condition":33}],33:[function(e,t,i){var n=(e("underscore"),e("ampersand-state"))
t.exports=n.extend({props:{type:"string",specie:"object",count:"number",subdomain:"number",X:{type:"number","default":function(){return 0}},Y:{type:"number","default":function(){return 0}},Z:{type:"number","default":function(){return 0}}},derived:{valid:{deps:["subdomain"],fn:function(){this.baseModel=this.collection.parent
for(var e=0;e<this.baseModel.mesh.uniqueSubdomains.models.length;e++)if(this.subdomain==this.baseModel.mesh.uniqueSubdomains.models[e].name)return!0
return!1},cache:!1}}})},{"ampersand-state":145,underscore:578}],34:[function(e,t,i){var n=e("ampersand-collection"),r=e("./mesh")
t.exports=n.extend({model:r})},{"./mesh":35,"ampersand-collection":51}],35:[function(e,t,i){var n=e("underscore"),r=e("ampersand-model"),a=e("./subdomain-collection")
t.exports=r.extend({props:{name:"string",description:"string",meshFileId:"number",threeJsMesh:"object",subdomains:"object",uniqueSubdomains:"object",undeletable:{type:"boolean","default":!1},ghost:{type:"boolean","default":!1}},derived:{deletable:{deps:["undeletable"],fn:function(){return!this.undeletable}}},parse:function(e){this.uniqueSubdomains=new a,this.id=e.id
for(var t=0;t<e.uniqueSubdomains.length;t++)this.uniqueSubdomains.add({name:e.uniqueSubdomains[t]})
return delete e.uniqueSubdomains,e},downloadMesh:function(e){$.ajax({type:"GET",url:"meshes/threeJsMesh/"+this.meshFileId,success:n.bind(n.partial(this.processMesh,e),this),dataType:"json"})},processMesh:function(e,t){if(this.threeJsMesh=t,0==this.subdomains.length)for(var i=0;i<this.threeJsMesh.vertices.length/3;i++)this.subdomains.push(1)
e(this)}})},{"./subdomain-collection":45,"ampersand-model":109,underscore:578}],36:[function(e,t,i){var n=e("underscore"),r=e("ampersand-model"),a=e("./specie-collection"),o=e("./reaction-collection"),s=e("./parameter-collection"),h=e("./initial-condition-collection"),l=r.extend({props:{name:"string",units:"string",type:"string",isSpatial:"boolean",species:"object",reactions:"object",parameters:"object",mesh:"object",initialConditions:"object",is_public:"boolean",saveState:"string",ownedByMe:"boolean"},triggerChange:function(){this.trigger("requestSave")},initialize:function(e,t){this.is_public=!1,this.parse(e),r.prototype.initialize.apply(this,arguments),this.listenTo(this.reactions,"add remove change:type",n.bind(this.computeType,this)),this.computeType(),this.listenTo(this.reactions,"add remove change",n.bind(this.triggerChange,this)),this.listenTo(this.species,"add remove change",n.bind(this.triggerChange,this)),this.listenTo(this.parameters,"add remove change",n.bind(this.triggerChange,this)),this.listenTo(this.initialConditions,"add remove change",n.bind(this.triggerChange,this)),this.on("change:name change:units change:type change:isSpatial change:mesh",n.bind(this.triggerChange,this))},setupMesh:function(e){if(this.meshId)for(var t=0;t<e.models.length;t++)this.meshId==e.models[t].id&&(this.mesh=e.models[t])
this.mesh||(this.meshId=e.models[0].id,this.mesh=e.models[0])
for(var t=0;t<this.species.models.length;t++)this.species.models[t].setUpValidation()
for(var t=0;t<this.parameters.models.length;t++)this.parameters.models[t].setUpValidation()
for(var i={},n={},t=0;t<this.species.models.length;t++)i[this.species.models[t].name]=this.species.models[t]
for(var t=0;t<this.mesh.uniqueSubdomains.models.length;t++)n[this.mesh.uniqueSubdomains.models[t].name]=this.mesh.uniqueSubdomains.models[t]
for(var t=0;t<this.unprocessedInitialConditions.length;t++){var r=this.unprocessedInitialConditions[t]
this.initialConditions.add({type:r.type,count:r.count,specie:i[r.species],X:r.x,Y:r.y,Z:r.z,subdomain:r.subdomain})}delete this.unprocessedInitialConditions},computeType:function(){var e=!0,e=this.reactions.every(function(e){return"custom"!=e.type?!0:!1})
e?this.type="massaction":this.type="custom"},saveModel:function(){return"saving"!=this.saveState&&(this.saveState="saving"),this.reactions.every(function(e){return e.valid})?void this.actuallySaveModel():void(this.saveState="Model not valid")},actuallySaveModel:n.debounce(function(){if(this.collection&&this.collection.url){if(!this.reactions.every(function(e){return e.valid})||!this.initialConditions.every(function(e){return e.valid}))return void(this.saveState="invalid")
try{this.save(void 0,{success:n.bind(this.modelSaved,this),error:n.bind(this.modelSaveFailed,this)})}catch(e){this.modelSaveFailed()}}},500),modelSaved:function(){"saved"!=this.saveState&&(this.saveState="saved")},modelSaveFailed:function(){"failed"!=this.saveState&&(this.saveState="failed")},parse:function(e){var t={}
if(e){this.id=e.id,this.is_public=e.is_public,this.ownedByMe=e.ownedByMe
var i=e.species,n=e.parameters,r=e.reactions
if(this.species&&this.species!=e.species||(this.species=new a,this.species.parent=this),this.parameters&&this.parameters!=e.parameters||(this.parameters=new s,this.parameters.parent=this),this.reactions&&this.reactions!=e.reactions||(this.reactions=new o,this.reactions.parent=this),this.initialConditions&&this.initialConditions!=e.initialConditions||(this.initialConditions=new h,this.initialConditions.parent=this),e.spatial&&(this.meshId=e.spatial.mesh_wrapper_id,this.unprocessedInitialConditions=e.spatial.initial_conditions),i&&0==this.species.length)for(var l=0;l<i.length;l++)t[i[l].name]=this.species.addSpecie(i[l].name,i[l].initialCondition,e.spatial.species_diffusion_coefficients[i[l].name],e.spatial.species_subdomain_assignments[i[l].name],!0)
var c={}
if(n&&0==this.parameters.length)for(var l=0;l<n.length;l++)c[n[l].name]=this.parameters.addParameter(n[l].name,String(n[l].value),!0)
if(r&&0==this.reactions.length)for(var l=0;l<r.length;l++){var u=r[l],d=u.reactants.map(function(e){return[t[e.specie],e.stoichiometry]}),p=u.products.map(function(e){return[t[e.specie],e.stoichiometry]})
"custom"==u.type?this.reactions.addCustomReaction(u.name,u.equation,d,p,e.spatial.reactions_subdomain_assignments[r[l].name]):this.reactions.addMassActionReaction(u.name,u.type,c[u.rate],d,p,e.spatial.reactions_subdomain_assignments[r[l].name])}else"undefined"==typeof this.reactions&&(this.reactions=new o,this.reactions.parent=this)
return n&&delete e.parameters,i&&delete e.species,r&&delete e.reactions,e}},toJSON:function(){var e={name:this.name,units:this.units,type:this.type,isSpatial:this.isSpatial,is_public:this.is_public}
this.id&&(e.id=this.id),e.species=this.species.map(function(e){return{name:e.name,initialCondition:e.initialCondition}}),e.parameters=this.parameters.map(function(e){return{name:e.name,value:e.value}}),e.reactions=[]
for(var t=0;t<this.reactions.models.length;t++){var i=this.reactions.models[t],n={}
n.name=i.name,n.reactants=i.reactants.map(function(e){return{specie:e.specie.name,stoichiometry:e.stoichiometry}}),n.products=i.products.map(function(e){return{specie:e.specie.name,stoichiometry:e.stoichiometry}}),n.type=i.type,"custom"==n.type?n.equation=i.equation:n.rate=i.rate.name,e.reactions.push(n)}e.spatial={},e.spatial.mesh_wrapper_id=this.meshId,e.spatial.species_diffusion_coefficients={},e.spatial.species_subdomain_assignments={}
for(var t=0;t<this.species.models.length;t++)e.spatial.species_diffusion_coefficients[this.species.models[t].name]=this.species.models[t].diffusion,e.spatial.species_subdomain_assignments[this.species.models[t].name]=this.species.models[t].subdomains
e.spatial.reactions_subdomain_assignments={}
for(var t=0;t<this.reactions.models.length;t++)e.spatial.reactions_subdomain_assignments[this.reactions.models[t].name]=this.reactions.models[t].subdomains
e.spatial.initial_conditions=[]
for(var t=0;t<this.initialConditions.models.length;t++){var r=this.initialConditions.models[t],a={type:r.type,count:r.count,species:r.specie.name,x:r.X,y:r.Y,z:r.Z,subdomain:r.subdomain}
e.spatial.initial_conditions.push(a)}return e}})
l.buildFromJSON=function(e,t){return t},t.exports=l},{"./initial-condition-collection":32,"./parameter-collection":37,"./reaction-collection":39,"./specie-collection":41,"ampersand-model":109,underscore:578}],37:[function(e,t,i){var n=e("./collection"),r=e("./parameter")
t.exports=n.extend({model:r,addParameter:function(e,t,i){var n=this.models.every(function(t){return t.name!=e})
if(!n)return void 0
var r=this.add({name:e,value:t})
return i||r.setUpValidation(),r}})},{"./collection":31,"./parameter":38}],38:[function(e,t,i){var n=e("underscore"),r=e("ampersand-model")
t.exports=r.extend({props:{name:["string"],value:["string"],inUse:["boolean"]},initialize:function(){r.prototype.initialize.apply(this,arguments)},setUpValidation:function(){this.listenTo(this.collection,"reaction-rate-change",n.bind(this.updateInUse,this)),this.updateInUse()},remove:function(){this.stopListening(),r.prototype.remove.apply(this,arguments)},updateInUse:function(){var e=this,t=this.collection.parent
this.inUse=!t.reactions.every(function(t){return"custom"==t.type||t.rate!=e})}})},{"ampersand-model":109,underscore:578}],39:[function(e,t,i){var n=e("underscore"),r=e("./collection"),a=e("./reaction")
t.exports=r.extend({model:a,initialize:function(){r.prototype.initialize.apply(this,arguments),this.on("add remove",n.bind(this.triggerChange,this))},triggerChange:function(){this.baseModel=this.parent,this.baseModel.parameters.trigger("reaction-rate-change"),this.baseModel.species.trigger("stoich-specie-change"),this.trigger("change")},addMassActionReaction:function(e,t,i,n,r,a){var o=this.models.every(function(t){return t.name!=e})
if(!o)return void 0
var s=this.add({name:e,equation:"",type:t,rate:i,subdomains:a},{reactants:n,products:r})
return s},addCustomReaction:function(e,t,i,n,r){var a=this.models.every(function(t){return t.name!=e})
if(!a)return void 0
var o=this.add({name:e,equation:t,type:"custom",rate:void 0,subdomains:r},{reactants:i,products:n})
return o}})},{"./collection":31,"./reaction":40,underscore:578}],40:[function(e,t,i){var n=e("underscore"),r=e("ampersand-state"),a=(e("./stoich-specie"),e("./stoich-specie-collection")),o=(e("./parameter"),r.extend({props:{name:"string",equation:{type:"string","default":function(){return""}},type:"string",rate:"object",subdomains:{type:"object","default":function(){return[]}}},derived:{valid:{deps:["type","rate","reactants","products"],fn:function(){if("custom"!=this.type&&!this.rate)return!1
var e,t
"creation"==this.type?(e=0,t=1):"destruction"==this.type&&(e=1,t=0),"change"==this.type&&(e=1,t=1),"merge"==this.type&&(e=2,t=1),"dimerization"==this.type&&(e=1,t=1),"split"==this.type&&(e=1,t=2),"four"==this.type&&(e=2,t=2),"massaction"==this.type&&(e=this.reactants.models.length,t=this.products.models.length)
for(var i=0;e>i;i++){if(!this.reactants.at(i))return!1
if(!this.reactants.at(i).specie)return!1}for(var i=0;t>i;i++){if(!this.products.at(i))return!1
if(!this.products.at(i).specie)return!1}return!0}}},collections:{reactants:a,products:a},triggerReaction:function(){this.collection.parent.parameters.trigger("reaction-rate-change")},triggerChange:function(){this.trigger("change:reactants"),this.trigger("change:products"),this.collection.parent.species.trigger("stoich-specie-change"),this.trigger("change")},initialize:function(e,t){this.reactants=new a(void 0,{parent:this}),this.products=new a(void 0,{parent:this}),r.prototype.initialize.apply(this,arguments),this.on("change:rate",n.bind(this.triggerReaction,this))
for(var i=0;i<t.reactants.length;i++)this.reactants.addStoichSpecie(t.reactants[i][0],t.reactants[i][1])
for(var i=0;i<t.products.length;i++)this.products.addStoichSpecie(t.products[i][0],t.products[i][1])
this.listenTo(this.reactants,"add remove change",this.triggerChange),this.listenTo(this.products,"add remove change",this.triggerChange)}}))
t.exports=o},{"./parameter":38,"./stoich-specie":44,"./stoich-specie-collection":43,"ampersand-state":145,underscore:578}],41:[function(e,t,i){var n=e("./collection"),r=e("./specie")
t.exports=n.extend({model:r,addSpecie:function(e,t,i,n,r){var a=this.models.every(function(t){return t.name!=e})
if(!a)return void 0
var o=this.add({name:e,initialCondition:t,diffusion:i,subdomains:n})
return r||o.setUpValidation(),o}})},{"./collection":31,"./specie":42}],42:[function(e,t,i){var n=e("underscore"),r=e("ampersand-model")
t.exports=r.extend({props:{name:["string"],initialCondition:["number"],diffusion:{type:"number","default":0},subdomains:{type:"object","default":function(){return[]}},inUse:["boolean"]},initialize:function(){r.prototype.initialize.apply(this,arguments)},setUpValidation:function(){this.listenTo(this.collection,"stoich-specie-change",n.bind(this.updateInUse,this)),this.updateInUse()},updateInUse:function(){var e=this,t=this.collection.parent,i=function(t){return t.specie!=e}
this.inUse=!t.reactions.every(function(e){return e.reactants.every(i)&&e.products.every(i)})}})},{"ampersand-model":109,underscore:578}],43:[function(e,t,i){var n=e("underscore"),r=e("ampersand-collection"),a=e("./stoich-specie")
t.exports=r.extend({model:a,initialize:function(){r.prototype.initialize.apply(this,arguments),this.on("add remove",n.bind(this.triggerChange,this))},triggerChange:function(){this.baseModel=this.parent.collection.parent,this.baseModel.species.trigger("stoich-specie-change")},addStoichSpecie:function(e,t){var i=new a({specie:e,stoichiometry:t})
i=this.add(i)}})},{"./stoich-specie":44,"ampersand-collection":51,underscore:578}],44:[function(e,t,i){var n=e("underscore"),r=e("ampersand-state"),a=(e("./specie"),r.extend({props:{stoichiometry:"number",specie:"object"},initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.on("change:specie",n.bind(function(e){e.specie&&e.specie.collection.trigger("stoich-specie-change")},this))}}))
t.exports=a},{"./specie":42,"ampersand-state":145,underscore:578}],45:[function(e,t,i){var n=e("ampersand-collection"),r=e("./subdomain")
t.exports=n.extend({model:r})},{"./subdomain":46,"ampersand-collection":51}],46:[function(e,t,i){var n=(e("underscore"),e("ampersand-state"))
t.exports=n.extend({props:{name:"number"}})},{"ampersand-state":145,underscore:578}],47:[function(e,t,i){var n=e("amp-is-object")
t.exports=function(e){if(!n(e))return e
for(var t,i,r=1,a=arguments.length;a>r;r++){t=arguments[r]
for(i in t)e[i]=t[i]}return e}},{"amp-is-object":48}],48:[function(e,t,i){t.exports=function(e){var t=typeof e
return!!e&&("function"===t||"object"===t)}},{}],49:[function(e,t,i){function n(e){if(!e||!e.name)throw new Error("must pass in a name")
this.name=e.name,this.value=e.value===!0||!1,this.el=e.el,this.template=e.template||o,this.label=e.label||e.name,this.required="boolean"==typeof e.required?e.required:!1,this.validClass=e.validClass||"input-valid",this.invalidClass=e.invalidClass||"input-invalid",this.requiredMessage=e.requiredMessage||"This box must be checked.",this.parent=e.parent,this.render(),this.handleInputEvent=this.handleInputEvent.bind(this),this.input.addEventListener("change",this.handleInputEvent,!1),e.value&&this.setValue(!0),this.test()}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-checkbox-view"]=window.ampersand["ampersand-checkbox-view"]||[],window.ampersand["ampersand-checkbox-view"].push("2.0.2"))
var r=e("domify"),a=e("ampersand-dom"),o=['<label class="checkbox">','<input type="checkbox"><span data-hook="label"></span>','<div data-hook="message-container" class="message message-below message-error">','<p data-hook="message-text"></p>',"</div>","</label>"].join("")
n.prototype.remove=function(){this.input.removeEventListener("change",this.handleInputEvent,!1)
var e=this.el.parentNode
e&&e.removeChild(this.el)},n.prototype.render=function(){if(!this.rendered){var e=r(this.template),t=this.el&&this.el.parentNode
t&&t.replaceChild(e,this.el),this.el=e,this.input=this.el.querySelector("input"),this.labelEl=this.el.querySelector("[data-hook~=label]"),this.messageContainer=this.el.querySelector("[data-hook~=message-container]"),this.messageEl=this.el.querySelector("[data-hook~=message-text]"),this.setMessage(this.message),this.input.checked=!!this.value,this.input.name=this.name,this.labelEl.textContent=this.label,this.rendered=!0}},n.prototype.handleInputEvent=function(){document.activeElement===this.input&&(this.directlyEdited=!0),this.value=this.input.checked,this.test(),this.parent&&this.parent.update(this)},n.prototype.setMessage=function(e){var t=this.input
this.message=e,e&&this.shouldValidate?(this.messageContainer.style.display="block",this.messageEl.textContent=e,a.addClass(t,this.invalidClass),a.removeClass(t,this.validClass)):(this.messageContainer.style.display="none",this.shouldValidate&&this.editedDirectly&&(a.addClass(t,this.validClass),a.removeClass(t,this.invalidClass)))},n.prototype.setValue=function(e){this.input.checked=!!e,this.handleInputEvent()},n.prototype.beforeSubmit=function(){this.shouldValidate=!0,this.handleInputEvent()},n.prototype.test=function(){var e=!this.required||this.value
return e&&(this.shouldValidate=!0),this.valid=e,this.setMessage(this.shouldValidate&&!e?this.requiredMessage:""),e},t.exports=n},{"ampersand-dom":70,domify:50}],50:[function(e,t,i){function n(e){if("string"!=typeof e)throw new TypeError("String expected")
var t=/<([\w:]+)/.exec(e)
if(!t)return document.createTextNode(e)
e=e.replace(/^\s+|\s+$/g,"")
var i=t[1]
if("body"==i){var n=document.createElement("html")
return n.innerHTML=e,n.removeChild(n.lastChild)}var a=r[i]||r._default,o=a[0],s=a[1],h=a[2],n=document.createElement("div")
for(n.innerHTML=s+e+h;o--;)n=n.lastChild
if(n.firstChild==n.lastChild)return n.removeChild(n.firstChild)
for(var l=document.createDocumentFragment();n.firstChild;)l.appendChild(n.removeChild(n.firstChild))
return l}t.exports=n
var r={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]}
r.td=r.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],r.option=r.optgroup=[1,'<select multiple="multiple">',"</select>"],r.thead=r.tbody=r.colgroup=r.caption=r.tfoot=[1,"<table>","</table>"],r.text=r.circle=r.ellipse=r.line=r.path=r.polygon=r.polyline=r.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],51:[function(e,t,i){function n(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var i=this.model&&this.model.prototype&&this.model.prototype.idAttribute
this.mainIndex=i||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,h({silent:!0},t))}var r=e("ampersand-events"),a=e("ampersand-class-extend"),o=e("lodash.isarray"),s=e("lodash.bind"),h=e("lodash.assign"),l=[].slice
h(n.prototype,r,{initialize:function(){},isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,h({merge:!1,add:!0,remove:!1},t))},parse:function(e,t){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize()
var t={}
return h(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){t=h({add:!0,remove:!0,merge:!0},t),t.parse&&(e=this.parse(e,t))
var i=!o(e)
e=i?e?[e]:[]:e.slice()
var n,r,a,s,l,c,u,d=t.at,p=this.comparator&&null==d&&t.sort!==!1,f="string"==typeof this.comparator?this.comparator:null,m=[],g=[],v={},y=t.add,w=t.merge,b=t.remove,x=!p&&y&&b?[]:!1,_=this.model&&this.model.prototype||Object.prototype
for(c=0,u=e.length;u>c;c++){if(a=e[c]||{},n=this.isModel(a)?r=a:_.generateId?_.generateId(a):a[this.mainIndex],s=this.get(n))b&&(v[s.cid||s[this.mainIndex]]=!0),w&&(a=a===r?r.attributes:a,t.parse&&(a=s.parse(a,t)),s.set?(s.set(a,t),p&&!l&&s.hasChanged(f)&&(l=!0)):h(s,a)),e[c]=s
else if(y){if(r=e[c]=this._prepareModel(a,t),!r)continue
m.push(r),this._addReference(r,t)}r=s||r,r&&(x&&(r.isNew&&r.isNew()||!r[this.mainIndex]||!v[r.cid||r[this.mainIndex]])&&x.push(r),v[r[this.mainIndex]]=!0)}if(b){for(c=0,u=this.length;u>c;c++)r=this.models[c],v[r.cid||r[this.mainIndex]]||g.push(r)
g.length&&this.remove(g,t)}if(m.length||x&&x.length)if(p&&(l=!0),null!=d)for(c=0,u=m.length;u>c;c++)this.models.splice(d+c,0,m[c])
else{var k=x||m
for(c=0,u=k.length;u>c;c++)this.models.push(k[c])}if(l&&this.sort({silent:!0}),!t.silent){for(c=0,u=m.length;u>c;c++)r=m[c],r.trigger?r.trigger("add",r,this,t):this.trigger("add",r,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return i?e[0]:e},get:function(e,t){if(null!=e){var i=this._indexes[t||this.mainIndex]
return i&&(i[e]||i[e[this.mainIndex]])||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var i,n,r,a,s=!o(e)
for(e=s?[e]:l.call(e),t||(t={}),i=0,n=e.length;n>i;i++)r=e[i]=this.get(e[i]),r&&(this._deIndex(r),a=this.models.indexOf(r),this.models.splice(a,1),t.silent||(t.index=a,r.trigger?r.trigger("remove",r,this,t):this.trigger("remove",r,this,t)),this._removeReference(r,t))
return s?e[0]:e},reset:function(e,t){t||(t={})
for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i],t)
return t.previousModels=this.models,this._reset(),e=this.add(e,h({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this
if(!this.comparator)throw new Error("Cannot sort a set without a comparator")
return e||(e={}),this.models.sort("string"==typeof this.comparator?function(e,i){return e.get?(e=e.get(t.comparator),i=i.get(t.comparator)):(e=e[t.comparator],i=i[t.comparator]),e>i||void 0===e?1:i>e||void 0===i?-1:0}:1===this.comparator.length?function(e,i){return e=t.comparator(e),i=t.comparator(i),e>i||void 0===e?1:i>e||void 0===i?-1:0}:s(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=l.call(this.indexes||[]),t=0
e.push(this.mainIndex),e.push("cid")
var i=e.length
for(this.models=[],this._indexes={};i>t;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e
if(this.isModel(e))return e.collection||(e.collection=this),e
t=t?h({},t):{},t.collection=this
var i=new this.model(e,t)
return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_deIndex:function(e,t,i){var n
if(void 0!==t){if(void 0===this._indexes[t])throw new Error("Given attribute is not an index")
return void delete this._indexes[t][i]}for(t in this._indexes)n=e.hasOwnProperty(t)?e[t]:e.get&&e.get(t),delete this._indexes[t][n]},_index:function(e,t){var i
if(void 0!==t){if(void 0===this._indexes[t])throw new Error("Given attribute is not an index")
return i=e[t]||e.get&&e.get(t),void(i&&(this._indexes[t][i]=e))}for(t in this._indexes)i=e.hasOwnProperty(t)?e[t]:e.get&&e.get(t),null!=i&&(this._indexes[t][i]=e)},_addReference:function(e,t){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){var r=e.split(":")[0],a=e.split(":")[1];("add"!==r&&"remove"!==r||i===this)&&("destroy"===r&&this.remove(t,n),t&&"change"===r&&a&&this._indexes[a]&&(this._deIndex(t,a,t.previousAttributes()[a]),this._index(t,a)),this.trigger.apply(this,arguments))}}),Object.defineProperties(n.prototype,{length:{get:function(){return this.models.length}},isCollection:{value:!0}})
var c=["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"]
c.forEach(function(e){n.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),n.prototype.each=n.prototype.forEach,n.extend=a,t.exports=n},{"ampersand-class-extend":52,"ampersand-events":71,"lodash.assign":53,"lodash.bind":63,"lodash.isarray":69}],52:[function(e,t,i){var n=e("lodash.assign"),r=function(e){var t,i=this,r=[].slice.call(arguments)
t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},n(t,i)
var a=function(){this.constructor=t}
return a.prototype=i.prototype,t.prototype=new a,e&&(r.unshift(t.prototype),n.apply(null,r)),t.__super__=i.prototype,t}
t.exports=r},{"lodash.assign":53}],53:[function(e,t,i){function n(e,t,i){var n=c(t)
p.apply(n,f(t))
for(var r=-1,a=n.length;++r<a;){var o=n[r],s=e[o],h=i(s,t[o],o,e,t);(h===h?h===s:s!==s)&&(void 0!==s||o in e)||(e[o]=h)}return e}function r(e){return a(e)?e:Object(e)}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function o(e){return function(){return e}}var s=e("lodash._baseassign"),h=e("lodash._createassigner"),l=e("lodash.isnative"),c=e("lodash.keys"),u=Array.prototype,d=l(d=Object.getOwnPropertySymbols)&&d,p=u.push,f=d?function(e){return d(r(e))}:o([]),m=h(function(e,t,i){return i?n(e,t,i):s(e,t)})
t.exports=m},{"lodash._baseassign":54,"lodash._createassigner":56,"lodash.isnative":60,"lodash.keys":61}],54:[function(e,t,i){function n(e){return r(e)?e:Object(e)}function r(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function a(e){return function(){return e}}var o=e("lodash._basecopy"),s=e("lodash.isnative"),h=e("lodash.keys"),l=s(l=Object.getOwnPropertySymbols)&&l,c=s(Object.preventExtensions=Object.preventExtensions)&&c,u=function(){var e={1:0},t=c&&s(t=Object.assign)&&t
try{t(c(e),"xo")}catch(i){}return!e[1]&&t}(),d=u||function(e,t){return null==t?e:o(t,p(t),o(t,h(t),e))},p=l?function(e){return l(n(e))}:a([])
t.exports=d},{"lodash._basecopy":55,"lodash.isnative":60,"lodash.keys":61}],55:[function(e,t,i){function n(e,t,i){i||(i={})
for(var n=-1,r=t.length;++n<r;){var a=t[n]
i[a]=e[a]}return i}t.exports=n},{}],56:[function(e,t,i){function n(e){return o(function(t,i){var n=-1,o=null==t?0:i.length,s=o>2&&i[o-2],h=o>2&&i[2],l=o>1&&i[o-1]
for("function"==typeof s?(s=r(s,l,5),o-=2):(s="function"==typeof l?l:null,o-=s?1:0),h&&a(i[0],i[1],h)&&(s=3>o?null:s,o=1);++n<o;){var c=i[n]
c&&e(t,c,s)}return t})}var r=e("lodash._bindcallback"),a=e("lodash._isiterateecall"),o=e("lodash.restparam")
t.exports=n},{"lodash._bindcallback":57,"lodash._isiterateecall":58,"lodash.restparam":59}],57:[function(e,t,i){function n(e,t,i){if("function"!=typeof e)return r
if(void 0===t)return e
switch(i){case 1:return function(i){return e.call(t,i)}
case 3:return function(i,n,r){return e.call(t,i,n,r)}
case 4:return function(i,n,r,a){return e.call(t,i,n,r,a)}
case 5:return function(i,n,r,a,o){return e.call(t,i,n,r,a,o)}}return function(){return e.apply(t,arguments)}}function r(e){return e}t.exports=n},{}],58:[function(e,t,i){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e,t){return e=+e,t=null==t?h:t,e>-1&&e%1==0&&t>e}function a(e,t,i){if(!s(i))return!1
var n=typeof t
if("number"==n)var a=l(i),h=o(a)&&r(t,a)
else h="string"==n&&t in i
if(h){var c=i[t]
return e===e?e===c:c!==c}return!1}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function s(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var h=Math.pow(2,53)-1,l=n("length")
t.exports=a},{}],59:[function(e,t,i){function n(e,t){if("function"!=typeof e)throw new TypeError(r)
return t=a(void 0===t?e.length-1:+t||0,0),function(){for(var i=arguments,n=-1,r=a(i.length-t,0),o=Array(r);++n<r;)o[n]=i[t+n]
switch(t){case 0:return e.call(this,o)
case 1:return e.call(this,i[0],o)
case 2:return e.call(this,i[0],i[1],o)}var s=Array(t+1)
for(n=-1;++n<t;)s[n]=i[n]
return s[t]=o,e.apply(this,s)}}var r="Expected a function",a=Math.max
t.exports=n},{}],60:[function(e,t,i){function n(e){return"string"==typeof e?e:null==e?"":e+""}function r(e){return!!e&&"object"==typeof e}function a(e){return null==e?!1:p.call(e)==s?f.test(d.call(e)):r(e)&&c.test(e)}function o(e){return e=n(e),e&&l.test(e)?e.replace(h,"\\$&"):e}var s="[object Function]",h=/[.*+?^${}()|[\]\/\\]/g,l=RegExp(h.source),c=/^\[object .+?Constructor\]$/,u=Object.prototype,d=Function.prototype.toString,p=u.toString,f=RegExp("^"+o(p).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$")
t.exports=a},{}],61:[function(e,t,i){function n(e,t){return e=+e,t=null==t?m:t,e>-1&&e%1==0&&t>e}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&m>=e}function a(e){for(var t=s(e),i=t.length,a=i&&e.length,o=a&&r(a)&&(l(e)||g.nonEnumArgs&&h(e)),c=-1,u=[];++c<i;){var p=t[c];(o&&n(p,a)||d.call(e,p))&&u.push(p)}return u}function o(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function s(e){if(null==e)return[]
o(e)||(e=Object(e))
var t=e.length
t=t&&r(t)&&(l(e)||g.nonEnumArgs&&h(e))&&t||0
for(var i=e.constructor,a=-1,s="function"==typeof i&&i.prototype===e,c=Array(t),u=t>0;++a<t;)c[a]=a+""
for(var p in e)u&&n(p,t)||"constructor"==p&&(s||!d.call(e,p))||c.push(p)
return c}var h=e("lodash.isarguments"),l=e("lodash.isarray"),c=e("lodash.isnative"),u=Object.prototype,d=u.hasOwnProperty,p=u.propertyIsEnumerable,f=c(f=Object.keys)&&f,m=Math.pow(2,53)-1,g={}
!function(e){var t=function(){this.x=e},i=[]
t.prototype={valueOf:e,y:e}
for(var n in new t)i.push(n)
try{g.nonEnumArgs=!p.call(arguments,1)}catch(r){g.nonEnumArgs=!0}}(1,0)
var v=f?function(e){if(e)var t=e.constructor,i=e.length
return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(i)?a(e):o(e)?f(e):[]}:a
t.exports=v},{"lodash.isarguments":62,"lodash.isarray":69,"lodash.isnative":60}],62:[function(e,t,i){function n(e){return!!e&&"object"==typeof e}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function a(e){var t=n(e)?e.length:void 0
return r(t)&&h.call(e)==o}var o="[object Arguments]",s=Object.prototype,h=s.toString,l=Math.pow(2,53)-1
t.exports=a},{}],63:[function(e,t,i){var n=e("lodash._createwrapper"),r=e("lodash._replaceholders"),a=e("lodash.restparam"),o=1,s=32,h=a(function(e,t,i){var a=o
if(i.length){var l=r(i,h.placeholder)
a|=s}return n(e,a,t,i,l)})
h.placeholder={},t.exports=h},{"lodash._createwrapper":64,"lodash._replaceholders":67,"lodash.restparam":68}],64:[function(e,t,i){(function(i){function n(e,t,i){for(var n=i.length,r=-1,a=S(e.length-n,0),o=-1,s=t.length,h=Array(a+s);++o<s;)h[o]=t[o]
for(;++r<n;)h[i[r]]=e[r]
for(;a--;)h[o++]=e[r++]
return h}function r(e,t,i){for(var n=-1,r=i.length,a=-1,o=S(e.length-r,0),s=-1,h=t.length,l=Array(o+h);++a<o;)l[a]=e[a]
for(var c=a;++s<h;)l[c+s]=t[s]
for(;++n<r;)l[c+i[n]]=e[a++]
return l}function a(e,t){function n(){var a=this&&this!==i&&this instanceof n?r:e
return a.apply(t,arguments)}var r=o(e)
return n}function o(e){return function(){var t=f(e.prototype),i=e.apply(t,arguments)
return d(i)?i:t}}function s(e,t,a,h,l,c,d,f,M,T){function C(){for(var y=arguments.length,w=y,b=Array(y);w--;)b[w]=arguments[w]
if(h&&(b=n(b,h,l)),c&&(b=r(b,c,d)),P||F){var k=C.placeholder,O=m(b,k)
if(y-=O.length,T>y){var V=f?p(f):null,z=S(T-y,0),U=P?O:null,N=P?null:O,I=P?b:null,j=P?null:b
t|=P?x:_,t&=~(P?_:x),R||(t&=~(g|v))
var H=s(e,t,a,I,U,j,N,V,M,z)
return H.placeholder=k,H}}var G=A?a:this
L&&(e=G[B]),f&&(b=u(b,f)),E&&M<b.length&&(b.length=M)
var q=this&&this!==i&&this instanceof C?D||o(e):e
return q.apply(G,b)}var E=t&k,A=t&g,L=t&v,P=t&w,R=t&y,F=t&b,D=!L&&o(e),B=e
return C}function h(e,t,n,r){function a(){for(var t=-1,o=arguments.length,l=-1,c=r.length,u=Array(o+c);++l<c;)u[l]=r[l]
for(;o--;)u[l++]=arguments[++t]
var d=this&&this!==i&&this instanceof a?h:e
return d.apply(s?n:this,u)}var s=t&g,h=o(e)
return a}function l(e,t,i,n,r,o,l,c){var u=t&v
if(!u&&"function"!=typeof e)throw new TypeError(M)
var d=n?n.length:0
if(d||(t&=~(x|_),n=r=null),d-=r?r.length:0,t&_){var p=n,f=r
n=r=null}var m=[e,t,i,n,r,p,f,o,l,c]
if(m[9]=null==c?u?0:e.length:S(c-d,0)||0,t==g)var y=a(m[0],m[2])
else y=t!=x&&t!=(g|x)||m[4].length?s.apply(void 0,m):h.apply(void 0,m)
return y}function c(e,t){return e=+e,t=null==t?C:t,e>-1&&e%1==0&&t>e}function u(e,t){for(var i=e.length,n=T(t.length,i),r=p(e);n--;){var a=t[n]
e[n]=c(a,i)?r[a]:void 0}return e}function d(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var p=e("lodash._arraycopy"),f=e("lodash._basecreate"),m=e("lodash._replaceholders"),g=1,v=2,y=4,w=8,b=16,x=32,_=64,k=128,M="Expected a function",S=Math.max,T=Math.min,C=Math.pow(2,53)-1
t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":65,"lodash._basecreate":66,"lodash._replaceholders":67}],65:[function(e,t,i){function n(e,t){var i=-1,n=e.length
for(t||(t=Array(n));++i<n;)t[i]=e[i]
return t}t.exports=n},{}],66:[function(e,t,i){(function(e){function i(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var n=function(){function t(){}return function(n){if(i(n)){t.prototype=n
var r=new t
t.prototype=null}return r||e.Object()}}()
t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],67:[function(e,t,i){function n(e,t){for(var i=-1,n=e.length,a=-1,o=[];++i<n;)e[i]===t&&(e[i]=r,o[++a]=i)
return o}var r="__lodash_placeholder__"
t.exports=n},{}],68:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],69:[function(e,t,i){function n(e){return"string"==typeof e?e:null==e?"":e+""}function r(e){return!!e&&"object"==typeof e}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&y>=e}function o(e){return null==e?!1:m.call(e)==l?g.test(f.call(e)):r(e)&&d.test(e)}function s(e){return e=n(e),e&&u.test(e)?e.replace(c,"\\$&"):e}var h="[object Array]",l="[object Function]",c=/[.*+?^${}()|[\]\/\\]/g,u=RegExp(c.source),d=/^\[object .+?Constructor\]$/,p=Object.prototype,f=Function.prototype.toString,m=p.toString,g=RegExp("^"+s(m).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=o(v=Array.isArray)&&v,y=Math.pow(2,53)-1,w=v||function(e){return r(e)&&a(e.length)&&m.call(e)==h}
t.exports=w},{}],70:[function(e,t,i){function n(e){return e||0===e?e:""}function r(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function a(e,t){var i=e[t]
return t in e&&(i===!0||i===!1)}function o(e){return"true"===c.getAttribute(e,"data-anddom-hidden")}function s(e,t){c.setAttribute(e,"data-anddom-"+t,e.style[t])}function h(e,t){e.style[t]=c.getAttribute(e,"data-anddom-"+t)||"",c.removeAttribute(e,"data-anddom-hidden")}function l(e,t){c.setAttribute(e,"data-anddom-hidden","true"),e.style[t]="visibility"===t?"hidden":"none"}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-dom"]=window.ampersand["ampersand-dom"]||[],window.ampersand["ampersand-dom"].push("1.4.0"))
var c=t.exports={text:function(e,t){e.textContent=n(t)},addClass:function(e,t){t=n(t),t&&(Array.isArray(t)?t.forEach(function(t){c.addClass(e,t)}):e.classList?e.classList.add(t):r(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t))},removeClass:function(e,t){Array.isArray(t)?t.forEach(function(t){c.removeClass(e,t)}):e.classList?(t=n(t),t&&e.classList.remove(t)):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:r,switchClass:function(e,t,i){t&&this.removeClass(e,t),this.addClass(e,i)},addAttribute:function(e,t){e.setAttribute(t,""),a(e,t)&&(e[t]=!0)},removeAttribute:function(e,t){e.removeAttribute(t),a(e,t)&&(e[t]=!1)},setAttribute:function(e,t,i){e.setAttribute(t,n(i))},getAttribute:function(e,t){return e.getAttribute(t)},hasAttribute:function(e,t){return e.hasAttribute(t)},hide:function(e,t){t||(t="display"),o(e)||(s(e,t),l(e,t))},show:function(e,t){t||(t="display"),h(e,t)},html:function(e,t){e.innerHTML=t}}},{}],71:[function(e,t,i){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-events"]=window.ampersand["ampersand-events"]||[],window.ampersand["ampersand-events"].push("1.1.1"))
var n=e("lodash.once"),r=e("lodash.uniqueid"),a=e("lodash.keys"),o=e("lodash.isempty"),s=e("lodash.foreach"),h=(e("lodash.bind"),e("lodash.assign")),l=Array.prototype.slice,c=/\s+/,u={on:function(e,t,i){if(!d(this,"on",e,[t,i])||!t)return this
this._events||(this._events={})
var n=this._events[e]||(this._events[e]=[])
return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!d(this,"once",e,[t,i])||!t)return this
var r=this,a=n(function(){r.off(e,a),t.apply(this,arguments)})
return a._callback=t,this.on(e,a,i)},off:function(e,t,i){var n,r,o,s,h,l,c,u
if(!this._events||!d(this,"off",e,[t,i]))return this
if(!e&&!t&&!i)return this._events=void 0,this
for(s=e?[e]:a(this._events),h=0,l=s.length;l>h;h++)if(e=s[h],o=this._events[e]){if(this._events[e]=n=[],t||i)for(c=0,u=o.length;u>c;c++)r=o[c],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&n.push(r)
n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this
var t=l.call(arguments,1)
if(!d(this,"trigger",e,t))return this
var i=this._events[e],n=this._events.all
return i&&p(i,t),n&&p(n,arguments),this},stopListening:function(e,t,i){var n=this._listeningTo
if(!n)return this
var r=!t&&!i
i||"object"!=typeof t||(i=this),e&&((n={})[e._listenId]=e)
for(var a in n)e=n[a],e.off(t,i,this),(r||o(e._events))&&delete this._listeningTo[a]
return this},createEmitter:function(e){return h(e||{},u)}}
u.bind=u.on,u.unbind=u.off
var d=function(e,t,i,n){if(!i)return!0
if("object"==typeof i){for(var r in i)e[t].apply(e,[r,i[r]].concat(n))
return!1}if(c.test(i)){for(var a=i.split(c),o=0,s=a.length;s>o;o++)e[t].apply(e,[a[o]].concat(n))
return!1}return!0},p=function(e,t){var i,n=-1,r=e.length,a=t[0],o=t[1],s=t[2]
switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx)
return
case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a)
return
case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,o)
return
case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,o,s)
return
default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t)
return}},f={listenTo:"on",listenToOnce:"once"}
s(f,function(e,t){u[t]=function(t,i,n,a){var o=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=r("l"))
return o[s]=t,n||"object"!=typeof i||(n=this),t[e](i,n,this),this}}),u.listenToAndRun=function(e,t,i){return u.listenTo.apply(this,arguments),i||"object"!=typeof t||(i=this),i.apply(this),this},t.exports=u},{"lodash.assign":72,"lodash.bind":80,"lodash.foreach":86,"lodash.isempty":91,"lodash.keys":96,"lodash.once":100,"lodash.uniqueid":102}],72:[function(e,t,i){arguments[4][53][0].apply(i,arguments)},{dup:53,"lodash._baseassign":73,"lodash._createassigner":75,"lodash.isnative":79,"lodash.keys":96}],73:[function(e,t,i){arguments[4][54][0].apply(i,arguments)},{dup:54,"lodash._basecopy":74,"lodash.isnative":79,"lodash.keys":96}],74:[function(e,t,i){arguments[4][55][0].apply(i,arguments)},{dup:55}],75:[function(e,t,i){arguments[4][56][0].apply(i,arguments)},{dup:56,"lodash._bindcallback":76,"lodash._isiterateecall":77,"lodash.restparam":78}],76:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],77:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],78:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],79:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],80:[function(e,t,i){arguments[4][63][0].apply(i,arguments)},{dup:63,"lodash._createwrapper":81,"lodash._replaceholders":84,"lodash.restparam":85}],81:[function(e,t,i){arguments[4][64][0].apply(i,arguments)},{dup:64,"lodash._arraycopy":82,"lodash._basecreate":83,"lodash._replaceholders":84}],82:[function(e,t,i){arguments[4][65][0].apply(i,arguments)},{dup:65}],83:[function(e,t,i){arguments[4][66][0].apply(i,arguments)},{dup:66}],84:[function(e,t,i){arguments[4][67][0].apply(i,arguments)},{dup:67}],85:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],86:[function(e,t,i){function n(e,t){return function(i,n,r){return"function"==typeof n&&void 0===r&&s(i)?e(i,n):t(i,o(n,r,3))}}var r=e("lodash._arrayeach"),a=e("lodash._baseeach"),o=e("lodash._bindcallback"),s=e("lodash.isarray"),h=n(r,a)
t.exports=h},{"lodash._arrayeach":87,"lodash._baseeach":88,"lodash._bindcallback":89,"lodash.isarray":90}],87:[function(e,t,i){function n(e,t){for(var i=-1,n=e.length;++i<n&&t(e[i],i,e)!==!1;);return e}t.exports=n},{}],88:[function(e,t,i){function n(e,t){return p(e,t,c)}function r(e){return function(t){return null==t?void 0:t[e]}}function a(e,t){return function(i,n){var r=i?f(i):0
if(!s(r))return e(i,n)
for(var a=t?r:-1,o=h(i);(t?a--:++a<r)&&n(o[a],a,o)!==!1;);return i}}function o(e){return function(t,i,n){for(var r=h(t),a=n(t),o=a.length,s=e?o:-1;e?s--:++s<o;){var l=a[s]
if(i(r[l],l,r)===!1)break}return t}}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function h(e){return l(e)?e:Object(e)}function l(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var c=e("lodash.keys"),u=Math.pow(2,53)-1,d=a(n),p=o(),f=r("length")
t.exports=d},{"lodash.keys":96}],89:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],90:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],91:[function(e,t,i){function n(e){return!!e&&"object"==typeof e}function r(e){return function(t){return null==t?void 0:t[e]}}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function o(e){if(null==e)return!0
var t=p(e)
return a(t)&&(h(e)||c(e)||s(e)||n(e)&&l(e.splice))?!t:!u(e).length}var s=e("lodash.isarguments"),h=e("lodash.isarray"),l=e("lodash.isfunction"),c=e("lodash.isstring"),u=e("lodash.keys"),d=Math.pow(2,53)-1,p=r("length")
t.exports=o},{"lodash.isarguments":92,"lodash.isarray":93,"lodash.isfunction":94,"lodash.isstring":95,"lodash.keys":96}],92:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],93:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],94:[function(e,t,i){(function(e){function i(e){return"function"==typeof e||!1}function n(e){return"string"==typeof e?e:null==e?"":e+""}function r(e){return!!e&&"object"==typeof e}function a(e){return null==e?!1:p.call(e)==s?f.test(d.call(e)):r(e)&&c.test(e)}function o(e){return e=n(e),e&&l.test(e)?e.replace(h,"\\$&"):e}var s="[object Function]",h=/[.*+?^${}()|[\]\/\\]/g,l=RegExp(h.source),c=/^\[object .+?Constructor\]$/,u=Object.prototype,d=Function.prototype.toString,p=u.toString,f=RegExp("^"+o(p).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=a(m=e.Uint8Array)&&m,g=i(/x/)||m&&!i(m)?function(e){return p.call(e)==s}:i
t.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],95:[function(e,t,i){function n(e){return!!e&&"object"==typeof e}function r(e){return"string"==typeof e||n(e)&&s.call(e)==a}var a="[object String]",o=Object.prototype,s=o.toString
t.exports=r},{}],96:[function(e,t,i){arguments[4][61][0].apply(i,arguments)},{dup:61,"lodash.isarguments":97,"lodash.isarray":98,"lodash.isnative":99}],97:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],98:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],99:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],100:[function(e,t,i){function n(e){return r(2,e)}var r=e("lodash.before")
t.exports=n},{"lodash.before":101}],101:[function(e,t,i){function n(e,t){var i
if("function"!=typeof t){if("function"!=typeof e)throw new TypeError(r)
var n=e
e=t,t=n}return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}}var r="Expected a function"
t.exports=n},{}],102:[function(e,t,i){function n(e){var t=++a
return r(e)+t}var r=e("lodash._basetostring"),a=0
t.exports=n},{"lodash._basetostring":103}],103:[function(e,t,i){function n(e){return"string"==typeof e?e:null==e?"":e+""}t.exports=n},{}],104:[function(e,t,i){function n(e){e=e||{},this.el=e.el,this.validCallback=e.validCallback||this.validCallback||function(){},this.submitCallback=e.submitCallback||this.submitCallback||function(){},e.data&&(this.data=e.data),e.model&&(this.model=e.model),e.fields&&(this.fields=e.model),this.clean=e.clean||function(e){return e},this.valid=!1,this.preventDefault=e.preventDefault===!1?!1:!0,this.autoAppend=e.autoAppend===!1?!1:!0,this._fieldViews={},this._fieldViewsArray=[],this.initialize&&this.initialize.apply(this,arguments),this.render(),setTimeout(function(){this.checkValid(!0)}.bind(this),0)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-form-view"]=window.ampersand["ampersand-form-view"]||[],window.ampersand["ampersand-form-view"].push("2.2.0"))
var r=e("backbone-events-standalone"),a=e("extend-object"),o=function(e,t){return"function"==typeof e[t]?e[t]():e[t]}
a(n.prototype,r,{data:null,model:null,fields:null,addField:function(e){this._fieldViews[e.name]=e,this._fieldViewsArray.push(e),this.fieldContainerEl&&(e.parent=this,e.render(),this.fieldContainerEl.appendChild(e.el))},removeField:function(e){var t=this.getField(e)
t&&(t.remove(),delete this._fieldViews[e],this._fieldViewsArray.splice(this._fieldViewsArray.indexOf(t),1))},getField:function(e){return this._fieldViews[e]},setValid:function(e,t){var i=this.valid
this.valid=e,(i!==e||t)&&this.validCallback(e)},checkValid:function(e){var t=this._fieldViewsArray.every(function(e){return e.valid})
return this.setValid(t,e),t},beforeSubmit:function(){this._fieldViewsArray.forEach(function(e){e.beforeSubmit&&e.beforeSubmit()})},update:function(e){this.trigger("change:"+e.name,e),e.valid?this.checkValid():this.setValid(!1)},remove:function(){this.el.removeEventListener("submit",this.handleSubmit,!1)
var e=this.el.parentNode
e&&e.removeChild(this.el),this._fieldViewsArray.forEach(function(e){e.remove()})},handleSubmit:function(e){return this.beforeSubmit(),this.checkValid(),this.valid?this.preventDefault?(e.preventDefault(),this.submitCallback(this.getData()),!1):void 0:(e.preventDefault(),!1)},getData:function(){var e={}
for(var t in this._fieldViews)e[t]=this._fieldViews[t].value
return this.clean(e)},render:function(){this.rendered||(this.el||(this.el=document.createElement("form")),this.autoAppend&&(this.fieldContainerEl=this.el.querySelector("[data-hook~=field-container]")||this.el),this.handleSubmit=this.handleSubmit.bind(this),this.el.addEventListener("submit",this.handleSubmit,!1),this.rendered=!0,(o(this,"fields")||[]).forEach(this.addField.bind(this)))}}),n.extend=function(e){var t=function(){n.apply(this,arguments)}
return a(t.prototype,n.prototype),a(t.prototype,e),t},t.exports=n},{"backbone-events-standalone":106,"extend-object":107}],105:[function(e,t,i){!function(){function e(){return{keys:Object.keys,uniqueId:function(e){var t=++l+""
return e?e+t:t},has:function(e,t){return s.call(e,t)},each:function(e,t,i){if(null!=e)if(o&&e.forEach===o)e.forEach(t,i)
else if(e.length===+e.length){for(var n=0,r=e.length;r>n;n++)if(t.call(i,e[n],n,e)===a)return}else for(var s in e)if(this.has(e,s)&&t.call(i,e[s],s,e)===a)return},once:function(e){var t,i=!1
return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}}}}var n,r=this,a={},o=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,h=Array.prototype.slice,l=0,c=e()
n={on:function(e,t,i){if(!d(this,"on",e,[t,i])||!t)return this
this._events||(this._events={})
var n=this._events[e]||(this._events[e]=[])
return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!d(this,"once",e,[t,i])||!t)return this
var n=this,r=c.once(function(){n.off(e,r),t.apply(this,arguments)})
return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var n,r,a,o,s,h,l,u
if(!this._events||!d(this,"off",e,[t,i]))return this
if(!e&&!t&&!i)return this._events={},this
for(o=e?[e]:c.keys(this._events),s=0,h=o.length;h>s;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=n=[],t||i)for(l=0,u=a.length;u>l;l++)r=a[l],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&n.push(r)
n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this
var t=h.call(arguments,1)
if(!d(this,"trigger",e,t))return this
var i=this._events[e],n=this._events.all
return i&&p(i,t),n&&p(n,arguments),this},stopListening:function(e,t,i){var n=this._listeners
if(!n)return this
var r=!t&&!i
"object"==typeof t&&(i=this),e&&((n={})[e._listenerId]=e)
for(var a in n)n[a].off(t,i,this),r&&delete this._listeners[a]
return this}}
var u=/\s+/,d=function(e,t,i,n){if(!i)return!0
if("object"==typeof i){for(var r in i)e[t].apply(e,[r,i[r]].concat(n))
return!1}if(u.test(i)){for(var a=i.split(u),o=0,s=a.length;s>o;o++)e[t].apply(e,[a[o]].concat(n))
return!1}return!0},p=function(e,t){var i,n=-1,r=e.length,a=t[0],o=t[1],s=t[2]
switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx)
return
case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a)
return
case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,o)
return
case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,o,s)
return
default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t)}},f={listenTo:"on",listenToOnce:"once"}
c.each(f,function(e,t){n[t]=function(t,i,n){var r=this._listeners||(this._listeners={}),a=t._listenerId||(t._listenerId=c.uniqueId("l"))
return r[a]=t,"object"==typeof i&&(n=this),t[e](i,n,this),this}}),n.bind=n.on,n.unbind=n.off,n.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"]
return c.each(t,function(t){e[t]=this[t]},this),e},"function"==typeof define?define(function(){return n}):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=n),i.BackboneEvents=n):r.BackboneEvents=n}(this)},{}],106:[function(e,t,i){t.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":105}],107:[function(e,t,i){var n=[],r=n.forEach,a=n.slice
t.exports=function(e){return r.call(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e}},{}],108:[function(e,t,i){var n=e("ampersand-view")
t.exports=n.extend({template:["<label>",'<span data-hook="label"></span>','<input class="form-input">','<div data-hook="message-container" class="message message-below message-error">','<p data-hook="message-text"></p>',"</div>","</label>"].join(""),bindings:{name:{type:"attribute",selector:"input, textarea",name:"name"},label:[{hook:"label"},{type:"toggle",hook:"label"}],message:{type:"text",hook:"message-text"},showMessage:{type:"toggle",hook:"message-container"},placeholder:{type:"attribute",selector:"input, textarea",name:"placeholder"},validityClass:{type:"class",selector:"input, textarea"},rootElementClass:{type:"class",selector:""}},initialize:function(e){e||(e={}),this.tests=this.tests||e.tests||[],this.on("change:type",this.handleTypeChange,this),this.handleBlur=this.handleBlur.bind(this),this.handleInputChanged=this.handleInputChanged.bind(this),this.startingValue=this.value,this.on("change:valid change:value",this.reportToParent,this),e.template&&(this.template=e.template)},render:function(){this.renderWithTemplate(),this.input=this.query("input")||this.query("textarea"),this.handleTypeChange(),this.initInputBindings(),this.setValue(this.value)},props:{value:"any",startingValue:"any",name:"string",type:["string",!0,"text"],placeholder:["string",!0,""],label:["string",!0,""],required:["boolean",!0,!0],directlyEdited:["boolean",!0,!1],shouldValidate:["boolean",!0,!1],message:["string",!0,""],requiredMessage:["string",!0,"This field is required."],validClass:["string",!0,"input-valid"],invalidClass:["string",!0,"input-invalid"],rootElementClass:["string",!0,""]},derived:{valid:{deps:["value"],fn:function(){return!this.runTests()}},showMessage:{deps:["message","shouldValidate"],fn:function(){return this.shouldValidate&&this.message}},changed:{deps:["value","startingValue"],fn:function(){return this.value!==this.startingValue}},validityClass:{deps:["valid","validClass","invalidClass","shouldValidate","changed"],fn:function(){return this.shouldValidate&&this.changed?this.valid?this.validClass:this.invalidClass:""}}},setValue:function(e){this.value=e,e||0===e?this.input.value=this.value.toString():this.input.value="",this.getErrorMessage(this.value)||(this.shouldValidate=!0)},getErrorMessage:function(){var e=""
return this.required&&!this.value?this.requiredMessage:((this.tests||[]).some(function(t){return e=t.call(this,this.value)||""},this),e)},handleTypeChange:function(){if("textarea"===this.type&&"textarea"!==this.input.tagName.toLowerCase()){var e=this.input.parentNode,t=document.createElement("textarea")
e.replaceChild(t,this.input),this.input=t,this._applyBindingsForKey("")}else this.input.type=this.type},handleInputChanged:function(){document.activeElement===this.input&&(this.directlyEdited=!0),this.value=this.clean(this.input.value)},clean:function(e){return"number"===this.type?Number(e):e.trim()},handleBlur:function(){this.value&&this.changed&&(this.shouldValidate=!0),this.runTests()},beforeSubmit:function(){this.shouldValidate=!0,this.runTests()},runTests:function(){var e=this.getErrorMessage()
return!e&&this.value&&this.changed&&(this.shouldValidate=!0),this.message=e,e},initInputBindings:function(){this.input.addEventListener("blur",this.handleBlur,!1),this.input.addEventListener("input",this.handleInputChanged,!1)},remove:function(){this.input.removeEventListener("input",this.handleInputChanged,!1),this.input.removeEventListener("blur",this.handleBlur,!1),n.prototype.remove.apply(this,arguments)},reset:function(){this.setValue("")},reportToParent:function(){this.parent&&this.parent.update(this)}})},{"ampersand-view":451}],109:[function(e,t,i){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-model"]=window.ampersand["ampersand-model"]||[],window.ampersand["ampersand-model"].push("4.1.0"))
var n=e("ampersand-state"),r=e("underscore"),a=e("ampersand-sync"),o=n.extend({save:function(e,t,i){{var n,a,o
this.attributes}if(null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,i=r.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1
void 0===i.parse&&(i.parse=!0)
var s=this,l=i.success
return i.success=function(e){var t=s.parse(e,i)
return i.wait&&(t=r.extend(n||{},t)),r.isObject(t)&&!s.set(t,i)?!1:(l&&l(s,e,i),void s.trigger("sync",s,e,i))},h(this,i),a=this.isNew()?"create":i.patch?"patch":"update","patch"===a&&(i.attrs=n),i.wait&&(i.attrs=r.extend(s.serialize(),n)),o=this.sync(a,this,i)},fetch:function(e){e=e?r.clone(e):{},void 0===e.parse&&(e.parse=!0)
var t=this,i=e.success
return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},h(this,e),this.sync("read",this,e)},destroy:function(e){e=e?r.clone(e):{}
var t=this,i=e.success,n=function(){t.trigger("destroy",t,t.collection,e)}
if(e.success=function(r){(e.wait||t.isNew())&&n(),i&&i(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1
h(this,e)
var a=this.sync("delete",this,e)
return e.wait||n(),a},sync:function(){return a.apply(this,arguments)},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||s()
return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.getId())}}),s=function(){throw new Error('A "url" property or function must be specified')},h=function(e,t){var i=t.error
t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}}
t.exports=o},{"ampersand-state":145,"ampersand-sync":110,underscore:578}],110:[function(e,t,i){var n=e("underscore"),r=e("xhr"),a=e("qs"),o=function(){throw new Error('A "url" property or function must be specified')}
t.exports=function(e,t,i){var h=s[e],l={}
n.defaults(i||(i={}),{emulateHTTP:!1,emulateJSON:!1})
var c={type:h}
i.url||(c.url=n.result(t,"url")||o()),null!=i.data||!t||"create"!==e&&"update"!==e&&"patch"!==e||(c.json=i.attrs||t.toJSON(i)),i.data&&"GET"===h&&(c.url+=n.contains(c.url,"?")?"&":"?",c.url+=a.stringify(i.data)),i.emulateJSON&&(l["Content-Type"]="application/x-www-form-urlencoded",c.body=c.json?{model:c.json}:{},delete c.json),!i.emulateHTTP||"PUT"!==h&&"DELETE"!==h&&"PATCH"!==h||(c.type="POST",i.emulateJSON&&(c.body._method=h),l["X-HTTP-Method-Override"]=h),i.emulateJSON&&(c.body=a.stringify(c.body))
var u=n.result(t,"ajaxConfig")||{}
if(u.headers&&n.extend(l,u.headers),c.headers=l,u.useXDR&&(c.useXDR=!0),u.xhrFields){var d=u.beforeSend
c.beforeSend=function(e){for(var t in u.xhrFields)e[t]=u.xhrFields[t]
return d?d.apply(this,arguments):void 0},c.xhrFields=u.xhrFields}c.method=c.type
var p=n.extend(c,i),f=i.xhr=r(p,function(e,t,n){if(e&&i.error)return i.error(t,"error",e.message)
if(n&&"string"==typeof n)try{n=JSON.parse(n)}catch(r){}return i.success?i.success(n,"success",t):void 0})
return t.trigger("request",t,f,i,p),f.ajaxSettings=p,f}
var s={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"}},{qs:111,underscore:116,xhr:117}],111:[function(e,t,i){t.exports=e("./lib")},{"./lib":112}],112:[function(e,t,i){var n=e("./stringify"),r=e("./parse")
t.exports={stringify:n,parse:r}},{"./parse":113,"./stringify":114}],113:[function(e,t,i){var n=e("./utils"),r={delimiter:"&",depth:5,arrayLimit:20,parametersLimit:1e3}
r.parseValues=function(e,t){t="string"==typeof t?t:r.delimiter
for(var i={},a=e.split(t,r.parametersLimit),o=0,s=a.length;s>o;++o){var h=a[o],l=-1===h.indexOf("]=")?h.indexOf("="):h.indexOf("]=")+1
if(-1===l)i[n.decode(h)]=""
else{var c=n.decode(h.slice(0,l)),u=n.decode(h.slice(l+1))
i[c]?i[c]=[].concat(i[c]).concat(u):i[c]=u}}return i},r.parseObject=function(e,t){if(!e.length)return t
var i=e.shift(),n={}
if("[]"===i)n=[],n=n.concat(r.parseObject(e,t))
else{var a="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,o=parseInt(a,10)
!isNaN(o)&&i!==a&&o<=r.arrayLimit?(n=[],n[o]=r.parseObject(e,t)):n[a]=r.parseObject(e,t)}return n},r.parseKeys=function(e,t,i){if(e){var n=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,o=n.exec(e)
if(!Object.prototype.hasOwnProperty(o[1])){var s=[]
o[1]&&s.push(o[1])
for(var h=0;null!==(o=a.exec(e))&&i>h;)++h,Object.prototype.hasOwnProperty(o[1].replace(/\[|\]/g,""))||s.push(o[1])
return o&&s.push("["+e.slice(o.index)+"]"),r.parseObject(s,t)}}},t.exports=function(e,t,i){if(""===e||null===e||"undefined"==typeof e)return{}
"number"!=typeof t&&(i=t,t=r.depth)
var a="string"==typeof e?r.parseValues(e,i):n.clone(e),o={}
for(var s in a)if(a.hasOwnProperty(s)){var h=r.parseKeys(s,a[s],t)
o=n.merge(o,h)}return n.compact(o)}},{"./utils":115}],114:[function(e,t,i){(function(e){var i={delimiter:"&"}
i.stringify=function(t,n){if(e.isBuffer(t)?t=t.toString():t instanceof Date?t=t.toISOString():null===t&&(t=""),"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return[encodeURIComponent(n)+"="+encodeURIComponent(t)]
var r=[]
for(var a in t)t.hasOwnProperty(a)&&(r=r.concat(i.stringify(t[a],n+"["+a+"]")))
return r},t.exports=function(e,t){t="undefined"==typeof t?i.delimiter:t
var n=[]
for(var r in e)e.hasOwnProperty(r)&&(n=n.concat(i.stringify(e[r],r)))
return n.join(t)}}).call(this,e("buffer").Buffer)},{buffer:553}],115:[function(e,t,i){(function(e){i.arrayToObject=function(e){for(var t={},i=0,n=e.length;n>i;++i)"undefined"!=typeof e[i]&&(t[i]=e[i])
return t},i.clone=function(t){if("object"!=typeof t||null===t)return t
if(e.isBuffer(t))return t.toString()
var n=Array.isArray(t)?[]:{}
for(var r in t)t.hasOwnProperty(r)&&(n[r]=i.clone(t[r]))
return n},i.merge=function(e,t){if(!t)return e
var n=i.clone(e)
if(Array.isArray(t)){for(var r=0,a=t.length;a>r;++r)"undefined"!=typeof t[r]&&("object"==typeof n[r]?n[r]=i.merge(n[r],t[r]):n[r]=t[r])
return n}Array.isArray(n)&&(n=i.arrayToObject(n))
for(var o=Object.keys(t),s=0,h=o.length;h>s;++s){var l=o[s],c=t[l]
c&&"object"==typeof c?n[l]?n[l]=i.merge(n[l],c):n[l]=i.clone(c):n[l]=c}return n},i.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},i.compact=function(e){if("object"!=typeof e||null===e)return e
var t={}
for(var n in e)if(e.hasOwnProperty(n))if(Array.isArray(e[n])){t[n]=[]
for(var r=0,a=e[n].length;a>r;r++)"undefined"!=typeof e[n][r]&&t[n].push(e[n][r])}else t[n]=i.compact(e[n])
return t}}).call(this,e("buffer").Buffer)},{buffer:553}],116:[function(e,t,i){(function(){var e=this,n=e._,r={},a=Array.prototype,o=Object.prototype,s=Function.prototype,h=a.push,l=a.slice,c=a.concat,u=o.toString,d=o.hasOwnProperty,p=a.forEach,f=a.map,m=a.reduce,g=a.reduceRight,v=a.filter,y=a.every,w=a.some,b=a.indexOf,x=a.lastIndexOf,_=Array.isArray,k=Object.keys,M=s.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)}
"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=S),i._=S):e._=S,S.VERSION="1.6.0"
var T=S.each=S.forEach=function(e,t,i){if(null==e)return e
if(p&&e.forEach===p)e.forEach(t,i)
else if(e.length===+e.length){for(var n=0,a=e.length;a>n;n++)if(t.call(i,e[n],n,e)===r)return}else for(var o=S.keys(e),n=0,a=o.length;a>n;n++)if(t.call(i,e[o[n]],o[n],e)===r)return
return e}
S.map=S.collect=function(e,t,i){var n=[]
return null==e?n:f&&e.map===f?e.map(t,i):(T(e,function(e,r,a){n.push(t.call(i,e,r,a))}),n)}
var C="Reduce of empty array with no initial value"
S.reduce=S.foldl=S.inject=function(e,t,i,n){var r=arguments.length>2
if(null==e&&(e=[]),m&&e.reduce===m)return n&&(t=S.bind(t,n)),r?e.reduce(t,i):e.reduce(t)
if(T(e,function(e,a,o){r?i=t.call(n,i,e,a,o):(i=e,r=!0)}),!r)throw new TypeError(C)
return i},S.reduceRight=S.foldr=function(e,t,i,n){var r=arguments.length>2
if(null==e&&(e=[]),g&&e.reduceRight===g)return n&&(t=S.bind(t,n)),r?e.reduceRight(t,i):e.reduceRight(t)
var a=e.length
if(a!==+a){var o=S.keys(e)
a=o.length}if(T(e,function(s,h,l){h=o?o[--a]:--a,r?i=t.call(n,i,e[h],h,l):(i=e[h],r=!0)}),!r)throw new TypeError(C)
return i},S.find=S.detect=function(e,t,i){var n
return E(e,function(e,r,a){return t.call(i,e,r,a)?(n=e,!0):void 0}),n},S.filter=S.select=function(e,t,i){var n=[]
return null==e?n:v&&e.filter===v?e.filter(t,i):(T(e,function(e,r,a){t.call(i,e,r,a)&&n.push(e)}),n)},S.reject=function(e,t,i){return S.filter(e,function(e,n,r){return!t.call(i,e,n,r)},i)},S.every=S.all=function(e,t,i){t||(t=S.identity)
var n=!0
return null==e?n:y&&e.every===y?e.every(t,i):(T(e,function(e,a,o){return(n=n&&t.call(i,e,a,o))?void 0:r}),!!n)}
var E=S.some=S.any=function(e,t,i){t||(t=S.identity)
var n=!1
return null==e?n:w&&e.some===w?e.some(t,i):(T(e,function(e,a,o){return n||(n=t.call(i,e,a,o))?r:void 0}),!!n)}
S.contains=S.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):E(e,function(e){return e===t})},S.invoke=function(e,t){var i=l.call(arguments,2),n=S.isFunction(t)
return S.map(e,function(e){return(n?t:e[t]).apply(e,i)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matches(t))},S.findWhere=function(e,t){return S.find(e,S.matches(t))},S.max=function(e,t,i){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e)
var n=-(1/0),r=-(1/0)
return T(e,function(e,a,o){var s=t?t.call(i,e,a,o):e
s>r&&(n=e,r=s)}),n},S.min=function(e,t,i){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e)
var n=1/0,r=1/0
return T(e,function(e,a,o){var s=t?t.call(i,e,a,o):e
r>s&&(n=e,r=s)}),n},S.shuffle=function(e){var t,i=0,n=[]
return T(e,function(e){t=S.random(i++),n[i-1]=n[t],n[t]=e}),n},S.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))}
var A=function(e){return null==e?S.identity:S.isFunction(e)?e:S.property(e)}
S.sortBy=function(e,t,i){return t=A(t),S.pluck(S.map(e,function(e,n,r){return{value:e,index:n,criteria:t.call(i,e,n,r)}}).sort(function(e,t){var i=e.criteria,n=t.criteria
if(i!==n){if(i>n||void 0===i)return 1
if(n>i||void 0===n)return-1}return e.index-t.index}),"value")}
var L=function(e){return function(t,i,n){var r={}
return i=A(i),T(t,function(a,o){var s=i.call(n,a,o,t)
e(r,s,a)}),r}}
S.groupBy=L(function(e,t,i){S.has(e,t)?e[t].push(i):e[t]=[i]}),S.indexBy=L(function(e,t,i){e[t]=i}),S.countBy=L(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,i,n){i=A(i)
for(var r=i.call(n,t),a=0,o=e.length;o>a;){var s=a+o>>>1
i.call(n,e[s])<r?a=s+1:o=s}return a},S.toArray=function(e){return e?S.isArray(e)?l.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:l.call(e,0,t)},S.initial=function(e,t,i){return l.call(e,0,e.length-(null==t||i?1:t))},S.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,i){return l.call(e,null==t||i?1:t)},S.compact=function(e){return S.filter(e,S.identity)}
var P=function(e,t,i){return t&&S.every(e,S.isArray)?c.apply(i,e):(T(e,function(e){S.isArray(e)||S.isArguments(e)?t?h.apply(i,e):P(e,t,i):i.push(e)}),i)}
S.flatten=function(e,t){return P(e,t,[])},S.without=function(e){return S.difference(e,l.call(arguments,1))},S.partition=function(e,t){var i=[],n=[]
return T(e,function(e){(t(e)?i:n).push(e)}),[i,n]},S.uniq=S.unique=function(e,t,i,n){S.isFunction(t)&&(n=i,i=t,t=!1)
var r=i?S.map(e,i,n):e,a=[],o=[]
return T(r,function(i,n){(t?n&&o[o.length-1]===i:S.contains(o,i))||(o.push(i),a.push(e[n]))}),a},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=l.call(arguments,1)
return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.contains(t,e)})})},S.difference=function(e){var t=c.apply(a,l.call(arguments,1))
return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=S.pluck(arguments,""+i)
return t},S.object=function(e,t){if(null==e)return{}
for(var i={},n=0,r=e.length;r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1]
return i},S.indexOf=function(e,t,i){if(null==e)return-1
var n=0,r=e.length
if(i){if("number"!=typeof i)return n=S.sortedIndex(e,t),e[n]===t?n:-1
n=0>i?Math.max(0,r+i):i}if(b&&e.indexOf===b)return e.indexOf(t,i)
for(;r>n;n++)if(e[n]===t)return n
return-1},S.lastIndexOf=function(e,t,i){if(null==e)return-1
var n=null!=i
if(x&&e.lastIndexOf===x)return n?e.lastIndexOf(t,i):e.lastIndexOf(t)
for(var r=n?i:e.length;r--;)if(e[r]===t)return r
return-1},S.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1
for(var n=Math.max(Math.ceil((t-e)/i),0),r=0,a=new Array(n);n>r;)a[r++]=e,e+=i
return a}
var R=function(){}
S.bind=function(e,t){var i,n
if(M&&e.bind===M)return M.apply(e,l.call(arguments,1))
if(!S.isFunction(e))throw new TypeError
return i=l.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(l.call(arguments)))
R.prototype=e.prototype
var r=new R
R.prototype=null
var a=e.apply(r,i.concat(l.call(arguments)))
return Object(a)===a?a:r}},S.partial=function(e){var t=l.call(arguments,1)
return function(){for(var i=0,n=t.slice(),r=0,a=n.length;a>r;r++)n[r]===S&&(n[r]=arguments[i++])
for(;i<arguments.length;)n.push(arguments[i++])
return e.apply(this,n)}},S.bindAll=function(e){var t=l.call(arguments,1)
if(0===t.length)throw new Error("bindAll must be passed function names")
return T(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var i={}
return t||(t=S.identity),function(){var n=t.apply(this,arguments)
return S.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},S.delay=function(e,t){var i=l.call(arguments,2)
return setTimeout(function(){return e.apply(null,i)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(l.call(arguments,1)))},S.throttle=function(e,t,i){var n,r,a,o=null,s=0
i||(i={})
var h=function(){s=i.leading===!1?0:S.now(),o=null,a=e.apply(n,r),n=r=null}
return function(){var l=S.now()
s||i.leading!==!1||(s=l)
var c=t-(l-s)
return n=this,r=arguments,0>=c?(clearTimeout(o),o=null,s=l,a=e.apply(n,r),n=r=null):o||i.trailing===!1||(o=setTimeout(h,c)),a}},S.debounce=function(e,t,i){var n,r,a,o,s,h=function(){var l=S.now()-o
t>l?n=setTimeout(h,t-l):(n=null,i||(s=e.apply(a,r),a=r=null))}
return function(){a=this,r=arguments,o=S.now()
var l=i&&!n
return n||(n=setTimeout(h,t)),l&&(s=e.apply(a,r),a=r=null),s}},S.once=function(e){var t,i=!1
return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return S.partial(t,e)},S.compose=function(){var e=arguments
return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)]
return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=function(e){if(!S.isObject(e))return[]
if(k)return k(e)
var t=[]
for(var i in e)S.has(e,i)&&t.push(i)
return t},S.values=function(e){for(var t=S.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=e[t[r]]
return n},S.pairs=function(e){for(var t=S.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]]
return n},S.invert=function(e){for(var t={},i=S.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n]
return t},S.functions=S.methods=function(e){var t=[]
for(var i in e)S.isFunction(e[i])&&t.push(i)
return t.sort()},S.extend=function(e){return T(l.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},S.pick=function(e){var t={},i=c.apply(a,l.call(arguments,1))
return T(i,function(i){i in e&&(t[i]=e[i])}),t},S.omit=function(e){var t={},i=c.apply(a,l.call(arguments,1))
for(var n in e)S.contains(i,n)||(t[n]=e[n])
return t},S.defaults=function(e){return T(l.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e}
var F=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t
if(null==e||null==t)return e===t
e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped)
var r=u.call(e)
if(r!=u.call(t))return!1
switch(r){case"[object String]":return e==String(t)
case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t
case"[object Date]":case"[object Boolean]":return+e==+t
case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1
for(var a=i.length;a--;)if(i[a]==e)return n[a]==t
var o=e.constructor,s=t.constructor
if(o!==s&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1
i.push(e),n.push(t)
var h=0,l=!0
if("[object Array]"==r){if(h=e.length,l=h==t.length)for(;h--&&(l=F(e[h],t[h],i,n)););}else{for(var c in e)if(S.has(e,c)&&(h++,!(l=S.has(t,c)&&F(e[c],t[c],i,n))))break
if(l){for(c in t)if(S.has(t,c)&&!h--)break
l=!h}}return i.pop(),n.pop(),l}
S.isEqual=function(e,t){return F(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0
if(S.isArray(e)||S.isString(e))return 0===e.length
for(var t in e)if(S.has(e,t))return!1
return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=_||function(e){return"[object Array]"==u.call(e)},S.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return d.call(e,t)},S.noConflict=function(){return e._=n,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.property=function(e){return function(t){return t[e]}},S.matches=function(e){return function(t){if(t===e)return!0
for(var i in e)if(e[i]!==t[i])return!1
return!0}},S.times=function(e,t,i){for(var n=Array(Math.max(0,e)),r=0;e>r;r++)n[r]=t.call(i,r)
return n},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()}
var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}}
D.unescape=S.invert(D.escape)
var B={escape:new RegExp("["+S.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(D.unescape).join("|")+")","g")}
S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(B[e],function(t){return D[e][t]})}}),S.result=function(e,t){if(null==e)return void 0
var i=e[t]
return S.isFunction(i)?i.call(e):i},S.mixin=function(e){T(S.functions(e),function(t){var i=S[t]=e[t]
S.prototype[t]=function(){var e=[this._wrapped]
return h.apply(e,arguments),N.call(this,i.apply(S,e))}})}
var O=0
S.uniqueId=function(e){var t=++O+""
return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}
var V=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g
S.template=function(e,t,i){var n
i=S.defaults({},i,S.templateSettings)
var r=new RegExp([(i.escape||V).source,(i.interpolate||V).source,(i.evaluate||V).source].join("|")+"|$","g"),a=0,o="__p+='"
e.replace(r,function(t,i,n,r,s){return o+=e.slice(a,s).replace(U,function(e){return"\\"+z[e]}),i&&(o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),a=s+t.length,t}),o+="';\n",i.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n"
try{n=new Function(i.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(t)return n(t,S)
var h=function(e){return n.call(this,e,S)}
return h.source="function("+(i.variable||"obj")+"){\n"+o+"}",h},S.chain=function(e){return S(e).chain()}
var N=function(e){return this._chain?S(e).chain():e}
S.mixin(S),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e]
S.prototype[e]=function(){var i=this._wrapped
return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],N.call(this,i)}}),T(["concat","join","slice"],function(e){var t=a[e]
S.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}).call(this)},{}],117:[function(e,t,i){function n(e,t){function i(){4===m.readyState&&k()}function n(){var e=null
if(m.response?e=m.response:"text"!==m.responseType&&m.responseType||(e=m.responseText||m.responseXML),_)try{e=JSON.parse(e)}catch(t){}return e}function a(){return 1223===m.status?204:m.status}function u(e,t){var i=null
if(0===e||e>=400&&600>e){var n=("string"==typeof t?t:!1)||h[String(e).charAt(0)]
i=new Error(n),i.statusCode=e}return i}function d(){var e=a(),i=n(),r=u(e,i),o={body:i,statusCode:e,statusText:m.statusText,raw:m}
m.getAllResponseHeaders?o.headers=s(m.getAllResponseHeaders()):o.headers={},t(r,o,o.body)}function p(){var e=a(),i=u(e)
m.status=m.statusCode=e,m.body=n(),m.headers=s(m.getAllResponseHeaders()),t(i,m,m.body)}function f(e){t(e,m)}"string"==typeof e&&(e={uri:e}),e=e||{},t=o(t)
var m=e.xhr||null
m||(m=e.cors||e.useXDR?new c:new l)
var g,v=m.url=e.uri||e.url,y=m.method=e.method||"GET",w=e.body||e.data,b=m.headers=e.headers||{},x=!!e.sync,_=!1,k=e.response?d:p
if("json"in e&&(_=!0,b.Accept="application/json","GET"!==y&&"HEAD"!==y&&(b["Content-Type"]="application/json",w=JSON.stringify(e.json))),m.onreadystatechange=i,m.onload=k,m.onerror=f,m.onprogress=function(){},m.ontimeout=r,m.open(y,v,!x),(e.withCredentials||e.cors&&e.withCredentials!==!1)&&(m.withCredentials=!0),x||(m.timeout="timeout"in e?e.timeout:5e3),m.setRequestHeader)for(g in b)b.hasOwnProperty(g)&&m.setRequestHeader(g,b[g])
else if(e.headers)throw new Error("Headers cannot be set on an XDomainRequest object")
return"responseType"in e&&(m.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(m),m.send(w),m}function r(){}var a=e("global/window"),o=e("once"),s=e("parse-headers"),h={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=a.XMLHttpRequest||r,c="withCredentials"in new l?l:a.XDomainRequest
t.exports=n},{"global/window":118,once:119,"parse-headers":123}],118:[function(e,t,i){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],119:[function(e,t,i){function n(e){var t=!1
return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],120:[function(e,t,i){function n(e,t,i){if(!s(t))throw new TypeError("iterator must be a function")
arguments.length<3&&(i=this),"[object Array]"===h.call(e)?r(e,t,i):"string"==typeof e?a(e,t,i):o(e,t,i)}function r(e,t,i){for(var n=0,r=e.length;r>n;n++)l.call(e,n)&&t.call(i,e[n],n,e)}function a(e,t,i){for(var n=0,r=e.length;r>n;n++)t.call(i,e.charAt(n),n,e)}function o(e,t,i){for(var n in e)l.call(e,n)&&t.call(i,e[n],n,e)}var s=e("is-function")
t.exports=n
var h=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":121}],121:[function(e,t,i){function n(e){var t=r.call(e)
return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n
var r=Object.prototype.toString},{}],122:[function(e,t,i){function n(e){return e.replace(/^\s*|\s*$/g,"")}i=t.exports=n,i.left=function(e){return e.replace(/^\s*/,"")},i.right=function(e){return e.replace(/\s*$/,"")}},{}],123:[function(e,t,i){var n=e("trim"),r=e("for-each"),a=function(e){return"[object Array]"===Object.prototype.toString.call(e)}
t.exports=function(e){if(!e)return{}
var t={}
return r(n(e).split("\n"),function(e){var i=e.indexOf(":"),r=n(e.slice(0,i)).toLowerCase(),o=n(e.slice(i+1))
"undefined"==typeof t[r]?t[r]=o:a(t[r])?t[r].push(o):t[r]=[t[r],o]}),t}},{"for-each":120,trim:122}],124:[function(e,t,i){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-rest-collection"]=window.ampersand["ampersand-rest-collection"]||[],window.ampersand["ampersand-rest-collection"].push("2.0.4"))
var n=e("ampersand-collection"),r=e("ampersand-collection-underscore-mixin"),a=e("ampersand-collection-rest-mixin")
t.exports=n.extend(r,a)},{"ampersand-collection":51,"ampersand-collection-rest-mixin":125,"ampersand-collection-underscore-mixin":141}],125:[function(e,t,i){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-collection-rest-mixin"]=window.ampersand["ampersand-collection-rest-mixin"]||[],window.ampersand["ampersand-collection-rest-mixin"].push("3.0.1"))
var n=e("ampersand-sync"),r=e("extend-object"),a=function(e,t){var i=t.error
t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}}
t.exports={fetch:function(e){e=e?r({},e):{},void 0===e.parse&&(e.parse=!0)
var t=e.success,i=this
return e.success=function(n){var r=e.reset?"reset":"set"
i[r](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},a(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?r({},t):{},!(e=this._prepareModel(e,t)))return!1
t.wait||this.add(e,t)
var i=this,n=t.success
return t.success=function(e,r){t.wait&&i.add(e,t),n&&n(e,r,t)},e.save(null,t),e},sync:function(){return n.apply(this,arguments)},getOrFetch:function(e,t,i){function n(){var t=r.get(e)
t?i&&i(null,t):i(new Error("not found"))}3!==arguments.length&&(i=t,t={})
var r=this,a=this.get(e)
return a?i(null,a):void(t.all?this.fetch({success:n,error:n}):this.fetchById(e,i))},fetchById:function(e,t){var i=this,n={}
n[this.model.prototype.idAttribute]=e
var r=new this.model(n,{collection:this})
r.fetch({success:function(){i.add(r),t&&t(null,r)},error:function(){delete r.collection,t&&t(Error("not found"))}})}}},{"ampersand-sync":126,"extend-object":140}],126:[function(e,t,i){arguments[4][110][0].apply(i,arguments)},{dup:110,qs:127,underscore:132,xhr:133}],127:[function(e,t,i){arguments[4][111][0].apply(i,arguments)},{"./lib":128,dup:111}],128:[function(e,t,i){arguments[4][112][0].apply(i,arguments)},{"./parse":129,"./stringify":130,dup:112}],129:[function(e,t,i){arguments[4][113][0].apply(i,arguments)},{"./utils":131,dup:113}],130:[function(e,t,i){arguments[4][114][0].apply(i,arguments)},{buffer:553,dup:114}],131:[function(e,t,i){arguments[4][115][0].apply(i,arguments)},{buffer:553,dup:115}],132:[function(e,t,i){arguments[4][116][0].apply(i,arguments)},{dup:116}],133:[function(e,t,i){arguments[4][117][0].apply(i,arguments)},{dup:117,"global/window":134,once:135,"parse-headers":139}],134:[function(e,t,i){arguments[4][118][0].apply(i,arguments)},{dup:118}],135:[function(e,t,i){arguments[4][119][0].apply(i,arguments)},{dup:119}],136:[function(e,t,i){arguments[4][120][0].apply(i,arguments)},{dup:120,"is-function":137}],137:[function(e,t,i){arguments[4][121][0].apply(i,arguments)},{dup:121}],138:[function(e,t,i){arguments[4][122][0].apply(i,arguments)},{dup:122}],139:[function(e,t,i){arguments[4][123][0].apply(i,arguments)},{dup:123,"for-each":136,trim:138}],140:[function(e,t,i){arguments[4][107][0].apply(i,arguments)},{dup:107}],141:[function(e,t,i){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-collection-underscore-mixin"]=window.ampersand["ampersand-collection-underscore-mixin"]||[],window.ampersand["ampersand-collection-underscore-mixin"].push("1.0.4"))
var n=e("underscore"),r=[].slice,a={},o=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"]
n.each(o,function(e){n[e]&&(a[e]=function(){var t=r.call(arguments)
return t.unshift(this.models),n[e].apply(n,t)})})
var s=["groupBy","countBy","sortBy","indexBy"]
n.each(s,function(e){n[e]&&(a[e]=function(t,i){var r=n.isFunction(t)?t:function(e){return e.get?e.get(t):e[t]}
return n[e](this.models,r,i)})}),a.where=function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){var i
for(var n in e)if(i=t.get?t.get(n):t[n],e[n]!==i)return!1
return!0})},a.findWhere=function(e){return this.where(e,!0)},a.pluck=function(e){return n.invoke(this.models,"get",e)},t.exports=a},{underscore:578}],142:[function(e,t,i){function n(e){if(e=e||{},"string"!=typeof e.name)throw new Error("SelectView requires a name property.")
if(this.name=e.name,!Array.isArray(e.options)&&!e.options.isCollection)throw new Error("SelectView requires select options.")
this.options=e.options,this.options.isCollection&&(this.idAttribute=e.idAttribute||this.options.mainIndex||"id",this.textAttribute=e.textAttribute||"text"),this.el=e.el,this.value=null,this.label=e.label||this.name,this.parent=e.parent,this.template=e.template||l,this.unselectedText=e.unselectedText,this.yieldModel=e.yieldModel===!1?!1:!0,this.required=e.required||!1,this.validClass=e.validClass||"input-valid",this.invalidClass=e.invalidClass||"input-invalid",this.requiredMessage=e.requiredMessage||"Selection required",this.onChange=this.onChange.bind(this),this.render(),this.setValue(e.value)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-select-view"]=window.ampersand["ampersand-select-view"]||[],window.ampersand["ampersand-select-view"].push("2.3.0"))
var r=e("domify"),a=e("ampersand-dom"),o=e("matches-selector"),s=e("ampersand-events"),h=e("amp-extend"),l=['<label class="select">','<span data-hook="label"></span>',"<select></select>",'<span data-hook="message-container" class="message message-below message-error">','<p data-hook="message-text"></p>',"</span>","</label>"].join("\n")
h(n.prototype,s),n.prototype.render=function(){if(!this.rendered){this.el||(this.el=r(this.template))
var e=this.el.querySelector("[data-hook~=label]")
e&&(e.textContent=this.label),this.select=this.el.querySelector("select"),o(this.el,"select")&&(this.select=this.el),this.select&&this.select.setAttribute("name",this.name),this.bindDOMEvents(),this.renderOptions(),this.updateSelectedOption(),this.options.isCollection&&this.options.on("add remove reset",function(){this.renderOptions(),this.updateSelectedOption()}.bind(this)),this.rendered=!0}},n.prototype.onChange=function(){var e=this.select.options[this.select.selectedIndex].value
this.options.isCollection&&this.yieldModel&&(e=this.findModelForId(e)),this.setValue(e)},n.prototype.findModelForId=function(e){return this.options.filter(function(t){return t[this.idAttribute]?t[this.idAttribute]==e:!1}.bind(this))[0]},n.prototype.bindDOMEvents=function(){this.el.addEventListener("change",this.onChange,!1)},n.prototype.renderOptions=function(){this.select&&(this.select.innerHTML="",this.unselectedText&&this.select.appendChild(this.createOption(null,this.unselectedText)),this.options.forEach(function(e){var e
Array.isArray(e)?e=this.createOption(e[0],e[1]):(this.options.isCollection&&(this.idAttribute&&e[this.idAttribute]&&(value=e[this.idAttribute]),this.textAttribute&&e[this.textAttribute]&&(text=e[this.textAttribute])),e=this.createOption(value,text,e)),this.select.appendChild(e)}.bind(this)))},n.prototype.updateSelectedOption=function(){var e=this.value
if(this.select){if(!e)return void(this.select.selectedIndex=0)
if(this.options.isCollection&&this.yieldModel&&(e=e&&e[this.idAttribute]),e)for(var t=this.select.options.length;t--;t)if(this.select.options[t].value===e.toString())return void(this.select.selectedIndex=t)
this.select.selectedIndex=0}},n.prototype.remove=function(){this.el&&this.el.parentNode.removeChild(this.el),this.el.removeEventListener("change",this.onChange,!1)},n.prototype.setValue=function(e){if(e!==this.value){if(this.options.isCollection){var t
t=-1===this.options.indexOf(e)?this.findModelForId(e):e,e=this.yieldModel?t:t?t[this.idAttribute]:void 0}this.value=e,this.validate(),this.updateSelectedOption(),this.parent&&this.parent.update(this)}},n.prototype.validate=function(){return this.valid=this.options.some(function(e){return this.options.isCollection?this.yieldModel?this.options.indexOf(this.value)>-1:!!this.findModelForId(this.value):Array.isArray(e)&&2===e.length?e[0]===this.value:e===this.value}.bind(this)),!this.valid&&this.required?this.setMessage(this.requiredMessage):this.setMessage(),this.valid},n.prototype.setMessage=function(e){var t=this.el.querySelector("[data-hook~=message-container]"),i=this.el.querySelector("[data-hook~=message-text]")
t&&i&&(e?(a.show(t),i.textContent=e,a.addClass(this.el,this.invalidClass),a.removeClass(this.el,this.validClass)):(a.hide(t),i.textContent="",a.addClass(this.el,this.validClass),a.removeClass(this.el,this.invalidClass)))},n.prototype.createOption=function(e,t,i){var n=document.createElement("option")
return(null===e||void 0===e)&&(e=""),n.innerHTML=t,n.value=e,i&&this.listenTo(i,"change:"+this.textAttribute,_.bind(_.partial(function(e,t){n.innerHTML=e[this.textAttribute]},i,n),this)),n},t.exports=n},{"amp-extend":47,"ampersand-dom":70,"ampersand-events":71,domify:143,"matches-selector":144}],143:[function(e,t,i){function n(e,t){if("string"!=typeof e)throw new TypeError("String expected")
t||(t=document)
var i=/<([\w:]+)/.exec(e)
if(!i)return t.createTextNode(e)
e=e.replace(/^\s+|\s+$/g,"")
var n=i[1]
if("body"==n){var r=t.createElement("html")
return r.innerHTML=e,r.removeChild(r.lastChild)}var a=o[n]||o._default,s=a[0],h=a[1],l=a[2],r=t.createElement("div")
for(r.innerHTML=h+e+l;s--;)r=r.lastChild
if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild)
for(var c=t.createDocumentFragment();r.firstChild;)c.appendChild(r.removeChild(r.firstChild))
return c}t.exports=n
var r=document.createElement("div")
r.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>'
var a=!r.getElementsByTagName("link").length
r=void 0
var o={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:a?[1,"X<div>","</div>"]:[0,"",""]}
o.td=o.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],o.option=o.optgroup=[1,'<select multiple="multiple">',"</select>"],o.thead=o.tbody=o.colgroup=o.caption=o.tfoot=[1,"<table>","</table>"],o.polyline=o.ellipse=o.polygon=o.circle=o.text=o.line=o.path=o.rect=o.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],144:[function(e,t,i){"use strict"
function n(e,t){if(a)return a.call(e,t)
for(var i=e.parentNode.querySelectorAll(t),n=0;n<i.length;n++)if(i[n]==e)return!0
return!1}var r=Element.prototype,a=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector
t.exports=n},{}],145:[function(e,t,i){function n(e,t){t||(t={}),this.cid||(this.cid=s("state")),this._events={},this._values={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new L,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,h({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),t.init!==!1&&this.initialize.apply(this,arguments)}function r(e,t,i,n){var r,a,o=e._definition[t]={}
if(p(i))r=e._ensureValidType(i),r&&(o.type=r)
else{if(m(i)&&(a=i,i={type:a[0],required:a[1],"default":a[2]}),r=e._ensureValidType(i.type),r&&(o.type=r),i.required&&(o.required=!0),i["default"]&&"object"==typeof i["default"])throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array")
o["default"]=i["default"],o.allowNull=i.allowNull?i.allowNull:!1,i.setOnce&&(o.setOnce=!0),o.required&&v(o["default"])&&!o.setOnce&&(o["default"]=e._getDefaultForType(r)),o.test=i.test,o.values=i.values}return n&&(o.session=!0),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){var e=this._values[t],i=this._dataTypes[o.type]
return"undefined"!=typeof e?(i&&i.get&&(e=i.get(e)),e):(e=M(o,"default"),this._values[t]=e,e)}}),o}function a(e,t,i){var n=e._derived[t]={fn:y(i)?i:i.fn,cache:i.cache!==!1,depList:i.deps||[]}
u(n.depList,function(i){e._deps[i]=E(e._deps[i]||[],[t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError('"'+t+"\" is a derived property, it can't be set directly.")}})}function o(e){var t,i=this,n=[].slice.call(arguments)
t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},h(t,i)
var o=function(){this.constructor=t}
if(o.prototype=i.prototype,t.prototype=new o,t.prototype._derived=h({},i.prototype._derived),t.prototype._deps=h({},i.prototype._deps),t.prototype._definition=h({},i.prototype._definition),t.prototype._collections=h({},i.prototype._collections),t.prototype._children=h({},i.prototype._children),t.prototype._dataTypes=h({},i.prototype._dataTypes||F),e){var s=["dataTypes","props","session","derived","collections","children"]
n.forEach(function(e){e.dataTypes&&u(e.dataTypes,function(e,i){t.prototype._dataTypes[i]=e}),e.props&&u(e.props,function(e,i){r(t.prototype,i,e)}),e.session&&u(e.session,function(e,i){r(t.prototype,i,e,!0)}),e.derived&&u(e.derived,function(e,i){a(t.prototype,i,e)}),e.collections&&u(e.collections,function(e,i){t.prototype._collections[i]=e}),e.children&&u(e.children,function(e,i){t.prototype._children[i]=e}),h(t.prototype,l(e,s))})}return t.__super__=i.prototype,t}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-state"]=window.ampersand["ampersand-state"]||[],window.ampersand["ampersand-state"].push("4.5.3"))
var s=e("lodash.uniqueid"),h=e("lodash.assign"),l=e("lodash.omit"),c=e("lodash.escape"),u=e("lodash.foreach"),d=e("lodash.includes"),p=e("lodash.isstring"),f=e("lodash.isobject"),m=e("lodash.isarray"),g=e("lodash.isdate"),v=e("lodash.isundefined"),y=e("lodash.isfunction"),w=e("lodash.isnull"),b=e("lodash.isempty"),x=e("lodash.isequal"),_=e("lodash.clone"),k=e("lodash.has"),M=e("lodash.result"),S=e("lodash.keys"),T=e("lodash.bind"),C=e("lodash.defaults"),E=e("lodash.union"),A=e("ampersand-events"),L=e("key-tree-store"),P=e("array-next"),R=/^change:/
h(n.prototype,A,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return c(this.get(e))},isValid:function(e){return this._validate({},h(e||{},{validate:!0}))},parse:function(e,t){return e},serialize:function(){var e=this.getAttributes({props:!0},!0)
return u(this._children,function(t,i){e[i]=this[i].serialize()},this),u(this._collections,function(t,i){e[i]=this[i].serialize()},this),e},set:function(e,t,i){var n,r,a,o,s,h,l,c,p,m,g,y,b,x,_,k,M=this,S=this.extraProperties
if(f(e)||null===e?(p=e,i=t):(p={},p[e]=t),i=i||{},!this._validate(p,i))return!1
y=i.unset,g=i.silent,x=i.initial,r=[],n=this._changing,this._changing=!0,n||(this._previousAttributes=this.attributes,this._changed={})
for(c in p){if(o=p[c],a=typeof o,b=this._values[c],s=this._definition[c],!s){if(this._children[c]||this._collections[c]){this[c].set(o,i)
continue}if("ignore"===S)continue
if("reject"===S)throw new TypeError('No "'+c+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"')
if("allow"===S)s=this._createPropertyDefinition(c,"any")
else if(S)throw new TypeError('Invalid value for extraProperties: "'+S+'"')}if(k=this._getCompareForType(s.type),m=this._dataTypes[s.type],m&&m.set&&(h=m.set(o),o=h.val,a=h.type),s.test&&(l=s.test.call(this,o,a)))throw new TypeError("Property '"+c+"' failed validation with error: "+l)
if(v(o)&&s.required)throw new TypeError("Required property '"+c+"' must be of type "+s.type+". Tried to set "+o)
if(w(o)&&s.required&&!s.allowNull)throw new TypeError("Property '"+c+"' must be of type "+s.type+" (cannot be null). Tried to set "+o)
if(s.type&&"any"!==s.type&&s.type!==a&&!w(o)&&!v(o))throw new TypeError("Property '"+c+"' must be of type "+s.type+". Tried to set "+o)
if(s.values&&!d(s.values,o))throw new TypeError("Property '"+c+"' must be one of values: "+s.values.join(", ")+". Tried to set "+o)
if(_=!k(b,o,c),s.setOnce&&void 0!==b&&_&&!x)throw new TypeError("Property '"+c+"' can only be set once.")
_?(r.push({prev:b,val:o,key:c}),M._changed[c]=o):delete M._changed[c]}if(u(r,function(e){M._previousAttributes[e.key]=e.prev,y?delete M._values[e.key]:M._values[e.key]=e.val}),!g&&r.length&&(M._pending=!0),g||u(r,function(e){M.trigger("change:"+e.key,M,e.val,i)}),n)return this
if(!g)for(;this._pending;)this._pending=!1,this.trigger("change",this,i)
return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t=this._definition[e]
if("boolean"===t.type)this[e]=!this[e]
else{if(!t||!t.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.")
this[e]=P(t.values,this[e])}return this},previousAttributes:function(){return _(this._previousAttributes)},hasChanged:function(e){return null==e?!b(this._changed):k(this._changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?_(this._changed):!1
var t,i,n,r=!1,a=this._changing?this._previousAttributes:this.attributes
for(var o in e)i=this._definition[o],i&&(n=this._getCompareForType(i.type),n(a[o],t=e[o])||((r||(r={}))[o]=t))
return r},toJSON:function(){return this.serialize()},unset:function(e,t){e=Array.isArray(e)?e:[e],u(e,function(e){var i,n=this._definition[e]
return n.required?(i=M(n,"default"),this.set(e,i,t)):this.set(e,i,h({},t,{unset:!0}))},this)},clear:function(e){var t=this
return u(S(this.attributes),function(i){t.unset(i,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e]
return t&&t["default"]},_getCompareForType:function(e){var t=this._dataTypes[e]
return t&&t.compare?T(t.compare,this):x},_validate:function(e,t){if(!t.validate||!this.validate)return!0
e=h({},this.attributes,e)
var i=this.validationError=this.validate(e,t)||null
return i?(this.trigger("invalid",this,i,h(t||{},{validationError:i})),!1):!0},_createPropertyDefinition:function(e,t,i){return r(this,e,t,i)},_ensureValidType:function(e){return d(["string","number","boolean","array","object","date","any"].concat(S(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e||(e={}),C(e,{session:!1,props:!1,derived:!1})
var i,n,r,a={}
for(n in this._definition)r=this._definition[n],(e.session&&r.session||e.props&&!r.session)&&(i=t?this._values[n]:this[n],"undefined"==typeof i&&(i=M(r,"default")),"undefined"!=typeof i&&(a[n]=i))
if(e.derived)for(n in this._derived)a[n]=this[n]
return a},_initDerived:function(){var e=this
u(this._derived,function(t,i){var n=e._derived[i]
n.deps=n.depList
var r=function(t){t=t||{}
var r=n.fn.call(e)
e._cache[i]===r&&n.cache||(n.cache&&(e._previousAttributes[i]=e._cache[i]),e._cache[i]=r,e.trigger("change:"+i,e,e._cache[i]))}
n.deps.forEach(function(t){e._keyTree.add(t,r)})}),this.on("all",function(t){R.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?((t||!this._cache.hasOwnProperty(e))&&(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e
if(this._collections)for(e in this._collections)this[e]=new this._collections[e](null,{parent:this})},_initChildren:function(){var e
if(this._children)for(e in this._children)this[e]=new this._children[e]({},{parent:this}),this.listenTo(this[e],"all",this._getEventBubblingHandler(e))},_getEventBubblingHandler:function(e){return T(function(t,i,n){R.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],i,n):"change"===t&&this.trigger("change",this)},this)},_verifyRequired:function(){var e=this.attributes
for(var t in this._definition)if(this._definition[t].required&&"undefined"==typeof e[t])return!1
return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}})
var F={string:{"default":function(){return""}},date:{set:function(e){var t
if(null==e)t="object"
else if(g(e))t="date",e=e.valueOf()
else try{var i=new Date(e).valueOf()
if(isNaN(i)&&(i=new Date(parseInt(e,10)).valueOf(),isNaN(i)))throw TypeError
e=i,t="date"}catch(n){t=typeof e}return{val:e,type:t}},get:function(e){return null==e?e:new Date(e)},"default":function(){return new Date}},array:{set:function(e){return{val:e,type:m(e)?"array":typeof e}},"default":function(){return[]}},object:{set:function(e){var t=typeof e
return"object"!==t&&v(e)&&(e=null,t="object"),{val:e,type:t}},"default":function(){return{}}},state:{set:function(e){var t=e instanceof n||e&&e.isState
return t?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t,i){var n=e===t
return n||(e&&this.stopListening(e),null!=t&&this.listenTo(t,"all",this._getEventBubblingHandler(i))),n}}}
n.extend=o,t.exports=n},{"ampersand-events":71,"array-next":146,"key-tree-store":147,"lodash.assign":148,"lodash.bind":156,"lodash.clone":162,"lodash.defaults":172,"lodash.escape":174,"lodash.foreach":176,"lodash.has":180,"lodash.includes":185,"lodash.isarray":189,"lodash.isdate":190,"lodash.isempty":191,"lodash.isequal":193,"lodash.isfunction":197,"lodash.isnull":198,"lodash.isobject":199,"lodash.isstring":200,"lodash.isundefined":201,"lodash.keys":202,"lodash.omit":205,"lodash.result":221,"lodash.union":226,"lodash.uniqueid":235}],146:[function(e,t,i){t.exports=function(e,t){var i=e.length,n=e.indexOf(t)+1
return n>i-1&&(n=0),e[n]}},{}],147:[function(e,t,i){function n(){this.storage={}}var r=Array.prototype.slice
n.prototype.add=function(e,t){var i=this.storage[e]||(this.storage[e]=[])
i.push(t)},n.prototype.remove=function(e){var t,i
for(t in this.storage)i=this.storage[t],i.some(function(t,n){return t===e?(i.splice(n,1),!0):void 0})},n.prototype.get=function(e){var t,i=[]
for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+".")||(i=i.concat(this.storage[t]))
return i},n.prototype.getGrouped=function(e){var t,i={}
for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+".")||(i[t]=r.call(this.storage[t]))
return i},n.prototype.getAll=function(e){var t,i={}
for(t in this.storage)(e===t||0===t.indexOf(e+"."))&&(i[t]=r.call(this.storage[t]))
return i},n.prototype.run=function(e,t){var i=r.call(arguments,2)
this.get(e).forEach(function(e){e.apply(t||this,i)})},t.exports=n},{}],148:[function(e,t,i){arguments[4][53][0].apply(i,arguments)},{dup:53,"lodash._baseassign":149,"lodash._createassigner":151,"lodash.isnative":155,"lodash.keys":202}],149:[function(e,t,i){arguments[4][54][0].apply(i,arguments)},{dup:54,"lodash._basecopy":150,"lodash.isnative":155,"lodash.keys":202}],150:[function(e,t,i){arguments[4][55][0].apply(i,arguments)},{dup:55}],151:[function(e,t,i){arguments[4][56][0].apply(i,arguments)},{dup:56,"lodash._bindcallback":152,"lodash._isiterateecall":153,"lodash.restparam":154}],152:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],153:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],154:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],155:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],156:[function(e,t,i){arguments[4][63][0].apply(i,arguments)},{dup:63,"lodash._createwrapper":157,"lodash._replaceholders":160,"lodash.restparam":161}],157:[function(e,t,i){arguments[4][64][0].apply(i,arguments)},{dup:64,"lodash._arraycopy":158,"lodash._basecreate":159,"lodash._replaceholders":160}],158:[function(e,t,i){arguments[4][65][0].apply(i,arguments)},{dup:65}],159:[function(e,t,i){arguments[4][66][0].apply(i,arguments)},{dup:66}],160:[function(e,t,i){arguments[4][67][0].apply(i,arguments)},{dup:67}],161:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],162:[function(e,t,i){function n(e,t,i,n){return t&&"boolean"!=typeof t&&o(e,t,i)?t=!1:"function"==typeof t&&(n=i,i=t,t=!1),i="function"==typeof i&&a(i,n,1),r(e,t,i)}var r=e("lodash._baseclone"),a=e("lodash._bindcallback"),o=e("lodash._isiterateecall")
t.exports=n},{"lodash._baseclone":163,"lodash._bindcallback":170,"lodash._isiterateecall":171}],163:[function(e,t,i){(function(i){function n(e,t,i,a,c,f,g){var v
if(i&&(v=c?i(e,a,c):i(e)),void 0!==v)return v
if(!l(e))return e
var w=m(e)
if(w){if(v=o(e),!t)return u(e,v)}else{var b=q.call(e),x=b==k
if(b!=T&&b!=y&&(!x||c))return j[b]?h(e,b,t):c?e:{}
if(v=s(x?{}:e),!t)return p(v,e)}f||(f=[]),g||(g=[])
for(var _=f.length;_--;)if(f[_]==e)return g[_]
return f.push(e),g.push(v),(w?d:r)(e,function(r,a){v[a]=n(r,t,i,a,e,f,g)}),v}function r(e,t){return f(e,t,v)}function a(e){return X.call(e,0)}function o(e){var t=e.length,i=new e.constructor(t)
return t&&"string"==typeof e[0]&&G.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function s(e){var t=e.constructor
return"function"==typeof t&&t instanceof t||(t=Object),new t}function h(e,t,i){var n=e.constructor
switch(t){case P:return a(e)
case b:case x:return new n(+e)
case R:case F:case D:case B:case O:case V:case z:case U:case N:var r=e.buffer
return new n(i?a(r):r,e.byteOffset,e.length)
case S:case A:return new n(e)
case C:var o=new n(e.source,I.exec(e))
o.lastIndex=e.lastIndex}return o}function l(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function c(e){return function(){return e}}var u=e("lodash._arraycopy"),d=e("lodash._arrayeach"),p=e("lodash._baseassign"),f=e("lodash._basefor"),m=e("lodash.isarray"),g=e("lodash.isnative"),v=e("lodash.keys"),y="[object Arguments]",w="[object Array]",b="[object Boolean]",x="[object Date]",_="[object Error]",k="[object Function]",M="[object Map]",S="[object Number]",T="[object Object]",C="[object RegExp]",E="[object Set]",A="[object String]",L="[object WeakMap]",P="[object ArrayBuffer]",R="[object Float32Array]",F="[object Float64Array]",D="[object Int8Array]",B="[object Int16Array]",O="[object Int32Array]",V="[object Uint8Array]",z="[object Uint8ClampedArray]",U="[object Uint16Array]",N="[object Uint32Array]",I=/\w*$/,j={}
j[y]=j[w]=j[P]=j[b]=j[x]=j[R]=j[F]=j[D]=j[B]=j[O]=j[S]=j[T]=j[C]=j[A]=j[V]=j[z]=j[U]=j[N]=!0,j[_]=j[k]=j[M]=j[E]=j[L]=!1
var H=Object.prototype,G=H.hasOwnProperty,q=H.toString,W=g(W=i.ArrayBuffer)&&W,X=g(X=W&&new W(0).slice)&&X,Y=Math.floor,K=g(K=i.Uint8Array)&&K,Z=function(){try{var e=g(e=i.Float64Array)&&e,t=new e(new W(10),0,1)&&e}catch(n){}return t}(),Q=Z?Z.BYTES_PER_ELEMENT:0
X||(a=W&&K?function(e){var t=e.byteLength,i=Z?Y(t/Q):0,n=i*Q,r=new W(t)
if(i){var a=new Z(r,0,i)
a.set(new Z(e,0,i))}return t!=n&&(a=new K(r,n),a.set(new K(e,n))),r}:c(null)),t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":164,"lodash._arrayeach":165,"lodash._baseassign":166,"lodash._basefor":168,"lodash.isarray":189,"lodash.isnative":169,"lodash.keys":202}],164:[function(e,t,i){arguments[4][65][0].apply(i,arguments)},{dup:65}],165:[function(e,t,i){arguments[4][87][0].apply(i,arguments)},{dup:87}],166:[function(e,t,i){arguments[4][54][0].apply(i,arguments)},{dup:54,"lodash._basecopy":167,"lodash.isnative":169,"lodash.keys":202}],167:[function(e,t,i){arguments[4][55][0].apply(i,arguments)},{dup:55}],168:[function(e,t,i){function n(e){return function(t,i,n){for(var a=r(t),o=n(t),s=o.length,h=e?s:-1;e?h--:++h<s;){var l=o[h]
if(i(a[l],l,a)===!1)break}return t}}function r(e){return a(e)?e:Object(e)}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var o=n()
t.exports=o},{}],169:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],170:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],171:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],172:[function(e,t,i){function n(e,t){return void 0===e?t:e}var r=e("lodash.assign"),a=e("lodash.restparam"),o=a(function(e){var t=e[0]
return null==t?t:(e.push(n),r.apply(void 0,e))})
t.exports=o},{"lodash.assign":148,"lodash.restparam":173}],173:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],174:[function(e,t,i){function n(e){return h[e]}function r(e){return e=a(e),e&&s.test(e)?e.replace(o,n):e}var a=e("lodash._basetostring"),o=/[&<>"'`]/g,s=RegExp(o.source),h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}
t.exports=r},{"lodash._basetostring":175}],175:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],176:[function(e,t,i){arguments[4][86][0].apply(i,arguments)},{dup:86,"lodash._arrayeach":177,"lodash._baseeach":178,"lodash._bindcallback":179,"lodash.isarray":189}],177:[function(e,t,i){arguments[4][87][0].apply(i,arguments)},{dup:87}],178:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":202}],179:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],180:[function(e,t,i){function n(e,t){var i=typeof e
if("string"==i&&p.test(e)||"number"==i)return!0
if(u(e))return!1
var n=!d.test(e)
return n||null!=t&&e in r(t)}function r(e){return o(e)?e:Object(e)}function a(e){var t=e?e.length:0
return t?e[t-1]:void 0}function o(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function s(e,t){if(null==e)return!1
var i=m.call(e,t)
return i||n(t)||(t=c(t),e=1==t.length?e:h(e,l(t,0,-1)),t=a(t),i=null!=e&&m.call(e,t)),i}var h=e("lodash._baseget"),l=e("lodash._baseslice"),c=e("lodash._topath"),u=e("lodash.isarray"),d=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,p=/^\w*$/,f=Object.prototype,m=f.hasOwnProperty
t.exports=s},{"lodash._baseget":181,"lodash._baseslice":182,"lodash._topath":183,"lodash.isarray":189}],181:[function(e,t,i){function n(e,t,i){if(null!=e){void 0!==i&&i in r(e)&&(t=[i])
for(var n=-1,a=t.length;null!=e&&++n<a;)var o=e=e[t[n]]
return o}}function r(e){return a(e)?e:Object(e)}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}t.exports=n},{}],182:[function(e,t,i){function n(e,t,i){var n=-1,r=e.length
t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),i=void 0===i||i>r?r:+i||0,0>i&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0
for(var a=Array(r);++n<r;)a[n]=e[n+t]
return a}t.exports=n},{}],183:[function(e,t,i){function n(e){if(a(e))return e
var t=[]
return r(e).replace(o,function(e,i,n,r){t.push(n?r.replace(s,"$1"):i||e)}),t}var r=e("lodash._basetostring"),a=e("lodash.isarray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g
t.exports=n},{"lodash._basetostring":184,"lodash.isarray":189}],184:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],185:[function(e,t,i){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&f>=e}function a(e,t,i,n){var a=e?m(e):0
return r(a)||(e=o(e),a=e.length),a?(i="number"!=typeof i||n&&l(t,i,n)?0:0>i?p(a+i,0):i||0,"string"==typeof e||!c(e)&&u(e)?a>i&&e.indexOf(t,i)>-1:s(e,t,i)>-1):!1}function o(e){return h(e,d(e))}var s=e("lodash._baseindexof"),h=e("lodash._basevalues"),l=e("lodash._isiterateecall"),c=e("lodash.isarray"),u=e("lodash.isstring"),d=e("lodash.keys"),p=Math.max,f=Math.pow(2,53)-1,m=n("length")
t.exports=a},{"lodash._baseindexof":186,"lodash._basevalues":187,"lodash._isiterateecall":188,"lodash.isarray":189,"lodash.isstring":200,"lodash.keys":202}],186:[function(e,t,i){function n(e,t,i){if(t!==t)return r(e,i)
for(var n=i-1,a=e.length;++n<a;)if(e[n]===t)return n
return-1}function r(e,t,i){for(var n=e.length,r=t+(i?0:-1);i?r--:++r<n;){var a=e[r]
if(a!==a)return r}return-1}t.exports=n},{}],187:[function(e,t,i){function n(e,t){for(var i=-1,n=t.length,r=Array(n);++i<n;)r[i]=e[t[i]]
return r}t.exports=n},{}],188:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],189:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],190:[function(e,t,i){function n(e){return!!e&&"object"==typeof e}function r(e){return n(e)&&s.call(e)==a}var a="[object Date]",o=Object.prototype,s=o.toString
t.exports=r},{}],191:[function(e,t,i){arguments[4][91][0].apply(i,arguments)},{dup:91,"lodash.isarguments":192,"lodash.isarray":189,"lodash.isfunction":197,"lodash.isstring":200,"lodash.keys":202}],192:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],193:[function(e,t,i){function n(e){return e===e&&(0===e?1/e>0:!a(e))}function r(e,t,i,r){if(i="function"==typeof i&&s(i,r,3),!i&&n(e)&&n(t))return e===t
var a=i?i(e,t):void 0
return void 0===a?o(e,t,i):!!a}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var o=e("lodash._baseisequal"),s=e("lodash._bindcallback")
t.exports=r},{"lodash._baseisequal":194,"lodash._bindcallback":196}],194:[function(e,t,i){function n(e,t,i,a,o,s){if(e===t)return 0!==e||1/e==1/t
var h=typeof e,l=typeof t
return"function"!=h&&"object"!=h&&"function"!=l&&"object"!=l||null==e||null==t?e!==e&&t!==t:r(e,t,n,i,a,o,s)}function r(e,t,i,n,r,c,p){var f=h(e),m=h(t),g=d,y=d
f||(g=_.call(e),g==u?g=v:g!=v&&(f=l(e))),m||(y=_.call(t),y==u?y=v:y!=v&&(m=l(t)))
var w=g==v,b=y==v,k=g==y
if(k&&!f&&!w)return o(e,t,g)
if(!r){var M=w&&x.call(e,"__wrapped__"),S=b&&x.call(t,"__wrapped__")
if(M||S)return i(M?e.value():e,S?t.value():t,n,r,c,p)}if(!k)return!1
c||(c=[]),p||(p=[])
for(var T=c.length;T--;)if(c[T]==e)return p[T]==t
c.push(e),p.push(t)
var C=(f?a:s)(e,t,i,n,r,c,p)
return c.pop(),p.pop(),C}function a(e,t,i,n,r,a,o){var s=-1,h=e.length,l=t.length,c=!0
if(h!=l&&!(r&&l>h))return!1
for(;c&&++s<h;){var u=e[s],d=t[s]
if(c=void 0,n&&(c=r?n(d,u,s):n(u,d,s)),void 0===c)if(r)for(var p=l;p--&&(d=t[p],!(c=u&&u===d||i(u,d,n,r,a,o))););else c=u&&u===d||i(u,d,n,r,a,o)}return!!c}function o(e,t,i){switch(i){case p:case f:return+e==+t
case m:return e.name==t.name&&e.message==t.message
case g:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t
case y:case w:return e==t+""}return!1}function s(e,t,i,n,r,a,o){var s=c(e),h=s.length,l=c(t),u=l.length
if(h!=u&&!r)return!1
for(var d=r,p=-1;++p<h;){var f=s[p],m=r?f in t:x.call(t,f)
if(m){var g=e[f],v=t[f]
m=void 0,n&&(m=r?n(v,g,f):n(g,v,f)),void 0===m&&(m=g&&g===v||i(g,v,n,r,a,o))}if(!m)return!1
d||(d="constructor"==f)}if(!d){var y=e.constructor,w=t.constructor
if(y!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w))return!1}return!0}var h=e("lodash.isarray"),l=e("lodash.istypedarray"),c=e("lodash.keys"),u="[object Arguments]",d="[object Array]",p="[object Boolean]",f="[object Date]",m="[object Error]",g="[object Number]",v="[object Object]",y="[object RegExp]",w="[object String]",b=Object.prototype,x=b.hasOwnProperty,_=b.toString
t.exports=n},{"lodash.isarray":189,"lodash.istypedarray":195,"lodash.keys":202}],195:[function(e,t,i){function n(e){return!!e&&"object"==typeof e}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&R>=e}function a(e){return n(e)&&r(e.length)&&!!A[P.call(e)]}var o="[object Arguments]",s="[object Array]",h="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",d="[object Map]",p="[object Number]",f="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",w="[object ArrayBuffer]",b="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",k="[object Int16Array]",M="[object Int32Array]",S="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]",A={}
A[b]=A[x]=A[_]=A[k]=A[M]=A[S]=A[T]=A[C]=A[E]=!0,A[o]=A[s]=A[w]=A[h]=A[l]=A[c]=A[u]=A[d]=A[p]=A[f]=A[m]=A[g]=A[v]=A[y]=!1
var L=Object.prototype,P=L.toString,R=Math.pow(2,53)-1
t.exports=a},{}],196:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],197:[function(e,t,i){arguments[4][94][0].apply(i,arguments)},{dup:94}],198:[function(e,t,i){function n(e){return null===e}t.exports=n},{}],199:[function(e,t,i){function n(e){var t=typeof e
return"function"==t||!!e&&"object"==t}t.exports=n},{}],200:[function(e,t,i){arguments[4][95][0].apply(i,arguments)},{dup:95}],201:[function(e,t,i){function n(e){return void 0===e}t.exports=n},{}],202:[function(e,t,i){arguments[4][61][0].apply(i,arguments)},{dup:61,"lodash.isarguments":203,"lodash.isarray":189,"lodash.isnative":204}],203:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],204:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],205:[function(e,t,i){var n=e("lodash._arraymap"),r=e("lodash._basedifference"),a=e("lodash._baseflatten"),o=e("lodash._bindcallback"),s=e("lodash._pickbyarray"),h=e("lodash._pickbycallback"),l=e("lodash.keysin"),c=e("lodash.restparam"),u=c(function(e,t){if(null==e)return{}
if("function"!=typeof t[0]){var t=n(a(t),String)
return s(e,r(l(e),t))}var i=o(t[0],t[1],3)
return h(e,function(e,t,n){return!i(e,t,n)})})
t.exports=u},{"lodash._arraymap":206,"lodash._basedifference":207,"lodash._baseflatten":212,"lodash._bindcallback":214,"lodash._pickbyarray":215,"lodash._pickbycallback":216,"lodash.keysin":218,"lodash.restparam":220}],206:[function(e,t,i){function n(e,t){for(var i=-1,n=e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e)
return r}t.exports=n},{}],207:[function(e,t,i){function n(e,t){var i=e?e.length:0,n=[]
if(!i)return n
var s=-1,h=r,l=!0,c=l&&t.length>=200?o(t):null,u=t.length
c&&(h=a,l=!1,t=c)
e:for(;++s<i;){var d=e[s]
if(l&&d===d){for(var p=u;p--;)if(t[p]===d)continue e
n.push(d)}else h(t,d,0)<0&&n.push(d)}return n}var r=e("lodash._baseindexof"),a=e("lodash._cacheindexof"),o=e("lodash._createcache")
t.exports=n},{"lodash._baseindexof":208,"lodash._cacheindexof":209,"lodash._createcache":210}],208:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],209:[function(e,t,i){function n(e,t){var i=e.data,n="string"==typeof t||r(t)?i.set.has(t):i.hash[t]
return n?0:-1}function r(e){var t=typeof e
return"function"==t||!!e&&"object"==t}t.exports=n},{}],210:[function(e,t,i){(function(i){function n(e){var t=e?e.length:0
for(this.data={hash:l(null),set:new h};t--;)this.push(e[t])}function r(e){var t=this.data
"string"==typeof e||a(e)?t.set.add(e):t.hash[e]=!0}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function o(e){return function(){return e}}var s=e("lodash.isnative"),h=s(h=i.Set)&&h,l=s(l=Object.create)&&l,c=l&&h?function(e){return new n(e)}:o(null)
n.prototype.push=r,t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash.isnative":211}],211:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],212:[function(e,t,i){function n(e){return!!e&&"object"==typeof e}function r(e,t,i){for(var h=-1,l=e.length,c=-1,u=[];++h<l;){var d=e[h]
if(n(d)&&a(d.length)&&(s(d)||o(d))){t&&(d=r(d,t,i))
var p=-1,f=d.length
for(u.length+=f;++p<f;)u[++c]=d[p]}else i||(u[++c]=d)}return u}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}var o=e("lodash.isarguments"),s=e("lodash.isarray"),h=Math.pow(2,53)-1
t.exports=r},{"lodash.isarguments":213,"lodash.isarray":189}],213:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],214:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],215:[function(e,t,i){function n(e,t){e=r(e)
for(var i=-1,n=t.length,a={};++i<n;){var o=t[i]
o in e&&(a[o]=e[o])}return a}function r(e){return a(e)?e:Object(e)}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}t.exports=n},{}],216:[function(e,t,i){function n(e,t){return a(e,t,o)}function r(e,t){var i={}
return n(e,function(e,n,r){t(e,n,r)&&(i[n]=e)}),i}var a=e("lodash._basefor"),o=e("lodash.keysin")
t.exports=r},{"lodash._basefor":217,"lodash.keysin":218}],217:[function(e,t,i){arguments[4][168][0].apply(i,arguments)},{dup:168}],218:[function(e,t,i){function n(e,t){return e=+e,t=null==t?d:t,e>-1&&e%1==0&&t>e}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function o(e){if(null==e)return[]
a(e)||(e=Object(e))
var t=e.length
t=t&&r(t)&&(h(e)||p.nonEnumArgs&&s(e))&&t||0
for(var i=e.constructor,o=-1,l="function"==typeof i&&i.prototype===e,u=Array(t),d=t>0;++o<t;)u[o]=o+""
for(var f in e)d&&n(f,t)||"constructor"==f&&(l||!c.call(e,f))||u.push(f)
return u}var s=e("lodash.isarguments"),h=e("lodash.isarray"),l=Object.prototype,c=l.hasOwnProperty,u=l.propertyIsEnumerable,d=Math.pow(2,53)-1,p={}
!function(e){var t=function(){this.x=e},i=[]
t.prototype={valueOf:e,y:e}
for(var n in new t)i.push(n)
try{p.nonEnumArgs=!u.call(arguments,1)}catch(r){p.nonEnumArgs=!0}}(1,0),t.exports=o},{"lodash.isarguments":219,"lodash.isarray":189}],219:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],220:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],221:[function(e,t,i){function n(e,t){var i=typeof e
if("string"==i&&f.test(e)||"number"==i)return!0
if(u(e))return!1
var n=!p.test(e)
return n||null!=t&&e in r(t)}function r(e){return o(e)?e:Object(e)}function a(e){var t=e?e.length:0
return t?e[t-1]:void 0}function o(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function s(e,t,i){var r=null==e?void 0:e[t]
return void 0===r&&(null==e||n(t,e)||(t=c(t),e=1==t.length?e:h(e,l(t,0,-1)),r=null==e?void 0:e[a(t)]),r=void 0===r?i:r),d(r)?r.call(e):r}var h=e("lodash._baseget"),l=e("lodash._baseslice"),c=e("lodash._topath"),u=e("lodash.isarray"),d=e("lodash.isfunction"),p=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,f=/^\w*$/
t.exports=s},{"lodash._baseget":222,"lodash._baseslice":223,"lodash._topath":224,"lodash.isarray":189,"lodash.isfunction":197}],222:[function(e,t,i){arguments[4][181][0].apply(i,arguments)},{dup:181}],223:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],224:[function(e,t,i){arguments[4][183][0].apply(i,arguments)},{dup:183,"lodash._basetostring":225,"lodash.isarray":189}],225:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],226:[function(e,t,i){var n=e("lodash._baseflatten"),r=e("lodash._baseuniq"),a=e("lodash.restparam"),o=a(function(e){return r(n(e,!1,!0))})
t.exports=o},{"lodash._baseflatten":227,"lodash._baseuniq":229,"lodash.restparam":234}],227:[function(e,t,i){arguments[4][212][0].apply(i,arguments)},{dup:212,"lodash.isarguments":228,"lodash.isarray":189}],228:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],229:[function(e,t,i){function n(e,t){var i=-1,n=r,s=e.length,h=!0,l=h&&s>=200,c=l?o():null,u=[]
c?(n=a,h=!1):(l=!1,c=t?[]:u)
e:for(;++i<s;){var d=e[i],p=t?t(d,i,e):d
if(h&&d===d){for(var f=c.length;f--;)if(c[f]===p)continue e
t&&c.push(p),u.push(d)}else n(c,p,0)<0&&((t||l)&&c.push(p),u.push(d))}return u}var r=e("lodash._baseindexof"),a=e("lodash._cacheindexof"),o=e("lodash._createcache")
t.exports=n},{"lodash._baseindexof":230,"lodash._cacheindexof":231,"lodash._createcache":232}],230:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],231:[function(e,t,i){arguments[4][209][0].apply(i,arguments)},{dup:209}],232:[function(e,t,i){arguments[4][210][0].apply(i,arguments)},{dup:210,"lodash.isnative":233}],233:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],234:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],235:[function(e,t,i){arguments[4][102][0].apply(i,arguments)},{dup:102,"lodash._basetostring":236}],236:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],237:[function(e,t,i){function n(e,t){this.collection=e,this.models=[],this.configure(t||{},!0),this.listenTo(this.collection,"all",this._onCollectionEvent)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-subcollection"]=window.ampersand["ampersand-subcollection"]||[],window.ampersand["ampersand-subcollection"].push("2.0.3"))
var r=e("ampersand-events"),a=e("ampersand-class-extend"),o=e("ampersand-collection-lodash-mixin"),s=Array.prototype.slice,h=e("lodash.assign"),l=e("lodash.difference"),c=e("lodash.foreach"),u=e("lodash.isarray"),d=e("lodash.keys"),p=e("lodash.reduce"),f=e("lodash.sortby"),m=e("lodash.union"),g=e("lodash.includes"),v=e("lodash.isequal")
h(n.prototype,r,o,{addFilter:function(e){this.swapFilters([e],[])},removeFilter:function(e){this.swapFilters([],[e])},clearFilters:function(){this._resetFilters(),this._runFilters()},swapFilters:function(e,t){var i=this
t?u(t)||(t=[t]):t=this._filters,e?u(e)||(e=[e]):e=[],t.forEach(function(e){i._removeFilter(e)}),e.forEach(function(e){i._addFilter(e)}),this._runFilters()},configure:function(e,t){t&&this._resetFilters(t),this._parseSpec(e),this._runFilters()},at:function(e){return this.models[e]},get:function(e,t){var i=this.collection.get(e,t)
return i&&this.includes(i)?i:void 0},_removeFilter:function(e){var t=this._filters.indexOf(e);-1!==t&&this._filters.splice(t,1)},reset:function(){this.configure({},!0)},_resetFilters:function(e){this._filters=[],this._watched=[],this.limit=void 0,this.offset=void 0,e&&(this.comparator=void 0)},_addFilter:function(e){this._filters.push(e)},_watch:function(e){this._watched=m(this._watched,u(e)?e:[e])},_unwatch:function(e){this._watched=l(this._watched,u(e)?e:[e])},_parseSpec:function(e){e.watched&&this._watch(e.watched),e.comparator&&(this.comparator=e.comparator),e.where&&(c(e.where,function(e,t){this._addFilter(function(i){return(i.get?i.get(t):i[t])===e})},this),this._watch(d(e.where))),e.hasOwnProperty("limit")&&(this.limit=e.limit),e.hasOwnProperty("offset")&&(this.offset=e.offset),e.filter&&this._addFilter(e.filter),e.filters&&e.filters.forEach(this._addFilter,this)},_runFilters:function(){var e,t,i,n=s.call(this.models),r=s.call(this.collection.models),a=this.offset||0
e=this._filters.length?p(this._filters,function(e,t){return e.filter(t)},r):s.call(r),this.comparator&&(e=f(e,this.comparator)),(this.limit||this.offset)&&(this.filtered=e,e=e.slice(a,this.limit+a)),t=l(e,n),i=l(n,e),this.models=e,c(i,function(e){this.trigger("remove",e,this)},this),c(t,function(e){this.trigger("add",e,this)},this),!v(n,e)&&this.comparator&&this.trigger("sort",this)},_onCollectionEvent:function(e,t){var i=e.split(":")[1];(i===this.comparator||g(this._watched,i)||g(["add","remove","reset","sync"],e))&&this._runFilters(),!g(["add","remove"],e)&&this.includes(t)&&this.trigger.apply(this,arguments)}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.models.length}}),Object.defineProperty(n.prototype,"isCollection",{get:function(){return!0}}),n.extend=a,t.exports=n},{"ampersand-class-extend":238,"ampersand-collection-lodash-mixin":239,"ampersand-events":71,"lodash.assign":392,"lodash.difference":400,"lodash.foreach":409,"lodash.includes":413,"lodash.isarray":418,"lodash.isequal":419,"lodash.keys":423,"lodash.reduce":426,"lodash.sortby":433,"lodash.union":442}],238:[function(e,t,i){arguments[4][52][0].apply(i,arguments)},{dup:52,"lodash.assign":392}],239:[function(e,t,i){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-collection-lodash-mixin"]=window.ampersand["ampersand-collection-lodash-mixin"]||[],window.ampersand["ampersand-collection-lodash-mixin"].push("2.0.1"))
var n=e("lodash.isfunction"),r={countBy:e("lodash.countby"),difference:e("lodash.difference"),drop:e("lodash.drop"),each:e("lodash.foreach"),every:e("lodash.every"),filter:e("lodash.filter"),find:e("lodash.find"),forEach:e("lodash.foreach"),groupBy:e("lodash.groupby"),includes:e("lodash.includes"),indexBy:e("lodash.indexby"),indexOf:e("lodash.indexof"),initial:e("lodash.initial"),invoke:e("lodash.invoke"),isEmpty:e("lodash.isempty"),lastIndexOf:e("lodash.lastindexof"),map:e("lodash.map"),max:e("lodash.max"),min:e("lodash.min"),partition:e("lodash.partition"),reduce:e("lodash.reduce"),reduceRight:e("lodash.reduceright"),reject:e("lodash.reject"),rest:e("lodash.rest"),sample:e("lodash.sample"),shuffle:e("lodash.shuffle"),some:e("lodash.some"),sortBy:e("lodash.sortby"),take:e("lodash.take"),without:e("lodash.without")},a=[].slice,o={},s=["forEach","each","map","reduce","reduceRight","find","filter","reject","every","some","includes","invoke","max","min","take","initial","rest","drop","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","sample","partition"]
r.each(s,function(e){r[e]&&(o[e]=function(){var t=a.call(arguments)
return t.unshift(this.models),r[e].apply(r,t)})})
var h=["groupBy","countBy","sortBy","indexBy"]
r.each(h,function(e){r[e]&&(o[e]=function(t,i){var a=n(t)?t:function(e){return e.get?e.get(t):e[t]}
return r[e](this.models,a,i)})}),o.where=function(e,t){return r.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){var i
for(var n in e)if(i=t.get?t.get(n):t[n],e[n]!==i)return!1
return!0})},o.findWhere=function(e){return this.where(e,!0)},o.pluck=function(e){return r.invoke(this.models,"get",e)},o.first=function(){return this.models[0]},o.last=function(){return this.models[this.models.length-1]},o.size=function(){return this.models.length},t.exports=o},{"lodash.countby":240,"lodash.difference":400,"lodash.drop":247,"lodash.every":250,"lodash.filter":258,"lodash.find":266,"lodash.foreach":409,"lodash.groupby":274,"lodash.includes":413,"lodash.indexby":281,"lodash.indexof":288,"lodash.initial":292,"lodash.invoke":295,"lodash.isempty":303,"lodash.isfunction":306,"lodash.lastindexof":307,"lodash.map":310,"lodash.max":317,"lodash.min":328,"lodash.partition":339,"lodash.reduce":426,"lodash.reduceright":346,"lodash.reject":354,"lodash.rest":362,"lodash.sample":365,"lodash.shuffle":370,"lodash.some":374,"lodash.sortby":433,"lodash.take":381,"lodash.without":384}],240:[function(e,t,i){var n=e("lodash._createaggregator"),r=(e("lodash.keys"),Object.prototype),a=r.hasOwnProperty,o=n(function(e,t,i){a.call(e,i)?++e[i]:e[i]=1})
t.exports=o},{"lodash._createaggregator":241,"lodash.keys":423}],241:[function(e,t,i){function n(e,t){return function(i,n,s){var h=t?t():{}
if(n=r(n,s,3),o(i))for(var l=-1,c=i.length;++l<c;){var u=i[l]
e(h,u,n(u,l,i),i)}else a(i,function(t,i,r){e(h,t,n(t,i,r),r)})
return h}}var r=e("lodash._basecallback"),a=e("lodash._baseeach"),o=e("lodash.isarray")
t.exports=n},{"lodash._basecallback":242,"lodash._baseeach":246,"lodash.isarray":418}],242:[function(e,t,i){function n(e,t,i){var n=typeof e
return"function"==n?"undefined"==typeof t?e:f(e,t,i):null==e?d:"object"==n?a(e):"undefined"==typeof t?s(e+""):o(e+"",t)}function r(e,t,i,n,r){for(var a=-1,o=t.length,s=!r;++a<o;)if(s&&n[a]?i[a]!==e[t[a]]:!(t[a]in e))return!1
for(a=-1;++a<o;){var h=t[a],l=e[h],c=i[a]
if(s&&n[a])var u="undefined"!=typeof l||h in e
else u=r?r(l,c,h):void 0,"undefined"==typeof u&&(u=p(c,l,r,!0))
if(!u)return!1}return!0}function a(e){var t=m(e),i=t.length
if(!i)return u(!0)
if(1==i){var n=t[0],a=e[n]
if(h(a))return function(e){return null!=e&&e[n]===a&&("undefined"!=typeof a||n in l(e))}}for(var o=Array(i),s=Array(i);i--;)a=e[t[i]],o[i]=a,s[i]=h(a)
return function(e){return null!=e&&r(l(e),t,o,s)}}function o(e,t){return h(t)?function(i){return null!=i&&i[e]===t&&("undefined"!=typeof t||e in l(i))}:function(i){return null!=i&&p(t,i[e],null,!0)}}function s(e){return function(t){return null==t?void 0:t[e]}}function h(e){return e===e&&(0===e?1/e>0:!c(e))}function l(e){return c(e)?e:Object(e)}function c(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function u(e){return function(){return e}}function d(e){return e}var p=e("lodash._baseisequal"),f=e("lodash._bindcallback"),m=e("lodash.keys")
t.exports=n},{"lodash._baseisequal":243,"lodash._bindcallback":245,"lodash.keys":423}],243:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":244,"lodash.keys":423}],244:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],245:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],246:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],247:[function(e,t,i){function n(e,t,i){var n=e?e.length:0
return n?((i?a(e,t,i):null==t)&&(t=1),r(e,0>t?0:t)):[]}var r=e("lodash._baseslice"),a=e("lodash._isiterateecall")
t.exports=n},{"lodash._baseslice":248,"lodash._isiterateecall":249}],248:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],249:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],250:[function(e,t,i){function n(e,t){var i=!0
return s(e,function(e,n,r){return i=!!t(e,n,r)}),i}function r(e,t,i){var r=l(e)?a:n
return i&&h(e,t,i)&&(t=null),("function"!=typeof t||void 0!==i)&&(t=o(t,i,3)),r(e,t)}{var a=e("lodash._arrayevery"),o=e("lodash._basecallback"),s=e("lodash._baseeach"),h=e("lodash._isiterateecall"),l=e("lodash.isarray")
e("lodash.keys")}t.exports=r},{"lodash._arrayevery":251,"lodash._basecallback":252,"lodash._baseeach":256,"lodash._isiterateecall":257,"lodash.isarray":418,"lodash.keys":423}],251:[function(e,t,i){function n(e,t){for(var i=-1,n=e.length;++i<n;)if(!t(e[i],i,e))return!1
return!0}t.exports=n},{}],252:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":253,"lodash._bindcallback":255,"lodash.keys":423}],253:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":254,"lodash.keys":423}],254:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],255:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],256:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],257:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],258:[function(e,t,i){function n(e,t,i){var n=s(e)?r:o
return t=a(t,i,3),n(e,t)}{var r=e("lodash._arrayfilter"),a=e("lodash._basecallback"),o=e("lodash._basefilter"),s=e("lodash.isarray")
e("lodash.keys")}t.exports=n},{"lodash._arrayfilter":259,"lodash._basecallback":260,"lodash._basefilter":264,"lodash.isarray":418,"lodash.keys":423}],259:[function(e,t,i){function n(e,t){for(var i=-1,n=e.length,r=-1,a=[];++i<n;){var o=e[i]
t(o,i,e)&&(a[++r]=o)}return a}t.exports=n},{}],260:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":261,"lodash._bindcallback":263,"lodash.keys":423}],261:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":262,"lodash.keys":423}],262:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],263:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],264:[function(e,t,i){function n(e,t){var i=[]
return r(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i}var r=e("lodash._baseeach")
t.exports=n},{"lodash._baseeach":265}],265:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],266:[function(e,t,i){function n(e,t){return function(i,n,a){if(n=r(n,a,3),h(i)){var l=s(i,n,t)
return l>-1?i[l]:void 0}return o(i,n,e)}}var r=e("lodash._basecallback"),a=e("lodash._baseeach"),o=e("lodash._basefind"),s=e("lodash._basefindindex"),h=e("lodash.isarray"),l=(e("lodash.keys"),n(a))
t.exports=l},{"lodash._basecallback":267,"lodash._baseeach":271,"lodash._basefind":272,"lodash._basefindindex":273,"lodash.isarray":418,"lodash.keys":423}],267:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":268,"lodash._bindcallback":270,"lodash.keys":423}],268:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":269,"lodash.keys":423}],269:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],270:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],271:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],272:[function(e,t,i){function n(e,t,i,n){var r
return i(e,function(e,i,a){return t(e,i,a)?(r=n?i:e,!1):void 0}),r}t.exports=n},{}],273:[function(e,t,i){function n(e,t,i){for(var n=e.length,r=i?n:-1;i?r--:++r<n;)if(t(e[r],r,e))return r
return-1}t.exports=n},{}],274:[function(e,t,i){var n=e("lodash._createaggregator"),r=(e("lodash.keys"),Object.prototype),a=r.hasOwnProperty,o=n(function(e,t,i){a.call(e,i)?e[i].push(t):e[i]=[t]})
t.exports=o},{"lodash._createaggregator":275,"lodash.keys":423}],275:[function(e,t,i){arguments[4][241][0].apply(i,arguments)},{dup:241,"lodash._basecallback":276,"lodash._baseeach":280,"lodash.isarray":418}],276:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":277,"lodash._bindcallback":279,"lodash.keys":423}],277:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":278,"lodash.keys":423}],278:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],279:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],280:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],281:[function(e,t,i){var n=e("lodash._createaggregator"),r=(e("lodash.keys"),n(function(e,t,i){e[i]=t}))
t.exports=r},{"lodash._createaggregator":282,"lodash.keys":423}],282:[function(e,t,i){arguments[4][241][0].apply(i,arguments)},{dup:241,"lodash._basecallback":283,"lodash._baseeach":287,"lodash.isarray":418}],283:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":284,"lodash._bindcallback":286,"lodash.keys":423}],284:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":285,"lodash.keys":423}],285:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],286:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],287:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],288:[function(e,t,i){function n(e,t,i){var n=e?e.length:0
if(!n)return-1
if("number"==typeof i)i=0>i?o(n+i,0):i
else if(i){var s=a(e,t),h=e[s]
return(t===t?t===h:h!==h)?s:-1}return r(e,t,i||0)}var r=e("lodash._baseindexof"),a=e("lodash._binaryindex"),o=Math.max
t.exports=n},{"lodash._baseindexof":289,"lodash._binaryindex":290}],289:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],290:[function(e,t,i){function n(e,t,i){var n=0,o=e?e.length:n
if("number"==typeof t&&t===t&&s>=o){for(;o>n;){var h=n+o>>>1,l=e[h];(i?t>=l:t>l)?n=h+1:o=h}return o}return a(e,t,r,i)}function r(e){return e}var a=e("lodash._binaryindexby"),o=Math.pow(2,32)-1,s=o>>>1
t.exports=n},{"lodash._binaryindexby":291}],291:[function(e,t,i){function n(e,t,i,n){t=i(t)
for(var o=0,h=e?e.length:0,l=t!==t,c=void 0===t;h>o;){var u=r((o+h)/2),d=i(e[u]),p=d===d
if(l)var f=p||n
else f=c?p&&(n||void 0!==d):n?t>=d:t>d
f?o=u+1:h=u}return a(h,s)}var r=Math.floor,a=Math.min,o=Math.pow(2,32)-1,s=o-1
t.exports=n},{}],292:[function(e,t,i){function n(e,t,i){var n=e?e.length:0
return n?((i?o(e,t,i):null==t)&&(t=1),t=n-(+t||0),a(e,0,0>t?0:t)):[]}function r(e){return n(e,1)}var a=e("lodash._baseslice"),o=e("lodash._isiterateecall")
t.exports=r},{"lodash._baseslice":293,"lodash._isiterateecall":294}],293:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],294:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],295:[function(e,t,i){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e,t){var i=typeof e
if("string"==i&&p.test(e)||"number"==i)return!0
if(c(e))return!1
var n=!d.test(e)
return n||null!=t&&e in o(t)}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&f>=e}function o(e){return s(e)?e:Object(e)}function s(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var h=e("lodash._baseeach"),l=e("lodash._invokepath"),c=e("lodash.isarray"),u=e("lodash.restparam"),d=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,p=/^\w*$/,f=Math.pow(2,53)-1,m=n("length"),g=u(function(e,t,i){var n=-1,o="function"==typeof t,s=r(t),c=m(e),u=a(c)?Array(c):[]
return h(e,function(e){var r=o?t:s&&null!=e&&e[t]
u[++n]=r?r.apply(e,i):l(e,t,i)}),u})
t.exports=g},{"lodash._baseeach":296,"lodash._invokepath":297,"lodash.isarray":418,"lodash.restparam":302}],296:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],297:[function(e,t,i){function n(e,t,i){null==e||r(t,e)||(t=c(t),e=1==t.length?e:h(e,l(t,0,-1)),t=o(t))
var n=null==e?e:e[t]
return null==n?void 0:n.apply(e,i)}function r(e,t){var i=typeof e
if("string"==i&&p.test(e)||"number"==i)return!0
if(u(e))return!1
var n=!d.test(e)
return n||null!=t&&e in a(t)}function a(e){return s(e)?e:Object(e)}function o(e){var t=e?e.length:0
return t?e[t-1]:void 0}function s(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var h=e("lodash._baseget"),l=e("lodash._baseslice"),c=e("lodash._topath"),u=e("lodash.isarray"),d=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,p=/^\w*$/
t.exports=n},{"lodash._baseget":298,"lodash._baseslice":299,"lodash._topath":300,"lodash.isarray":418}],298:[function(e,t,i){arguments[4][181][0].apply(i,arguments)},{dup:181}],299:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],300:[function(e,t,i){arguments[4][183][0].apply(i,arguments)},{dup:183,"lodash._basetostring":301,"lodash.isarray":418}],301:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],302:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],303:[function(e,t,i){arguments[4][91][0].apply(i,arguments)},{dup:91,"lodash.isarguments":304,"lodash.isarray":418,"lodash.isfunction":306,"lodash.isstring":305,"lodash.keys":423}],304:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],305:[function(e,t,i){arguments[4][95][0].apply(i,arguments)},{dup:95}],306:[function(e,t,i){arguments[4][94][0].apply(i,arguments)},{dup:94}],307:[function(e,t,i){function n(e,t,i){for(var n=e.length,r=t+(i?0:-1);i?r--:++r<n;){var a=e[r]
if(a!==a)return r}return-1}function r(e,t,i){var r=e?e.length:0
if(!r)return-1
var h=r
if("number"==typeof i)h=(0>i?o(r+i,0):s(i||0,r-1))+1
else if(i){h=a(e,t,!0)-1
var l=e[h]
return(t===t?t===l:l!==l)?h:-1}if(t!==t)return n(e,h,!0)
for(;h--;)if(e[h]===t)return h
return-1}var a=e("lodash._binaryindex"),o=Math.max,s=Math.min
t.exports=r},{"lodash._binaryindex":308}],308:[function(e,t,i){arguments[4][290][0].apply(i,arguments)},{dup:290,"lodash._binaryindexby":309}],309:[function(e,t,i){arguments[4][291][0].apply(i,arguments)},{dup:291}],310:[function(e,t,i){function n(e,t){var i=-1,n=d(e),r=a(n)?Array(n):[]
return l(e,function(e,n,a){r[++i]=t(e,n,a)}),r}function r(e){return function(t){return null==t?void 0:t[e]}}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function o(e,t,i){var r=c(e)?s:n
return t=h(t,i,3),r(e,t)}var s=e("lodash._arraymap"),h=e("lodash._basecallback"),l=e("lodash._baseeach"),c=e("lodash.isarray"),u=(e("lodash.keys"),Math.pow(2,53)-1),d=r("length")
t.exports=o},{"lodash._arraymap":311,"lodash._basecallback":312,"lodash._baseeach":316,"lodash.isarray":418,"lodash.keys":423}],311:[function(e,t,i){arguments[4][206][0].apply(i,arguments)},{dup:206}],312:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":313,"lodash._bindcallback":315,"lodash.keys":423}],313:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":314,"lodash.keys":423}],314:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],315:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],316:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],317:[function(e,t,i){function n(e){return e.charCodeAt(0)}function r(e,t){return function(i,r,o){o&&l(i,r,o)&&(r=null)
var h=null==r
if(r=h?r:s(r,o,3),h){var p=u(i)
if(p||!d(i))return e(p?i:c(i))
r=n}return a(i,r,t)}}function a(e,t,i){var n=i?f:p,r=n,a=r
return h(e,function(e,o,s){var h=t(e,o,s);((i?r>h:h>r)||h===n&&h===a)&&(r=h,a=e)}),a}var o=e("lodash._arraymax"),s=e("lodash._basecallback"),h=e("lodash._baseeach"),l=e("lodash._isiterateecall"),c=e("lodash._toiterable"),u=e("lodash.isarray"),d=e("lodash.isstring"),p=(e("lodash.keys"),Number.NEGATIVE_INFINITY),f=Number.POSITIVE_INFINITY,m=r(o)
t.exports=m},{"lodash._arraymax":318,"lodash._basecallback":319,"lodash._baseeach":323,"lodash._isiterateecall":324,"lodash._toiterable":325,"lodash.isarray":418,"lodash.isstring":327,"lodash.keys":423}],318:[function(e,t,i){function n(e){for(var t=-1,i=e.length,n=r;++t<i;){var a=e[t]
a>n&&(n=a)}return n}var r=Number.NEGATIVE_INFINITY
t.exports=n},{}],319:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":320,"lodash._bindcallback":322,"lodash.keys":423}],320:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":321,"lodash.keys":423}],321:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],322:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],323:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],324:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],325:[function(e,t,i){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&c>=e}function a(e){return null==e?[]:r(u(e))?o(e)?e:Object(e):s(e)}function o(e){var t=typeof e
return"function"==t||!!e&&"object"==t}function s(e){return h(e,l(e))}var h=e("lodash._basevalues"),l=e("lodash.keys"),c=Math.pow(2,53)-1,u=n("length")
t.exports=a},{"lodash._basevalues":326,"lodash.keys":423}],326:[function(e,t,i){arguments[4][187][0].apply(i,arguments)},{dup:187}],327:[function(e,t,i){arguments[4][95][0].apply(i,arguments)},{dup:95}],328:[function(e,t,i){function n(e){return e.charCodeAt(0)}function r(e,t){return function(i,r,o){o&&l(i,r,o)&&(r=null)
var h=null==r
if(r=h?r:s(r,o,3),h){var p=u(i)
if(p||!d(i))return e(p?i:c(i))
r=n}return a(i,r,t)}}function a(e,t,i){var n=i?f:p,r=n,a=r
return h(e,function(e,o,s){var h=t(e,o,s);((i?r>h:h>r)||h===n&&h===a)&&(r=h,a=e)}),a}var o=e("lodash._arraymin"),s=e("lodash._basecallback"),h=e("lodash._baseeach"),l=e("lodash._isiterateecall"),c=e("lodash._toiterable"),u=e("lodash.isarray"),d=e("lodash.isstring"),p=(e("lodash.keys"),Number.NEGATIVE_INFINITY),f=Number.POSITIVE_INFINITY,m=r(o,!0)
t.exports=m},{"lodash._arraymin":329,"lodash._basecallback":330,"lodash._baseeach":334,"lodash._isiterateecall":335,"lodash._toiterable":336,"lodash.isarray":418,"lodash.isstring":338,"lodash.keys":423}],329:[function(e,t,i){function n(e){for(var t=-1,i=e.length,n=r;++t<i;){var a=e[t]
n>a&&(n=a)}return n}var r=Number.POSITIVE_INFINITY
t.exports=n},{}],330:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":331,"lodash._bindcallback":333,"lodash.keys":423}],331:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":332,"lodash.keys":423}],332:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],333:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],334:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],335:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],336:[function(e,t,i){arguments[4][325][0].apply(i,arguments)},{dup:325,"lodash._basevalues":337,"lodash.keys":423}],337:[function(e,t,i){arguments[4][187][0].apply(i,arguments)},{dup:187}],338:[function(e,t,i){arguments[4][95][0].apply(i,arguments)},{dup:95}],339:[function(e,t,i){var n=e("lodash._createaggregator"),r=(e("lodash.keys"),n(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]}))
t.exports=r},{"lodash._createaggregator":340,"lodash.keys":423}],340:[function(e,t,i){arguments[4][241][0].apply(i,arguments)},{dup:241,"lodash._basecallback":341,"lodash._baseeach":345,"lodash.isarray":418}],341:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":342,"lodash._bindcallback":344,"lodash.keys":423}],342:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":343,"lodash.keys":423}],343:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],344:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],345:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],346:[function(e,t,i){function n(e,t,i,n){var r=e.length
for(n&&r&&(i=e[--r]);r--;)i=t(i,e[r],r,e)
return i}function r(e,t){return function(i,n,r,o){var l=arguments.length<3
return"function"==typeof n&&void 0===o&&h(i)?e(i,n,r,l):s(i,a(n,o,4),r,l,t)}}var a=e("lodash._basecallback"),o=e("lodash._baseeachright"),s=e("lodash._basereduce"),h=e("lodash.isarray"),l=(e("lodash.keys"),r(n,o))
t.exports=l},{"lodash._basecallback":347,"lodash._baseeachright":351,"lodash._basereduce":353,"lodash.isarray":418,"lodash.keys":423}],347:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":348,"lodash._bindcallback":350,"lodash.keys":423}],348:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":349,"lodash.keys":423}],349:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],350:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],351:[function(e,t,i){function n(e,t){return l(e,t,c)}function r(e){return function(t){return null==t?void 0:t[e]}}function a(e,t){return function(i,n){var r=i?p(i):0
if(!o(r))return e(i,n)
for(var a=t?r:-1,h=s(i);(t?a--:++a<r)&&n(h[a],a,h)!==!1;);return i}}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function s(e){return h(e)?e:Object(e)}function h(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var l=e("lodash._baseforright"),c=e("lodash.keys"),u=Math.pow(2,53)-1,d=a(n,!0),p=r("length")
t.exports=d},{"lodash._baseforright":352,"lodash.keys":423}],352:[function(e,t,i){function n(e){return function(t,i,n){for(var a=r(t),o=n(t),s=o.length,h=e?s:-1;e?h--:++h<s;){var l=o[h]
if(i(a[l],l,a)===!1)break}return t}}function r(e){return a(e)?e:Object(e)}function a(e){var t=typeof e
return"function"==t||!!e&&"object"==t}var o=n(!0)
t.exports=o},{}],353:[function(e,t,i){function n(e,t,i,n,r){return r(e,function(e,r,a){i=n?(n=!1,e):t(i,e,r,a)}),i}t.exports=n},{}],354:[function(e,t,i){function n(e,t,i){var n=s(e)?r:o
return t=a(t,i,3),n(e,function(e,i,n){return!t(e,i,n)})}{var r=e("lodash._arrayfilter"),a=e("lodash._basecallback"),o=e("lodash._basefilter"),s=e("lodash.isarray")
e("lodash.keys")}t.exports=n},{"lodash._arrayfilter":355,"lodash._basecallback":356,"lodash._basefilter":360,"lodash.isarray":418,"lodash.keys":423}],355:[function(e,t,i){arguments[4][259][0].apply(i,arguments)},{dup:259}],356:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":357,"lodash._bindcallback":359,"lodash.keys":423}],357:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":358,"lodash.keys":423}],358:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],359:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],360:[function(e,t,i){arguments[4][264][0].apply(i,arguments)},{dup:264,"lodash._baseeach":361}],361:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],362:[function(e,t,i){function n(e,t,i){var n=e?e.length:0
return n?((i?o(e,t,i):null==t)&&(t=1),a(e,0>t?0:t)):[]}function r(e){return n(e,1)}var a=e("lodash._baseslice"),o=e("lodash._isiterateecall")
t.exports=r},{"lodash._baseslice":363,"lodash._isiterateecall":364}],363:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],364:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],365:[function(e,t,i){function n(e,t,i){if(i?a(e,t,i):null==t){e=o(e)
var n=e.length
return n>0?e[r(0,n-1)]:void 0}var l=s(e)
return l.length=h(0>t?0:+t||0,l.length),l}var r=e("lodash._baserandom"),a=e("lodash._isiterateecall"),o=e("lodash._toiterable"),s=e("lodash.shuffle"),h=Math.min
t.exports=n},{"lodash._baserandom":366,"lodash._isiterateecall":367,"lodash._toiterable":368,"lodash.shuffle":370}],366:[function(e,t,i){function n(e,t){return e+r(a()*(t-e+1))}var r=Math.floor,a=Math.random
t.exports=n},{}],367:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],368:[function(e,t,i){arguments[4][325][0].apply(i,arguments)},{dup:325,"lodash._basevalues":369,"lodash.keys":423}],369:[function(e,t,i){arguments[4][187][0].apply(i,arguments)},{dup:187}],370:[function(e,t,i){function n(e){e=a(e)
for(var t=-1,i=e.length,n=Array(i);++t<i;){var o=r(0,t)
t!=o&&(n[t]=n[o]),n[o]=e[t]}return n}var r=e("lodash._baserandom"),a=e("lodash._toiterable")
t.exports=n},{"lodash._baserandom":371,"lodash._toiterable":372}],371:[function(e,t,i){arguments[4][366][0].apply(i,arguments)},{dup:366}],372:[function(e,t,i){arguments[4][325][0].apply(i,arguments)},{dup:325,"lodash._basevalues":373,"lodash.keys":423}],373:[function(e,t,i){arguments[4][187][0].apply(i,arguments)},{dup:187}],374:[function(e,t,i){function n(e,t){for(var i=-1,n=e.length;++i<n;)if(t(e[i],i,e))return!0
return!1}function r(e,t){var i
return s(e,function(e,n,r){return i=t(e,n,r),!i}),!!i}function a(e,t,i){var a=l(e)?n:r
return i&&h(e,t,i)&&(t=null),("function"!=typeof t||void 0!==i)&&(t=o(t,i,3)),a(e,t)}{var o=e("lodash._basecallback"),s=e("lodash._baseeach"),h=e("lodash._isiterateecall"),l=e("lodash.isarray")
e("lodash.keys")}t.exports=a},{"lodash._basecallback":375,"lodash._baseeach":379,"lodash._isiterateecall":380,"lodash.isarray":418,"lodash.keys":423}],375:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":376,"lodash._bindcallback":378,"lodash.keys":423}],376:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":377,"lodash.keys":423}],377:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],378:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],379:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],380:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],381:[function(e,t,i){function n(e,t,i){var n=e?e.length:0
return n?((i?a(e,t,i):null==t)&&(t=1),r(e,0,0>t?0:t)):[]}var r=e("lodash._baseslice"),a=e("lodash._isiterateecall")
t.exports=n},{"lodash._baseslice":382,"lodash._isiterateecall":383}],382:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],383:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],384:[function(e,t,i){var n=e("lodash._basedifference"),r=e("lodash.isarguments"),a=e("lodash.isarray"),o=e("lodash.restparam"),s=o(function(e,t){return a(e)||r(e)?n(e,t):[]})
t.exports=s},{"lodash._basedifference":385,"lodash.isarguments":390,"lodash.isarray":418,"lodash.restparam":391}],385:[function(e,t,i){arguments[4][207][0].apply(i,arguments)},{dup:207,"lodash._baseindexof":386,"lodash._cacheindexof":387,"lodash._createcache":388}],386:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],387:[function(e,t,i){arguments[4][209][0].apply(i,arguments)},{dup:209}],388:[function(e,t,i){arguments[4][210][0].apply(i,arguments)},{dup:210,"lodash.isnative":389}],389:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],390:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],391:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],392:[function(e,t,i){arguments[4][53][0].apply(i,arguments)},{dup:53,"lodash._baseassign":393,"lodash._createassigner":395,"lodash.isnative":399,"lodash.keys":423}],393:[function(e,t,i){arguments[4][54][0].apply(i,arguments)},{dup:54,"lodash._basecopy":394,"lodash.isnative":399,"lodash.keys":423}],394:[function(e,t,i){arguments[4][55][0].apply(i,arguments)},{dup:55}],395:[function(e,t,i){arguments[4][56][0].apply(i,arguments)},{dup:56,"lodash._bindcallback":396,"lodash._isiterateecall":397,"lodash.restparam":398}],396:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],397:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],398:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],399:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],400:[function(e,t,i){var n=e("lodash._basedifference"),r=e("lodash._baseflatten"),a=e("lodash.isarguments"),o=e("lodash.isarray"),s=e("lodash.restparam"),h=s(function(e,t){return o(e)||a(e)?n(e,r(t,!1,!0)):[]})
t.exports=h},{"lodash._basedifference":401,"lodash._baseflatten":406,"lodash.isarguments":407,"lodash.isarray":418,"lodash.restparam":408}],401:[function(e,t,i){arguments[4][207][0].apply(i,arguments)},{dup:207,"lodash._baseindexof":402,"lodash._cacheindexof":403,"lodash._createcache":404}],402:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],403:[function(e,t,i){arguments[4][209][0].apply(i,arguments)},{dup:209}],404:[function(e,t,i){arguments[4][210][0].apply(i,arguments)},{dup:210,"lodash.isnative":405}],405:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],406:[function(e,t,i){arguments[4][212][0].apply(i,arguments)},{dup:212,"lodash.isarguments":407,"lodash.isarray":418}],407:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],408:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],409:[function(e,t,i){arguments[4][86][0].apply(i,arguments)},{dup:86,"lodash._arrayeach":410,"lodash._baseeach":411,"lodash._bindcallback":412,"lodash.isarray":418}],410:[function(e,t,i){arguments[4][87][0].apply(i,arguments)},{dup:87}],411:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],412:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],413:[function(e,t,i){arguments[4][185][0].apply(i,arguments)},{dup:185,"lodash._baseindexof":414,"lodash._basevalues":415,"lodash._isiterateecall":416,"lodash.isarray":418,"lodash.isstring":417,"lodash.keys":423}],414:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],415:[function(e,t,i){arguments[4][187][0].apply(i,arguments)},{dup:187}],416:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],417:[function(e,t,i){arguments[4][95][0].apply(i,arguments)},{dup:95}],418:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],419:[function(e,t,i){arguments[4][193][0].apply(i,arguments)},{dup:193,"lodash._baseisequal":420,"lodash._bindcallback":422}],420:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":421,"lodash.keys":423}],421:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],422:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],423:[function(e,t,i){arguments[4][61][0].apply(i,arguments)},{dup:61,"lodash.isarguments":424,"lodash.isarray":418,"lodash.isnative":425}],424:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],425:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],426:[function(e,t,i){function n(e,t,i,n){var r=-1,a=e.length
for(n&&a&&(i=e[++r]);++r<a;)i=t(i,e[r],r,e)
return i}function r(e,t){return function(i,n,r,o){var l=arguments.length<3
return"function"==typeof n&&void 0===o&&h(i)?e(i,n,r,l):s(i,a(n,o,4),r,l,t)}}var a=e("lodash._basecallback"),o=e("lodash._baseeach"),s=e("lodash._basereduce"),h=e("lodash.isarray"),l=(e("lodash.keys"),r(n,o))
t.exports=l},{"lodash._basecallback":427,"lodash._baseeach":431,"lodash._basereduce":432,"lodash.isarray":418,"lodash.keys":423}],427:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":428,"lodash._bindcallback":430,"lodash.keys":423}],428:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":429,"lodash.keys":423}],429:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],430:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],431:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],432:[function(e,t,i){arguments[4][353][0].apply(i,arguments)},{dup:353}],433:[function(e,t,i){function n(e,t){return l(e.criteria,t.criteria)||e.index-t.index}function r(e,t){var i=-1,n=f(e),r=o(n)?Array(n):[]
return c(e,function(e,n,a){r[++i]=t(e,n,a)}),r}function a(e){return function(t){return null==t?void 0:t[e]}}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&p>=e}function s(e,t,i){if(null==e)return[]
i&&d(e,t,i)&&(t=null)
var a=-1
t=h(t,i,3)
var o=r(e,function(e,i,n){return{criteria:t(e,i,n),index:++a,value:e}})
return u(o,n)}var h=e("lodash._basecallback"),l=e("lodash._basecompareascending"),c=e("lodash._baseeach"),u=e("lodash._basesortby"),d=e("lodash._isiterateecall"),p=(e("lodash.isarray"),e("lodash.keys"),Math.pow(2,53)-1),f=a("length")
t.exports=s},{"lodash._basecallback":434,"lodash._basecompareascending":438,"lodash._baseeach":439,"lodash._basesortby":440,"lodash._isiterateecall":441,"lodash.isarray":418,"lodash.keys":423}],434:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":435,"lodash._bindcallback":437,"lodash.keys":423}],435:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":418,"lodash.istypedarray":436,"lodash.keys":423}],436:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],437:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],438:[function(e,t,i){function n(e,t){if(e!==t){var i=e===e,n=t===t
if(e>t||!i||void 0===e&&n)return 1
if(t>e||!n||void 0===t&&i)return-1}return 0}t.exports=n},{}],439:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":423}],440:[function(e,t,i){function n(e,t){var i=e.length
for(e.sort(t);i--;)e[i]=e[i].value
return e}t.exports=n},{}],441:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],442:[function(e,t,i){arguments[4][226][0].apply(i,arguments)},{dup:226,"lodash._baseflatten":443,"lodash._baseuniq":445,"lodash.restparam":450}],443:[function(e,t,i){arguments[4][212][0].apply(i,arguments)},{dup:212,"lodash.isarguments":444,"lodash.isarray":418}],444:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],445:[function(e,t,i){arguments[4][229][0].apply(i,arguments)},{dup:229,"lodash._baseindexof":446,"lodash._cacheindexof":447,"lodash._createcache":448}],446:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],447:[function(e,t,i){arguments[4][209][0].apply(i,arguments)},{dup:209}],448:[function(e,t,i){arguments[4][210][0].apply(i,arguments)},{dup:210,"lodash.isnative":449}],449:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],450:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],451:[function(e,t,i){function n(e){this.cid=s("view"),e||(e={})
var t=e.parent
delete e.parent,x.call(this,e,{init:!1,parent:t}),this.on("change:el",this._handleElementChange,this),this._parsedBindings=w(this.bindings,this),this._initializeBindings(),e.el&&!this.autoRender&&this._handleElementChange(),this._initializeSubviews(),this.template=e.template||this.template,this.initialize.apply(this,arguments),this.set(h(e,_)),this.autoRender&&this.template&&this.render()}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-view"]=window.ampersand["ampersand-view"]||[],window.ampersand["ampersand-view"].push("7.3.0"))
var r=e("ampersand-state"),a=e("ampersand-collection-view"),o=e("domify"),s=e("lodash.uniqueid"),h=e("lodash.pick"),l=e("lodash.assign"),c=e("lodash.foreach"),u=e("lodash.result"),d=e("lodash.last"),p=e("lodash.isstring"),f=e("lodash.bind"),m=e("lodash.flatten"),g=e("lodash.invoke"),v=e("events-mixin"),y=e("matches-selector"),w=e("ampersand-dom-bindings"),b=e("get-object-path"),x=r.extend({dataTypes:{element:{set:function(e){return{val:e,type:e instanceof Element?"element":typeof e}},compare:function(e,t){return e===t}},collection:{set:function(e){return{val:e,type:e&&e.isCollection?"collection":typeof e}},compare:function(e,t){return e===t}}},props:{model:"state",el:"element",collection:"collection"},derived:{rendered:{deps:["el"],fn:function(){return!!this.el}},hasData:{deps:["model"],fn:function(){return!!this.model}}}}),_=["model","collection","el"]
n.prototype=Object.create(x.prototype),l(n.prototype,{query:function(e){return e?"string"==typeof e?y(this.el,e)?this.el:this.el.querySelector(e)||void 0:e:this.el},queryAll:function(e){var t=[]
return this.el?""===e?[this.el]:(y(this.el,e)&&t.push(this.el),t.concat(Array.prototype.slice.call(this.el.querySelectorAll(e)))):t},queryByHook:function(e){return this.query('[data-hook~="'+e+'"]')},initialize:function(){},render:function(){return this.renderWithTemplate(this),this},remove:function(){var e=this._parsedBindings
return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this._subviews&&g(m(this._subviews),"remove"),this.stopListening(),c(e,function(t,i){c(t,function(t,n){delete e[i][n]}),delete e[i]}),this.trigger("remove",this),this},_handleElementChange:function(e,t){return this.eventManager&&this.eventManager.unbind(),this.eventManager=v(this.el,this),this.delegateEvents(),this._applyBindingsForKey(),this},delegateEvents:function(e){if(!e&&!(e=u(this,"events")))return this
this.undelegateEvents()
for(var t in e)this.eventManager.bind(t,e[t])
return this},undelegateEvents:function(){return this.eventManager.unbind(),this},registerSubview:function(e){return this._subviews||(this._subviews=[]),this._subviews.push(e),e.el&&(e.parent=this),e},renderSubview:function(e,t){return"string"==typeof t&&(t=this.query(t)),this.registerSubview(e),e.render(),(t||this.el).appendChild(e.el),e},_applyBindingsForKey:function(e){if(this.el){var t,i=this._parsedBindings.getGrouped(e)
for(t in i)i[t].forEach(function(e){e(this.el,b(this,t),d(t.split(".")))},this)}},_initializeBindings:function(){this.bindings&&this.on("all",function(e){"change:"===e.slice(0,7)&&this._applyBindingsForKey(e.split(":")[1])},this)},_initializeSubviews:function(){if(this.subviews)for(var e in this.subviews)this._parseSubview(this.subviews[e],e)},_parseSubview:function(e,t){function i(){var e,n
this.el&&(e=this.query(r.selector))&&(!r.waitFor||b(this,r.waitFor))&&(n=this[t]=r.prepareView.call(this,e),n.render(),this.registerSubview(n),this.off("change",i))}var n=this,r={selector:e.container||'[data-hook="'+e.hook+'"]',waitFor:e.waitFor||"",prepareView:e.prepareView||function(t){return new e.constructor({el:t,parent:n})}}
this.on("change",i,this)},renderWithTemplate:function(e,t){var i=t||this.template
if(!i)throw new Error("Template string or function needed.")
var n=p(i)?i:i.call(this,e||this)
p(n)&&(n=o(n))
var r=this.el&&this.el.parentNode
if(r&&r.replaceChild(n,this.el),"#document-fragment"===n.nodeName)throw new Error("Views can only have one root element.")
return this.el=n,this},cacheElements:function(e){for(var t in e)this[t]=this.query(e[t])
return this},listenToAndRun:function(e,t,i){var n=f(i,this)
this.listenTo(e,t,n),n()},animateRemove:function(){this.remove()},renderCollection:function(e,t,i,n){var r="string"==typeof i?this.query(i):i,o=l({collection:e,el:r||this.el,view:t,parent:this,viewOptions:{parent:this}},n),s=new a(o)
return s.render(),this.registerSubview(s)}}),n.extend=x.extend,t.exports=n},{"ampersand-collection-view":452,"ampersand-dom-bindings":476,"ampersand-state":145,domify:478,"events-mixin":479,"get-object-path":484,"lodash.assign":485,"lodash.bind":496,"lodash.flatten":502,"lodash.foreach":507,"lodash.invoke":515,"lodash.isstring":527,"lodash.last":528,"lodash.pick":529,"lodash.result":541,"lodash.uniqueid":548,"matches-selector":550}],452:[function(e,t,i){function n(e){if(!e)throw new ReferenceError("Collection view missing required parameters: collection, el")
if(!e.collection)throw new ReferenceError("Collection view requires a collection")
if(!e.el&&!this.insertSelf)throw new ReferenceError("Collection view requires an el")
r(this,o(e,u)),this.views=[],this.listenTo(this.collection,"add",this._addViewForModel),this.listenTo(this.collection,"remove",this._removeViewForModel),this.listenTo(this.collection,"sort",this._rerenderAll),this.listenTo(this.collection,"refresh reset",this._reset)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-collection-view"]=window.ampersand["ampersand-collection-view"]||[],window.ampersand["ampersand-collection-view"].push("1.4.0"))
var r=e("lodash.assign"),a=e("lodash.invoke"),o=e("lodash.pick"),s=e("lodash.find"),h=e("lodash.difference"),l=e("ampersand-events"),c=e("ampersand-class-extend"),u=["collection","el","viewOptions","view","emptyView","filter","reverse","parent"]
r(n.prototype,l,{render:function(){return this._renderAll(),this},remove:function(){a(this.views,"remove"),this.stopListening()},_getViewByModel:function(e){return s(this.views,function(t){return e===t.model})},_createViewForModel:function(e,t){var i={model:e,collection:this.collection,parent:this},n=new this.view(r(i,this.viewOptions))
return this.views.push(n),n.renderedByParentView=!0,n.render(t),n},_getOrCreateByModel:function(e,t){return this._getViewByModel(e)||this._createViewForModel(e,t)},_addViewForModel:function(e,t,i){var n=this.filter?this.filter(e):!0
if(n){this.renderedEmptyView&&(this.renderedEmptyView.remove(),delete this.renderedEmptyView)
var r=this._getOrCreateByModel(e,{containerEl:this.el})
i&&i.rerender?this._insertView(r):this._insertViewAtIndex(r)}},_insertViewAtIndex:function(e){if(!e.insertSelf){var t,i,n=this.collection.indexOf(e.model)
t=this.collection.at(this.reverse?n-1:n+1),i=this._getViewByModel(t),i?this.el.insertBefore(e.el,i&&i.el):this.el.appendChild(e.el)}},_insertView:function(e){e.insertSelf||(this.reverse&&this.el.firstChild?this.el.insertBefore(e.el,this.el.firstChild):this.el.appendChild(e.el))},_removeViewForModel:function(e){var t=this._getViewByModel(e)
if(t){var i=this.views.indexOf(t);-1!==i&&(t=this.views.splice(i,1)[0],this._removeView(t),0===this.views.length&&this._renderEmptyView())}},_removeView:function(e){e.animateRemove?e.animateRemove():e.remove()},_renderAll:function(){this.collection.each(this._addViewForModel,this),0===this.views.length&&this._renderEmptyView()},_rerenderAll:function(e,t){t=t||{},this.collection.each(function(e){this._addViewForModel(e,this,r(t,{rerender:!0}))},this)},_renderEmptyView:function(){if(this.emptyView&&!this.renderedEmptyView){var e=this.renderedEmptyView=new this.emptyView({parent:this})
this.el.appendChild(e.render().el)}},_reset:function(){var e=this.collection.map(this._getOrCreateByModel,this),t=h(this.views,e)
t.forEach(this._removeView,this),this.views=e,this._rerenderAll(),0===this.views.length&&this._renderEmptyView()}}),n.extend=c,t.exports=n},{"ampersand-class-extend":453,"ampersand-events":71,"lodash.assign":485,"lodash.difference":454,"lodash.find":464,"lodash.invoke":515,"lodash.pick":529}],453:[function(e,t,i){arguments[4][52][0].apply(i,arguments)},{dup:52,"lodash.assign":485}],454:[function(e,t,i){arguments[4][400][0].apply(i,arguments)},{dup:400,"lodash._basedifference":455,"lodash._baseflatten":460,"lodash.isarguments":461,"lodash.isarray":462,"lodash.restparam":463}],455:[function(e,t,i){arguments[4][207][0].apply(i,arguments)},{dup:207,"lodash._baseindexof":456,"lodash._cacheindexof":457,"lodash._createcache":458}],456:[function(e,t,i){arguments[4][186][0].apply(i,arguments)},{dup:186}],457:[function(e,t,i){arguments[4][209][0].apply(i,arguments)},{dup:209}],458:[function(e,t,i){arguments[4][210][0].apply(i,arguments)},{dup:210,"lodash.isnative":459}],459:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],460:[function(e,t,i){arguments[4][212][0].apply(i,arguments)},{dup:212,"lodash.isarguments":461,"lodash.isarray":462}],461:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],462:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],463:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],464:[function(e,t,i){arguments[4][266][0].apply(i,arguments)},{dup:266,"lodash._basecallback":465,"lodash._baseeach":469,"lodash._basefind":470,"lodash._basefindindex":471,"lodash.isarray":472,"lodash.keys":473}],465:[function(e,t,i){arguments[4][242][0].apply(i,arguments)},{dup:242,"lodash._baseisequal":466,"lodash._bindcallback":468,"lodash.keys":473}],466:[function(e,t,i){arguments[4][194][0].apply(i,arguments)},{dup:194,"lodash.isarray":472,"lodash.istypedarray":467,"lodash.keys":473}],467:[function(e,t,i){arguments[4][195][0].apply(i,arguments)},{dup:195}],468:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],469:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":473}],470:[function(e,t,i){arguments[4][272][0].apply(i,arguments)},{dup:272}],471:[function(e,t,i){arguments[4][273][0].apply(i,arguments)},{dup:273}],472:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],473:[function(e,t,i){arguments[4][61][0].apply(i,arguments)},{dup:61,"lodash.isarguments":474,"lodash.isarray":472,"lodash.isnative":475}],474:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],475:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],476:[function(e,t,i){function n(e,t){if(""===t)return[e]
var i=[]
return c(e,t)&&i.push(e),i.concat(u.call(e.querySelectorAll(t)))}function r(e,t){for(var i in t)l.setAttribute(e,i,t[i])}function a(e,t){for(var i in t)l.removeAttribute(e,i)}function o(e){return Array.isArray(e)?e:[e]}function s(e,t){var i,s=e.type||"text",h="function"==typeof s,c=function(){return"string"==typeof e.selector?e.selector:e.hook?'[data-hook~="'+e.hook+'"]':""}(),u=e.yes,d=e.no,p=!(!u&&!d)
if(h)return function(e,r){n(e,c).forEach(function(e){s.call(t,e,r,i)}),i=r}
if("text"===s)return function(e,t){n(e,c).forEach(function(e){l.text(e,t)})}
if("class"===s)return function(e,t){n(e,c).forEach(function(e){l.switchClass(e,i,t)}),i=t}
if("attribute"===s){if(!e.name)throw Error('attribute bindings must have a "name"')
return function(t,r){var a=o(e.name)
n(t,c).forEach(function(e){a.forEach(function(t){l.setAttribute(e,t,r)})}),i=r}}if("value"===s)return function(e,t){n(e,c).forEach(function(e){t||0===t||(t=""),document.activeElement!==e&&(e.value=t)}),i=t}
if("booleanClass"===s)return p?(u=o(u||""),d=o(d||""),function(e,t){var i=t?d:u,r=t?u:d
n(e,c).forEach(function(e){i.forEach(function(t){l.removeClass(e,t)}),r.forEach(function(t){l.addClass(e,t)})})}):function(t,i,r){var a=o(e.name||r)
n(t,c).forEach(function(e){a.forEach(function(t){l[i?"addClass":"removeClass"](e,t)})})}
if("booleanAttribute"===s)return p?(u=o(u||""),d=o(d||""),function(e,t){var i=t?d:u,r=t?u:d
n(e,c).forEach(function(e){i.forEach(function(t){t&&l.removeAttribute(e,t)}),r.forEach(function(t){t&&l.addAttribute(e,t)})})}):function(t,i,r){var a=o(e.name||r)
n(t,c).forEach(function(e){a.forEach(function(t){l[i?"addAttribute":"removeAttribute"](e,t)})})}
if("toggle"===s){var f=e.mode||"display"
return p?function(e,t){n(e,u).forEach(function(e){l[t?"show":"hide"](e,f)}),n(e,d).forEach(function(e){l[t?"hide":"show"](e,f)})}:function(e,t){n(e,c).forEach(function(e){l[t?"show":"hide"](e,f)})}}if("switch"===s){if(!e.cases)throw Error('switch bindings must have "cases"')
return function(t,i){for(var r in e.cases)n(t,e.cases[r]).forEach(function(e){l[i===r?"show":"hide"](e)})}}if("innerHTML"===s)return function(e,t){n(e,c).forEach(function(e){l.html(e,t)})}
if("switchClass"===s){if(!e.cases)throw Error('switchClass bindings must have "cases"')
return function(t,i,r){var a=o(e.name||r)
for(var s in e.cases)n(t,e.cases[s]).forEach(function(e){a.forEach(function(t){l[i===s?"addClass":"removeClass"](e,t)})})}}if("switchAttribute"===s){if(!e.cases)throw Error('switchAttribute bindings must have "cases"')
return function(t,o,s){n(t,c).forEach(function(t){if(i&&a(t,i),o in e.cases){var n=e.cases[o]
"string"==typeof n&&(n={},n[e.name||s]=e.cases[o]),r(t,n),i=n}})}}throw new Error("no such binding type: "+s)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-dom-bindings"]=window.ampersand["ampersand-dom-bindings"]||[],window.ampersand["ampersand-dom-bindings"].push("3.5.0"))
var h=e("key-tree-store"),l=e("ampersand-dom"),c=e("matches-selector")
t.exports=function(e,t){var i,n,r=new h
for(i in e)n=e[i],"string"==typeof n?r.add(i,s({type:"text",selector:n})):n.forEach?n.forEach(function(e){r.add(i,s(e,t))}):r.add(i,s(n,t))
return r}
var u=Array.prototype.slice},{"ampersand-dom":70,"key-tree-store":477,"matches-selector":550}],477:[function(e,t,i){arguments[4][147][0].apply(i,arguments)},{dup:147}],478:[function(e,t,i){arguments[4][143][0].apply(i,arguments)},{dup:143}],479:[function(e,t,i){function n(e,t){if(!(this instanceof n))return new n(e,t)
if(!e)throw new Error("element required")
if(!t)throw new Error("object required")
this.el=e,this.obj=t,this._events={}}function r(e){var t=e.split(/ +/)
return{name:t.shift(),selector:t.join(" ")}}var a=e("component-event"),o=e("delegate-events"),s=["focus","blur"]
t.exports=n,n.prototype.sub=function(e,t,i){this._events[e]=this._events[e]||{},this._events[e][t]=i},n.prototype.bind=function(e,t){function i(){var e=[].slice.call(arguments).concat(c)
if("function"==typeof t)return void t.apply(h,e)
if(!h[t])throw new Error(t+" method is not defined")
h[t].apply(h,e)}var n=r(e),s=this.el,h=this.obj,l=n.name,t=t||"on"+l,c=[].slice.call(arguments,2)
return n.selector?i=o.bind(s,n.selector,l,i):a.bind(s,l,i),this.sub(l,t,i),i},n.prototype.unbind=function(e,t){if(0==arguments.length)return this.unbindAll()
if(1==arguments.length)return this.unbindAllOf(e)
var i=this._events[e],n=-1!==s.indexOf(e)
if(i){var r=i[t]
r&&a.unbind(this.el,e,r,n)}},n.prototype.unbindAll=function(){for(var e in this._events)this.unbindAllOf(e)},n.prototype.unbindAllOf=function(e){var t=this._events[e]
if(t)for(var i in t)this.unbind(e,i)}},{"component-event":480,"delegate-events":481}],480:[function(e,t,i){var n=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",a="addEventListener"!==n?"on":""
i.bind=function(e,t,i,r){return e[n](a+t,i,r||!1),i},i.unbind=function(e,t,i,n){return e[r](a+t,i,n||!1),i}},{}],481:[function(e,t,i){var n=e("closest"),r=e("event"),a=["focus","blur"]
i.bind=function(e,t,i,o,s){return-1!==a.indexOf(i)&&(s=!0),r.bind(e,i,function(i){var r=i.target||i.srcElement
i.delegateTarget=n(r,t,!0,e),i.delegateTarget&&o.call(e,i)},s)},i.unbind=function(e,t,i,n){-1!==a.indexOf(t)&&(n=!0),r.unbind(e,t,i,n)}},{closest:482,event:480}],482:[function(e,t,i){var n=e("matches-selector")
t.exports=function(e,t,i){for(var r=i?e:e.parentNode;r&&r!==document;){if(n(r,t))return r
r=r.parentNode}}},{"matches-selector":483}],483:[function(e,t,i){function n(e,t){if(a)return a.call(e,t)
for(var i=e.parentNode.querySelectorAll(t),n=0;n<i.length;++n)if(i[n]==e)return!0
return!1}var r=Element.prototype,a=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector
t.exports=n},{}],484:[function(e,t,i){function n(e,t){if(-1==t.indexOf(".")&&-1==t.indexOf("["))return e[t]
for(var i,n=t.split(/\.|\[|\]/g),r=-1,a=n.length;++r<a;)if(0==r&&(i=e),n[r]){if(void 0==i)break
i=i[n[r]]}return i}t.exports=n},{}],485:[function(e,t,i){arguments[4][53][0].apply(i,arguments)},{dup:53,"lodash._baseassign":486,"lodash._createassigner":488,"lodash.isnative":492,"lodash.keys":493}],486:[function(e,t,i){arguments[4][54][0].apply(i,arguments)},{dup:54,"lodash._basecopy":487,"lodash.isnative":492,"lodash.keys":493}],487:[function(e,t,i){arguments[4][55][0].apply(i,arguments)},{dup:55}],488:[function(e,t,i){arguments[4][56][0].apply(i,arguments)},{dup:56,"lodash._bindcallback":489,"lodash._isiterateecall":490,"lodash.restparam":491}],489:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],490:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],491:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],492:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],493:[function(e,t,i){arguments[4][61][0].apply(i,arguments)},{dup:61,"lodash.isarguments":494,"lodash.isarray":495,"lodash.isnative":492}],494:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],495:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],496:[function(e,t,i){arguments[4][63][0].apply(i,arguments)},{dup:63,"lodash._createwrapper":497,"lodash._replaceholders":500,"lodash.restparam":501}],497:[function(e,t,i){arguments[4][64][0].apply(i,arguments)},{dup:64,"lodash._arraycopy":498,"lodash._basecreate":499,"lodash._replaceholders":500}],498:[function(e,t,i){arguments[4][65][0].apply(i,arguments)},{dup:65}],499:[function(e,t,i){arguments[4][66][0].apply(i,arguments)},{dup:66}],500:[function(e,t,i){arguments[4][67][0].apply(i,arguments)},{dup:67}],501:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],502:[function(e,t,i){function n(e,t,i){var n=e?e.length:0
return i&&a(e,t,i)&&(t=!1),n?r(e,t):[]}var r=e("lodash._baseflatten"),a=e("lodash._isiterateecall")
t.exports=n},{"lodash._baseflatten":503,"lodash._isiterateecall":506}],503:[function(e,t,i){arguments[4][212][0].apply(i,arguments)},{dup:212,"lodash.isarguments":504,"lodash.isarray":505}],504:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],505:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],506:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],507:[function(e,t,i){arguments[4][86][0].apply(i,arguments)},{dup:86,"lodash._arrayeach":508,"lodash._baseeach":509,"lodash._bindcallback":513,"lodash.isarray":514}],508:[function(e,t,i){arguments[4][87][0].apply(i,arguments)},{dup:87}],509:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":510}],510:[function(e,t,i){arguments[4][61][0].apply(i,arguments)},{dup:61,"lodash.isarguments":511,"lodash.isarray":514,"lodash.isnative":512}],511:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],512:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],513:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],514:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],515:[function(e,t,i){arguments[4][295][0].apply(i,arguments)},{dup:295,"lodash._baseeach":516,"lodash._invokepath":520,"lodash.isarray":525,"lodash.restparam":526}],516:[function(e,t,i){arguments[4][88][0].apply(i,arguments)},{dup:88,"lodash.keys":517}],517:[function(e,t,i){arguments[4][61][0].apply(i,arguments)},{dup:61,"lodash.isarguments":518,"lodash.isarray":525,"lodash.isnative":519}],518:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],519:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{dup:60}],520:[function(e,t,i){arguments[4][297][0].apply(i,arguments)},{dup:297,"lodash._baseget":521,"lodash._baseslice":522,"lodash._topath":523,"lodash.isarray":525}],521:[function(e,t,i){arguments[4][181][0].apply(i,arguments)},{dup:181}],522:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],523:[function(e,t,i){arguments[4][183][0].apply(i,arguments)},{dup:183,"lodash._basetostring":524,"lodash.isarray":525}],524:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],525:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],526:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],527:[function(e,t,i){arguments[4][95][0].apply(i,arguments)},{dup:95}],528:[function(e,t,i){function n(e){var t=e?e.length:0
return t?e[t-1]:void 0}t.exports=n},{}],529:[function(e,t,i){var n=e("lodash._baseflatten"),r=e("lodash._bindcallback"),a=e("lodash._pickbyarray"),o=e("lodash._pickbycallback"),s=e("lodash.restparam"),h=s(function(e,t){return null==e?{}:"function"==typeof t[0]?o(e,r(t[0],t[1],3)):a(e,n(t))})
t.exports=h},{"lodash._baseflatten":530,"lodash._bindcallback":533,"lodash._pickbyarray":534,"lodash._pickbycallback":535,"lodash.restparam":540}],530:[function(e,t,i){arguments[4][212][0].apply(i,arguments)},{dup:212,"lodash.isarguments":531,"lodash.isarray":532}],531:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],532:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],533:[function(e,t,i){arguments[4][57][0].apply(i,arguments)},{dup:57}],534:[function(e,t,i){arguments[4][215][0].apply(i,arguments)},{dup:215}],535:[function(e,t,i){arguments[4][216][0].apply(i,arguments)},{dup:216,"lodash._basefor":536,"lodash.keysin":537}],536:[function(e,t,i){arguments[4][168][0].apply(i,arguments)},{dup:168}],537:[function(e,t,i){arguments[4][218][0].apply(i,arguments)},{dup:218,"lodash.isarguments":538,"lodash.isarray":539}],538:[function(e,t,i){arguments[4][62][0].apply(i,arguments)},{dup:62}],539:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],540:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],541:[function(e,t,i){arguments[4][221][0].apply(i,arguments)},{dup:221,"lodash._baseget":542,"lodash._baseslice":543,"lodash._topath":544,"lodash.isarray":546,"lodash.isfunction":547}],542:[function(e,t,i){arguments[4][181][0].apply(i,arguments)},{dup:181}],543:[function(e,t,i){arguments[4][182][0].apply(i,arguments)},{dup:182}],544:[function(e,t,i){arguments[4][183][0].apply(i,arguments)},{dup:183,"lodash._basetostring":545,"lodash.isarray":546}],545:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],546:[function(e,t,i){arguments[4][69][0].apply(i,arguments)},{dup:69}],547:[function(e,t,i){arguments[4][94][0].apply(i,arguments)},{dup:94}],548:[function(e,t,i){arguments[4][102][0].apply(i,arguments)},{dup:102,"lodash._basetostring":549}],549:[function(e,t,i){arguments[4][103][0].apply(i,arguments)},{dup:103}],550:[function(e,t,i){arguments[4][144][0].apply(i,arguments)},{dup:144}],551:[function(e,t,i){!function(t){"use strict"
"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):"object"==typeof i?t(e("jquery"),e("./vendor/jquery.ui.widget")):t(window.jQuery)}(function(e){"use strict"
function t(t){var i="dragover"===t
return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer
var r=n.dataTransfer
r&&-1!==e.inArray("Files",r.types)&&this._trigger(t,e.Event(t,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(r.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice
return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp
return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i
return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0
return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0}
t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t
if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t]
else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,r=Date.now?Date.now():(new Date).getTime()
if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&t.loaded!==t.total)return
i._time=r,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr()
n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent
e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,r=t.files[0],a=t.multipart||!e.support.xhrFileUpload,o="array"===e.type(t.paramName)?t.paramName[0]:t.paramName
t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),a&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),a?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:o,value:t.blob}):e.each(t.files,function(n,r){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||o,value:r})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(o,t.blob,r.name):e.each(t.files,function(r,a){(n._isInstanceOf("File",a)||n._isInstanceOf("Blob",a))&&i.append("array"===e.type(t.paramName)&&t.paramName[r]||o,a,a.uploadName||a.name)})),t.data=i):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host")
t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName
return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)n.push(i),r-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t)
return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var r=e.Deferred(),a=r.promise()
return i=i||this.options.context||a,t===!0?r.resolveWith(i,n):t===!1&&r.rejectWith(i,n),a.abort=r.promise,this._enhancePromise(a)},_addConvenienceMethods:function(t,i){var n=this,r=function(t){return e.Deferred().resolveWith(n,t).promise()}
i.process=function(t,a){return(t||a)&&(i._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():r(arguments)}).pipe(t,a)),this._processQueue||r([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10)
return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0
var n,r,a=this,o=t.files[0],s=o.size,h=t.uploadedBytes,l=t.maxChunkSize||s,c=this._blobSlice,u=e.Deferred(),d=u.promise()
return this._isXHRUpload(t)&&c&&(h||s>l)&&!t.data?i?!0:h>=s?(o.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",o.error])):(r=function(){var i=e.extend({},t),d=i._progress.loaded
i.blob=c.call(o,h,h+l,o.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+h+"-"+(h+i.chunkSize-1)+"/"+s,a._initXHRData(i),a._initProgressListener(i),n=(a._trigger("chunksend",null,i)!==!1&&e.ajax(i)||a._getXHRPromise(!1,i.context)).done(function(n,o,l){h=a._getUploadedBytes(l)||h+i.chunkSize,d+i.chunkSize-i._progress.loaded&&a._onProgress(e.Event("progress",{lengthComputable:!0,loaded:h-i.uploadedBytes,total:h-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=h,i.result=n,i.textStatus=o,i.jqXHR=l,a._trigger("chunkdone",null,i),a._trigger("chunkalways",null,i),s>h?r():u.resolveWith(i.context,[n,o,l])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,a._trigger("chunkfail",null,i),a._trigger("chunkalways",null,i),u.rejectWith(i.context,[e,t,n])})},this._enhancePromise(d),d.abort=function(){return n.abort()},r(),d):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,r){var a=r._progress.total,o=r._response
r._progress.loaded<a&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:a,total:a}),r),o.result=r.result=t,o.textStatus=r.textStatus=i,o.jqXHR=r.jqXHR=n,this._trigger("done",null,r)},_onFail:function(e,t,i,n){var r=n._response
n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),r.jqXHR=n.jqXHR=e,r.textStatus=n.textStatus=t,r.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i)
var n,r,a,o,s=this,h=s._getAJAXSettings(i),l=function(){return s._sending+=1,h._bitrateTimer=new s._BitrateTimer,n=n||((r||s._trigger("send",e.Event("send",{delegatedEvent:t}),h)===!1)&&s._getXHRPromise(!1,h.context,r)||s._chunkedUpload(h)||e.ajax(h)).done(function(e,t,i){s._onDone(e,t,i,h)}).fail(function(e,t,i){s._onFail(e,t,i,h)}).always(function(e,t,i){if(s._onAlways(e,t,i,h),s._sending-=1,s._active-=1,h.limitConcurrentUploads&&h.limitConcurrentUploads>s._sending)for(var n=s._slots.shift();n;){if("pending"===s._getDeferredState(n)){n.resolve()
break}n=s._slots.shift()}0===s._active&&s._trigger("stop")})}
return this._beforeSend(t,h),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=e.Deferred(),this._slots.push(a),o=a.pipe(l)):(this._sequence=this._sequence.pipe(l,l),o=this._sequence),o.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(a&&a.rejectWith(h.context,r),l())},this._enhancePromise(o)):l()},_onAdd:function(t,i){var n,r,a,o,s=this,h=!0,l=e.extend({},this.options,i),c=i.files,u=c.length,d=l.limitMultiFileUploads,p=l.limitMultiFileUploadSize,f=l.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(l),v=0
if(!p||u&&void 0!==c[0].size||(p=void 0),(l.singleFileUploads||d||p)&&this._isXHRUpload(l))if(l.singleFileUploads||p||!d)if(!l.singleFileUploads&&p)for(a=[],n=[],o=0;u>o;o+=1)m+=c[o].size+f,(o+1===u||m+c[o+1].size+f>p||d&&o+1-v>=d)&&(a.push(c.slice(v,o+1)),r=g.slice(v,o+1),r.length||(r=g),n.push(r),v=o+1,m=0)
else n=g
else for(a=[],n=[],o=0;u>o;o+=d)a.push(c.slice(o,o+d)),r=g.slice(o,o+d),r.length||(r=g),n.push(r)
else a=[c],n=[g]
return i.originalFiles=c,e.each(a||c,function(r,o){var l=e.extend({},i)
return l.files=a?o:[o],l.paramName=n[r],s._initResponseObject(l),s._initProgressObject(l),s._addConvenienceMethods(t,l),h=s._trigger("add",e.Event("add",{delegatedEvent:t}),l)}),h},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0)
t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,r=this,a=e.Deferred(),o=function(e){e&&!e.entry&&(e.entry=t),a.resolve([e])},s=function(e){r._handleFileTreeEntries(e,i+t.name+"/").done(function(e){a.resolve(e)}).fail(o)},h=function(){n.readEntries(function(e){e.length?(l=l.concat(e),h()):s(l)},o)},l=[]
return i=i||"",t.isFile?t._file?(t._file.relativePath=i,a.resolve(t._file)):t.file(function(e){e.relativePath=i,a.resolve(e)},o):t.isDirectory?(n=t.createReader(),h()):a.resolve([]),a.promise()},_handleFileTreeEntries:function(t,i){var n=this
return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{}
var i=t.items
return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t
return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t)
var i,n,r=t.prop("webkitEntries")||t.prop("entries")
if(r&&r.length)return this._handleFileTreeEntries(r)
if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize})
else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise()
i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)}
this._getFileInputFiles(n.fileInput).always(function(r){n.files=r,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",e.Event("change",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]}
i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile()
i&&n.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)!==!1&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer
var i=this,n=t.dataTransfer,r={}
n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){r.files=n,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)!==!1&&i._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions)
n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options
void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop()
return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=this.element.data()
e.each(this.element[0].attributes,function(e,r){var a,o=r.name.toLowerCase();/^data-/.test(o)&&(o=o.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),a=n[o],t._isRegExpOption(o,a)&&(a=t._getRegExp(a)),i[o]=a)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this
t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,r=this,a=e.Deferred(),o=a.promise()
return o.abort=function(){return n=!0,i?i.abort():(a.reject(null,"abort","abort"),o)},this._getFileInputFiles(t.fileInput).always(function(e){if(!n){if(!e.length)return void a.reject()
t.files=e,i=r._onSend(null,t),i.then(function(e,t,i){a.resolve(e,t,i)},function(e,t,i){a.reject(e,t,i)})}}),this._enhancePromise(o)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})},{"./vendor/jquery.ui.widget":552,jquery:560}],552:[function(e,t,i){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof i?e("jquery"):jQuery)}(function(e){var t=0,i=Array.prototype.slice
e.cleanData=function(t){return function(i){var n,r,a
for(a=0;null!=(r=i[a]);a++)try{n=e._data(r,"events"),n&&n.remove&&e(r).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var r,a,o,s,h={},l=t.split(".")[0]
return t=t.split(".")[1],r=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),s=new i,s.options=e.widget.extend({},s.options),e.each(n,function(t,n){return e.isFunction(n)?void(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)}
return function(){var t,i=this._super,a=this._superApply
return this._super=e,this._superApply=r,t=n.apply(this,arguments),this._super=i,this._superApply=a,t}}()):void(h[t]=n)}),o.prototype=e.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,i){var n=i.prototype
e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,a=i.call(arguments,1),o=0,s=a.length;s>o;o++)for(n in a[o])r=a[o][n],a[o].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r)
return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t
e.fn[t]=function(a){var o="string"==typeof a,s=i.call(arguments,1),h=this
return a=!o&&s.length?e.widget.extend.apply(null,[a].concat(s)):a,this.each(o?function(){var i,n=e.data(this,r)
return"instance"===a?(h=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,s),i!==n&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,r)
t?(t.option(a||{}),t._init&&t._init()):e.data(this,r,new n(a,this))}),h}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,r,a,o=t
if(0===arguments.length)return e.widget.extend({},this.options)
if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(r=o[t]=e.widget.extend({},this.options[t]),a=0;a<n.length-1;a++)r[n[a]]=r[n[a]]||{},r=r[n[a]]
if(t=n.pop(),1===arguments.length)return void 0===r[t]?null:r[t]
r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t]
o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t
for(t in e)this._setOption(t,e[t])
return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var r,a=this
"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,o){function s(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++)
var h=n.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,c=h[2]
c?r.delegate(c,l,s):i.bind(l,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this
return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,a,o=this.options[t]
if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r])
return this.element.trigger(i,n),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,a){"string"==typeof r&&(r={effect:r})
var o,s=r?r===!0||"number"==typeof r?i:r.effect||i:t
r=r||{},"number"==typeof r&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),o&&e.effects&&e.effects.effect[s]?n[t](r):s!==t&&n[s]?n[s](r.duration,r.easing,a):n.queue(function(i){e(this)[t](),a&&a.call(n[0]),i()})}})
e.widget})},{jquery:560}],553:[function(e,t,i){function n(e){return this instanceof n?(this.length=0,this.parent=void 0,"number"==typeof e?r(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):o(this,e)):arguments.length>1?new n(e,arguments[1]):new n(e)}function r(e,t){if(e=d(e,0>t?0:0|p(t)),!n.TYPED_ARRAY_SUPPORT)for(var i=0;t>i;i++)e[i]=0
return e}function a(e,t,i){("string"!=typeof i||""===i)&&(i="utf8")
var n=0|m(t,i)
return e=d(e,n),e.write(t,i),e}function o(e,t){if(n.isBuffer(t))return s(e,t)
if(W(t))return h(e,t)
if(null==t)throw new TypeError("must start with number, buffer, array or string")
return"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer?l(e,t):t.length?c(e,t):u(e,t)}function s(e,t){var i=0|p(t.length)
return e=d(e,i),t.copy(e,0,0,i),e}function h(e,t){var i=0|p(t.length)
e=d(e,i)
for(var n=0;i>n;n+=1)e[n]=255&t[n]
return e}function l(e,t){var i=0|p(t.length)
e=d(e,i)
for(var n=0;i>n;n+=1)e[n]=255&t[n]
return e}function c(e,t){var i=0|p(t.length)
e=d(e,i)
for(var n=0;i>n;n+=1)e[n]=255&t[n]
return e}function u(e,t){var i,n=0
"Buffer"===t.type&&W(t.data)&&(i=t.data,n=0|p(i.length)),e=d(e,n)
for(var r=0;n>r;r+=1)e[r]=255&i[r]
return e}function d(e,t){n.TYPED_ARRAY_SUPPORT?e=n._augment(new Uint8Array(t)):(e.length=t,e._isBuffer=!0)
var i=0!==t&&t<=n.poolSize>>>1
return i&&(e.parent=Y),e}function p(e){if(e>=X)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+X.toString(16)+" bytes")
return 0|e}function f(e,t){if(!(this instanceof f))return new f(e,t)
var i=new n(e,t)
return delete i.parent,i}function m(e,t){if("string"!=typeof e&&(e=String(e)),0===e.length)return 0
switch(t||"utf8"){case"ascii":case"binary":case"raw":return e.length
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e.length
case"hex":return e.length>>>1
case"utf8":case"utf-8":return z(e).length
case"base64":return I(e).length
default:return e.length}}function g(e,t,i,n){i=Number(i)||0
var r=e.length-i
n?(n=Number(n),n>r&&(n=r)):n=r
var a=t.length
if(a%2!==0)throw new Error("Invalid hex string")
n>a/2&&(n=a/2)
for(var o=0;n>o;o++){var s=parseInt(t.substr(2*o,2),16)
if(isNaN(s))throw new Error("Invalid hex string")
e[i+o]=s}return o}function v(e,t,i,n){return j(z(t,e.length-i),e,i,n)}function y(e,t,i,n){return j(U(t),e,i,n)}function w(e,t,i,n){return y(e,t,i,n)}function b(e,t,i,n){return j(I(t),e,i,n)}function x(e,t,i,n){return j(N(t,e.length-i),e,i,n)}function _(e,t,i){return G.fromByteArray(0===t&&i===e.length?e:e.slice(t,i))}function k(e,t,i){var n="",r=""
i=Math.min(e.length,i)
for(var a=t;i>a;a++)e[a]<=127?(n+=H(r)+String.fromCharCode(e[a]),r=""):r+="%"+e[a].toString(16)
return n+H(r)}function M(e,t,i){var n=""
i=Math.min(e.length,i)
for(var r=t;i>r;r++)n+=String.fromCharCode(127&e[r])
return n}function S(e,t,i){var n=""
i=Math.min(e.length,i)
for(var r=t;i>r;r++)n+=String.fromCharCode(e[r])
return n}function T(e,t,i){var n=e.length;(!t||0>t)&&(t=0),(!i||0>i||i>n)&&(i=n)
for(var r="",a=t;i>a;a++)r+=V(e[a])
return r}function C(e,t,i){for(var n=e.slice(t,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1])
return r}function E(e,t,i){if(e%1!==0||0>e)throw new RangeError("offset is not uint")
if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,i,r,a,o){if(!n.isBuffer(e))throw new TypeError("buffer must be a Buffer instance")
if(t>a||o>t)throw new RangeError("value is out of bounds")
if(i+r>e.length)throw new RangeError("index out of range")}function L(e,t,i,n){0>t&&(t=65535+t+1)
for(var r=0,a=Math.min(e.length-i,2);a>r;r++)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function P(e,t,i,n){0>t&&(t=4294967295+t+1)
for(var r=0,a=Math.min(e.length-i,4);a>r;r++)e[i+r]=t>>>8*(n?r:3-r)&255}function R(e,t,i,n,r,a){if(t>r||a>t)throw new RangeError("value is out of bounds")
if(i+n>e.length)throw new RangeError("index out of range")
if(0>i)throw new RangeError("index out of range")}function F(e,t,i,n,r){return r||R(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),q.write(e,t,i,n,23,4),i+4}function D(e,t,i,n,r){return r||R(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),q.write(e,t,i,n,52,8),i+8}function B(e){if(e=O(e).replace(Z,""),e.length<2)return""
for(;e.length%4!==0;)e+="="
return e}function O(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return 16>e?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0
for(var i,n=e.length,r=null,a=[],o=0;n>o;o++){if(i=e.charCodeAt(o),i>55295&&57344>i){if(!r){if(i>56319){(t-=3)>-1&&a.push(239,191,189)
continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189)
continue}r=i
continue}if(56320>i){(t-=3)>-1&&a.push(239,191,189),r=i
continue}i=r-55296<<10|i-56320|65536,r=null}else r&&((t-=3)>-1&&a.push(239,191,189),r=null)
if(128>i){if((t-=1)<0)break
a.push(i)}else if(2048>i){if((t-=2)<0)break
a.push(i>>6|192,63&i|128)}else if(65536>i){if((t-=3)<0)break
a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(2097152>i))throw new Error("Invalid code point")
if((t-=4)<0)break
a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function U(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i))
return t}function N(e,t){for(var i,n,r,a=[],o=0;o<e.length&&!((t-=2)<0);o++)i=e.charCodeAt(o),n=i>>8,r=i%256,a.push(r),a.push(n)
return a}function I(e){return G.toByteArray(B(e))}function j(e,t,i,n){for(var r=0;n>r&&!(r+i>=t.length||r>=e.length);r++)t[r+i]=e[r]
return r}function H(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var G=e("base64-js"),q=e("ieee754"),W=e("is-array")
i.Buffer=n,i.SlowBuffer=f,i.INSPECT_MAX_BYTES=50,n.poolSize=8192
var X=1073741823,Y={}
n.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e)
return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(i){return!1}}(),n.isBuffer=function(e){return!(null==e||!e._isBuffer)},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers")
if(e===t)return 0
for(var i=e.length,r=t.length,a=0,o=Math.min(i,r);o>a&&e[a]===t[a];)++a
return a!==o&&(i=e[a],r=t[a]),r>i?-1:i>r?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0
default:return!1}},n.concat=function(e,t){if(!W(e))throw new TypeError("list argument must be an Array of Buffers.")
if(0===e.length)return new n(0)
if(1===e.length)return e[0]
var i
if(void 0===t)for(t=0,i=0;i<e.length;i++)t+=e[i].length
var r=new n(t),a=0
for(i=0;i<e.length;i++){var o=e[i]
o.copy(r,a),a+=o.length}return r},n.byteLength=m,n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(e,t,i){var n=!1
if(t=0|t,i=void 0===i||i===1/0?this.length:0|i,e||(e="utf8"),0>t&&(t=0),i>this.length&&(i=this.length),t>=i)return""
for(;;)switch(e){case"hex":return T(this,t,i)
case"utf8":case"utf-8":return k(this,t,i)
case"ascii":return M(this,t,i)
case"binary":return S(this,t,i)
case"base64":return _(this,t,i)
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,i)
default:if(n)throw new TypeError("Unknown encoding: "+e)
e=(e+"").toLowerCase(),n=!0}},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer")
return this===e?!0:0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES
return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer")
return this===e?0:n.compare(this,e)},n.prototype.indexOf=function(e,t){function i(e,t,i){for(var n=-1,r=0;i+r<e.length;r++)if(e[i+r]===t[-1===n?0:r-n]){if(-1===n&&(n=r),r-n+1===t.length)return i+n}else n=-1
return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1
if(t>=this.length)return-1
if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t)
if(n.isBuffer(e))return i(this,e,t)
if("number"==typeof e)return n.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):i(this,[e],t)
throw new TypeError("val must be string, number or Buffer")},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0
else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0
else if(isFinite(t))t=0|t,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0)
else{var r=n
n=t,t=0|i,i=r}var a=this.length-t
if((void 0===i||i>a)&&(i=a),e.length>0&&(0>i||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds")
n||(n="utf8")
for(var o=!1;;)switch(n){case"hex":return g(this,e,t,i)
case"utf8":case"utf-8":return v(this,e,t,i)
case"ascii":return y(this,e,t,i)
case"binary":return w(this,e,t,i)
case"base64":return b(this,e,t,i)
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,i)
default:if(o)throw new TypeError("Unknown encoding: "+n)
n=(""+n).toLowerCase(),o=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(e,t){var i=this.length
e=~~e,t=void 0===t?i:~~t,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),e>t&&(t=e)
var r
if(n.TYPED_ARRAY_SUPPORT)r=n._augment(this.subarray(e,t))
else{var a=t-e
r=new n(a,void 0)
for(var o=0;a>o;o++)r[o]=this[o+e]}return r.length&&(r.parent=this.parent||this),r},n.prototype.readUIntLE=function(e,t,i){e=0|e,t=0|t,i||E(e,t,this.length)
for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r
return n},n.prototype.readUIntBE=function(e,t,i){e=0|e,t=0|t,i||E(e,t,this.length)
for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r
return n},n.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,i){e=0|e,t=0|t,i||E(e,t,this.length)
for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r
return r*=128,n>=r&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,i){e=0|e,t=0|t,i||E(e,t,this.length)
for(var n=t,r=1,a=this[e+--n];n>0&&(r*=256);)a+=this[e+--n]*r
return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},n.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){t||E(e,2,this.length)
var i=this[e]|this[e+1]<<8
return 32768&i?4294901760|i:i},n.prototype.readInt16BE=function(e,t){t||E(e,2,this.length)
var i=this[e+1]|this[e]<<8
return 32768&i?4294901760|i:i},n.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),q.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),q.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),q.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),q.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,i,n){e=+e,t=0|t,i=0|i,n||A(this,e,t,i,Math.pow(2,8*i),0)
var r=1,a=0
for(this[t]=255&e;++a<i&&(r*=256);)this[t+a]=e/r&255
return t+i},n.prototype.writeUIntBE=function(e,t,i,n){e=+e,t=0|t,i=0|i,n||A(this,e,t,i,Math.pow(2,8*i),0)
var r=i-1,a=1
for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255
return t+i},n.prototype.writeUInt8=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,1,255,0),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},n.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},n.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):L(this,e,t,!1),t+2},n.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):P(this,e,t,!0),t+4},n.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):P(this,e,t,!1),t+4},n.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=0|t,!n){var r=Math.pow(2,8*i-1)
A(this,e,t,i,r-1,-r)}var a=0,o=1,s=0>e?1:0
for(this[t]=255&e;++a<i&&(o*=256);)this[t+a]=(e/o>>0)-s&255
return t+i},n.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=0|t,!n){var r=Math.pow(2,8*i-1)
A(this,e,t,i,r-1,-r)}var a=i-1,o=1,s=0>e?1:0
for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=(e/o>>0)-s&255
return t+i},n.prototype.writeInt8=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,1,127,-128),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},n.prototype.writeInt16LE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},n.prototype.writeInt16BE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):L(this,e,t,!1),t+2},n.prototype.writeInt32LE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},n.prototype.writeInt32BE=function(e,t,i){return e=+e,t=0|t,i||A(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):P(this,e,t,!1),t+4},n.prototype.writeFloatLE=function(e,t,i){return F(this,e,t,!0,i)},n.prototype.writeFloatBE=function(e,t,i){return F(this,e,t,!1,i)},n.prototype.writeDoubleLE=function(e,t,i){return D(this,e,t,!0,i)},n.prototype.writeDoubleBE=function(e,t,i){return D(this,e,t,!1,i)},n.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&i>r&&(r=i),r===i)return 0
if(0===e.length||0===this.length)return 0
if(0>t)throw new RangeError("targetStart out of bounds")
if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds")
if(0>r)throw new RangeError("sourceEnd out of bounds")
r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i)
var a=r-i
if(1e3>a||!n.TYPED_ARRAY_SUPPORT)for(var o=0;a>o;o++)e[o+t]=this[o+i]
else e._set(this.subarray(i,i+a),t)
return a},n.prototype.fill=function(e,t,i){if(e||(e=0),t||(t=0),i||(i=this.length),t>i)throw new RangeError("end < start")
if(i!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds")
if(0>i||i>this.length)throw new RangeError("end out of bounds")
var n
if("number"==typeof e)for(n=t;i>n;n++)this[n]=e
else{var r=z(e.toString()),a=r.length
for(n=t;i>n;n++)this[n]=r[n%a]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer
for(var e=new Uint8Array(this.length),t=0,i=e.length;i>t;t+=1)e[t]=this[t]
return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")}
var K=n.prototype
n._augment=function(e){return e.constructor=n,e._isBuffer=!0,e._set=e.set,e.get=K.get,e.set=K.set,e.write=K.write,e.toString=K.toString,e.toLocaleString=K.toString,e.toJSON=K.toJSON,e.equals=K.equals,e.compare=K.compare,e.indexOf=K.indexOf,e.copy=K.copy,e.slice=K.slice,e.readUIntLE=K.readUIntLE,e.readUIntBE=K.readUIntBE,e.readUInt8=K.readUInt8,e.readUInt16LE=K.readUInt16LE,e.readUInt16BE=K.readUInt16BE,e.readUInt32LE=K.readUInt32LE,e.readUInt32BE=K.readUInt32BE,e.readIntLE=K.readIntLE,e.readIntBE=K.readIntBE,e.readInt8=K.readInt8,e.readInt16LE=K.readInt16LE,e.readInt16BE=K.readInt16BE,e.readInt32LE=K.readInt32LE,e.readInt32BE=K.readInt32BE,e.readFloatLE=K.readFloatLE,e.readFloatBE=K.readFloatBE,e.readDoubleLE=K.readDoubleLE,e.readDoubleBE=K.readDoubleBE,e.writeUInt8=K.writeUInt8,e.writeUIntLE=K.writeUIntLE,e.writeUIntBE=K.writeUIntBE,e.writeUInt16LE=K.writeUInt16LE,e.writeUInt16BE=K.writeUInt16BE,e.writeUInt32LE=K.writeUInt32LE,e.writeUInt32BE=K.writeUInt32BE,e.writeIntLE=K.writeIntLE,e.writeIntBE=K.writeIntBE,e.writeInt8=K.writeInt8,e.writeInt16LE=K.writeInt16LE,e.writeInt16BE=K.writeInt16BE,e.writeInt32LE=K.writeInt32LE,e.writeInt32BE=K.writeInt32BE,e.writeFloatLE=K.writeFloatLE,e.writeFloatBE=K.writeFloatBE,e.writeDoubleLE=K.writeDoubleLE,e.writeDoubleBE=K.writeDoubleBE,e.fill=K.fill,e.inspect=K.inspect,e.toArrayBuffer=K.toArrayBuffer,e}
var Z=/[^+\/0-9A-z\-]/g},{"base64-js":554,ieee754:555,"is-array":556}],554:[function(e,t,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
!function(e){"use strict"
function t(e){var t=e.charCodeAt(0)
return t===o||t===u?62:t===s||t===d?63:h>t?-1:h+10>t?t-h+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function i(e){function i(e){l[u++]=e}var n,r,o,s,h,l
if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4")
var c=e.length
h="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new a(3*e.length/4-h),o=h>0?e.length-4:e.length
var u=0
for(n=0,r=0;o>n;n+=4,r+=3)s=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),i((16711680&s)>>16),i((65280&s)>>8),i(255&s)
return 2===h?(s=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,i(255&s)):1===h&&(s=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,i(s>>8&255),i(255&s)),l}function r(e){function t(e){return n.charAt(e)}function i(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,a,o,s=e.length%3,h=""
for(r=0,o=e.length-s;o>r;r+=3)a=(e[r]<<16)+(e[r+1]<<8)+e[r+2],h+=i(a)
switch(s){case 1:a=e[e.length-1],h+=t(a>>2),h+=t(a<<4&63),h+="=="
break
case 2:a=(e[e.length-2]<<8)+e[e.length-1],h+=t(a>>10),h+=t(a>>4&63),h+=t(a<<2&63),h+="="}return h}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),s="/".charCodeAt(0),h="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),u="-".charCodeAt(0),d="_".charCodeAt(0)
e.toByteArray=i,e.fromByteArray=r}("undefined"==typeof i?this.base64js={}:i)},{}],555:[function(e,t,i){i.read=function(e,t,i,n,r){var a,o,s=8*r-n-1,h=(1<<s)-1,l=h>>1,c=-7,u=i?r-1:0,d=i?-1:1,p=e[t+u]
for(u+=d,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+u],u+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+u],u+=d,c-=8);if(0===a)a=1-l
else{if(a===h)return o?0/0:(p?-1:1)*(1/0)
o+=Math.pow(2,n),a-=l}return(p?-1:1)*o*Math.pow(2,a-n)},i.write=function(e,t,i,n,r,a){var o,s,h,l=8*a-r-1,c=(1<<l)-1,u=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,m=0>t||0===t&&0>1/t?1:0
for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),t+=o+u>=1?d/h:d*Math.pow(2,1-u),t*h>=2&&(o++,h/=2),o+u>=c?(s=0,o=c):o+u>=1?(s=(t*h-1)*Math.pow(2,r),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;e[i+p]=255&s,p+=f,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;e[i+p]=255&o,p+=f,o/=256,l-=8);e[i+p-f]|=128*m}},{}],556:[function(e,t,i){var n=Array.isArray,r=Object.prototype.toString
t.exports=n||function(e){return!!e&&"[object Array]"==r.call(e)}},{}],557:[function(e,t,i){var n=e("cookie-getter"),r=n("config")||{}
Object.freeze&&Object.freeze(r),document.cookie="config=;expires=Thu, 01 Jan 1970 00:00:00 GMT",t.exports=r},{"cookie-getter":558}],558:[function(e,t,i){t.exports=function(e){var t,i=document.cookie,n=i.indexOf(e+"="),r=i.indexOf(";",n)
return~n?(t=decodeURIComponent(i.substring(n,~r?r:void 0).split("=")[1]),"{"===t.charAt(0)?JSON.parse(t):t):null}},{}],559:[function(e,t,i){!function(e,i){"undefined"!=typeof t?t.exports=i():"function"==typeof define&&"object"==typeof define.amd?define(i):this[e]=i()}("domready",function(){var e,t=[],i=document,n=i.documentElement.doScroll,r="DOMContentLoaded",a=(n?/^loaded|^c/:/^loaded|^i|^c/).test(i.readyState)
return a||i.addEventListener(r,e=function(){for(i.removeEventListener(r,e),a=1;e=t.shift();)e()}),function(e){a?e():t.push(e)}})},{}],560:[function(e,t,i){!function(e,i){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document")
return i(e)}:i(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=J.type(e)
return"function"===i||J.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(J.isFunction(t))return J.grep(e,function(e,n){return!!t.call(e,n,e)!==i})
if(t.nodeType)return J.grep(e,function(e){return e===t!==i})
if("string"==typeof t){if(se.test(t))return J.filter(t,e,i)
t=J.filter(t,e)}return J.grep(e,function(e){return W.call(t,e)>=0!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t=fe[e]={}
return J.each(e.match(pe)||[],function(e,i){t[i]=!0}),t}function o(){Q.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1),J.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+s.uid++}function h(e,t,i){var n
if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(be,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:we.test(i)?J.parseJSON(i):i}catch(r){}ye.set(e,t,i)}else i=void 0
return i}function l(){return!0}function c(){return!1}function u(){try{return Q.activeElement}catch(e){}}function d(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Oe.exec(e.type)
return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var i=0,n=e.length;n>i;i++)ve.set(e[i],"globalEval",!t||ve.get(t[i],"globalEval"))}function g(e,t){var i,n,r,a,o,s,h,l
if(1===t.nodeType){if(ve.hasData(e)&&(a=ve.access(e),o=ve.set(t,a),l=a.events)){delete o.handle,o.events={}
for(r in l)for(i=0,n=l[r].length;n>i;i++)J.event.add(t,r,l[r][i])}ye.hasData(e)&&(s=ye.access(e),h=J.extend({},s),ye.set(t,h))}}function v(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[]
return void 0===t||t&&J.nodeName(e,t)?J.merge([e],i):i}function y(e,t){var i=t.nodeName.toLowerCase()
"input"===i&&Me.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function w(t,i){var n,r=J(i.createElement(t)).appendTo(i.body),a=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(r[0]))?n.display:J.css(r[0],"display")
return r.detach(),a}function b(e){var t=Q,i=Ne[e]
return i||(i=w(e,t),"none"!==i&&i||(Ue=(Ue||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ue[0].contentDocument,t.write(),t.close(),i=w(e,t),Ue.detach()),Ne[e]=i),i}function x(e,t,i){var n,r,a,o,s=e.style
return i=i||He(e),i&&(o=i.getPropertyValue(t)||i[t]),i&&(""!==o||J.contains(e.ownerDocument,e)||(o=J.style(e,t)),je.test(o)&&Ie.test(t)&&(n=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=i.width,s.width=n,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t
for(var i=t[0].toUpperCase()+t.slice(1),n=t,r=Ke.length;r--;)if(t=Ke[r]+i,t in e)return t
return n}function M(e,t,i){var n=qe.exec(t)
return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function S(e,t,i,n,r){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===i&&(o+=J.css(e,i+_e[a],!0,r)),n?("content"===i&&(o-=J.css(e,"padding"+_e[a],!0,r)),"margin"!==i&&(o-=J.css(e,"border"+_e[a]+"Width",!0,r))):(o+=J.css(e,"padding"+_e[a],!0,r),"padding"!==i&&(o+=J.css(e,"border"+_e[a]+"Width",!0,r)))
return o}function T(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=He(e),o="border-box"===J.css(e,"boxSizing",!1,a)
if(0>=r||null==r){if(r=x(e,t,a),(0>r||null==r)&&(r=e.style[t]),je.test(r))return r
n=o&&(Z.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+S(e,t,i||(o?"border":"content"),n,a)+"px"}function C(e,t){for(var i,n,r,a=[],o=0,s=e.length;s>o;o++)n=e[o],n.style&&(a[o]=ve.get(n,"olddisplay"),i=n.style.display,t?(a[o]||"none"!==i||(n.style.display=""),""===n.style.display&&ke(n)&&(a[o]=ve.access(n,"olddisplay",b(n.nodeName)))):(r=ke(n),"none"===i&&r||ve.set(n,"olddisplay",r?i:J.css(n,"display"))))
for(o=0;s>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[o]||"":"none"))
return e}function E(e,t,i,n,r){return new E.prototype.init(e,t,i,n,r)}function A(){return setTimeout(function(){Ze=void 0}),Ze=J.now()}function L(e,t){var i,n=0,r={height:e}
for(t=t?1:0;4>n;n+=2-t)i=_e[n],r["margin"+i]=r["padding"+i]=e
return t&&(r.opacity=r.width=e),r}function P(e,t,i){for(var n,r=(it[t]||[]).concat(it["*"]),a=0,o=r.length;o>a;a++)if(n=r[a].call(i,t,e))return n}function R(e,t,i){var n,r,a,o,s,h,l,c,u=this,d={},p=e.style,f=e.nodeType&&ke(e),m=ve.get(e,"fxshow")
i.queue||(s=J._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,h=s.empty.fire,s.empty.fire=function(){s.unqueued||h()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,J.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],l=J.css(e,"display"),c="none"===l?ve.get(e,"olddisplay")||b(e.nodeName):l,"inline"===c&&"none"===J.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}))
for(n in t)if(r=t[n],$e.exec(r)){if(delete t[n],a=a||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue
f=!0}d[n]=m&&m[n]||J.style(e,n)}else l=void 0
if(J.isEmptyObject(d))"inline"===("none"===l?b(e.nodeName):l)&&(p.display=l)
else{m?"hidden"in m&&(f=m.hidden):m=ve.access(e,"fxshow",{}),a&&(m.hidden=!f),f?J(e).show():u.done(function(){J(e).hide()}),u.done(function(){var t
ve.remove(e,"fxshow")
for(t in d)J.style(e,t,d[t])})
for(n in d)o=P(f?m[n]:0,n,u),n in m||(m[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function F(e,t){var i,n,r,a,o
for(i in e)if(n=J.camelCase(i),r=t[n],a=e[i],J.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),o=J.cssHooks[n],o&&"expand"in o){a=o.expand(a),delete e[n]
for(i in a)i in e||(e[i]=a[i],t[i]=r)}else t[n]=r}function D(e,t,i){var n,r,a=0,o=tt.length,s=J.Deferred().always(function(){delete h.elem}),h=function(){if(r)return!1
for(var t=Ze||A(),i=Math.max(0,l.startTime+l.duration-t),n=i/l.duration||0,a=1-n,o=0,h=l.tweens.length;h>o;o++)l.tweens[o].run(a)
return s.notifyWith(e,[l,a,i]),1>a&&h?i:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Ze||A(),duration:i.duration,tweens:[],createTween:function(t,i){var n=J.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing)
return l.tweens.push(n),n},stop:function(t){var i=0,n=t?l.tweens.length:0
if(r)return this
for(r=!0;n>i;i++)l.tweens[i].run(1)
return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props
for(F(c,l.opts.specialEasing);o>a;a++)if(n=tt[a].call(l,e,c,l.opts))return n
return J.map(c,P,l),J.isFunction(l.opts.start)&&l.opts.start.call(e,l),J.fx.timer(J.extend(h,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function B(e){return function(t,i){"string"!=typeof t&&(i=t,t="*")
var n,r=0,a=t.toLowerCase().match(pe)||[]
if(J.isFunction(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function O(e,t,i,n){function r(s){var h
return a[s]=!0,J.each(e[s]||[],function(e,s){var l=s(t,i,n)
return"string"!=typeof l||o||a[l]?o?!(h=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),h}var a={},o=e===wt
return r(t.dataTypes[0])||!a["*"]&&r("*")}function V(e,t){var i,n,r=J.ajaxSettings.flatOptions||{}
for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i])
return n&&J.extend(!0,e,n),e}function z(e,t,i){for(var n,r,a,o,s=e.contents,h=e.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"))
if(n)for(r in s)if(s[r]&&s[r].test(n)){h.unshift(r)
break}if(h[0]in i)a=h[0]
else{for(r in i){if(!h[0]||e.converters[r+" "+h[0]]){a=r
break}o||(o=r)}a=a||o}return a?(a!==h[0]&&h.unshift(a),i[a]):void 0}function U(e,t,i,n){var r,a,o,s,h,l={},c=e.dataTypes.slice()
if(c[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o]
for(a=c.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!h&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),h=a,a=c.shift())if("*"===a)a=h
else if("*"!==h&&h!==a){if(o=l[h+" "+a]||l["* "+a],!o)for(r in l)if(s=r.split(" "),s[1]===a&&(o=l[h+" "+s[0]]||l["* "+s[0]])){o===!0?o=l[r]:l[r]!==!0&&(a=s[0],c.unshift(s[1]))
break}if(o!==!0)if(o&&e["throws"])t=o(t)
else try{t=o(t)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+h+" to "+a}}}return{state:"success",data:t}}function N(e,t,i,n){var r
if(J.isArray(t))J.each(t,function(t,r){i||Mt.test(e)?n(e,r):N(e+"["+("object"==typeof r?t:"")+"]",r,i,n)})
else if(i||"object"!==J.type(t))n(e,t)
else for(r in t)N(e+"["+r+"]",t[r],i,n)}function I(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView}var j=[],H=j.slice,G=j.concat,q=j.push,W=j.indexOf,X={},Y=X.toString,K=X.hasOwnProperty,Z={},Q=e.document,$="2.1.3",J=function(e,t){return new J.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ie=/-([\da-z])/gi,ne=function(e,t){return t.toUpperCase()}
J.fn=J.prototype={jquery:$,constructor:J,selector:"",length:0,toArray:function(){return H.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:H.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e)
return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(H.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0)
return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:q,sort:j.sort,splice:j.splice},J.extend=J.fn.extend=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,h=arguments.length,l=!1
for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||J.isFunction(o)||(o={}),s===h&&(o=this,s--);h>s;s++)if(null!=(e=arguments[s]))for(t in e)i=o[t],n=e[t],o!==n&&(l&&n&&(J.isPlainObject(n)||(r=J.isArray(n)))?(r?(r=!1,a=i&&J.isArray(i)?i:[]):a=i&&J.isPlainObject(i)?i:{},o[t]=J.extend(l,a,n)):void 0!==n&&(o[t]=n))
return o},J.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==J.type(e)||e.nodeType||J.isWindow(e)?!1:e.constructor&&!K.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t
for(t in e)return!1
return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?X[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval
e=J.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ie,ne)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,a=0,o=e.length,s=i(e)
if(n){if(s)for(;o>a&&(r=t.apply(e[a],n),r!==!1);a++);else for(a in e)if(r=t.apply(e[a],n),r===!1)break}else if(s)for(;o>a&&(r=t.call(e[a],a,e[a]),r!==!1);a++);else for(a in e)if(r=t.call(e[a],a,e[a]),r===!1)break
return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var n=t||[]
return null!=e&&(i(Object(e))?J.merge(n,"string"==typeof e?[e]:e):q.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:W.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n]
return e.length=r,e},grep:function(e,t,i){for(var n,r=[],a=0,o=e.length,s=!i;o>a;a++)n=!t(e[a],a),n!==s&&r.push(e[a])
return r},map:function(e,t,n){var r,a=0,o=e.length,s=i(e),h=[]
if(s)for(;o>a;a++)r=t(e[a],a,n),null!=r&&h.push(r)
else for(a in e)r=t(e[a],a,n),null!=r&&h.push(r)
return G.apply([],h)},guid:1,proxy:function(e,t){var i,n,r
return"string"==typeof t&&(i=e[t],t=e,e=i),J.isFunction(e)?(n=H.call(arguments,2),r=function(){return e.apply(t||this,n.concat(H.call(arguments)))},r.guid=e.guid=e.guid||J.guid++,r):void 0},now:Date.now,support:Z}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()})
var re=function(e){function t(e,t,i,n){var r,a,o,s,h,l,u,p,f,m
if((t?t.ownerDocument||t:N)!==R&&P(t),t=t||R,i=i||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return i
if(!n&&D){if(11!==s&&(r=ye.exec(e)))if(o=r[1]){if(9===s){if(a=t.getElementById(o),!a||!a.parentNode)return i
if(a.id===o)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&z(t,a)&&a.id===o)return i.push(a),i}else{if(r[2])return $.apply(i,t.getElementsByTagName(e)),i
if((o=r[3])&&x.getElementsByClassName)return $.apply(i,t.getElementsByClassName(o)),i}if(x.qsa&&(!B||!B.test(e))){if(p=u=U,f=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=S(e),(u=t.getAttribute("id"))?p=u.replace(be,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",h=l.length;h--;)l[h]=p+d(l[h])
f=we.test(e)&&c(t.parentNode)||t,m=l.join(",")}if(m)try{return $.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{u||t.removeAttribute("id")}}}return C(e.replace(he,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>_.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[]
return e}function n(e){return e[U]=!0,e}function r(e){var t=R.createElement("div")
try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var i=e.split("|"),n=e.length;n--;)_.attrHandle[i[n]]=t}function o(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X)
if(n)return n
if(i)for(;i=i.nextSibling;)if(i===t)return-1
return e?1:-1}function s(e){return function(t){var i=t.nodeName.toLowerCase()
return"input"===i&&t.type===e}}function h(e){return function(t){var i=t.nodeName.toLowerCase()
return("input"===i||"button"===i)&&t.type===e}}function l(e){return n(function(t){return t=+t,n(function(i,n){for(var r,a=e([],i.length,t),o=a.length;o--;)i[r=a[o]]&&(i[r]=!(n[r]=i[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function d(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value
return n}function p(e,t,i){var n=t.dir,r=i&&"parentNode"===n,a=j++
return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,a)}:function(t,i,o){var s,h,l=[I,a]
if(o){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(h=t[U]||(t[U]={}),(s=h[n])&&s[0]===I&&s[1]===a)return l[2]=s[2]
if(h[n]=l,l[2]=e(t,i,o))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1
return!0}:e[0]}function m(e,i,n){for(var r=0,a=i.length;a>r;r++)t(e,i[r],n)
return n}function g(e,t,i,n,r){for(var a,o=[],s=0,h=e.length,l=null!=t;h>s;s++)(a=e[s])&&(!i||i(a,n,r))&&(o.push(a),l&&t.push(s))
return o}function v(e,t,i,r,a,o){return r&&!r[U]&&(r=v(r)),a&&!a[U]&&(a=v(a,o)),n(function(n,o,s,h){var l,c,u,d=[],p=[],f=o.length,v=n||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!n&&t?v:g(v,d,e,s,h),w=i?a||(n?e:f||r)?[]:o:y
if(i&&i(y,w,s,h),r)for(l=g(w,p),r(l,[],s,h),c=l.length;c--;)(u=l[c])&&(w[p[c]]=!(y[p[c]]=u))
if(n){if(a||e){if(a){for(l=[],c=w.length;c--;)(u=w[c])&&l.push(y[c]=u)
a(null,w=[],l,h)}for(c=w.length;c--;)(u=w[c])&&(l=a?ee(n,u):d[c])>-1&&(n[l]=!(o[l]=u))}}else w=g(w===o?w.splice(f,w.length):w),a?a(null,o,w,h):$.apply(o,w)})}function y(e){for(var t,i,n,r=e.length,a=_.relative[e[0].type],o=a||_.relative[" "],s=a?1:0,h=p(function(e){return e===t},o,!0),l=p(function(e){return ee(t,e)>-1},o,!0),c=[function(e,i,n){var r=!a&&(n||i!==E)||((t=i).nodeType?h(e,i,n):l(e,i,n))
return t=null,r}];r>s;s++)if(i=_.relative[e[s].type])c=[p(f(c),i)]
else{if(i=_.filter[e[s].type].apply(null,e[s].matches),i[U]){for(n=++s;r>n&&!_.relative[e[n].type];n++);return v(s>1&&f(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(he,"$1"),i,n>s&&y(e.slice(s,n)),r>n&&y(e=e.slice(n)),r>n&&d(e))}c.push(i)}return f(c)}function w(e,i){var r=i.length>0,a=e.length>0,o=function(n,o,s,h,l){var c,u,d,p=0,f="0",m=n&&[],v=[],y=E,w=n||a&&_.find.TAG("*",l),b=I+=null==y?1:Math.random()||.1,x=w.length
for(l&&(E=o!==R&&o);f!==x&&null!=(c=w[f]);f++){if(a&&c){for(u=0;d=e[u++];)if(d(c,o,s)){h.push(c)
break}l&&(I=b)}r&&((c=!d&&c)&&p--,n&&m.push(c))}if(p+=f,r&&f!==p){for(u=0;d=i[u++];)d(m,v,o,s)
if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=Z.call(h))
v=g(v)}$.apply(h,v),l&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(h)}return l&&(I=b,E=y),m}
return r?n(o):o}var b,x,_,k,M,S,T,C,E,A,L,P,R,F,D,B,O,V,z,U="sizzle"+1*new Date,N=e.document,I=0,j=0,H=i(),G=i(),q=i(),W=function(e,t){return e===t&&(L=!0),0},X=1<<31,Y={}.hasOwnProperty,K=[],Z=K.pop,Q=K.push,$=K.push,J=K.slice,ee=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i
return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ne.replace("w","w#"),ae="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",se=new RegExp(ie+"+","g"),he=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(oe),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,we=/[+~]/,be=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),_e=function(e,t,i){var n="0x"+t-65536
return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ke=function(){P()}
try{$.apply(K=J.call(N.childNodes),N.childNodes),K[N.childNodes.length].nodeType}catch(Me){$={apply:K.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}x=t.support={},M=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement
return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:N
return n!==R&&9===n.nodeType&&n.documentElement?(R=n,F=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",ke,!1):i.attachEvent&&i.attachEvent("onunload",ke)),D=!M(n),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(n.getElementsByClassName),x.getById=r(function(e){return F.appendChild(e).id=U,!n.getElementsByName||!n.getElementsByName(U).length}),x.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var i=t.getElementById(e)
return i&&i.parentNode?[i]:[]}},_.filter.ID=function(e){var t=e.replace(xe,_e)
return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(xe,_e)
return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id")
return i&&i.value===t}}),_.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e)
if("*"===e){for(;i=a[r++];)1===i.nodeType&&n.push(i)
return n}return a},_.find.CLASS=x.getElementsByClassName&&function(e,t){return D?t.getElementsByClassName(e):void 0},O=[],B=[],(x.qsa=ve.test(n.querySelectorAll))&&(r(function(e){F.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&B.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||B.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+U+"-]").length||B.push("~="),e.querySelectorAll(":checked").length||B.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||B.push(".#.+[+~]")}),r(function(e){var t=n.createElement("input")
t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&B.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),B.push(",.*:")})),(x.matchesSelector=ve.test(V=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&r(function(e){x.disconnectedMatch=V.call(e,"div"),V.call(e,"[s!='']:x"),O.push("!=",oe)}),B=B.length&&new RegExp(B.join("|")),O=O.length&&new RegExp(O.join("|")),t=ve.test(F.compareDocumentPosition),z=t||ve.test(F.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode
return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0
return!1},W=t?function(e,t){if(e===t)return L=!0,0
var i=!e.compareDocumentPosition-!t.compareDocumentPosition
return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===N&&z(N,e)?-1:t===n||t.ownerDocument===N&&z(N,t)?1:A?ee(A,e)-ee(A,t):0:4&i?-1:1)}:function(e,t){if(e===t)return L=!0,0
var i,r=0,a=e.parentNode,s=t.parentNode,h=[e],l=[t]
if(!a||!s)return e===n?-1:t===n?1:a?-1:s?1:A?ee(A,e)-ee(A,t):0
if(a===s)return o(e,t)
for(i=e;i=i.parentNode;)h.unshift(i)
for(i=t;i=i.parentNode;)l.unshift(i)
for(;h[r]===l[r];)r++
return r?o(h[r],l[r]):h[r]===N?-1:l[r]===N?1:0},n):R},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==R&&P(e),i=i.replace(ue,"='$1']"),!(!x.matchesSelector||!D||O&&O.test(i)||B&&B.test(i)))try{var n=V.call(e,i)
if(n||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,R,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==R&&P(e),z(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==R&&P(e)
var i=_.attrHandle[t.toLowerCase()],n=i&&Y.call(_.attrHandle,t.toLowerCase())?i(e,t,!D):void 0
return void 0!==n?n:x.attributes||!D?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0
if(L=!x.detectDuplicates,A=!x.sortStable&&e.slice(0),e.sort(W),L){for(;t=e[r++];)t===e[r]&&(n=i.push(r))
for(;n--;)e.splice(i[n],1)}return A=null,e},k=t.getText=function(e){var t,i="",n=0,r=e.nodeType
if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent
for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=k(t)
return i},_=t.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2]
return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&de.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,_e).toLowerCase()
return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "]
return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var a=t.attr(r,e)
return null==a?"!="===i:i?(a+="","="===i?a===n:"!="===i?a!==n:"^="===i?n&&0===a.indexOf(n):"*="===i?n&&a.indexOf(n)>-1:"$="===i?n&&a.slice(-n.length)===n:"~="===i?(" "+a.replace(se," ")+" ").indexOf(n)>-1:"|="===i?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t
return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,h){var l,c,u,d,p,f,m=a!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!h&&!s
if(g){if(a){for(;m;){for(u=t;u=u[m];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1
f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(c=g[U]||(g[U]={}),l=c[e]||[],p=l[0]===I&&l[1],d=l[0]===I&&l[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(d=p=0)||f.pop();)if(1===u.nodeType&&++d&&u===t){c[e]=[I,p,d]
break}}else if(y&&(l=(t[U]||(t[U]={}))[e])&&l[0]===I)d=l[1]
else for(;(u=++p&&u&&u[m]||(d=p=0)||f.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(y&&((u[U]||(u[U]={}))[e]=[I,d]),u!==t)););return d-=r,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(e,i){var r,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e)
return a[U]?a(i):a.length>1?(r=[e,e,"",i],_.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=a(e,i),o=r.length;o--;)n=ee(e,r[o]),e[n]=!(t[n]=r[o])}):function(e){return a(e,0,r)}):a}},pseudos:{not:n(function(e){var t=[],i=[],r=T(e.replace(he,"$1"))
return r[U]?n(function(e,t,i,n){for(var a,o=r(e,null,n,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,n,a){return t[0]=e,r(t,null,a,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(xe,_e),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,_e).toLowerCase(),function(t){var i
do if(i=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-")
while((t=t.parentNode)&&1===t.nodeType)
return!1}}),target:function(t){var i=e.location&&e.location.hash
return i&&i.slice(1)===t.id},root:function(e){return e===F},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase()
return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1
return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase()
return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t
return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[0>i?i+t:i]}),even:l(function(e,t){for(var i=0;t>i;i+=2)e.push(i)
return e}),odd:l(function(e,t){for(var i=1;t>i;i+=2)e.push(i)
return e}),lt:l(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n)
return e}),gt:l(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n)
return e})}},_.pseudos.nth=_.pseudos.eq
for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=s(b)
for(b in{submit:!0,reset:!0})_.pseudos[b]=h(b)
return u.prototype=_.filters=_.pseudos,_.setFilters=new u,S=t.tokenize=function(e,i){var n,r,a,o,s,h,l,c=G[e+" "]
if(c)return i?0:c.slice(0)
for(s=e,h=[],l=_.preFilter;s;){(!n||(r=le.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),h.push(a=[])),n=!1,(r=ce.exec(s))&&(n=r.shift(),a.push({value:n,type:r[0].replace(he," ")}),s=s.slice(n.length))
for(o in _.filter)!(r=fe[o].exec(s))||l[o]&&!(r=l[o](r))||(n=r.shift(),a.push({value:n,type:o,matches:r}),s=s.slice(n.length))
if(!n)break}return i?s.length:s?t.error(e):G(e,h).slice(0)},T=t.compile=function(e,t){var i,n=[],r=[],a=q[e+" "]
if(!a){for(t||(t=S(e)),i=t.length;i--;)a=y(t[i]),a[U]?n.push(a):r.push(a)
a=q(e,w(r,n)),a.selector=e}return a},C=t.select=function(e,t,i,n){var r,a,o,s,h,l="function"==typeof e&&e,u=!n&&S(e=l.selector||e)
if(i=i||[],1===u.length){if(a=u[0]=u[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&x.getById&&9===t.nodeType&&D&&_.relative[a[1].type]){if(t=(_.find.ID(o.matches[0].replace(xe,_e),t)||[])[0],!t)return i
l&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=fe.needsContext.test(e)?0:a.length;r--&&(o=a[r],!_.relative[s=o.type]);)if((h=_.find[s])&&(n=h(o.matches[0].replace(xe,_e),we.test(a[0].type)&&c(t.parentNode)||t))){if(a.splice(r,1),e=n.length&&d(a),!e)return $.apply(i,n),i
break}}return(l||T(e,u))(n,t,!D,i,we.test(e)&&c(t.parentNode)||t),i},x.sortStable=U.split("").sort(W).join("")===U,x.detectDuplicates=!!L,P(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(R.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,i){var n
return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e)
J.find=re,J.expr=re.selectors,J.expr[":"]=J.expr.pseudos,J.unique=re.uniqueSort,J.text=re.getText,J.isXMLDoc=re.isXML,J.contains=re.contains
var ae=J.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/
J.filter=function(e,t,i){var n=t[0]
return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?J.find.matchesSelector(n,e)?[n]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,i=this.length,n=[],r=this
if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;i>t;t++)if(J.contains(r[t],this))return!0}))
for(t=0;i>t;t++)J.find(e,r[t],n)
return n=this.pushStack(i>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&ae.test(e)?J(e):e||[],!1).length}})
var he,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=J.fn.init=function(e,t){var i,n
if(!e)return this
if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||he).find(e):this.constructor(t).find(e)
if(i[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),oe.test(i[1])&&J.isPlainObject(t))for(i in t)J.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i])
return this}return n=Q.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?"undefined"!=typeof he.ready?he.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))}
ce.prototype=J.fn,he=J(Q)
var ue=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0}
J.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&J(e).is(i))break
n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e)
return i}}),J.fn.extend({has:function(e){var t=J(e,this),i=t.length
return this.filter(function(){for(var e=0;i>e;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,a=[],o=ae.test(e)||"string"!=typeof e?J(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&J.find.matchesSelector(i,e))){a.push(i)
break}return this.pushStack(a.length>1?J.unique(a):a)},index:function(e){return e?"string"==typeof e?W.call(J(e),this[0]):W.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode
return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,i){return J.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,i){return J.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return J.dir(e,"previousSibling",i)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(i,n){var r=J.map(this,t,i)
return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=J.filter(n,r)),this.length>1&&(de[e]||J.unique(r),ue.test(e)&&r.reverse()),this.pushStack(r)}})
var pe=/\S+/g,fe={}
J.Callbacks=function(e){e="string"==typeof e?fe[e]||a(e):J.extend({},e)
var t,i,n,r,o,s,h=[],l=!e.once&&[],c=function(a){for(t=e.memory&&a,i=!0,s=r||0,r=0,o=h.length,n=!0;h&&o>s;s++)if(h[s].apply(a[0],a[1])===!1&&e.stopOnFalse){t=!1
break}n=!1,h&&(l?l.length&&c(l.shift()):t?h=[]:u.disable())},u={add:function(){if(h){var i=h.length
!function a(t){J.each(t,function(t,i){var n=J.type(i)
"function"===n?e.unique&&u.has(i)||h.push(i):i&&i.length&&"string"!==n&&a(i)})}(arguments),n?o=h.length:t&&(r=i,c(t))}return this},remove:function(){return h&&J.each(arguments,function(e,t){for(var i;(i=J.inArray(t,h,i))>-1;)h.splice(i,1),n&&(o>=i&&o--,s>=i&&s--)}),this},has:function(e){return e?J.inArray(e,h)>-1:!(!h||!h.length)},empty:function(){return h=[],o=0,this},disable:function(){return h=l=t=void 0,this},disabled:function(){return!h},lock:function(){return l=void 0,t||u.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!h||i&&!l||(t=t||[],t=[e,t.slice?t.slice():t],n?l.push(t):c(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}}
return u},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments
return J.Deferred(function(i){J.each(t,function(t,a){var o=J.isFunction(e[t])&&e[t]
r[a[1]](function(){var e=o&&o.apply(this,arguments)
e&&J.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[a[0]+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,n):n}},r={}
return n.pipe=n.then,J.each(t,function(e,a){var o=a[2],s=a[3]
n[a[1]]=o.add,s&&o.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?n:this,arguments),this},r[a[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,a=H.call(arguments),o=a.length,s=1!==o||e&&J.isFunction(e.promise)?o:0,h=1===s?e:J.Deferred(),l=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?H.call(arguments):r,n===t?h.notifyWith(i,n):--s||h.resolveWith(i,n)}}
if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)a[r]&&J.isFunction(a[r].promise)?a[r].promise().done(l(r,n,a)).fail(h.reject).progress(l(r,i,t)):--s
return s||h.resolveWith(n,a),h.promise()}})
var me
J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(e===!0?--J.readyWait:J.isReady)||(J.isReady=!0,e!==!0&&--J.readyWait>0||(me.resolveWith(Q,[J]),J.fn.triggerHandler&&(J(Q).triggerHandler("ready"),J(Q).off("ready"))))}}),J.ready.promise=function(t){return me||(me=J.Deferred(),"complete"===Q.readyState?setTimeout(J.ready):(Q.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1))),me.promise(t)},J.ready.promise()
var ge=J.access=function(e,t,i,n,r,a,o){var s=0,h=e.length,l=null==i
if("object"===J.type(i)){r=!0
for(s in i)J.access(e,t,s,i[s],!0,a,o)}else if(void 0!==n&&(r=!0,J.isFunction(n)||(o=!0),l&&(o?(t.call(e,n),t=null):(l=t,t=function(e,t,i){return l.call(J(e),i)})),t))for(;h>s;s++)t(e[s],i,o?n:n.call(e[s],s,t(e[s],i)))
return r?e:l?t.call(e):h?t(e[0],i):a}
J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=J.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0
var t={},i=e[this.expando]
if(!i){i=s.uid++
try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,J.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),a=this.cache[r]
if("string"==typeof t)a[t]=i
else if(J.isEmptyObject(a))J.extend(this.cache[r],t)
else for(n in t)a[n]=t[n]
return a},get:function(e,t){var i=this.cache[this.key(e)]
return void 0===t?i:i[t]},access:function(e,t,i){var n
return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,J.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,a=this.key(e),o=this.cache[a]
if(void 0===t)this.cache[a]={}
else{J.isArray(t)?n=t.concat(t.map(J.camelCase)):(r=J.camelCase(t),t in o?n=[t,r]:(n=r,n=n in o?[n]:n.match(pe)||[])),i=n.length
for(;i--;)delete o[n[i]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}}
var ve=new s,ye=new s,we=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g
J.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,i){return ye.access(e,t,i)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,i){return ve.access(e,t,i)},_removeData:function(e,t){ve.remove(e,t)}}),J.fn.extend({data:function(e,t){var i,n,r,a=this[0],o=a&&a.attributes
if(void 0===e){if(this.length&&(r=ye.get(a),1===a.nodeType&&!ve.get(a,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=J.camelCase(n.slice(5)),h(a,n,r[n])))
ve.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ye.set(this,e)}):ge(this,function(t){var i,n=J.camelCase(e)
if(a&&void 0===t){if(i=ye.get(a,e),void 0!==i)return i
if(i=ye.get(a,n),void 0!==i)return i
if(i=h(a,n,void 0),void 0!==i)return i}else this.each(function(){var i=ye.get(this,n)
ye.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),J.extend({queue:function(e,t,i){var n
return e?(t=(t||"fx")+"queue",n=ve.get(e,t),i&&(!n||J.isArray(i)?n=ve.access(e,t,J.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx"
var i=J.queue(e,t),n=i.length,r=i.shift(),a=J._queueHooks(e,t),o=function(){J.dequeue(e,t)}
"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,o,a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks"
return ve.get(e,i)||ve.access(e,i,{empty:J.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",i])})})}}),J.fn.extend({queue:function(e,t){var i=2
return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?J.queue(this[0],e):void 0===t?this:this.each(function(){var i=J.queue(this,e,t)
J._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=J.Deferred(),a=this,o=this.length,s=function(){--n||r.resolveWith(a,[a])}
for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)i=ve.get(a[o],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(s))
return s(),r.promise(t)}})
var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},Me=/^(?:checkbox|radio)$/i
!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),i=Q.createElement("input")
i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),Z.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}()
var Se="undefined"
Z.focusinBubbles="onfocusin"in e
var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu)|click/,Ee=/^(?:focusinfocus|focusoutblur)$/,Ae=/^([^.]*)(?:\.(.+)|)$/
J.event={global:{},add:function(e,t,i,n,r){var a,o,s,h,l,c,u,d,p,f,m,g=ve.get(e)
if(g)for(i.handler&&(a=i,i=a.handler,r=a.selector),i.guid||(i.guid=J.guid++),(h=g.events)||(h=g.events={}),(o=g.handle)||(o=g.handle=function(t){return typeof J!==Se&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],l=t.length;l--;)s=Ae.exec(t[l])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p&&(u=J.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=J.event.special[p]||{},c=J.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&J.expr.match.needsContext.test(r),namespace:f.join(".")},a),(d=h[p])||(d=h[p]=[],d.delegateCount=0,u.setup&&u.setup.call(e,n,f,o)!==!1||e.addEventListener&&e.addEventListener(p,o,!1)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),J.event.global[p]=!0)},remove:function(e,t,i,n,r){var a,o,s,h,l,c,u,d,p,f,m,g=ve.hasData(e)&&ve.get(e)
if(g&&(h=g.events)){for(t=(t||"").match(pe)||[""],l=t.length;l--;)if(s=Ae.exec(t[l])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(u=J.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=h[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)c=d[a],!r&&m!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(e,c))
o&&!d.length&&(u.teardown&&u.teardown.call(e,f,g.handle)!==!1||J.removeEvent(e,p,g.handle),delete h[p])}else for(p in h)J.event.remove(e,p+t[l],i,n,!0)
J.isEmptyObject(h)&&(delete g.handle,ve.remove(e,"events"))}},trigger:function(t,i,n,r){var a,o,s,h,l,c,u,d=[n||Q],p=K.call(t,"type")?t.type:t,f=K.call(t,"namespace")?t.namespace.split("."):[]
if(o=s=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!Ee.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,t=t[J.expando]?t:new J.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:J.makeArray(i,[t]),u=J.event.special[p]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!J.isWindow(n)){for(h=u.delegateType||p,Ee.test(h+p)||(o=o.parentNode);o;o=o.parentNode)d.push(o),s=o
s===(n.ownerDocument||Q)&&d.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=d[a++])&&!t.isPropagationStopped();)t.type=a>1?h:u.bindType||p,c=(ve.get(o,"events")||{})[t.type]&&ve.get(o,"handle"),c&&c.apply(o,i),c=l&&o[l],c&&c.apply&&J.acceptData(o)&&(t.result=c.apply(o,i),t.result===!1&&t.preventDefault())
return t.type=p,r||t.isDefaultPrevented()||u._default&&u._default.apply(d.pop(),i)!==!1||!J.acceptData(n)||l&&J.isFunction(n[p])&&!J.isWindow(n)&&(s=n[l],s&&(n[l]=null),J.event.triggered=p,n[p](),J.event.triggered=void 0,s&&(n[l]=s)),t.result}},dispatch:function(e){e=J.event.fix(e)
var t,i,n,r,a,o=[],s=H.call(arguments),h=(ve.get(this,"events")||{})[e.type]||[],l=J.event.special[e.type]||{}
if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(o=J.event.handlers.call(this,e,h),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,n=((J.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()))
return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,a,o=[],s=t.delegateCount,h=e.target
if(s&&h.nodeType&&(!e.button||"click"!==e.type))for(;h!==this;h=h.parentNode||this)if(h.disabled!==!0||"click"!==e.type){for(n=[],i=0;s>i;i++)a=t[i],r=a.selector+" ",void 0===n[r]&&(n[r]=a.needsContext?J(r,this).index(h)>=0:J.find(r,this,null,[h]).length),n[r]&&n.push(a)
n.length&&o.push({elem:h,handlers:n})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,a=t.button
return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||Q,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[J.expando])return e
var t,i,n,r=e.type,a=e,o=this.fixHooks[r]
for(o||(this.fixHooks[r]=o=Ce.test(r)?this.mouseHooks:Te.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new J.Event(a),t=n.length;t--;)i=n[t],e[i]=a[i]
return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=J.extend(new J.Event,i,{type:e,isSimulated:!0,originalEvent:{}})
n?J.event.trigger(r,null,t):J.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},J.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent
this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent
this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent
this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,a=e.handleObj
return(!r||r!==n&&!J.contains(n,r))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),Z.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)}
J.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=ve.access(n,t)
r||n.addEventListener(e,i,!0),ve.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=ve.access(n,t)-1
r?ve.access(n,t,r):(n.removeEventListener(e,i,!0),ve.remove(n,t))}}}),J.fn.extend({on:function(e,t,i,n,r){var a,o
if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0)
for(o in e)this.on(o,t,i,e[o],r)
return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=c
else if(!n)return this
return 1===r&&(a=n,n=function(e){return J().off(e),a.apply(this,arguments)},n.guid=a.guid||(a.guid=J.guid++)),this.each(function(){J.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r
if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,J(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this
if("object"==typeof e){for(r in e)this.off(r,t,e[r])
return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=c),this.each(function(){J.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0]
return i?J.event.trigger(e,t,i,!0):void 0}})
var Le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pe=/<([\w:]+)/,Re=/<|&#?\w+;/,Fe=/<(?:script|style|link)/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^$|\/(?:java|ecma)script/i,Oe=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]}
ze.optgroup=ze.option,ze.tbody=ze.tfoot=ze.colgroup=ze.caption=ze.thead,ze.th=ze.td,J.extend({clone:function(e,t,i){var n,r,a,o,s=e.cloneNode(!0),h=J.contains(e.ownerDocument,e)
if(!(Z.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(o=v(s),a=v(e),n=0,r=a.length;r>n;n++)y(a[n],o[n])
if(t)if(i)for(a=a||v(e),o=o||v(s),n=0,r=a.length;r>n;n++)g(a[n],o[n])
else g(e,s)
return o=v(s,"script"),o.length>0&&m(o,!h&&v(e,"script")),s},buildFragment:function(e,t,i,n){for(var r,a,o,s,h,l,c=t.createDocumentFragment(),u=[],d=0,p=e.length;p>d;d++)if(r=e[d],r||0===r)if("object"===J.type(r))J.merge(u,r.nodeType?[r]:r)
else if(Re.test(r)){for(a=a||c.appendChild(t.createElement("div")),o=(Pe.exec(r)||["",""])[1].toLowerCase(),s=ze[o]||ze._default,a.innerHTML=s[1]+r.replace(Le,"<$1></$2>")+s[2],l=s[0];l--;)a=a.lastChild
J.merge(u,a.childNodes),a=c.firstChild,a.textContent=""}else u.push(t.createTextNode(r))
for(c.textContent="",d=0;r=u[d++];)if((!n||-1===J.inArray(r,n))&&(h=J.contains(r.ownerDocument,r),a=v(c.appendChild(r),"script"),h&&m(a),i))for(l=0;r=a[l++];)Be.test(r.type||"")&&i.push(r)
return c},cleanData:function(e){for(var t,i,n,r,a=J.event.special,o=0;void 0!==(i=e[o]);o++){if(J.acceptData(i)&&(r=i[ve.expando],r&&(t=ve.cache[r]))){if(t.events)for(n in t.events)a[n]?J.event.remove(i,n):J.removeEvent(i,n,t.handle)
ve.cache[r]&&delete ve.cache[r]}delete ye.cache[i[ye.expando]]}}}),J.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e)
t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e)
t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?J.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||J.cleanData(v(i)),i.parentNode&&(t&&J.contains(i.ownerDocument,i)&&m(v(i,"script")),i.parentNode.removeChild(i))
return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(v(e,!1)),e.textContent="")
return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},i=0,n=this.length
if(void 0===e&&1===t.nodeType)return t.innerHTML
if("string"==typeof e&&!Fe.test(e)&&!ze[(Pe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Le,"<$1></$2>")
try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(J.cleanData(v(t,!1)),t.innerHTML=e)
t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0]
return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=G.apply([],e)
var i,n,r,a,o,s,h=0,l=this.length,c=this,u=l-1,d=e[0],m=J.isFunction(d)
if(m||l>1&&"string"==typeof d&&!Z.checkClone&&De.test(d))return this.each(function(i){var n=c.eq(i)
m&&(e[0]=d.call(this,i,n.html())),n.domManip(e,t)})
if(l&&(i=J.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(r=J.map(v(i,"script"),p),a=r.length;l>h;h++)o=i,h!==u&&(o=J.clone(o,!0,!0),a&&J.merge(r,v(o,"script"))),t.call(this[h],o,h)
if(a)for(s=r[r.length-1].ownerDocument,J.map(r,f),h=0;a>h;h++)o=r[h],Be.test(o.type||"")&&!ve.access(o,"globalEval")&&J.contains(s,o)&&(o.src?J._evalUrl&&J._evalUrl(o.src):J.globalEval(o.textContent.replace(Ve,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var i,n=[],r=J(e),a=r.length-1,o=0;a>=o;o++)i=o===a?this:this.clone(!0),J(r[o])[t](i),q.apply(n,i.get())
return this.pushStack(n)}})
var Ue,Ne={},Ie=/^margin/,je=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),He=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)}
!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(a)
var t=e.getComputedStyle(o,null)
i="1%"!==t.top,n="4px"===t.width,r.removeChild(a)}var i,n,r=Q.documentElement,a=Q.createElement("div"),o=Q.createElement("div")
o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",a.appendChild(o),e.getComputedStyle&&J.extend(Z,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,i=o.appendChild(Q.createElement("div"))
return i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",o.style.width="1px",r.appendChild(a),t=!parseFloat(e.getComputedStyle(i,null).marginRight),r.removeChild(a),o.removeChild(i),t}}))}(),J.swap=function(e,t,i,n){var r,a,o={}
for(a in t)o[a]=e.style[a],e.style[a]=t[a]
r=i.apply(e,n||[])
for(a in t)e.style[a]=o[a]
return r}
var Ge=/^(none|table(?!-c[ea]).+)/,qe=new RegExp("^("+xe+")(.*)$","i"),We=new RegExp("^([+-])=("+xe+")","i"),Xe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","O","Moz","ms"]
J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=x(e,"opacity")
return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=J.camelCase(t),h=e.style
return t=J.cssProps[s]||(J.cssProps[s]=k(h,s)),o=J.cssHooks[t]||J.cssHooks[s],void 0===i?o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:h[t]:(a=typeof i,"string"===a&&(r=We.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(J.css(e,t)),a="number"),null!=i&&i===i&&("number"!==a||J.cssNumber[s]||(i+="px"),Z.clearCloneStyle||""!==i||0!==t.indexOf("background")||(h[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(h[t]=i)),void 0)}},css:function(e,t,i,n){var r,a,o,s=J.camelCase(t)
return t=J.cssProps[s]||(J.cssProps[s]=k(e.style,s)),o=J.cssHooks[t]||J.cssHooks[s],o&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=x(e,t,n)),"normal"===r&&t in Ye&&(r=Ye[t]),""===i||i?(a=parseFloat(r),i===!0||J.isNumeric(a)?a||0:r):r}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,i,n){return i?Ge.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,Xe,function(){return T(e,t,n)}):T(e,t,n):void 0},set:function(e,i,n){var r=n&&He(e)
return M(e,i,n?S(e,t,n,"border-box"===J.css(e,"boxSizing",!1,r),r):0)}}}),J.cssHooks.marginRight=_(Z.reliableMarginRight,function(e,t){return t?J.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+_e[n]+t]=a[n]||a[n-2]||a[0]
return r}},Ie.test(e)||(J.cssHooks[e+t].set=M)}),J.fn.extend({css:function(e,t){return ge(this,function(e,t,i){var n,r,a={},o=0
if(J.isArray(t)){for(n=He(e),r=t.length;r>o;o++)a[t[o]]=J.css(e,t[o],!1,n)
return a}return void 0!==i?J.style(e,t,i):J.css(e,t)},e,t,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?J(this).show():J(this).hide()})}}),J.Tween=E,E.prototype={constructor:E,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(J.cssNumber[i]?"":"px")},cur:function(){var e=E.propHooks[this.prop]
return e&&e.get?e.get(this):E.propHooks._default.get(this)},run:function(e){var t,i=E.propHooks[this.prop]
return this.options.duration?this.pos=t=J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(e){var t
return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=E.prototype.init,J.fx.step={}
var Ze,Qe,$e=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[R],it={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Je.exec(t),a=r&&r[3]||(J.cssNumber[e]?"":"px"),o=(J.cssNumber[e]||"px"!==a&&+n)&&Je.exec(J.css(i.elem,e)),s=1,h=20
if(o&&o[3]!==a){a=a||o[3],r=r||[],o=+n||1
do s=s||".5",o/=s,J.style(i.elem,e,o+a)
while(s!==(s=i.cur()/n)&&1!==s&&--h)}return r&&(o=i.start=+o||+n||0,i.unit=a,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]}
J.Animation=J.extend(D,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ")
for(var i,n=0,r=e.length;r>n;n++)i=e[n],it[i]=it[i]||[],it[i].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),J.speed=function(e,t,i){var n=e&&"object"==typeof e?J.extend({},e):{complete:i||!i&&t||J.isFunction(e)&&e,duration:e,easing:i&&t||t&&!J.isFunction(t)&&t}
return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=J.isEmptyObject(e),a=J.speed(t,i,n),o=function(){var t=D(this,J.extend({},e),a);(r||ve.get(this,"finish"))&&t.stop(!0)}
return o.finish=o,r||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop
delete e.stop,t(i)}
return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=J.timers,o=ve.get(this)
if(r)o[r]&&o[r].stop&&n(o[r])
else for(r in o)o[r]&&o[r].stop&&et.test(r)&&n(o[r])
for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(i),t=!1,a.splice(r,1));(t||!i)&&J.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ve.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=J.timers,o=n?n.length:0
for(i.finish=!0,J.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1))
for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this)
delete i.finish})}}),J.each(["toggle","show","hide"],function(e,t){var i=J.fn[t]
J.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(L(t,!0),e,n,r)}}),J.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),J.timers=[],J.fx.tick=function(){var e,t=0,i=J.timers
for(Ze=J.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1)
i.length||J.fx.stop(),Ze=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Qe||(Qe=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Qe),Qe=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e)
i.stop=function(){clearTimeout(n)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),i=t.appendChild(Q.createElement("option"))
e.type="checkbox",Z.checkOn=""!==e.value,Z.optSelected=i.selected,t.disabled=!0,Z.optDisabled=!i.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",Z.radioValue="t"===e.value}()
var nt,rt,at=J.expr.attrHandle
J.fn.extend({attr:function(e,t){return ge(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,i){var n,r,a=e.nodeType
if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Se?J.prop(e,t,i):(1===a&&J.isXMLDoc(e)||(t=t.toLowerCase(),n=J.attrHooks[t]||(J.expr.match.bool.test(t)?rt:nt)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=J.find.attr(e,t),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void J.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,a=t&&t.match(pe)
if(a&&1===e.nodeType)for(;i=a[r++];)n=J.propFix[i]||i,J.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!Z.radioValue&&"radio"===t&&J.nodeName(e,"input")){var i=e.value
return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),rt={set:function(e,t,i){return t===!1?J.removeAttr(e,i):e.setAttribute(i,i),i}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var i=at[t]||J.find.attr
at[t]=function(e,t,n){var r,a
return n||(a=at[t],at[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,at[t]=a),r}})
var ot=/^(?:input|select|textarea|button)$/i
J.fn.extend({prop:function(e,t){return ge(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,r,a,o=e.nodeType
if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!J.isXMLDoc(e),a&&(t=J.propFix[t]||t,r=J.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ot.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Z.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode
return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this})
var st=/[\t\r\n\f]/g
J.fn.extend({addClass:function(e){var t,i,n,r,a,o,s="string"==typeof e&&e,h=0,l=this.length
if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))})
if(s)for(t=(e||"").match(pe)||[];l>h;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(st," "):" ")){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ")
o=J.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(e){var t,i,n,r,a,o,s=0===arguments.length||"string"==typeof e&&e,h=0,l=this.length
if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))})
if(s)for(t=(e||"").match(pe)||[];l>h;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(st," "):"")){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ")
o=e?J.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(e,t){var i=typeof e
return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(J.isFunction(e)?function(i){J(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=J(this),a=e.match(pe)||[];t=a[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t)
else(i===Se||"boolean"===i)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(st," ").indexOf(t)>=0)return!0
return!1}})
var ht=/\r/g
J.fn.extend({val:function(e){var t,i,n,r=this[0]
{if(arguments.length)return n=J.isFunction(e),this.each(function(i){var r
1===this.nodeType&&(r=n?e.call(this,i,J(this).val()):e,null==r?r="":"number"==typeof r?r+="":J.isArray(r)&&(r=J.map(r,function(e){return null==e?"":e+""})),t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})
if(r)return t=J.valHooks[r.type]||J.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(ht,""):null==i?"":i)}}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value")
return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,o=a?null:[],s=a?r+1:n.length,h=0>r?s:a?r:0;s>h;h++)if(i=n[h],!(!i.selected&&h!==r||(Z.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&J.nodeName(i.parentNode,"optgroup"))){if(t=J(i).val(),a)return t
o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,a=J.makeArray(t),o=r.length;o--;)n=r[o],(n.selected=J.inArray(n.value,a)>=0)&&(i=!0)
return i||(e.selectedIndex=-1),a}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}},Z.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}})
var lt=J.now(),ct=/\?/
J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,i
if(!e||"string"!=typeof e)return null
try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+e),t}
var ut=/#.*$/,dt=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,gt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},wt={},bt="*/".concat("*"),xt=e.location.href,_t=vt.exec(xt.toLowerCase())||[]
J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt,type:"GET",isLocal:ft.test(_t[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?V(V(e,J.ajaxSettings),t):V(J.ajaxSettings,e)},ajaxPrefilter:B(yt),ajaxTransport:B(wt),ajax:function(e,t){function i(e,t,i,o){var h,c,v,y,b,_=t
2!==w&&(w=2,s&&clearTimeout(s),n=void 0,a=o||"",x.readyState=e>0?4:0,h=e>=200&&300>e||304===e,i&&(y=z(u,x,i)),y=U(u,y,x,h),h?(u.ifModified&&(b=x.getResponseHeader("Last-Modified"),b&&(J.lastModified[r]=b),b=x.getResponseHeader("etag"),b&&(J.etag[r]=b)),204===e||"HEAD"===u.type?_="nocontent":304===e?_="notmodified":(_=y.state,c=y.data,v=y.error,h=!v)):(v=_,(e||!_)&&(_="error",0>e&&(e=0))),x.status=e,x.statusText=(t||_)+"",h?f.resolveWith(d,[c,_,x]):f.rejectWith(d,[x,_,v]),x.statusCode(g),g=void 0,l&&p.trigger(h?"ajaxSuccess":"ajaxError",[x,u,h?c:v]),m.fireWith(d,[x,_]),l&&(p.trigger("ajaxComplete",[x,u]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{}
var n,r,a,o,s,h,l,c,u=J.ajaxSetup({},t),d=u.context||u,p=u.context&&(d.nodeType||d.jquery)?J(d):J.event,f=J.Deferred(),m=J.Callbacks("once memory"),g=u.statusCode||{},v={},y={},w=0,b="canceled",x={readyState:0,getResponseHeader:function(e){var t
if(2===w){if(!o)for(o={};t=pt.exec(a);)o[t[1].toLowerCase()]=t[2]
t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase()
return w||(e=y[i]=y[i]||e,v[e]=t),this},overrideMimeType:function(e){return w||(u.mimeType=e),this},statusCode:function(e){var t
if(e)if(2>w)for(t in e)g[t]=[g[t],e[t]]
else x.always(e[x.status])
return this},abort:function(e){var t=e||b
return n&&n.abort(t),i(0,t),this}}
if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,u.url=((e||u.url||xt)+"").replace(ut,"").replace(gt,_t[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=J.trim(u.dataType||"*").toLowerCase().match(pe)||[""],null==u.crossDomain&&(h=vt.exec(u.url.toLowerCase()),u.crossDomain=!(!h||h[1]===_t[1]&&h[2]===_t[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(_t[3]||("http:"===_t[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=J.param(u.data,u.traditional)),O(yt,u,t,x),2===w)return x
l=J.event&&u.global,l&&0===J.active++&&J.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!mt.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(ct.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=dt.test(r)?r.replace(dt,"$1_="+lt++):r+(ct.test(r)?"&":"?")+"_="+lt++)),u.ifModified&&(J.lastModified[r]&&x.setRequestHeader("If-Modified-Since",J.lastModified[r]),J.etag[r]&&x.setRequestHeader("If-None-Match",J.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+bt+"; q=0.01":""):u.accepts["*"])
for(c in u.headers)x.setRequestHeader(c,u.headers[c])
if(u.beforeSend&&(u.beforeSend.call(d,x,u)===!1||2===w))return x.abort()
b="abort"
for(c in{success:1,error:1,complete:1})x[c](u[c])
if(n=O(wt,u,t,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},u.timeout))
try{w=1,n.send(v,i)}catch(_){if(!(2>w))throw _
i(-1,_)}}else i(-1,"No Transport")
return x},getJSON:function(e,t,i){return J.get(e,t,i,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,i,n,r){return J.isFunction(i)&&(r=r||n,n=i,i=void 0),J.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(e){var t
return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild
return e}).append(this)),this)},wrapInner:function(e){return this.each(J.isFunction(e)?function(t){J(this).wrapInner(e.call(this,t))}:function(){var t=J(this),i=t.contents()
i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e)
return this.each(function(i){J(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)}
var kt=/%20/g,Mt=/\[\]$/,St=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i
J.param=function(e,t){var i,n=[],r=function(e,t){t=J.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}
if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){r(this.name,this.value)})
else for(i in e)N(i,e[i],t,r)
return n.join("&").replace(kt,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements")
return e?J.makeArray(e):this}).filter(function(){var e=this.type
return this.name&&!J(this).is(":disabled")&&Ct.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var i=J(this).val()
return null==i?null:J.isArray(i)?J.map(i,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:i.replace(St,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}}
var Et=0,At={},Lt={0:200,1223:204},Pt=J.ajaxSettings.xhr()
e.attachEvent&&e.attachEvent("onunload",function(){for(var e in At)At[e]()}),Z.cors=!!Pt&&"withCredentials"in Pt,Z.ajax=Pt=!!Pt,J.ajaxTransport(function(e){var t
return Z.cors||Pt&&!e.crossDomain?{send:function(i,n){var r,a=e.xhr(),o=++Et
if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r]
e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest")
for(r in i)a.setRequestHeader(r,i[r])
t=function(e){return function(){t&&(delete At[o],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?n(a.status,a.statusText):n(Lt[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=At[o]=t("abort")
try{a.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,i
return{send:function(n,r){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){i&&i()}}}})
var Rt=[],Ft=/(=)\?(?=&|$)|\?\?/
J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rt.pop()||J.expando+"_"+lt++
return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,i,n){var r,a,o,s=t.jsonp!==!1&&(Ft.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ft.test(t.data)&&"data")
return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ft,"$1"+r):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||J.error(r+" was not called"),o[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){o=arguments},n.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=i.jsonpCallback,Rt.push(r)),o&&J.isFunction(a)&&a(o[0]),o=a=void 0}),"script"):void 0}),J.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null
"boolean"==typeof t&&(i=t,t=!1),t=t||Q
var n=oe.exec(e),r=!i&&[]
return n?[t.createElement(n[1])]:(n=J.buildFragment([e],t,r),r&&r.length&&J(r).remove(),J.merge([],n.childNodes))}
var Dt=J.fn.load
J.fn.load=function(e,t,i){if("string"!=typeof e&&Dt)return Dt.apply(this,arguments)
var n,r,a,o=this,s=e.indexOf(" ")
return s>=0&&(n=J.trim(e.slice(s)),e=e.slice(0,s)),J.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&J.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments,o.html(n?J("<div>").append(J.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){o.each(i,a||[e.responseText,t,e])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length}
var Bt=e.document.documentElement
J.offset={setOffset:function(e,t,i){var n,r,a,o,s,h,l,c=J.css(e,"position"),u=J(e),d={}
"static"===c&&(e.style.position="relative"),s=u.offset(),a=J.css(e,"top"),h=J.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(a+h).indexOf("auto")>-1,l?(n=u.position(),o=n.top,r=n.left):(o=parseFloat(a)||0,r=parseFloat(h)||0),J.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)})
var t,i,n=this[0],r={top:0,left:0},a=n&&n.ownerDocument
if(a)return t=a.documentElement,J.contains(t,n)?(typeof n.getBoundingClientRect!==Se&&(r=n.getBoundingClientRect()),i=I(a),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0}
return"fixed"===J.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(n=e.offset()),n.top+=J.css(e[0],"borderTopWidth",!0),n.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-J.css(i,"marginTop",!0),left:t.left-n.left-J.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Bt;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent
return e||Bt})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i
J.fn[t]=function(r){return ge(this,function(t,r,a){var o=I(t)
return void 0===a?o?o[i]:t[r]:void(o?o.scrollTo(n?e.pageXOffset:a,n?a:e.pageYOffset):t[r]=a)},t,r,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=_(Z.pixelPosition,function(e,i){return i?(i=x(e,t),je.test(i)?J(e).position()[t]+"px":i):void 0})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){J.fn[n]=function(n,r){var a=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border")
return ge(this,function(t,i,n){var r
return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?J.css(t,i,o):J.style(t,i,n,o)},t,a?n:void 0,a,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J})
var Ot=e.jQuery,Vt=e.$
return J.noConflict=function(t){return e.$===J&&(e.$=Vt),t&&e.jQuery===J&&(e.jQuery=Ot),J},typeof t===Se&&(e.jQuery=e.$=J),J})},{}],561:[function(e,t,i){var n=e("./src/ParseError"),r=e("./src/buildTree"),a=e("./src/parseTree"),o=e("./src/utils"),s=function(e,t){o.clearNode(t)
var i=a(e),n=r(i).toNode()
t.appendChild(n)}
"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),s=function(){throw new n("KaTeX doesn't work in quirks mode.")})
var h=function(e){var t=a(e)
return r(t).toMarkup()}
t.exports={render:s,renderToString:h,ParseError:n}},{"./src/ParseError":564,"./src/buildTree":568,"./src/parseTree":573,"./src/utils":575}],562:[function(e,t,i){function n(e){this._input=e}function r(e,t,i){this.text=e,this.data=t,this.position=i}var a=e("./ParseError"),o=[/^[/|@.""`0-9a-zA-Z]/,/^[*+-]/,/^[=<>:]/,/^[,;]/,/^['\^_{}]/,/^[(\[]/,/^[)\]?!]/,/^~/],s=[/^[a-zA-Z0-9`!@*()-=+\[\]'";:?\/.,]/,/^[{}]/,/^~/],h=/^\s*/,l=/^( +|\\  +)/,c=/^\\(?:[a-zA-Z]+|.)/
n.prototype._innerLex=function(e,t,i){var n,o=this._input.slice(e)
if(i)n=o.match(h)[0],e+=n.length,o=o.slice(n.length)
else if(n=o.match(l),null!==n)return new r(" ",null,e+n[0].length)
if(0===o.length)return new r("EOF",null,e)
var s
if(s=o.match(c))return new r(s[0],null,e+s[0].length)
for(var u=0;u<t.length;u++){var d=t[u]
if(s=o.match(d))return new r(s[0],null,e+s[0].length)}throw new a("Unexpected character: '"+o[0]+"'",this,e)}
var u=/^(#[a-z0-9]+|[a-z]+)/i
n.prototype._innerLexColor=function(e){var t=this._input.slice(e),i=t.match(h)[0]
e+=i.length,t=t.slice(i.length)
var n
if(n=t.match(u))return new r(n[0],null,e+n[0].length)
throw new a("Invalid color",this,e)}
var d=/^(-?)\s*(\d+(?:\.\d*)?|\.\d+)\s*([a-z]{2})/
n.prototype._innerLexSize=function(e){var t=this._input.slice(e),i=t.match(h)[0]
e+=i.length,t=t.slice(i.length)
var n
if(n=t.match(d)){var o=n[3]
if("em"!==o&&"ex"!==o)throw new a("Invalid unit: '"+o+"'",this,e)
return new r(n[0],{number:+(n[1]+n[2]),unit:o},e+n[0].length)}throw new a("Invalid size",this,e)},n.prototype._innerLexWhitespace=function(e){var t=this._input.slice(e),i=t.match(h)[0]
return e+=i.length,new r(i,null,e)},n.prototype.lex=function(e,t){return"math"===t?this._innerLex(e,o,!0):"text"===t?this._innerLex(e,s,!1):"color"===t?this._innerLexColor(e):"size"===t?this._innerLexSize(e):"whitespace"===t?this._innerLexWhitespace(e):void 0},t.exports=n},{"./ParseError":564}],563:[function(e,t,i){function n(e,t,i,n,r){this.style=e,this.color=i,this.size=t,void 0===n&&(n=e),this.parentStyle=n,void 0===r&&(r=t),this.parentSize=r}n.prototype.withStyle=function(e){return new n(e,this.size,this.color,this.style,this.size)},n.prototype.withSize=function(e){return new n(this.style,e,this.color,this.style,this.size)},n.prototype.withColor=function(e){return new n(this.style,this.size,e,this.style,this.size)},n.prototype.reset=function(){return new n(this.style,this.size,this.color,this.style,this.size)}
var r={"katex-blue":"#6495ed","katex-orange":"#ffa500","katex-pink":"#ff00af","katex-red":"#df0030","katex-green":"#28ae7b","katex-gray":"gray","katex-purple":"#9d38bd"}
n.prototype.getColor=function(){return r[this.color]||this.color},t.exports=n},{}],564:[function(e,t,i){function n(e,t,i){var r="KaTeX parse error: "+e
if(void 0!==t&&void 0!==i){r+=" at position "+i+": "
var a=t._input
a=a.slice(0,i)+"̲"+a.slice(i)
var o=Math.max(0,i-15),s=i+15
r+=a.slice(o,s)}var h=new Error(r)
return h.name="ParseError",h.__proto__=n.prototype,h.position=i,h}n.prototype.__proto__=Error.prototype,t.exports=n},{}],565:[function(e,t,i){function n(e){this.lexer=new h(e)}function r(e,t,i){this.type=e,this.value=t,this.mode=i}function a(e,t){this.result=e,this.position=t}function o(e,t,i,n,r,a){this.result=e,this.isFunction=t,this.allowedInText=i,this.numArgs=n,this.numOptionalArgs=r,this.argTypes=a}var s=e("./functions"),h=e("./Lexer"),l=e("./symbols"),c=e("./utils"),u=e("./ParseError")
n.prototype.expect=function(e,t){if(e.text!==t)throw new u("Expected '"+t+"', got '"+e.text+"'",this.lexer,e.position)},n.prototype.parse=function(e){var t=this.parseInput(0,"math")
return t.result},n.prototype.parseInput=function(e,t){var i=this.parseExpression(e,t,!1,null),n=this.lexer.lex(i.position,t)
return this.expect(n,"EOF"),i},n.prototype.parseExpression=function(e,t,i,n){for(var r=[];;){var o=this.lexer.lex(e,t)
if(null!=n&&o.text===n)break
var s=this.parseAtom(e,t)
if(!s)break
if(i&&"infix"===s.result.type)break
r.push(s.result),e=s.position}return new a(this.handleInfixNodes(r,t),e)},n.prototype.handleInfixNodes=function(e,t){for(var i,n,a=-1,o=0;o<e.length;o++){var h=e[o]
if("infix"===h.type){if(-1!==a)throw new u("only one infix operator per group",this.lexer,-1)
a=o,n=h.value.replaceWith,i=s.funcs[n]}}if(-1!==a){var l,c,d=e.slice(0,a),p=e.slice(a+1)
l=1===d.length&&"ordgroup"===d[0].type?d[0]:new r("ordgroup",d,t),c=1===p.length&&"ordgroup"===p[0].type?p[0]:new r("ordgroup",p,t)
var f=i.handler(n,l,c)
return[new r(f.type,f,t)]}return e}
var d=1
n.prototype.handleSupSubscript=function(e,t,i,n){var r=this.parseGroup(e,t)
if(r){if(r.numArgs>0){var a=s.getGreediness(r.result.result)
if(a>d)return this.parseFunction(e,t)
throw new u("Got function '"+r.result.result+"' with no arguments as "+n,this.lexer,e)}return r.result}throw new u("Expected group after '"+i+"'",this.lexer,e)},n.prototype.parseAtom=function(e,t){var i=this.parseImplicitGroup(e,t)
if("text"===t)return i
var n
i?n=i.position:(n=e,i=void 0)
for(var o,s,h;;){var l=this.lexer.lex(n,t)
if("^"===l.text){if(o)throw new u("Double superscript",this.lexer,n)
h=this.handleSupSubscript(l.position,t,l.text,"superscript"),n=h.position,o=h.result}else if("_"===l.text){if(s)throw new u("Double subscript",this.lexer,n)
h=this.handleSupSubscript(l.position,t,l.text,"subscript"),n=h.position,s=h.result}else{if("'"!==l.text)break
var c=new r("textord","\\prime",t),d=[c]
for(n=l.position;"'"===(l=this.lexer.lex(n,t)).text;)d.push(c),n=l.position
o=new r("ordgroup",d,t)}}return o||s?new a(new r("supsub",{base:i&&i.result,sup:o,sub:s},t),n):i}
var p=["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],f=["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"]
n.prototype.parseImplicitGroup=function(e,t){var i=this.parseSymbol(e,t)
if(!i||!i.result)return this.parseFunction(e,t)
var n,o=i.result.result
if("\\left"===o){var s=this.parseFunction(e,t)
n=this.parseExpression(s.position,t,!1,"}")
var h=this.parseSymbol(n.position,t)
if(h&&"\\right"===h.result.result){var l=this.parseFunction(n.position,t)
return new a(new r("leftright",{body:n.result,left:s.result.value.value,right:l.result.value.value},t),l.position)}throw new u("Missing \\right",this.lexer,n.position)}return"\\right"===o?null:c.contains(p,o)?(n=this.parseExpression(i.result.position,t,!1,"}"),new a(new r("sizing",{size:"size"+(c.indexOf(p,o)+1),value:n.result},t),n.position)):c.contains(f,o)?(n=this.parseExpression(i.result.position,t,!0,"}"),new a(new r("styling",{style:o.slice(1,o.length-5),value:n.result},t),n.position)):this.parseFunction(e,t)},n.prototype.parseFunction=function(e,t){var i=this.parseGroup(e,t)
if(i){if(i.isFunction){var n=i.result.result
if("text"===t&&!i.allowedInText)throw new u("Can't use function '"+n+"' in text mode",this.lexer,i.position)
var o,h=i.result.position,l=i.numArgs+i.numOptionalArgs
if(l>0){for(var c=s.getGreediness(n),d=[n],p=[h],f=0;l>f;f++){var m,g=i.argTypes&&i.argTypes[f]
if(f<i.numOptionalArgs){if(m=g?this.parseSpecialGroup(h,g,t,!0):this.parseOptionalGroup(h,t),!m){d.push(null),p.push(h)
continue}}else if(m=g?this.parseSpecialGroup(h,g,t):this.parseGroup(h,t),!m)throw new u("Expected group after '"+i.result.result+"'",this.lexer,h)
var v
if(m.numArgs>0){var y=s.getGreediness(m.result.result)
if(!(y>c))throw new u("Got function '"+m.result.result+"' as argument to function '"+i.result.result+"'",this.lexer,m.result.position-1)
v=this.parseFunction(h,t)}else v=m.result
d.push(v.result),p.push(v.position),h=v.position}d.push(p),o=s.funcs[n].handler.apply(this,d)}else o=s.funcs[n].handler.apply(this,[n])
return new a(new r(o.type,o,t),h)}return i.result}return null},n.prototype.parseSpecialGroup=function(e,t,i,n){if("color"===t||"size"===t){var s=this.lexer.lex(e,i)
if(n&&"["!==s.text)return null
this.expect(s,n?"[":"{")
var h,l=this.lexer.lex(s.position,t)
h="color"===t?l.text:l.data
var c=this.lexer.lex(l.position,i)
return this.expect(c,n?"]":"}"),new o(new a(new r(t,h,i),c.position),!1)}if("text"===t){var u=this.lexer.lex(e,"whitespace")
e=u.position}return n?this.parseOptionalGroup(e,t):this.parseGroup(e,t)},n.prototype.parseGroup=function(e,t){var i=this.lexer.lex(e,t)
if("{"===i.text){var n=this.parseExpression(i.position,t,!1,"}"),s=this.lexer.lex(n.position,t)
return this.expect(s,"}"),new o(new a(new r("ordgroup",n.result,t),s.position),!1)}return this.parseSymbol(e,t)},n.prototype.parseOptionalGroup=function(e,t){var i=this.lexer.lex(e,t)
if("["===i.text){var n=this.parseExpression(i.position,t,!1,"]"),s=this.lexer.lex(n.position,t)
return this.expect(s,"]"),new o(new a(new r("ordgroup",n.result,t),s.position),!1)}return null},n.prototype.parseSymbol=function(e,t){var i=this.lexer.lex(e,t)
if(s.funcs[i.text]){var n=s.funcs[i.text],h=n.argTypes
if(h){h=h.slice()
for(var c=0;c<h.length;c++)"original"===h[c]&&(h[c]=t)}return new o(new a(i.text,i.position),!0,n.allowedInText,n.numArgs,n.numOptionalArgs,h)}return l[t][i.text]?new o(new a(new r(l[t][i.text].group,i.text,t),i.position),!1):null},t.exports=n},{"./Lexer":562,"./ParseError":564,"./functions":572,"./symbols":574,"./utils":575}],566:[function(e,t,i){function n(e,t,i,n){this.id=e,this.size=t,this.cramped=n,this.sizeMultiplier=i}n.prototype.sup=function(){return f[m[this.id]]},n.prototype.sub=function(){return f[g[this.id]]},n.prototype.fracNum=function(){return f[v[this.id]]},n.prototype.fracDen=function(){return f[y[this.id]]},n.prototype.cramp=function(){return f[w[this.id]]},n.prototype.cls=function(){return d[this.size]+(this.cramped?" cramped":" uncramped")},n.prototype.reset=function(){return p[this.size]}
var r=0,a=1,o=2,s=3,h=4,l=5,c=6,u=7,d=["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"],p=["reset-textstyle","reset-textstyle","reset-scriptstyle","reset-scriptscriptstyle"],f=[new n(r,0,1,!1),new n(a,0,1,!0),new n(o,1,1,!1),new n(s,1,1,!0),new n(h,2,.7,!1),new n(l,2,.7,!0),new n(c,3,.5,!1),new n(u,3,.5,!0)],m=[h,l,h,l,c,u,c,u],g=[l,l,l,l,u,u,u,u],v=[o,s,h,l,c,u,c,u],y=[s,s,l,l,u,u,u,u],w=[a,a,s,s,l,l,u,u]
t.exports={DISPLAY:f[r],TEXT:f[o],SCRIPT:f[h],SCRIPTSCRIPT:f[c]}},{}],567:[function(e,t,i){var n=e("./domTree"),r=e("./fontMetrics"),a=e("./symbols"),o=function(e,t,i,o,s){a[i][e]&&a[i][e].replace&&(e=a[i][e].replace)
var h,l=r.getCharacterMetrics(e,t)
return l?h=new n.symbolNode(e,l.height,l.depth,l.italic,l.skew,s):("undefined"!=typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"'"),h=new n.symbolNode(e,0,0,0,0,s)),o&&(h.style.color=o),h},s=function(e,t,i,n){return o(e,"Math-Italic",t,i,n.concat(["mathit"]))},h=function(e,t,i,n){return"main"===a[t][e].font?o(e,"Main-Regular",t,i,n):o(e,"AMS-Regular",t,i,n.concat(["amsrm"]))},l=function(e){var t=0,i=0,n=0
if(e.children)for(var r=0;r<e.children.length;r++)e.children[r].height>t&&(t=e.children[r].height),e.children[r].depth>i&&(i=e.children[r].depth),e.children[r].maxFontSize>n&&(n=e.children[r].maxFontSize)
e.height=t,e.depth=i,e.maxFontSize=n},c=function(e,t,i){var r=new n.span(e,t)
return l(r),i&&(r.style.color=i),r},u=function(e){var t=new n.documentFragment(e)
return l(t),t},d=function(e,t){var i=c([],[new n.symbolNode("​")])
i.style.fontSize=t/e.style.sizeMultiplier+"em"
var r=c(["fontsize-ensurer","reset-"+e.size,"size5"],[i])
return r},p=function(e,t,i,r){var a,o,s
if("individualShift"===t){var h=e
for(e=[h[0]],a=-h[0].shift-h[0].elem.depth,o=a,s=1;s<h.length;s++){var l=-h[s].shift-o-h[s].elem.depth,u=l-(h[s-1].elem.height+h[s-1].elem.depth)
o+=l,e.push({type:"kern",size:u}),e.push(h[s])}}else if("top"===t){var p=i
for(s=0;s<e.length;s++)p-="kern"===e[s].type?e[s].size:e[s].elem.height+e[s].elem.depth
a=p}else a="bottom"===t?-i:"shift"===t?-e[0].elem.depth-i:"firstBaseline"===t?-e[0].elem.depth:0
var f=0
for(s=0;s<e.length;s++)"elem"===e[s].type&&(f=Math.max(f,e[s].elem.maxFontSize))
var m=d(r,f),g=[]
for(o=a,s=0;s<e.length;s++)if("kern"===e[s].type)o+=e[s].size
else{var v=e[s].elem,y=-v.depth-o
o+=v.height+v.depth
var w=c([],[m,v])
w.height-=y,w.depth+=y,w.style.top=y+"em",g.push(w)}var b=c(["baseline-fix"],[m,new n.symbolNode("​")])
g.push(b)
var x=c(["vlist"],g)
return x.height=Math.max(o,x.height),x.depth=Math.max(-a,x.depth),x}
t.exports={makeSymbol:o,mathit:s,mathrm:h,makeSpan:c,makeFragment:u,makeVList:p}},{"./domTree":570,"./fontMetrics":571,"./symbols":574}],568:[function(e,t,i){var n=e("./Options"),r=e("./ParseError"),a=e("./Style"),o=e("./buildCommon"),s=e("./delimiter"),h=e("./domTree"),l=e("./fontMetrics"),c=e("./utils"),u=o.makeSpan,d=function(e,t,i){for(var n=[],r=0;r<e.length;r++){var a=e[r]
n.push(b(a,t,i)),i=a}return n},p={mathord:"mord",textord:"mord",bin:"mbin",rel:"mrel",text:"mord",open:"mopen",close:"mclose",inner:"minner",frac:"minner",spacing:"mord",punct:"mpunct",ordgroup:"mord",op:"mop",katex:"mord",overline:"mord",rule:"mord",leftright:"minner",sqrt:"mord",accent:"mord"},f=function(e){return null==e?p.mathord:"supsub"===e.type?f(e.value.base):"llap"===e.type||"rlap"===e.type?f(e.value):"color"===e.type?f(e.value.value):"sizing"===e.type?f(e.value.value):"styling"===e.type?f(e.value.value):"delimsizing"===e.type?p[e.value.delimType]:p[e.type]},m=function(e,t){return e?"op"===e.type?e.value.limits&&t.style.size===a.DISPLAY.size:"accent"===e.type?v(e.value.base):null:!1},g=function(e){return e?"ordgroup"===e.type?1===e.value.length?g(e.value[0]):e:"color"===e.type&&1===e.value.value.length?g(e.value.value[0]):e:!1},v=function(e){var t=g(e)
return"mathord"===t.type||"textord"===t.type||"bin"===t.type||"rel"===t.type||"inner"===t.type||"open"===t.type||"close"===t.type||"punct"===t.type},y={mathord:function(e,t,i){return o.mathit(e.value,e.mode,t.getColor(),["mord"])},textord:function(e,t,i){return o.mathrm(e.value,e.mode,t.getColor(),["mord"])},bin:function(e,t,i){for(var n="mbin",r=i;r&&"color"==r.type;){var a=r.value.value
r=a[a.length-1]}return(!i||c.contains(["mbin","mopen","mrel","mop","mpunct"],f(r)))&&(e.type="textord",n="mord"),o.mathrm(e.value,e.mode,t.getColor(),[n])},rel:function(e,t,i){return o.mathrm(e.value,e.mode,t.getColor(),["mrel"])},open:function(e,t,i){return o.mathrm(e.value,e.mode,t.getColor(),["mopen"])},close:function(e,t,i){return o.mathrm(e.value,e.mode,t.getColor(),["mclose"])},inner:function(e,t,i){return o.mathrm(e.value,e.mode,t.getColor(),["minner"])},punct:function(e,t,i){return o.mathrm(e.value,e.mode,t.getColor(),["mpunct"])},ordgroup:function(e,t,i){return u(["mord",t.style.cls()],d(e.value,t.reset()))},text:function(e,t,i){return u(["text","mord",t.style.cls()],d(e.value.body,t.reset()))},color:function(e,t,i){var n=d(e.value.value,t.withColor(e.value.color),i)
return new o.makeFragment(n)},supsub:function(e,t,i){if(m(e.value.base,t))return y[e.value.base.type](e,t,i)
var n,r,s,c,d=b(e.value.base,t.reset())
e.value.sup&&(s=b(e.value.sup,t.withStyle(t.style.sup())),n=u([t.style.reset(),t.style.sup().cls()],[s])),e.value.sub&&(c=b(e.value.sub,t.withStyle(t.style.sub())),r=u([t.style.reset(),t.style.sub().cls()],[c]))
var p,g
v(e.value.base)?(p=0,g=0):(p=d.height-l.metrics.supDrop,g=d.depth+l.metrics.subDrop)
var w
w=t.style===a.DISPLAY?l.metrics.sup1:t.style.cramped?l.metrics.sup3:l.metrics.sup2
var x,_=a.TEXT.sizeMultiplier*t.style.sizeMultiplier,k=.5/l.metrics.ptPerEm/_+"em"
if(e.value.sup)if(e.value.sub){p=Math.max(p,w,s.depth+.25*l.metrics.xHeight),g=Math.max(g,l.metrics.sub2)
var M=l.metrics.defaultRuleThickness
if(p-s.depth-(c.height-g)<4*M){g=4*M-(p-s.depth)+c.height
var S=.8*l.metrics.xHeight-(p-s.depth)
S>0&&(p+=S,g-=S)}x=o.makeVList([{type:"elem",elem:r,shift:g},{type:"elem",elem:n,shift:-p}],"individualShift",null,t),d instanceof h.symbolNode&&(x.children[0].style.marginLeft=-d.italic+"em"),x.children[0].style.marginRight=k,x.children[1].style.marginRight=k}else p=Math.max(p,w,s.depth+.25*l.metrics.xHeight),x=o.makeVList([{type:"elem",elem:n}],"shift",-p,t),x.children[0].style.marginRight=k
else g=Math.max(g,l.metrics.sub1,c.height-.8*l.metrics.xHeight),x=o.makeVList([{type:"elem",elem:r}],"shift",g,t),x.children[0].style.marginRight=k,d instanceof h.symbolNode&&(x.children[0].style.marginLeft=-d.italic+"em")
return u([f(e.value.base)],[d,x])},genfrac:function(e,t,i){var n=t.style
"display"===e.value.size?n=a.DISPLAY:"text"===e.value.size&&(n=a.TEXT)
var r,h=n.fracNum(),c=n.fracDen(),d=b(e.value.numer,t.withStyle(h)),p=u([n.reset(),h.cls()],[d]),f=b(e.value.denom,t.withStyle(c)),m=u([n.reset(),c.cls()],[f])
r=e.value.hasBarLine?l.metrics.defaultRuleThickness/t.style.sizeMultiplier:0
var g,v,y
n.size===a.DISPLAY.size?(g=l.metrics.num1,v=r>0?3*r:7*l.metrics.defaultRuleThickness,y=l.metrics.denom1):(r>0?(g=l.metrics.num2,v=r):(g=l.metrics.num3,v=3*l.metrics.defaultRuleThickness),y=l.metrics.denom2)
var w
if(0===r){var x=g-d.depth-(f.height-y)
v>x&&(g+=.5*(v-x),y+=.5*(v-x)),w=o.makeVList([{type:"elem",elem:m,shift:y},{type:"elem",elem:p,shift:-g}],"individualShift",null,t)}else{var _=l.metrics.axisHeight
g-d.depth-(_+.5*r)<v&&(g+=v-(g-d.depth-(_+.5*r))),_-.5*r-(f.height-y)<v&&(y+=v-(_-.5*r-(f.height-y)))
var k=u([t.style.reset(),a.TEXT.cls(),"frac-line"])
k.height=r
var M=-(_-.5*r)
w=o.makeVList([{type:"elem",elem:m,shift:y},{type:"elem",elem:k,shift:M},{type:"elem",elem:p,shift:-g}],"individualShift",null,t)}w.height*=n.sizeMultiplier/t.style.sizeMultiplier,w.depth*=n.sizeMultiplier/t.style.sizeMultiplier
var S,T=[u(["mfrac"],[w])]
return S=n.size===a.DISPLAY.size?l.metrics.delim1:l.metrics.getDelim2(n),null!=e.value.leftDelim&&T.unshift(s.customSizedDelim(e.value.leftDelim,S,!0,t.withStyle(n),e.mode)),null!=e.value.rightDelim&&T.push(s.customSizedDelim(e.value.rightDelim,S,!0,t.withStyle(n),e.mode)),u(["minner",t.style.reset(),n.cls()],T,t.getColor())},spacing:function(e,t,i){if("\\ "===e.value||"\\space"===e.value||" "===e.value||"~"===e.value)return u(["mord","mspace"],[o.mathrm(e.value,e.mode)])
var n={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"}
return u(["mord","mspace",n[e.value]])},llap:function(e,t,i){var n=u(["inner"],[b(e.value.body,t.reset())]),r=u(["fix"],[])
return u(["llap",t.style.cls()],[n,r])},rlap:function(e,t,i){var n=u(["inner"],[b(e.value.body,t.reset())]),r=u(["fix"],[])
return u(["rlap",t.style.cls()],[n,r])},op:function(e,t,i){var n,r,s=!1
"supsub"===e.type&&(n=e.value.sup,r=e.value.sub,e=e.value.base,s=!0)
var h=["\\smallint"],d=!1
t.style.size===a.DISPLAY.size&&e.value.symbol&&!c.contains(h,e.value.body)&&(d=!0)
var p,f=0,m=0
if(e.value.symbol){var g=d?"Size2-Regular":"Size1-Regular"
p=o.makeSymbol(e.value.body,g,"math",t.getColor(),["op-symbol",d?"large-op":"small-op","mop"]),f=(p.height-p.depth)/2-l.metrics.axisHeight*t.style.sizeMultiplier,m=p.italic}else{for(var v=[],y=1;y<e.value.body.length;y++)v.push(o.mathrm(e.value.body[y],e.mode))
p=u(["mop"],v,t.getColor())}if(s){p=u([],[p])
var w,x,_,k
if(n){var M=b(n,t.withStyle(t.style.sup()))
w=u([t.style.reset(),t.style.sup().cls()],[M]),x=Math.max(l.metrics.bigOpSpacing1,l.metrics.bigOpSpacing3-M.depth)}if(r){var S=b(r,t.withStyle(t.style.sub()))
_=u([t.style.reset(),t.style.sub().cls()],[S]),k=Math.max(l.metrics.bigOpSpacing2,l.metrics.bigOpSpacing4-S.height)}var T,C,E
if(n)if(r){if(!n&&!r)return p
E=l.metrics.bigOpSpacing5+_.height+_.depth+k+p.depth+f,T=o.makeVList([{type:"kern",size:l.metrics.bigOpSpacing5},{type:"elem",elem:_},{type:"kern",size:k},{type:"elem",elem:p},{type:"kern",size:x},{type:"elem",elem:w},{type:"kern",size:l.metrics.bigOpSpacing5}],"bottom",E,t),T.children[0].style.marginLeft=-m+"em",T.children[2].style.marginLeft=m+"em"}else E=p.depth+f,T=o.makeVList([{type:"elem",elem:p},{type:"kern",size:x},{type:"elem",elem:w},{type:"kern",size:l.metrics.bigOpSpacing5}],"bottom",E,t),T.children[1].style.marginLeft=m+"em"
else C=p.height-f,T=o.makeVList([{type:"kern",size:l.metrics.bigOpSpacing5},{type:"elem",elem:_},{type:"kern",size:k},{type:"elem",elem:p}],"top",C,t),T.children[0].style.marginLeft=-m+"em"
return u(["mop","op-limits"],[T])}return e.value.symbol&&(p.style.top=f+"em"),p},katex:function(e,t,i){var n=u(["k"],[o.mathrm("K",e.mode)]),r=u(["a"],[o.mathrm("A",e.mode)])
r.height=.75*(r.height+.2),r.depth=.75*(r.height-.2)
var a=u(["t"],[o.mathrm("T",e.mode)]),s=u(["e"],[o.mathrm("E",e.mode)])
s.height=s.height-.2155,s.depth=s.depth+.2155
var h=u(["x"],[o.mathrm("X",e.mode)])
return u(["katex-logo"],[n,r,a,s,h],t.getColor())},overline:function(e,t,i){var n=b(e.value.body,t.withStyle(t.style.cramp())),r=l.metrics.defaultRuleThickness/t.style.sizeMultiplier,s=u([t.style.reset(),a.TEXT.cls(),"overline-line"])
s.height=r,s.maxFontSize=1
var h=o.makeVList([{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:s},{type:"kern",size:r}],"firstBaseline",null,t)
return u(["overline","mord"],[h],t.getColor())},sqrt:function(e,t,i){var n=b(e.value.body,t.withStyle(t.style.cramp())),r=l.metrics.defaultRuleThickness/t.style.sizeMultiplier,h=u([t.style.reset(),a.TEXT.cls(),"sqrt-line"],[],t.getColor())
h.height=r,h.maxFontSize=1
var c=r
t.style.id<a.TEXT.id&&(c=l.metrics.xHeight)
var d=r+c/4,p=(n.height+n.depth)*t.style.sizeMultiplier,f=p+d+r,m=u(["sqrt-sign"],[s.customSizedDelim("\\surd",f,!1,t,e.mode)],t.getColor()),g=m.height+m.depth-r
g>n.height+n.depth+d&&(d=(d+g-n.height-n.depth)/2)
var v=-(n.height+d+r)+m.height
m.style.top=v+"em",m.height-=v,m.depth+=v
var y
return y=0===n.height&&0===n.depth?u():o.makeVList([{type:"elem",elem:n},{type:"kern",size:d},{type:"elem",elem:h},{type:"kern",size:r}],"firstBaseline",null,t),u(["sqrt","mord"],[m,y])},sizing:function(e,t,i){var n=d(e.value.value,t.withSize(e.value.size),i),r=u(["mord"],[u(["sizing","reset-"+t.size,e.value.size,t.style.cls()],n)]),a=w[e.value.size]
return r.maxFontSize=a*t.style.sizeMultiplier,r},styling:function(e,t,i){var n={display:a.DISPLAY,text:a.TEXT,script:a.SCRIPT,scriptscript:a.SCRIPTSCRIPT},r=n[e.value.style],o=d(e.value.value,t.withStyle(r),i)
return u([t.style.reset(),r.cls()],o)},delimsizing:function(e,t,i){var n=e.value.value
return"."===n?u([p[e.value.delimType]]):u([p[e.value.delimType]],[s.sizedDelim(n,e.value.size,t,e.mode)])},leftright:function(e,t,i){for(var n=d(e.value.body,t.reset()),r=0,a=0,o=0;o<n.length;o++)r=Math.max(n[o].height,r),a=Math.max(n[o].depth,a)
r*=t.style.sizeMultiplier,a*=t.style.sizeMultiplier
var h
h="."===e.value.left?u(["nulldelimiter"]):s.leftRightDelim(e.value.left,r,a,t,e.mode),n.unshift(h)
var l
return l="."===e.value.right?u(["nulldelimiter"]):s.leftRightDelim(e.value.right,r,a,t,e.mode),n.push(l),u(["minner",t.style.cls()],n,t.getColor())},rule:function(e,t,i){var n=u(["mord","rule"],[],t.getColor()),r=0
e.value.shift&&(r=e.value.shift.number,"ex"===e.value.shift.unit&&(r*=l.metrics.xHeight))
var a=e.value.width.number
"ex"===e.value.width.unit&&(a*=l.metrics.xHeight)
var o=e.value.height.number
return"ex"===e.value.height.unit&&(o*=l.metrics.xHeight),r/=t.style.sizeMultiplier,a/=t.style.sizeMultiplier,o/=t.style.sizeMultiplier,n.style.borderRightWidth=a+"em",n.style.borderTopWidth=o+"em",n.style.bottom=r+"em",n.width=a,n.height=o+r,n.depth=-r,n},accent:function(e,t,i){var n,r=e.value.base
if("supsub"===e.type){var a=e
e=a.value.base,r=e.value.base,a.value.base=r,n=b(a,t.reset(),i)}var s,h=b(r,t.withStyle(t.style.cramp()))
if(v(r)){var c=g(r),d=b(c,t.withStyle(t.style.cramp()))
s=d.skew}else s=0
var p=Math.min(h.height,l.metrics.xHeight),f=o.makeSymbol(e.value.accent,"Main-Regular","math",t.getColor())
f.italic=0
var m="\\vec"===e.value.accent?"accent-vec":null,y=u(["accent-body",m],[u([],[f])])
y=o.makeVList([{type:"elem",elem:h},{type:"kern",size:-p},{type:"elem",elem:y}],"firstBaseline",null,t),y.children[1].style.marginLeft=2*s+"em"
var w=u(["mord","accent"],[y])
return n?(n.children[0]=w,n.height=Math.max(w.height,n.height),n.classes[0]="mord",n):w}},w={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49},b=function(e,t,i){if(!e)return u()
if(y[e.type]){var n,a=y[e.type](e,t,i)
return t.style!==t.parentStyle&&(n=t.style.sizeMultiplier/t.parentStyle.sizeMultiplier,a.height*=n,a.depth*=n),t.size!==t.parentSize&&(n=w[t.size]/w[t.parentSize],a.height*=n,a.depth*=n),a}throw new r("Got group of unknown type: '"+e.type+"'")},x=function(e){var t=new n(a.TEXT,"size5",""),i=d(e,t),r=u(["base",t.style.cls()],i),o=u(["strut"]),s=u(["strut","bottom"])
o.style.height=r.height+"em",s.style.height=r.height+r.depth+"em",s.style.verticalAlign=-r.depth+"em"
var h=u(["katex"],[u(["katex-inner"],[o,s,r])])
return h}
t.exports=x},{"./Options":563,"./ParseError":564,"./Style":566,"./buildCommon":567,"./delimiter":569,"./domTree":570,"./fontMetrics":571,"./utils":575}],569:[function(e,t,i){var n=e("./ParseError"),r=e("./Style"),a=e("./buildCommon"),o=e("./fontMetrics"),s=e("./symbols"),h=e("./utils"),l=a.makeSpan,c=function(e,t){return s.math[e]&&s.math[e].replace?o.getCharacterMetrics(s.math[e].replace,t):o.getCharacterMetrics(e,t)},u=function(e,t,i){return a.makeSymbol(e,"Size"+t+"-Regular",i)},d=function(e,t,i){var n=l(["style-wrap",i.style.reset(),t.cls()],[e]),r=t.sizeMultiplier/i.style.sizeMultiplier
return n.height*=r,n.depth*=r,n.maxFontSize=t.sizeMultiplier,n},p=function(e,t,i,n,r){var s=a.makeSymbol(e,"Main-Regular",r),h=d(s,t,n)
if(i){var l=(1-n.style.sizeMultiplier/t.sizeMultiplier)*o.metrics.axisHeight
h.style.top=l+"em",h.height-=l,h.depth+=l}return h},f=function(e,t,i,n,a){var s=u(e,t,a),h=d(l(["delimsizing","size"+t],[s],n.getColor()),r.TEXT,n)
if(i){var c=(1-n.style.sizeMultiplier)*o.metrics.axisHeight
h.style.top=c+"em",h.height-=c,h.depth+=c}return h},m=function(e,t,i){var n
"Size1-Regular"===t?n="delim-size1":"Size4-Regular"===t&&(n="delim-size4")
var r=l(["delimsizinginner",n],[l([],[a.makeSymbol(e,t,i)])])
return{type:"elem",elem:r}},g=function(e,t,i,n,s){var h,u,p,f
h=p=f=e,u=null
var g="Size1-Regular"
"\\uparrow"===e?p=f="⏐":"\\Uparrow"===e?p=f="‖":"\\downarrow"===e?h=p="⏐":"\\Downarrow"===e?h=p="‖":"\\updownarrow"===e?(h="\\uparrow",p="⏐",f="\\downarrow"):"\\Updownarrow"===e?(h="\\Uparrow",p="‖",f="\\Downarrow"):"["===e||"\\lbrack"===e?(h="⎡",p="⎢",f="⎣",g="Size4-Regular"):"]"===e||"\\rbrack"===e?(h="⎤",p="⎥",f="⎦",g="Size4-Regular"):"\\lfloor"===e?(p=h="⎢",f="⎣",g="Size4-Regular"):"\\lceil"===e?(h="⎡",p=f="⎢",g="Size4-Regular"):"\\rfloor"===e?(p=h="⎥",f="⎦",g="Size4-Regular"):"\\rceil"===e?(h="⎤",p=f="⎥",g="Size4-Regular"):"("===e?(h="⎛",p="⎜",f="⎝",g="Size4-Regular"):")"===e?(h="⎞",p="⎟",f="⎠",g="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(h="⎧",u="⎨",f="⎩",p="⎪",g="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(h="⎫",u="⎬",f="⎭",p="⎪",g="Size4-Regular"):"\\surd"===e&&(h="",f="⎷",p="",g="Size4-Regular")
var v,y,w=c(h,g),b=w.height+w.depth,x=c(p,g),_=x.height+x.depth,k=c(f,g),M=k.height+k.depth
null!==u&&(v=c(u,g),y=v.height+v.depth)
var S=b+M
for(null!==u&&(S+=y);t>S;)S+=_,null!==u&&(S+=_)
var T=o.metrics.axisHeight
i&&(T*=n.style.sizeMultiplier)
var C=S/2-T,E=[]
E.push(m(f,g,s))
var A
if(null===u){var L=S-b-M,P=Math.ceil(L/_)
for(A=0;P>A;A++)E.push(m(p,g,s))}else{var R=S/2-b-y/2,F=Math.ceil(R/_),D=S/2-b-y/2,B=Math.ceil(D/_)
for(A=0;F>A;A++)E.push(m(p,g,s))
for(E.push(m(u,g,s)),A=0;B>A;A++)E.push(m(p,g,s))}E.push(m(h,g,s))
var O=a.makeVList(E,"bottom",C,n)
return d(l(["delimsizing","mult"],[O],n.getColor()),r.TEXT,n)},v=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],y=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert"],w=["<",">","\\langle","\\rangle","/","\\backslash"],b=[0,1.2,1.8,2.4,3],x=function(e,t,i,r){if("<"===e?e="\\langle":">"===e&&(e="\\rangle"),h.contains(v,e)||h.contains(w,e))return f(e,t,!1,i,r)
if(h.contains(y,e))return g(e,b[t],!1,i,r)
throw new n("Illegal delimiter: '"+e+"'")},_=[{type:"small",style:r.SCRIPTSCRIPT},{type:"small",style:r.SCRIPT},{type:"small",style:r.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],k=[{type:"small",style:r.SCRIPTSCRIPT},{type:"small",style:r.SCRIPT},{type:"small",style:r.TEXT},{type:"stack"}],M=[{type:"small",style:r.SCRIPTSCRIPT},{type:"small",style:r.SCRIPT},{type:"small",style:r.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],S=function(e){return"small"===e.type?"Main-Regular":"large"===e.type?"Size"+e.size+"-Regular":"stack"===e.type?"Size4-Regular":void 0},T=function(e,t,i,n){for(var r=Math.min(2,3-n.style.size),a=r;a<i.length&&"stack"!==i[a].type;a++){var o=c(e,S(i[a])),s=o.height+o.depth
if("small"===i[a].type&&(s*=i[a].style.sizeMultiplier),s>t)return i[a]}return i[i.length-1]},C=function(e,t,i,n,r){"<"===e?e="\\langle":">"===e&&(e="\\rangle")
var a
a=h.contains(w,e)?_:h.contains(v,e)?M:k
var o=T(e,t,a,n)
return"small"===o.type?p(e,o.style,i,n,r):"large"===o.type?f(e,o.size,i,n,r):"stack"===o.type?g(e,t,i,n,r):void 0},E=function(e,t,i,n,r){var a=o.metrics.axisHeight*n.style.sizeMultiplier,s=901,h=5/o.metrics.ptPerEm,l=Math.max(t-a,i+a),c=Math.max(l/500*s,2*l-h)
return C(e,c,!0,n,r)}
t.exports={sizedDelim:x,customSizedDelim:C,leftRightDelim:E}},{"./ParseError":564,"./Style":566,"./buildCommon":567,"./fontMetrics":571,"./symbols":574,"./utils":575}],570:[function(e,t,i){function n(e,t,i,n,r,a){this.classes=e||[],this.children=t||[],this.height=i||0,this.depth=n||0,this.maxFontSize=r||0,this.style=a||{}}function r(e,t,i,n){this.children=e||[],this.height=t||0,this.depth=i||0,this.maxFontSize=n||0}function a(e,t,i,n,r,a,o){this.value=e||"",this.height=t||0,this.depth=i||0,this.italic=n||0,this.skew=r||0,this.classes=a||[],this.style=o||{},this.maxFontSize=0}var o=e("./utils"),s=function(e){e=e.slice()
for(var t=e.length-1;t>=0;t--)e[t]||e.splice(t,1)
return e.join(" ")}
n.prototype.toNode=function(){var e=document.createElement("span")
e.className=s(this.classes)
for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t])
for(var i=0;i<this.children.length;i++)e.appendChild(this.children[i].toNode())
return e},n.prototype.toMarkup=function(){var e="<span"
this.classes.length&&(e+=' class="',e+=o.escape(s(this.classes)),e+='"')
var t=""
for(var i in this.style)this.style.hasOwnProperty(i)&&(t+=o.hyphenate(i)+":"+this.style[i]+";")
t&&(e+=' style="'+o.escape(t)+'"'),e+=">"
for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup()
return e+="</span>"},r.prototype.toNode=function(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode())
return e},r.prototype.toMarkup=function(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup()
return e},a.prototype.toNode=function(){var e=document.createTextNode(this.value),t=null
this.italic>0&&(t=document.createElement("span"),t.style.marginRight=this.italic+"em"),this.classes.length>0&&(t=t||document.createElement("span"),t.className=s(this.classes))
for(var i in this.style)this.style.hasOwnProperty(i)&&(t=t||document.createElement("span"),t.style[i]=this.style[i])
return t?(t.appendChild(e),t):e},a.prototype.toMarkup=function(){var e=!1,t="<span"
this.classes.length&&(e=!0,t+=' class="',t+=o.escape(s(this.classes)),t+='"')
var i=""
this.italic>0&&(i+="margin-right:"+this.italic+"em;")
for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=o.hyphenate(n)+":"+this.style[n]+";")
i&&(e=!0,t+=' style="'+o.escape(i)+'"')
var r=o.escape(this.value)
return e?(t+=">",t+=r,t+="</span>"):r},t.exports={span:n,documentFragment:r,symbolNode:a}},{"./utils":575}],571:[function(e,t,i){var n=e("./Style"),r=.431,a=1,o=.677,s=.394,h=.444,l=.686,c=.345,u=.413,d=.363,p=.289,f=.15,m=.247,g=.386,v=.05,y=2.39,w=1.01,b=.81,x=.71,_=.25,k=.04,M=.111,S=.166,T=.2,C=.6,E=.1,A=10,L={xHeight:r,quad:a,num1:o,num2:s,num3:h,denom1:l,denom2:c,sup1:u,sup2:d,sup3:p,sub1:f,sub2:m,supDrop:g,subDrop:v,axisHeight:_,defaultRuleThickness:k,bigOpSpacing1:M,bigOpSpacing2:S,bigOpSpacing3:T,bigOpSpacing4:C,bigOpSpacing5:E,ptPerEm:A,delim1:y,getDelim2:function(e){if(e.size===n.TEXT.size)return w
if(e.size===n.SCRIPT.size)return b
if(e.size===n.SCRIPTSCRIPT.size)return x
throw new Error("Unexpected style size: "+e.size)}},P={"AMS-Regular":{10003:{depth:0,height:.69224,italic:0,skew:0},10016:{depth:0,height:.69224,italic:0,skew:0},1008:{depth:0,height:.43056,italic:.04028,skew:0},107:{depth:0,height:.68889,italic:0,skew:0},10731:{depth:.11111,height:.69224,italic:0,skew:0},10846:{depth:.19444,height:.75583,italic:0,skew:0},10877:{depth:.13667,height:.63667,italic:0,skew:0},10878:{depth:.13667,height:.63667,italic:0,skew:0},10885:{depth:.25583,height:.75583,italic:0,skew:0},10886:{depth:.25583,height:.75583,italic:0,skew:0},10887:{depth:.13597,height:.63597,italic:0,skew:0},10888:{depth:.13597,height:.63597,italic:0,skew:0},10889:{depth:.26167,height:.75726,italic:0,skew:0},10890:{depth:.26167,height:.75726,italic:0,skew:0},10891:{depth:.48256,height:.98256,italic:0,skew:0},10892:{depth:.48256,height:.98256,italic:0,skew:0},10901:{depth:.13667,height:.63667,italic:0,skew:0},10902:{depth:.13667,height:.63667,italic:0,skew:0},10933:{depth:.25142,height:.75726,italic:0,skew:0},10934:{depth:.25142,height:.75726,italic:0,skew:0},10935:{depth:.26167,height:.75726,italic:0,skew:0},10936:{depth:.26167,height:.75726,italic:0,skew:0},10937:{depth:.26167,height:.75726,italic:0,skew:0},10938:{depth:.26167,height:.75726,italic:0,skew:0},10949:{depth:.25583,height:.75583,italic:0,skew:0},10950:{depth:.25583,height:.75583,italic:0,skew:0},10955:{depth:.28481,height:.79383,italic:0,skew:0},10956:{depth:.28481,height:.79383,italic:0,skew:0},165:{depth:0,height:.675,italic:.025,skew:0},174:{depth:.15559,height:.69224,italic:0,skew:0},240:{depth:0,height:.68889,italic:0,skew:0},295:{depth:0,height:.68889,italic:0,skew:0},57350:{depth:.08167,height:.58167,italic:0,skew:0},57351:{depth:.08167,height:.58167,italic:0,skew:0},57352:{depth:.08167,height:.58167,italic:0,skew:0},57353:{depth:0,height:.43056,italic:.04028,skew:0},57356:{depth:.25142,height:.75726,italic:0,skew:0},57357:{depth:.25142,height:.75726,italic:0,skew:0},57358:{depth:.41951,height:.91951,italic:0,skew:0},57359:{depth:.30274,height:.79383,italic:0,skew:0},57360:{depth:.30274,height:.79383,italic:0,skew:0},57361:{depth:.41951,height:.91951,italic:0,skew:0},57366:{depth:.25142,height:.75726,italic:0,skew:0},57367:{depth:.25142,height:.75726,italic:0,skew:0},57368:{depth:.25142,height:.75726,italic:0,skew:0},57369:{depth:.25142,height:.75726,italic:0,skew:0},57370:{depth:.13597,height:.63597,italic:0,skew:0},57371:{depth:.13597,height:.63597,italic:0,skew:0},65:{depth:0,height:.68889,italic:0,skew:0},66:{depth:0,height:.68889,italic:0,skew:0},67:{depth:0,height:.68889,italic:0,skew:0},68:{depth:0,height:.68889,italic:0,skew:0},69:{depth:0,height:.68889,italic:0,skew:0},70:{depth:0,height:.68889,italic:0,skew:0},71:{depth:0,height:.68889,italic:0,skew:0},710:{depth:0,height:.825,italic:0,skew:0},72:{depth:0,height:.68889,italic:0,skew:0},73:{depth:0,height:.68889,italic:0,skew:0},732:{depth:0,height:.9,italic:0,skew:0},74:{depth:.16667,height:.68889,italic:0,skew:0},75:{depth:0,height:.68889,italic:0,skew:0},76:{depth:0,height:.68889,italic:0,skew:0},77:{depth:0,height:.68889,italic:0,skew:0},770:{depth:0,height:.825,italic:0,skew:0},771:{depth:0,height:.9,italic:0,skew:0},78:{depth:0,height:.68889,italic:0,skew:0},79:{depth:.16667,height:.68889,italic:0,skew:0},80:{depth:0,height:.68889,italic:0,skew:0},81:{depth:.16667,height:.68889,italic:0,skew:0},82:{depth:0,height:.68889,italic:0,skew:0},8245:{depth:0,height:.54986,italic:0,skew:0},83:{depth:0,height:.68889,italic:0,skew:0},84:{depth:0,height:.68889,italic:0,skew:0},8463:{depth:0,height:.68889,italic:0,skew:0},8487:{depth:0,height:.68889,italic:0,skew:0},8498:{depth:0,height:.68889,italic:0,skew:0},85:{depth:0,height:.68889,italic:0,skew:0},8502:{depth:0,height:.68889,italic:0,skew:0},8503:{depth:0,height:.68889,italic:0,skew:0},8504:{depth:0,height:.68889,italic:0,skew:0},8513:{depth:0,height:.68889,italic:0,skew:0},8592:{depth:-.03598,height:.46402,italic:0,skew:0},8594:{depth:-.03598,height:.46402,italic:0,skew:0},86:{depth:0,height:.68889,italic:0,skew:0},8602:{depth:-.13313,height:.36687,italic:0,skew:0},8603:{depth:-.13313,height:.36687,italic:0,skew:0},8606:{depth:.01354,height:.52239,italic:0,skew:0},8608:{depth:.01354,height:.52239,italic:0,skew:0},8610:{depth:.01354,height:.52239,italic:0,skew:0},8611:{depth:.01354,height:.52239,italic:0,skew:0},8619:{depth:0,height:.54986,italic:0,skew:0},8620:{depth:0,height:.54986,italic:0,skew:0},8621:{depth:-.13313,height:.37788,italic:0,skew:0},8622:{depth:-.13313,height:.36687,italic:0,skew:0},8624:{depth:0,height:.69224,italic:0,skew:0},8625:{depth:0,height:.69224,italic:0,skew:0},8630:{depth:0,height:.43056,italic:0,skew:0},8631:{depth:0,height:.43056,italic:0,skew:0},8634:{depth:.08198,height:.58198,italic:0,skew:0},8635:{depth:.08198,height:.58198,italic:0,skew:0},8638:{depth:.19444,height:.69224,italic:0,skew:0},8639:{depth:.19444,height:.69224,italic:0,skew:0},8642:{depth:.19444,height:.69224,italic:0,skew:0},8643:{depth:.19444,height:.69224,italic:0,skew:0},8644:{depth:.1808,height:.675,italic:0,skew:0},8646:{depth:.1808,height:.675,italic:0,skew:0},8647:{depth:.1808,height:.675,italic:0,skew:0},8648:{depth:.19444,height:.69224,italic:0,skew:0},8649:{depth:.1808,height:.675,italic:0,skew:0},8650:{depth:.19444,height:.69224,italic:0,skew:0},8651:{depth:.01354,height:.52239,italic:0,skew:0},8652:{depth:.01354,height:.52239,italic:0,skew:0},8653:{depth:-.13313,height:.36687,italic:0,skew:0},8654:{depth:-.13313,height:.36687,italic:0,skew:0},8655:{depth:-.13313,height:.36687,italic:0,skew:0},8666:{depth:.13667,height:.63667,italic:0,skew:0},8667:{depth:.13667,height:.63667,italic:0,skew:0},8669:{depth:-.13313,height:.37788,italic:0,skew:0},87:{depth:0,height:.68889,italic:0,skew:0},8705:{depth:0,height:.825,italic:0,skew:0},8708:{depth:0,height:.68889,italic:0,skew:0},8709:{depth:.08167,height:.58167,italic:0,skew:0},8717:{depth:0,height:.43056,italic:0,skew:0},8722:{depth:-.03598,height:.46402,italic:0,skew:0},8724:{depth:.08198,height:.69224,italic:0,skew:0},8726:{depth:.08167,height:.58167,italic:0,skew:0},8733:{depth:0,height:.69224,italic:0,skew:0},8736:{depth:0,height:.69224,italic:0,skew:0},8737:{depth:0,height:.69224,italic:0,skew:0},8738:{depth:.03517,height:.52239,italic:0,skew:0},8739:{depth:.08167,height:.58167,italic:0,skew:0},8740:{depth:.25142,height:.74111,italic:0,skew:0},8741:{depth:.08167,height:.58167,italic:0,skew:0},8742:{depth:.25142,height:.74111,italic:0,skew:0},8756:{depth:0,height:.69224,italic:0,skew:0},8757:{depth:0,height:.69224,italic:0,skew:0},8764:{depth:-.13313,height:.36687,italic:0,skew:0},8765:{depth:-.13313,height:.37788,italic:0,skew:0},8769:{depth:-.13313,height:.36687,italic:0,skew:0},8770:{depth:-.03625,height:.46375,italic:0,skew:0},8774:{depth:.30274,height:.79383,italic:0,skew:0},8776:{depth:-.01688,height:.48312,italic:0,skew:0},8778:{depth:.08167,height:.58167,italic:0,skew:0},8782:{depth:.06062,height:.54986,italic:0,skew:0},8783:{depth:.06062,height:.54986,italic:0,skew:0},8785:{depth:.08198,height:.58198,italic:0,skew:0},8786:{depth:.08198,height:.58198,italic:0,skew:0},8787:{depth:.08198,height:.58198,italic:0,skew:0},8790:{depth:0,height:.69224,italic:0,skew:0},8791:{depth:.22958,height:.72958,italic:0,skew:0},8796:{depth:.08198,height:.91667,italic:0,skew:0},88:{depth:0,height:.68889,italic:0,skew:0},8806:{depth:.25583,height:.75583,italic:0,skew:0},8807:{depth:.25583,height:.75583,italic:0,skew:0},8808:{depth:.25142,height:.75726,italic:0,skew:0},8809:{depth:.25142,height:.75726,italic:0,skew:0},8812:{depth:.25583,height:.75583,italic:0,skew:0},8814:{depth:.20576,height:.70576,italic:0,skew:0},8815:{depth:.20576,height:.70576,italic:0,skew:0},8816:{depth:.30274,height:.79383,italic:0,skew:0},8817:{depth:.30274,height:.79383,italic:0,skew:0},8818:{depth:.22958,height:.72958,italic:0,skew:0},8819:{depth:.22958,height:.72958,italic:0,skew:0},8822:{depth:.1808,height:.675,italic:0,skew:0},8823:{depth:.1808,height:.675,italic:0,skew:0},8828:{depth:.13667,height:.63667,italic:0,skew:0},8829:{depth:.13667,height:.63667,italic:0,skew:0},8830:{depth:.22958,height:.72958,italic:0,skew:0},8831:{depth:.22958,height:.72958,italic:0,skew:0},8832:{depth:.20576,height:.70576,italic:0,skew:0},8833:{depth:.20576,height:.70576,italic:0,skew:0},8840:{depth:.30274,height:.79383,italic:0,skew:0},8841:{depth:.30274,height:.79383,italic:0,skew:0},8842:{depth:.13597,height:.63597,italic:0,skew:0},8843:{depth:.13597,height:.63597,italic:0,skew:0},8847:{depth:.03517,height:.54986,italic:0,skew:0},8848:{depth:.03517,height:.54986,italic:0,skew:0},8858:{depth:.08198,height:.58198,italic:0,skew:0},8859:{depth:.08198,height:.58198,italic:0,skew:0},8861:{depth:.08198,height:.58198,italic:0,skew:0},8862:{depth:0,height:.675,italic:0,skew:0},8863:{depth:0,height:.675,italic:0,skew:0},8864:{depth:0,height:.675,italic:0,skew:0},8865:{depth:0,height:.675,italic:0,skew:0},8872:{depth:0,height:.69224,italic:0,skew:0},8873:{depth:0,height:.69224,italic:0,skew:0},8874:{depth:0,height:.69224,italic:0,skew:0},8876:{depth:0,height:.68889,italic:0,skew:0},8877:{depth:0,height:.68889,italic:0,skew:0},8878:{depth:0,height:.68889,italic:0,skew:0},8879:{depth:0,height:.68889,italic:0,skew:0},8882:{depth:.03517,height:.54986,italic:0,skew:0},8883:{depth:.03517,height:.54986,italic:0,skew:0},8884:{depth:.13667,height:.63667,italic:0,skew:0},8885:{depth:.13667,height:.63667,italic:0,skew:0},8888:{depth:0,height:.54986,italic:0,skew:0},8890:{depth:.19444,height:.43056,italic:0,skew:0},8891:{depth:.19444,height:.69224,italic:0,skew:0},8892:{depth:.19444,height:.69224,italic:0,skew:0},89:{depth:0,height:.68889,italic:0,skew:0},8901:{depth:0,height:.54986,italic:0,skew:0},8903:{depth:.08167,height:.58167,italic:0,skew:0},8905:{depth:.08167,height:.58167,italic:0,skew:0},8906:{depth:.08167,height:.58167,italic:0,skew:0},8907:{depth:0,height:.69224,italic:0,skew:0},8908:{depth:0,height:.69224,italic:0,skew:0},8909:{depth:-.03598,height:.46402,italic:0,skew:0},8910:{depth:0,height:.54986,italic:0,skew:0},8911:{depth:0,height:.54986,italic:0,skew:0},8912:{depth:.03517,height:.54986,italic:0,skew:0},8913:{depth:.03517,height:.54986,italic:0,skew:0},8914:{depth:0,height:.54986,italic:0,skew:0},8915:{depth:0,height:.54986,italic:0,skew:0},8916:{depth:0,height:.69224,italic:0,skew:0},8918:{depth:.0391,height:.5391,italic:0,skew:0},8919:{depth:.0391,height:.5391,italic:0,skew:0},8920:{depth:.03517,height:.54986,italic:0,skew:0},8921:{depth:.03517,height:.54986,italic:0,skew:0},8922:{depth:.38569,height:.88569,italic:0,skew:0},8923:{depth:.38569,height:.88569,italic:0,skew:0},8926:{depth:.13667,height:.63667,italic:0,skew:0},8927:{depth:.13667,height:.63667,italic:0,skew:0},8928:{depth:.30274,height:.79383,italic:0,skew:0},8929:{depth:.30274,height:.79383,italic:0,skew:0},8934:{depth:.23222,height:.74111,italic:0,skew:0},8935:{depth:.23222,height:.74111,italic:0,skew:0},8936:{depth:.23222,height:.74111,italic:0,skew:0},8937:{depth:.23222,height:.74111,italic:0,skew:0},8938:{depth:.20576,height:.70576,italic:0,skew:0},8939:{depth:.20576,height:.70576,italic:0,skew:0},8940:{depth:.30274,height:.79383,italic:0,skew:0},8941:{depth:.30274,height:.79383,italic:0,skew:0},8994:{depth:.19444,height:.69224,italic:0,skew:0},8995:{depth:.19444,height:.69224,italic:0,skew:0},90:{depth:0,height:.68889,italic:0,skew:0},9416:{depth:.15559,height:.69224,italic:0,skew:0},9484:{depth:0,height:.69224,italic:0,skew:0},9488:{depth:0,height:.69224,italic:0,skew:0},9492:{depth:0,height:.37788,italic:0,skew:0},9496:{depth:0,height:.37788,italic:0,skew:0},9585:{depth:.19444,height:.68889,italic:0,skew:0},9586:{depth:.19444,height:.74111,italic:0,skew:0},9632:{depth:0,height:.675,italic:0,skew:0},9633:{depth:0,height:.675,italic:0,skew:0},9650:{depth:0,height:.54986,italic:0,skew:0},9651:{depth:0,height:.54986,italic:0,skew:0},9654:{depth:.03517,height:.54986,italic:0,skew:0},9660:{depth:0,height:.54986,italic:0,skew:0},9661:{depth:0,height:.54986,italic:0,skew:0},9664:{depth:.03517,height:.54986,italic:0,skew:0},9674:{depth:.11111,height:.69224,italic:0,skew:0},9733:{depth:.19444,height:.69224,italic:0,skew:0},989:{depth:.08167,height:.58167,italic:0,skew:0}},"Main-Bold":{100:{depth:0,height:.69444,italic:0,skew:0},101:{depth:0,height:.44444,italic:0,skew:0},102:{depth:0,height:.69444,italic:.10903,skew:0},10216:{depth:.25,height:.75,italic:0,skew:0},10217:{depth:.25,height:.75,italic:0,skew:0},103:{depth:.19444,height:.44444,italic:.01597,skew:0},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.69444,italic:0,skew:0},106:{depth:.19444,height:.69444,italic:0,skew:0},107:{depth:0,height:.69444,italic:0,skew:0},108:{depth:0,height:.69444,italic:0,skew:0},10815:{depth:0,height:.68611,italic:0,skew:0},109:{depth:0,height:.44444,italic:0,skew:0},10927:{depth:.19667,height:.69667,italic:0,skew:0},10928:{depth:.19667,height:.69667,italic:0,skew:0},110:{depth:0,height:.44444,italic:0,skew:0},111:{depth:0,height:.44444,italic:0,skew:0},112:{depth:.19444,height:.44444,italic:0,skew:0},113:{depth:.19444,height:.44444,italic:0,skew:0},114:{depth:0,height:.44444,italic:0,skew:0},115:{depth:0,height:.44444,italic:0,skew:0},116:{depth:0,height:.63492,italic:0,skew:0},117:{depth:0,height:.44444,italic:0,skew:0},118:{depth:0,height:.44444,italic:.01597,skew:0},119:{depth:0,height:.44444,italic:.01597,skew:0},120:{depth:0,height:.44444,italic:0,skew:0},121:{depth:.19444,height:.44444,italic:.01597,skew:0},122:{depth:0,height:.44444,italic:0,skew:0},123:{depth:.25,height:.75,italic:0,skew:0},124:{depth:.25,height:.75,italic:0,skew:0},125:{depth:.25,height:.75,italic:0,skew:0},126:{depth:.35,height:.34444,italic:0,skew:0},168:{depth:0,height:.69444,italic:0,skew:0},172:{depth:0,height:.44444,italic:0,skew:0},175:{depth:0,height:.59611,italic:0,skew:0},176:{depth:0,height:.69444,italic:0,skew:0},177:{depth:.13333,height:.63333,italic:0,skew:0},180:{depth:0,height:.69444,italic:0,skew:0},215:{depth:.13333,height:.63333,italic:0,skew:0},247:{depth:.13333,height:.63333,italic:0,skew:0},305:{depth:0,height:.44444,italic:0,skew:0},33:{depth:0,height:.69444,italic:0,skew:0},34:{depth:0,height:.69444,italic:0,skew:0},35:{depth:.19444,height:.69444,italic:0,skew:0},36:{depth:.05556,height:.75,italic:0,skew:0},37:{depth:.05556,height:.75,italic:0,skew:0},38:{depth:0,height:.69444,italic:0,skew:0},39:{depth:0,height:.69444,italic:0,skew:0},40:{depth:.25,height:.75,italic:0,skew:0},41:{depth:.25,height:.75,italic:0,skew:0},42:{depth:0,height:.75,italic:0,skew:0},43:{depth:.13333,height:.63333,italic:0,skew:0},44:{depth:.19444,height:.15556,italic:0,skew:0},45:{depth:0,height:.44444,italic:0,skew:0},46:{depth:0,height:.15556,italic:0,skew:0},47:{depth:.25,height:.75,italic:0,skew:0},48:{depth:0,height:.64444,italic:0,skew:0},49:{depth:0,height:.64444,italic:0,skew:0},50:{depth:0,height:.64444,italic:0,skew:0},51:{depth:0,height:.64444,italic:0,skew:0},52:{depth:0,height:.64444,italic:0,skew:0},53:{depth:0,height:.64444,italic:0,skew:0},54:{depth:0,height:.64444,italic:0,skew:0},55:{depth:0,height:.64444,italic:0,skew:0},56:{depth:0,height:.64444,italic:0,skew:0},567:{depth:.19444,height:.44444,italic:0,skew:0},57:{depth:0,height:.64444,italic:0,skew:0},58:{depth:0,height:.44444,italic:0,skew:0},59:{depth:.19444,height:.44444,italic:0,skew:0},60:{depth:.08556,height:.58556,italic:0,skew:0},61:{depth:-.10889,height:.39111,italic:0,skew:0},62:{depth:.08556,height:.58556,italic:0,skew:0},63:{depth:0,height:.69444,italic:0,skew:0},64:{depth:0,height:.69444,italic:0,skew:0},65:{depth:0,height:.68611,italic:0,skew:0},66:{depth:0,height:.68611,italic:0,skew:0},67:{depth:0,height:.68611,italic:0,skew:0},68:{depth:0,height:.68611,italic:0,skew:0},69:{depth:0,height:.68611,italic:0,skew:0},70:{depth:0,height:.68611,italic:0,skew:0},71:{depth:0,height:.68611,italic:0,skew:0},710:{depth:0,height:.69444,italic:0,skew:0},711:{depth:0,height:.63194,italic:0,skew:0},713:{depth:0,height:.59611,italic:0,skew:0},714:{depth:0,height:.69444,italic:0,skew:0},715:{depth:0,height:.69444,italic:0,skew:0},72:{depth:0,height:.68611,italic:0,skew:0},728:{depth:0,height:.69444,italic:0,skew:0},729:{depth:0,height:.69444,italic:0,skew:0},73:{depth:0,height:.68611,italic:0,skew:0},730:{depth:0,height:.69444,italic:0,skew:0},732:{depth:0,height:.69444,italic:0,skew:0},74:{depth:0,height:.68611,italic:0,skew:0},75:{depth:0,height:.68611,italic:0,skew:0},76:{depth:0,height:.68611,italic:0,skew:0},768:{depth:0,height:.69444,italic:0,skew:0},769:{depth:0,height:.69444,italic:0,skew:0},77:{depth:0,height:.68611,italic:0,skew:0},770:{depth:0,height:.69444,italic:0,skew:0},771:{depth:0,height:.69444,italic:0,skew:0},772:{depth:0,height:.59611,italic:0,skew:0},774:{depth:0,height:.69444,italic:0,skew:0},775:{depth:0,height:.69444,italic:0,skew:0},776:{depth:0,height:.69444,italic:0,skew:0},778:{depth:0,height:.69444,italic:0,skew:0},779:{depth:0,height:.69444,italic:0,skew:0},78:{depth:0,height:.68611,italic:0,skew:0},780:{depth:0,height:.63194,italic:0,skew:0},79:{depth:0,height:.68611,italic:0,skew:0},80:{depth:0,height:.68611,italic:0,skew:0},81:{depth:.19444,height:.68611,italic:0,skew:0},82:{depth:0,height:.68611,italic:0,skew:0},8211:{depth:0,height:.44444,italic:.03194,skew:0},8212:{depth:0,height:.44444,italic:.03194,skew:0},8216:{depth:0,height:.69444,italic:0,skew:0},8217:{depth:0,height:.69444,italic:0,skew:0},8220:{depth:0,height:.69444,italic:0,skew:0},8221:{depth:0,height:.69444,italic:0,skew:0},8224:{depth:.19444,height:.69444,italic:0,skew:0},8225:{depth:.19444,height:.69444,italic:0,skew:0},824:{depth:.19444,height:.69444,italic:0,skew:0},8242:{depth:0,height:.55556,italic:0,skew:0},83:{depth:0,height:.68611,italic:0,skew:0},84:{depth:0,height:.68611,italic:0,skew:0},8407:{depth:0,height:.72444,italic:.15486,skew:0},8463:{depth:0,height:.69444,italic:0,skew:0},8465:{depth:0,height:.69444,italic:0,skew:0},8467:{depth:0,height:.69444,italic:0,skew:0},8472:{depth:.19444,height:.44444,italic:0,skew:0},8476:{depth:0,height:.69444,italic:0,skew:0},85:{depth:0,height:.68611,italic:0,skew:0},8501:{depth:0,height:.69444,italic:0,skew:0},8592:{depth:-.10889,height:.39111,italic:0,skew:0},8593:{depth:.19444,height:.69444,italic:0,skew:0},8594:{depth:-.10889,height:.39111,italic:0,skew:0},8595:{depth:.19444,height:.69444,italic:0,skew:0},8596:{depth:-.10889,height:.39111,italic:0,skew:0},8597:{depth:.25,height:.75,italic:0,skew:0},8598:{depth:.19444,height:.69444,italic:0,skew:0},8599:{depth:.19444,height:.69444,italic:0,skew:0},86:{depth:0,height:.68611,italic:.01597,skew:0},8600:{depth:.19444,height:.69444,italic:0,skew:0},8601:{depth:.19444,height:.69444,italic:0,skew:0},8636:{depth:-.10889,height:.39111,italic:0,skew:0},8637:{depth:-.10889,height:.39111,italic:0,skew:0},8640:{depth:-.10889,height:.39111,italic:0,skew:0},8641:{depth:-.10889,height:.39111,italic:0,skew:0},8656:{depth:-.10889,height:.39111,italic:0,skew:0},8657:{depth:.19444,height:.69444,italic:0,skew:0},8658:{depth:-.10889,height:.39111,italic:0,skew:0},8659:{depth:.19444,height:.69444,italic:0,skew:0},8660:{depth:-.10889,height:.39111,italic:0,skew:0},8661:{depth:.25,height:.75,italic:0,skew:0},87:{depth:0,height:.68611,italic:.01597,skew:0},8704:{depth:0,height:.69444,italic:0,skew:0},8706:{depth:0,height:.69444,italic:.06389,skew:0},8707:{depth:0,height:.69444,italic:0,skew:0},8709:{depth:.05556,height:.75,italic:0,skew:0},8711:{depth:0,height:.68611,italic:0,skew:0},8712:{depth:.08556,height:.58556,italic:0,skew:0},8715:{depth:.08556,height:.58556,italic:0,skew:0},8722:{depth:.13333,height:.63333,italic:0,skew:0},8723:{depth:.13333,height:.63333,italic:0,skew:0},8725:{depth:.25,height:.75,italic:0,skew:0},8726:{depth:.25,height:.75,italic:0,skew:0},8727:{depth:-.02778,height:.47222,italic:0,skew:0},8728:{depth:-.02639,height:.47361,italic:0,skew:0},8729:{depth:-.02639,height:.47361,italic:0,skew:0},8730:{depth:.18,height:.82,italic:0,skew:0},8733:{depth:0,height:.44444,italic:0,skew:0},8734:{depth:0,height:.44444,italic:0,skew:0},8736:{depth:0,height:.69224,italic:0,skew:0},8739:{depth:.25,height:.75,italic:0,skew:0},8741:{depth:.25,height:.75,italic:0,skew:0},8743:{depth:0,height:.55556,italic:0,skew:0},8744:{depth:0,height:.55556,italic:0,skew:0},8745:{depth:0,height:.55556,italic:0,skew:0},8746:{depth:0,height:.55556,italic:0,skew:0},8747:{depth:.19444,height:.69444,italic:.12778,skew:0},8764:{depth:-.10889,height:.39111,italic:0,skew:0},8768:{depth:.19444,height:.69444,italic:0,skew:0},8771:{depth:.00222,height:.50222,italic:0,skew:0},8776:{depth:.02444,height:.52444,italic:0,skew:0},8781:{depth:.00222,height:.50222,italic:0,skew:0},88:{depth:0,height:.68611,italic:0,skew:0},8801:{depth:.00222,height:.50222,italic:0,skew:0},8804:{depth:.19667,height:.69667,italic:0,skew:0},8805:{depth:.19667,height:.69667,italic:0,skew:0},8810:{depth:.08556,height:.58556,italic:0,skew:0},8811:{depth:.08556,height:.58556,italic:0,skew:0},8826:{depth:.08556,height:.58556,italic:0,skew:0},8827:{depth:.08556,height:.58556,italic:0,skew:0},8834:{depth:.08556,height:.58556,italic:0,skew:0},8835:{depth:.08556,height:.58556,italic:0,skew:0},8838:{depth:.19667,height:.69667,italic:0,skew:0},8839:{depth:.19667,height:.69667,italic:0,skew:0},8846:{depth:0,height:.55556,italic:0,skew:0},8849:{depth:.19667,height:.69667,italic:0,skew:0},8850:{depth:.19667,height:.69667,italic:0,skew:0},8851:{depth:0,height:.55556,italic:0,skew:0},8852:{depth:0,height:.55556,italic:0,skew:0},8853:{depth:.13333,height:.63333,italic:0,skew:0},8854:{depth:.13333,height:.63333,italic:0,skew:0},8855:{depth:.13333,height:.63333,italic:0,skew:0},8856:{depth:.13333,height:.63333,italic:0,skew:0},8857:{depth:.13333,height:.63333,italic:0,skew:0},8866:{depth:0,height:.69444,italic:0,skew:0},8867:{depth:0,height:.69444,italic:0,skew:0},8868:{depth:0,height:.69444,italic:0,skew:0},8869:{depth:0,height:.69444,italic:0,skew:0},89:{depth:0,height:.68611,italic:.02875,skew:0},8900:{depth:-.02639,height:.47361,italic:0,skew:0},8901:{depth:-.02639,height:.47361,italic:0,skew:0},8902:{depth:-.02778,height:.47222,italic:0,skew:0},8968:{depth:.25,height:.75,italic:0,skew:0},8969:{depth:.25,height:.75,italic:0,skew:0},8970:{depth:.25,height:.75,italic:0,skew:0},8971:{depth:.25,height:.75,italic:0,skew:0},8994:{depth:-.13889,height:.36111,italic:0,skew:0},8995:{depth:-.13889,height:.36111,italic:0,skew:0},90:{depth:0,height:.68611,italic:0,skew:0},91:{depth:.25,height:.75,italic:0,skew:0},915:{depth:0,height:.68611,italic:0,skew:0},916:{depth:0,height:.68611,italic:0,skew:0},92:{depth:.25,height:.75,italic:0,skew:0},920:{depth:0,height:.68611,italic:0,skew:0},923:{depth:0,height:.68611,italic:0,skew:0},926:{depth:0,height:.68611,italic:0,skew:0},928:{depth:0,height:.68611,italic:0,skew:0},93:{depth:.25,height:.75,italic:0,skew:0},931:{depth:0,height:.68611,italic:0,skew:0},933:{depth:0,height:.68611,italic:0,skew:0},934:{depth:0,height:.68611,italic:0,skew:0},936:{depth:0,height:.68611,italic:0,skew:0},937:{depth:0,height:.68611,italic:0,skew:0},94:{depth:0,height:.69444,italic:0,skew:0},95:{depth:.31,height:.13444,italic:.03194,skew:0},96:{depth:0,height:.69444,italic:0,skew:0},9651:{depth:.19444,height:.69444,italic:0,skew:0},9657:{depth:-.02778,height:.47222,italic:0,skew:0},9661:{depth:.19444,height:.69444,italic:0,skew:0},9667:{depth:-.02778,height:.47222,italic:0,skew:0},97:{depth:0,height:.44444,italic:0,skew:0},9711:{depth:.19444,height:.69444,italic:0,skew:0},98:{depth:0,height:.69444,italic:0,skew:0},9824:{depth:.12963,height:.69444,italic:0,skew:0},9825:{depth:.12963,height:.69444,italic:0,skew:0},9826:{depth:.12963,height:.69444,italic:0,skew:0},9827:{depth:.12963,height:.69444,italic:0,skew:0},9837:{depth:0,height:.75,italic:0,skew:0},9838:{depth:.19444,height:.69444,italic:0,skew:0},9839:{depth:.19444,height:.69444,italic:0,skew:0},99:{depth:0,height:.44444,italic:0,skew:0}},"Main-Italic":{100:{depth:0,height:.69444,italic:.10333,skew:0},101:{depth:0,height:.43056,italic:.07514,skew:0},102:{depth:.19444,height:.69444,italic:.21194,skew:0},103:{depth:.19444,height:.43056,italic:.08847,skew:0},104:{depth:0,height:.69444,italic:.07671,skew:0},105:{depth:0,height:.65536,italic:.1019,skew:0},106:{depth:.19444,height:.65536,italic:.14467,skew:0},107:{depth:0,height:.69444,italic:.10764,skew:0},108:{depth:0,height:.69444,italic:.10333,skew:0},109:{depth:0,height:.43056,italic:.07671,skew:0},110:{depth:0,height:.43056,italic:.07671,skew:0},111:{depth:0,height:.43056,italic:.06312,skew:0},112:{depth:.19444,height:.43056,italic:.06312,skew:0},113:{depth:.19444,height:.43056,italic:.08847,skew:0},114:{depth:0,height:.43056,italic:.10764,skew:0},115:{depth:0,height:.43056,italic:.08208,skew:0},116:{depth:0,height:.61508,italic:.09486,skew:0},117:{depth:0,height:.43056,italic:.07671,skew:0},118:{depth:0,height:.43056,italic:.10764,skew:0},119:{depth:0,height:.43056,italic:.10764,skew:0},120:{depth:0,height:.43056,italic:.12042,skew:0},121:{depth:.19444,height:.43056,italic:.08847,skew:0},122:{depth:0,height:.43056,italic:.12292,skew:0},126:{depth:.35,height:.31786,italic:.11585,skew:0},163:{depth:0,height:.69444,italic:0,skew:0},305:{depth:0,height:.43056,italic:.07671,skew:0},33:{depth:0,height:.69444,italic:.12417,skew:0},34:{depth:0,height:.69444,italic:.06961,skew:0},35:{depth:.19444,height:.69444,italic:.06616,skew:0},37:{depth:.05556,height:.75,italic:.13639,skew:0},38:{depth:0,height:.69444,italic:.09694,skew:0},39:{depth:0,height:.69444,italic:.12417,skew:0},40:{depth:.25,height:.75,italic:.16194,skew:0},41:{depth:.25,height:.75,italic:.03694,skew:0},42:{depth:0,height:.75,italic:.14917,skew:0},43:{depth:.05667,height:.56167,italic:.03694,skew:0},44:{depth:.19444,height:.10556,italic:0,skew:0},45:{depth:0,height:.43056,italic:.02826,skew:0},46:{depth:0,height:.10556,italic:0,skew:0},47:{depth:.25,height:.75,italic:.16194,skew:0},48:{depth:0,height:.64444,italic:.13556,skew:0},49:{depth:0,height:.64444,italic:.13556,skew:0},50:{depth:0,height:.64444,italic:.13556,skew:0},51:{depth:0,height:.64444,italic:.13556,skew:0},52:{depth:.19444,height:.64444,italic:.13556,skew:0},53:{depth:0,height:.64444,italic:.13556,skew:0},54:{depth:0,height:.64444,italic:.13556,skew:0},55:{depth:.19444,height:.64444,italic:.13556,skew:0},56:{depth:0,height:.64444,italic:.13556,skew:0},567:{depth:.19444,height:.43056,italic:.03736,skew:0},57:{depth:0,height:.64444,italic:.13556,skew:0},58:{depth:0,height:.43056,italic:.0582,skew:0},59:{depth:.19444,height:.43056,italic:.0582,skew:0},61:{depth:-.13313,height:.36687,italic:.06616,skew:0},63:{depth:0,height:.69444,italic:.1225,skew:0},64:{depth:0,height:.69444,italic:.09597,skew:0},65:{depth:0,height:.68333,italic:0,skew:0},66:{depth:0,height:.68333,italic:.10257,skew:0},67:{depth:0,height:.68333,italic:.14528,skew:0},68:{depth:0,height:.68333,italic:.09403,skew:0},69:{depth:0,height:.68333,italic:.12028,skew:0},70:{depth:0,height:.68333,italic:.13305,skew:0},71:{depth:0,height:.68333,italic:.08722,skew:0},72:{depth:0,height:.68333,italic:.16389,skew:0},73:{depth:0,height:.68333,italic:.15806,skew:0},74:{depth:0,height:.68333,italic:.14028,skew:0},75:{depth:0,height:.68333,italic:.14528,skew:0},76:{depth:0,height:.68333,italic:0,skew:0},768:{depth:0,height:.69444,italic:0,skew:0},769:{depth:0,height:.69444,italic:.09694,skew:0},77:{depth:0,height:.68333,italic:.16389,skew:0},770:{depth:0,height:.69444,italic:.06646,skew:0},771:{depth:0,height:.66786,italic:.11585,skew:0},772:{depth:0,height:.56167,italic:.10333,skew:0},774:{depth:0,height:.69444,italic:.10806,skew:0},775:{depth:0,height:.66786,italic:.11752,skew:0},776:{depth:0,height:.66786,italic:.10474,skew:0},778:{depth:0,height:.69444,italic:0,skew:0},779:{depth:0,height:.69444,italic:.1225,skew:0},78:{depth:0,height:.68333,italic:.16389,skew:0},780:{depth:0,height:.62847,italic:.08295,skew:0},79:{depth:0,height:.68333,italic:.09403,skew:0},80:{depth:0,height:.68333,italic:.10257,skew:0},81:{depth:.19444,height:.68333,italic:.09403,skew:0},82:{depth:0,height:.68333,italic:.03868,skew:0},8211:{depth:0,height:.43056,italic:.09208,skew:0},8212:{depth:0,height:.43056,italic:.09208,skew:0},8216:{depth:0,height:.69444,italic:.12417,skew:0},8217:{depth:0,height:.69444,italic:.12417,skew:0},8220:{depth:0,height:.69444,italic:.1685,skew:0},8221:{depth:0,height:.69444,italic:.06961,skew:0},83:{depth:0,height:.68333,italic:.11972,skew:0},84:{depth:0,height:.68333,italic:.13305,skew:0},8463:{depth:0,height:.68889,italic:0,skew:0},85:{depth:0,height:.68333,italic:.16389,skew:0},86:{depth:0,height:.68333,italic:.18361,skew:0},87:{depth:0,height:.68333,italic:.18361,skew:0},88:{depth:0,height:.68333,italic:.15806,skew:0},89:{depth:0,height:.68333,italic:.19383,skew:0},90:{depth:0,height:.68333,italic:.14528,skew:0},91:{depth:.25,height:.75,italic:.1875,skew:0},915:{depth:0,height:.68333,italic:.13305,skew:0},916:{depth:0,height:.68333,italic:0,skew:0},920:{depth:0,height:.68333,italic:.09403,skew:0},923:{depth:0,height:.68333,italic:0,skew:0},926:{depth:0,height:.68333,italic:.15294,skew:0},928:{depth:0,height:.68333,italic:.16389,skew:0},93:{depth:.25,height:.75,italic:.10528,skew:0},931:{depth:0,height:.68333,italic:.12028,skew:0},933:{depth:0,height:.68333,italic:.11111,skew:0},934:{depth:0,height:.68333,italic:.05986,skew:0},936:{depth:0,height:.68333,italic:.11111,skew:0},937:{depth:0,height:.68333,italic:.10257,skew:0},94:{depth:0,height:.69444,italic:.06646,skew:0},95:{depth:.31,height:.12056,italic:.09208,skew:0},97:{depth:0,height:.43056,italic:.07671,skew:0},98:{depth:0,height:.69444,italic:.06312,skew:0},99:{depth:0,height:.43056,italic:.05653,skew:0}},"Main-Regular":{32:{depth:-0,height:0,italic:0,skew:0},160:{depth:-0,height:0,italic:0,skew:0},8230:{depth:-0,height:.12,italic:0,skew:0},8773:{depth:-.022,height:.589,italic:0,skew:0},8800:{depth:.215,height:.716,italic:0,skew:0},8942:{depth:.03,height:.9,italic:0,skew:0},8943:{depth:-.19,height:.31,italic:0,skew:0},8945:{depth:-.1,height:.82,italic:0,skew:0},100:{depth:0,height:.69444,italic:0,skew:0},101:{depth:0,height:.43056,italic:0,skew:0},102:{depth:0,height:.69444,italic:.07778,skew:0},10216:{depth:.25,height:.75,italic:0,skew:0},10217:{depth:.25,height:.75,italic:0,skew:0},103:{depth:.19444,height:.43056,italic:.01389,skew:0},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.66786,italic:0,skew:0},106:{depth:.19444,height:.66786,italic:0,skew:0},107:{depth:0,height:.69444,italic:0,skew:0},108:{depth:0,height:.69444,italic:0,skew:0},10815:{depth:0,height:.68333,italic:0,skew:0},109:{depth:0,height:.43056,italic:0,skew:0},10927:{depth:.13597,height:.63597,italic:0,skew:0},10928:{depth:.13597,height:.63597,italic:0,skew:0},110:{depth:0,height:.43056,italic:0,skew:0},111:{depth:0,height:.43056,italic:0,skew:0},112:{depth:.19444,height:.43056,italic:0,skew:0},113:{depth:.19444,height:.43056,italic:0,skew:0},114:{depth:0,height:.43056,italic:0,skew:0},115:{depth:0,height:.43056,italic:0,skew:0},116:{depth:0,height:.61508,italic:0,skew:0},117:{depth:0,height:.43056,italic:0,skew:0},118:{depth:0,height:.43056,italic:.01389,skew:0},119:{depth:0,height:.43056,italic:.01389,skew:0},120:{depth:0,height:.43056,italic:0,skew:0},121:{depth:.19444,height:.43056,italic:.01389,skew:0},122:{depth:0,height:.43056,italic:0,skew:0},123:{depth:.25,height:.75,italic:0,skew:0},124:{depth:.25,height:.75,italic:0,skew:0},125:{depth:.25,height:.75,italic:0,skew:0},126:{depth:.35,height:.31786,italic:0,skew:0},168:{depth:0,height:.66786,italic:0,skew:0},172:{depth:0,height:.43056,italic:0,skew:0},175:{depth:0,height:.56778,italic:0,skew:0},176:{depth:0,height:.69444,italic:0,skew:0},177:{depth:.08333,height:.58333,italic:0,skew:0},180:{depth:0,height:.69444,italic:0,skew:0},215:{depth:.08333,height:.58333,italic:0,skew:0},247:{depth:.08333,height:.58333,italic:0,skew:0},305:{depth:0,height:.43056,italic:0,skew:0},33:{depth:0,height:.69444,italic:0,skew:0
},34:{depth:0,height:.69444,italic:0,skew:0},35:{depth:.19444,height:.69444,italic:0,skew:0},36:{depth:.05556,height:.75,italic:0,skew:0},37:{depth:.05556,height:.75,italic:0,skew:0},38:{depth:0,height:.69444,italic:0,skew:0},39:{depth:0,height:.69444,italic:0,skew:0},40:{depth:.25,height:.75,italic:0,skew:0},41:{depth:.25,height:.75,italic:0,skew:0},42:{depth:0,height:.75,italic:0,skew:0},43:{depth:.08333,height:.58333,italic:0,skew:0},44:{depth:.19444,height:.10556,italic:0,skew:0},45:{depth:0,height:.43056,italic:0,skew:0},46:{depth:0,height:.10556,italic:0,skew:0},47:{depth:.25,height:.75,italic:0,skew:0},48:{depth:0,height:.64444,italic:0,skew:0},49:{depth:0,height:.64444,italic:0,skew:0},50:{depth:0,height:.64444,italic:0,skew:0},51:{depth:0,height:.64444,italic:0,skew:0},52:{depth:0,height:.64444,italic:0,skew:0},53:{depth:0,height:.64444,italic:0,skew:0},54:{depth:0,height:.64444,italic:0,skew:0},55:{depth:0,height:.64444,italic:0,skew:0},56:{depth:0,height:.64444,italic:0,skew:0},567:{depth:.19444,height:.43056,italic:0,skew:0},57:{depth:0,height:.64444,italic:0,skew:0},58:{depth:0,height:.43056,italic:0,skew:0},59:{depth:.19444,height:.43056,italic:0,skew:0},60:{depth:.0391,height:.5391,italic:0,skew:0},61:{depth:-.13313,height:.36687,italic:0,skew:0},62:{depth:.0391,height:.5391,italic:0,skew:0},63:{depth:0,height:.69444,italic:0,skew:0},64:{depth:0,height:.69444,italic:0,skew:0},65:{depth:0,height:.68333,italic:0,skew:0},66:{depth:0,height:.68333,italic:0,skew:0},67:{depth:0,height:.68333,italic:0,skew:0},68:{depth:0,height:.68333,italic:0,skew:0},69:{depth:0,height:.68333,italic:0,skew:0},70:{depth:0,height:.68333,italic:0,skew:0},71:{depth:0,height:.68333,italic:0,skew:0},710:{depth:0,height:.69444,italic:0,skew:0},711:{depth:0,height:.62847,italic:0,skew:0},713:{depth:0,height:.56778,italic:0,skew:0},714:{depth:0,height:.69444,italic:0,skew:0},715:{depth:0,height:.69444,italic:0,skew:0},72:{depth:0,height:.68333,italic:0,skew:0},728:{depth:0,height:.69444,italic:0,skew:0},729:{depth:0,height:.66786,italic:0,skew:0},73:{depth:0,height:.68333,italic:0,skew:0},730:{depth:0,height:.69444,italic:0,skew:0},732:{depth:0,height:.66786,italic:0,skew:0},74:{depth:0,height:.68333,italic:0,skew:0},75:{depth:0,height:.68333,italic:0,skew:0},76:{depth:0,height:.68333,italic:0,skew:0},768:{depth:0,height:.69444,italic:0,skew:0},769:{depth:0,height:.69444,italic:0,skew:0},77:{depth:0,height:.68333,italic:0,skew:0},770:{depth:0,height:.69444,italic:0,skew:0},771:{depth:0,height:.66786,italic:0,skew:0},772:{depth:0,height:.56778,italic:0,skew:0},774:{depth:0,height:.69444,italic:0,skew:0},775:{depth:0,height:.66786,italic:0,skew:0},776:{depth:0,height:.66786,italic:0,skew:0},778:{depth:0,height:.69444,italic:0,skew:0},779:{depth:0,height:.69444,italic:0,skew:0},78:{depth:0,height:.68333,italic:0,skew:0},780:{depth:0,height:.62847,italic:0,skew:0},79:{depth:0,height:.68333,italic:0,skew:0},80:{depth:0,height:.68333,italic:0,skew:0},81:{depth:.19444,height:.68333,italic:0,skew:0},82:{depth:0,height:.68333,italic:0,skew:0},8211:{depth:0,height:.43056,italic:.02778,skew:0},8212:{depth:0,height:.43056,italic:.02778,skew:0},8216:{depth:0,height:.69444,italic:0,skew:0},8217:{depth:0,height:.69444,italic:0,skew:0},8220:{depth:0,height:.69444,italic:0,skew:0},8221:{depth:0,height:.69444,italic:0,skew:0},8224:{depth:.19444,height:.69444,italic:0,skew:0},8225:{depth:.19444,height:.69444,italic:0,skew:0},824:{depth:.19444,height:.69444,italic:0,skew:0},8242:{depth:0,height:.55556,italic:0,skew:0},83:{depth:0,height:.68333,italic:0,skew:0},84:{depth:0,height:.68333,italic:0,skew:0},8407:{depth:0,height:.71444,italic:.15382,skew:0},8463:{depth:0,height:.68889,italic:0,skew:0},8465:{depth:0,height:.69444,italic:0,skew:0},8467:{depth:0,height:.69444,italic:0,skew:.11111},8472:{depth:.19444,height:.43056,italic:0,skew:.11111},8476:{depth:0,height:.69444,italic:0,skew:0},85:{depth:0,height:.68333,italic:0,skew:0},8501:{depth:0,height:.69444,italic:0,skew:0},8592:{depth:-.13313,height:.36687,italic:0,skew:0},8593:{depth:.19444,height:.69444,italic:0,skew:0},8594:{depth:-.13313,height:.36687,italic:0,skew:0},8595:{depth:.19444,height:.69444,italic:0,skew:0},8596:{depth:-.13313,height:.36687,italic:0,skew:0},8597:{depth:.25,height:.75,italic:0,skew:0},8598:{depth:.19444,height:.69444,italic:0,skew:0},8599:{depth:.19444,height:.69444,italic:0,skew:0},86:{depth:0,height:.68333,italic:.01389,skew:0},8600:{depth:.19444,height:.69444,italic:0,skew:0},8601:{depth:.19444,height:.69444,italic:0,skew:0},8636:{depth:-.13313,height:.36687,italic:0,skew:0},8637:{depth:-.13313,height:.36687,italic:0,skew:0},8640:{depth:-.13313,height:.36687,italic:0,skew:0},8641:{depth:-.13313,height:.36687,italic:0,skew:0},8656:{depth:-.13313,height:.36687,italic:0,skew:0},8657:{depth:.19444,height:.69444,italic:0,skew:0},8658:{depth:-.13313,height:.36687,italic:0,skew:0},8659:{depth:.19444,height:.69444,italic:0,skew:0},8660:{depth:-.13313,height:.36687,italic:0,skew:0},8661:{depth:.25,height:.75,italic:0,skew:0},87:{depth:0,height:.68333,italic:.01389,skew:0},8704:{depth:0,height:.69444,italic:0,skew:0},8706:{depth:0,height:.69444,italic:.05556,skew:.08334},8707:{depth:0,height:.69444,italic:0,skew:0},8709:{depth:.05556,height:.75,italic:0,skew:0},8711:{depth:0,height:.68333,italic:0,skew:0},8712:{depth:.0391,height:.5391,italic:0,skew:0},8715:{depth:.0391,height:.5391,italic:0,skew:0},8722:{depth:.08333,height:.58333,italic:0,skew:0},8723:{depth:.08333,height:.58333,italic:0,skew:0},8725:{depth:.25,height:.75,italic:0,skew:0},8726:{depth:.25,height:.75,italic:0,skew:0},8727:{depth:-.03472,height:.46528,italic:0,skew:0},8728:{depth:-.05555,height:.44445,italic:0,skew:0},8729:{depth:-.05555,height:.44445,italic:0,skew:0},8730:{depth:.2,height:.8,italic:0,skew:0},8733:{depth:0,height:.43056,italic:0,skew:0},8734:{depth:0,height:.43056,italic:0,skew:0},8736:{depth:0,height:.69224,italic:0,skew:0},8739:{depth:.25,height:.75,italic:0,skew:0},8741:{depth:.25,height:.75,italic:0,skew:0},8743:{depth:0,height:.55556,italic:0,skew:0},8744:{depth:0,height:.55556,italic:0,skew:0},8745:{depth:0,height:.55556,italic:0,skew:0},8746:{depth:0,height:.55556,italic:0,skew:0},8747:{depth:.19444,height:.69444,italic:.11111,skew:0},8764:{depth:-.13313,height:.36687,italic:0,skew:0},8768:{depth:.19444,height:.69444,italic:0,skew:0},8771:{depth:-.03625,height:.46375,italic:0,skew:0},8776:{depth:-.01688,height:.48312,italic:0,skew:0},8781:{depth:-.03625,height:.46375,italic:0,skew:0},88:{depth:0,height:.68333,italic:0,skew:0},8801:{depth:-.03625,height:.46375,italic:0,skew:0},8804:{depth:.13597,height:.63597,italic:0,skew:0},8805:{depth:.13597,height:.63597,italic:0,skew:0},8810:{depth:.0391,height:.5391,italic:0,skew:0},8811:{depth:.0391,height:.5391,italic:0,skew:0},8826:{depth:.0391,height:.5391,italic:0,skew:0},8827:{depth:.0391,height:.5391,italic:0,skew:0},8834:{depth:.0391,height:.5391,italic:0,skew:0},8835:{depth:.0391,height:.5391,italic:0,skew:0},8838:{depth:.13597,height:.63597,italic:0,skew:0},8839:{depth:.13597,height:.63597,italic:0,skew:0},8846:{depth:0,height:.55556,italic:0,skew:0},8849:{depth:.13597,height:.63597,italic:0,skew:0},8850:{depth:.13597,height:.63597,italic:0,skew:0},8851:{depth:0,height:.55556,italic:0,skew:0},8852:{depth:0,height:.55556,italic:0,skew:0},8853:{depth:.08333,height:.58333,italic:0,skew:0},8854:{depth:.08333,height:.58333,italic:0,skew:0},8855:{depth:.08333,height:.58333,italic:0,skew:0},8856:{depth:.08333,height:.58333,italic:0,skew:0},8857:{depth:.08333,height:.58333,italic:0,skew:0},8866:{depth:0,height:.69444,italic:0,skew:0},8867:{depth:0,height:.69444,italic:0,skew:0},8868:{depth:0,height:.69444,italic:0,skew:0},8869:{depth:0,height:.69444,italic:0,skew:0},89:{depth:0,height:.68333,italic:.025,skew:0},8900:{depth:-.05555,height:.44445,italic:0,skew:0},8901:{depth:-.05555,height:.44445,italic:0,skew:0},8902:{depth:-.03472,height:.46528,italic:0,skew:0},8968:{depth:.25,height:.75,italic:0,skew:0},8969:{depth:.25,height:.75,italic:0,skew:0},8970:{depth:.25,height:.75,italic:0,skew:0},8971:{depth:.25,height:.75,italic:0,skew:0},8994:{depth:-.14236,height:.35764,italic:0,skew:0},8995:{depth:-.14236,height:.35764,italic:0,skew:0},90:{depth:0,height:.68333,italic:0,skew:0},91:{depth:.25,height:.75,italic:0,skew:0},915:{depth:0,height:.68333,italic:0,skew:0},916:{depth:0,height:.68333,italic:0,skew:0},92:{depth:.25,height:.75,italic:0,skew:0},920:{depth:0,height:.68333,italic:0,skew:0},923:{depth:0,height:.68333,italic:0,skew:0},926:{depth:0,height:.68333,italic:0,skew:0},928:{depth:0,height:.68333,italic:0,skew:0},93:{depth:.25,height:.75,italic:0,skew:0},931:{depth:0,height:.68333,italic:0,skew:0},933:{depth:0,height:.68333,italic:0,skew:0},934:{depth:0,height:.68333,italic:0,skew:0},936:{depth:0,height:.68333,italic:0,skew:0},937:{depth:0,height:.68333,italic:0,skew:0},94:{depth:0,height:.69444,italic:0,skew:0},95:{depth:.31,height:.12056,italic:.02778,skew:0},96:{depth:0,height:.69444,italic:0,skew:0},9651:{depth:.19444,height:.69444,italic:0,skew:0},9657:{depth:-.03472,height:.46528,italic:0,skew:0},9661:{depth:.19444,height:.69444,italic:0,skew:0},9667:{depth:-.03472,height:.46528,italic:0,skew:0},97:{depth:0,height:.43056,italic:0,skew:0},9711:{depth:.19444,height:.69444,italic:0,skew:0},98:{depth:0,height:.69444,italic:0,skew:0},9824:{depth:.12963,height:.69444,italic:0,skew:0},9825:{depth:.12963,height:.69444,italic:0,skew:0},9826:{depth:.12963,height:.69444,italic:0,skew:0},9827:{depth:.12963,height:.69444,italic:0,skew:0},9837:{depth:0,height:.75,italic:0,skew:0},9838:{depth:.19444,height:.69444,italic:0,skew:0},9839:{depth:.19444,height:.69444,italic:0,skew:0},99:{depth:0,height:.43056,italic:0,skew:0}},"Math-BoldItalic":{100:{depth:0,height:.69444,italic:0,skew:0},1009:{depth:.19444,height:.44444,italic:0,skew:0},101:{depth:0,height:.44444,italic:0,skew:0},1013:{depth:0,height:.44444,italic:0,skew:0},102:{depth:.19444,height:.69444,italic:.11042,skew:0},103:{depth:.19444,height:.44444,italic:.03704,skew:0},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.69326,italic:0,skew:0},106:{depth:.19444,height:.69326,italic:.0622,skew:0},107:{depth:0,height:.69444,italic:.01852,skew:0},108:{depth:0,height:.69444,italic:.0088,skew:0},109:{depth:0,height:.44444,italic:0,skew:0},110:{depth:0,height:.44444,italic:0,skew:0},111:{depth:0,height:.44444,italic:0,skew:0},112:{depth:.19444,height:.44444,italic:0,skew:0},113:{depth:.19444,height:.44444,italic:.03704,skew:0},114:{depth:0,height:.44444,italic:.03194,skew:0},115:{depth:0,height:.44444,italic:0,skew:0},116:{depth:0,height:.63492,italic:0,skew:0},117:{depth:0,height:.44444,italic:0,skew:0},118:{depth:0,height:.44444,italic:.03704,skew:0},119:{depth:0,height:.44444,italic:.02778,skew:0},120:{depth:0,height:.44444,italic:0,skew:0},121:{depth:.19444,height:.44444,italic:.03704,skew:0},122:{depth:0,height:.44444,italic:.04213,skew:0},47:{depth:.19444,height:.69444,italic:0,skew:0},65:{depth:0,height:.68611,italic:0,skew:0},66:{depth:0,height:.68611,italic:.04835,skew:0},67:{depth:0,height:.68611,italic:.06979,skew:0},68:{depth:0,height:.68611,italic:.03194,skew:0},69:{depth:0,height:.68611,italic:.05451,skew:0},70:{depth:0,height:.68611,italic:.15972,skew:0},71:{depth:0,height:.68611,italic:0,skew:0},72:{depth:0,height:.68611,italic:.08229,skew:0},73:{depth:0,height:.68611,italic:.07778,skew:0},74:{depth:0,height:.68611,italic:.10069,skew:0},75:{depth:0,height:.68611,italic:.06979,skew:0},76:{depth:0,height:.68611,italic:0,skew:0},77:{depth:0,height:.68611,italic:.11424,skew:0},78:{depth:0,height:.68611,italic:.11424,skew:0},79:{depth:0,height:.68611,italic:.03194,skew:0},80:{depth:0,height:.68611,italic:.15972,skew:0},81:{depth:.19444,height:.68611,italic:0,skew:0},82:{depth:0,height:.68611,italic:.00421,skew:0},83:{depth:0,height:.68611,italic:.05382,skew:0},84:{depth:0,height:.68611,italic:.15972,skew:0},85:{depth:0,height:.68611,italic:.11424,skew:0},86:{depth:0,height:.68611,italic:.25555,skew:0},87:{depth:0,height:.68611,italic:.15972,skew:0},88:{depth:0,height:.68611,italic:.07778,skew:0},89:{depth:0,height:.68611,italic:.25555,skew:0},90:{depth:0,height:.68611,italic:.06979,skew:0},915:{depth:0,height:.68611,italic:.15972,skew:0},916:{depth:0,height:.68611,italic:0,skew:0},920:{depth:0,height:.68611,italic:.03194,skew:0},923:{depth:0,height:.68611,italic:0,skew:0},926:{depth:0,height:.68611,italic:.07458,skew:0},928:{depth:0,height:.68611,italic:.08229,skew:0},931:{depth:0,height:.68611,italic:.05451,skew:0},933:{depth:0,height:.68611,italic:.15972,skew:0},934:{depth:0,height:.68611,italic:0,skew:0},936:{depth:0,height:.68611,italic:.11653,skew:0},937:{depth:0,height:.68611,italic:.04835,skew:0},945:{depth:0,height:.44444,italic:0,skew:0},946:{depth:.19444,height:.69444,italic:.03403,skew:0},947:{depth:.19444,height:.44444,italic:.06389,skew:0},948:{depth:0,height:.69444,italic:.03819,skew:0},949:{depth:0,height:.44444,italic:0,skew:0},950:{depth:.19444,height:.69444,italic:.06215,skew:0},951:{depth:.19444,height:.44444,italic:.03704,skew:0},952:{depth:0,height:.69444,italic:.03194,skew:0},953:{depth:0,height:.44444,italic:0,skew:0},954:{depth:0,height:.44444,italic:0,skew:0},955:{depth:0,height:.69444,italic:0,skew:0},956:{depth:.19444,height:.44444,italic:0,skew:0},957:{depth:0,height:.44444,italic:.06898,skew:0},958:{depth:.19444,height:.69444,italic:.03021,skew:0},959:{depth:0,height:.44444,italic:0,skew:0},960:{depth:0,height:.44444,italic:.03704,skew:0},961:{depth:.19444,height:.44444,italic:0,skew:0},962:{depth:.09722,height:.44444,italic:.07917,skew:0},963:{depth:0,height:.44444,italic:.03704,skew:0},964:{depth:0,height:.44444,italic:.13472,skew:0},965:{depth:0,height:.44444,italic:.03704,skew:0},966:{depth:.19444,height:.44444,italic:0,skew:0},967:{depth:.19444,height:.44444,italic:0,skew:0},968:{depth:.19444,height:.69444,italic:.03704,skew:0},969:{depth:0,height:.44444,italic:.03704,skew:0},97:{depth:0,height:.44444,italic:0,skew:0},977:{depth:0,height:.69444,italic:0,skew:0},98:{depth:0,height:.69444,italic:0,skew:0},981:{depth:.19444,height:.69444,italic:0,skew:0},982:{depth:0,height:.44444,italic:.03194,skew:0},99:{depth:0,height:.44444,italic:0,skew:0}},"Math-Italic":{100:{depth:0,height:.69444,italic:0,skew:.16667},1009:{depth:.19444,height:.43056,italic:0,skew:.08334},101:{depth:0,height:.43056,italic:0,skew:.05556},1013:{depth:0,height:.43056,italic:0,skew:.05556},102:{depth:.19444,height:.69444,italic:.10764,skew:.16667},103:{depth:.19444,height:.43056,italic:.03588,skew:.02778},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.65952,italic:0,skew:0},106:{depth:.19444,height:.65952,italic:.05724,skew:0},107:{depth:0,height:.69444,italic:.03148,skew:0},108:{depth:0,height:.69444,italic:.01968,skew:.08334},109:{depth:0,height:.43056,italic:0,skew:0},110:{depth:0,height:.43056,italic:0,skew:0},111:{depth:0,height:.43056,italic:0,skew:.05556},112:{depth:.19444,height:.43056,italic:0,skew:.08334},113:{depth:.19444,height:.43056,italic:.03588,skew:.08334},114:{depth:0,height:.43056,italic:.02778,skew:.05556},115:{depth:0,height:.43056,italic:0,skew:.05556},116:{depth:0,height:.61508,italic:0,skew:.08334},117:{depth:0,height:.43056,italic:0,skew:.02778},118:{depth:0,height:.43056,italic:.03588,skew:.02778},119:{depth:0,height:.43056,italic:.02691,skew:.08334},120:{depth:0,height:.43056,italic:0,skew:.02778},121:{depth:.19444,height:.43056,italic:.03588,skew:.05556},122:{depth:0,height:.43056,italic:.04398,skew:.05556},47:{depth:.19444,height:.69444,italic:0,skew:0},65:{depth:0,height:.68333,italic:0,skew:.13889},66:{depth:0,height:.68333,italic:.05017,skew:.08334},67:{depth:0,height:.68333,italic:.07153,skew:.08334},68:{depth:0,height:.68333,italic:.02778,skew:.05556},69:{depth:0,height:.68333,italic:.05764,skew:.08334},70:{depth:0,height:.68333,italic:.13889,skew:.08334},71:{depth:0,height:.68333,italic:0,skew:.08334},72:{depth:0,height:.68333,italic:.08125,skew:.05556},73:{depth:0,height:.68333,italic:.07847,skew:.11111},74:{depth:0,height:.68333,italic:.09618,skew:.16667},75:{depth:0,height:.68333,italic:.07153,skew:.05556},76:{depth:0,height:.68333,italic:0,skew:.02778},77:{depth:0,height:.68333,italic:.10903,skew:.08334},78:{depth:0,height:.68333,italic:.10903,skew:.08334},79:{depth:0,height:.68333,italic:.02778,skew:.08334},80:{depth:0,height:.68333,italic:.13889,skew:.08334},81:{depth:.19444,height:.68333,italic:0,skew:.08334},82:{depth:0,height:.68333,italic:.00773,skew:.08334},83:{depth:0,height:.68333,italic:.05764,skew:.08334},84:{depth:0,height:.68333,italic:.13889,skew:.08334},85:{depth:0,height:.68333,italic:.10903,skew:.02778},86:{depth:0,height:.68333,italic:.22222,skew:0},87:{depth:0,height:.68333,italic:.13889,skew:0},88:{depth:0,height:.68333,italic:.07847,skew:.08334},89:{depth:0,height:.68333,italic:.22222,skew:0},90:{depth:0,height:.68333,italic:.07153,skew:.08334},915:{depth:0,height:.68333,italic:.13889,skew:.08334},916:{depth:0,height:.68333,italic:0,skew:.16667},920:{depth:0,height:.68333,italic:.02778,skew:.08334},923:{depth:0,height:.68333,italic:0,skew:.16667},926:{depth:0,height:.68333,italic:.07569,skew:.08334},928:{depth:0,height:.68333,italic:.08125,skew:.05556},931:{depth:0,height:.68333,italic:.05764,skew:.08334},933:{depth:0,height:.68333,italic:.13889,skew:.05556},934:{depth:0,height:.68333,italic:0,skew:.08334},936:{depth:0,height:.68333,italic:.11,skew:.05556},937:{depth:0,height:.68333,italic:.05017,skew:.08334},945:{depth:0,height:.43056,italic:.0037,skew:.02778},946:{depth:.19444,height:.69444,italic:.05278,skew:.08334},947:{depth:.19444,height:.43056,italic:.05556,skew:0},948:{depth:0,height:.69444,italic:.03785,skew:.05556},949:{depth:0,height:.43056,italic:0,skew:.08334},950:{depth:.19444,height:.69444,italic:.07378,skew:.08334},951:{depth:.19444,height:.43056,italic:.03588,skew:.05556},952:{depth:0,height:.69444,italic:.02778,skew:.08334},953:{depth:0,height:.43056,italic:0,skew:.05556},954:{depth:0,height:.43056,italic:0,skew:0},955:{depth:0,height:.69444,italic:0,skew:0},956:{depth:.19444,height:.43056,italic:0,skew:.02778},957:{depth:0,height:.43056,italic:.06366,skew:.02778},958:{depth:.19444,height:.69444,italic:.04601,skew:.11111},959:{depth:0,height:.43056,italic:0,skew:.05556},960:{depth:0,height:.43056,italic:.03588,skew:0},961:{depth:.19444,height:.43056,italic:0,skew:.08334},962:{depth:.09722,height:.43056,italic:.07986,skew:.08334},963:{depth:0,height:.43056,italic:.03588,skew:0},964:{depth:0,height:.43056,italic:.1132,skew:.02778},965:{depth:0,height:.43056,italic:.03588,skew:.02778},966:{depth:.19444,height:.43056,italic:0,skew:.08334},967:{depth:.19444,height:.43056,italic:0,skew:.05556},968:{depth:.19444,height:.69444,italic:.03588,skew:.11111},969:{depth:0,height:.43056,italic:.03588,skew:0},97:{depth:0,height:.43056,italic:0,skew:0},977:{depth:0,height:.69444,italic:0,skew:.08334},98:{depth:0,height:.69444,italic:0,skew:0},981:{depth:.19444,height:.69444,italic:0,skew:.08334},982:{depth:0,height:.43056,italic:.02778,skew:0},99:{depth:0,height:.43056,italic:0,skew:.05556}},"Math-Regular":{100:{depth:0,height:.69444,italic:0,skew:.16667},1009:{depth:.19444,height:.43056,italic:0,skew:.08334},101:{depth:0,height:.43056,italic:0,skew:.05556},1013:{depth:0,height:.43056,italic:0,skew:.05556},102:{depth:.19444,height:.69444,italic:.10764,skew:.16667},103:{depth:.19444,height:.43056,italic:.03588,skew:.02778},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.65952,italic:0,skew:0},106:{depth:.19444,height:.65952,italic:.05724,skew:0},107:{depth:0,height:.69444,italic:.03148,skew:0},108:{depth:0,height:.69444,italic:.01968,skew:.08334},109:{depth:0,height:.43056,italic:0,skew:0},110:{depth:0,height:.43056,italic:0,skew:0},111:{depth:0,height:.43056,italic:0,skew:.05556},112:{depth:.19444,height:.43056,italic:0,skew:.08334},113:{depth:.19444,height:.43056,italic:.03588,skew:.08334},114:{depth:0,height:.43056,italic:.02778,skew:.05556},115:{depth:0,height:.43056,italic:0,skew:.05556},116:{depth:0,height:.61508,italic:0,skew:.08334},117:{depth:0,height:.43056,italic:0,skew:.02778},118:{depth:0,height:.43056,italic:.03588,skew:.02778},119:{depth:0,height:.43056,italic:.02691,skew:.08334},120:{depth:0,height:.43056,italic:0,skew:.02778},121:{depth:.19444,height:.43056,italic:.03588,skew:.05556},122:{depth:0,height:.43056,italic:.04398,skew:.05556},65:{depth:0,height:.68333,italic:0,skew:.13889},66:{depth:0,height:.68333,italic:.05017,skew:.08334},67:{depth:0,height:.68333,italic:.07153,skew:.08334},68:{depth:0,height:.68333,italic:.02778,skew:.05556},69:{depth:0,height:.68333,italic:.05764,skew:.08334},70:{depth:0,height:.68333,italic:.13889,skew:.08334},71:{depth:0,height:.68333,italic:0,skew:.08334},72:{depth:0,height:.68333,italic:.08125,skew:.05556},73:{depth:0,height:.68333,italic:.07847,skew:.11111},74:{depth:0,height:.68333,italic:.09618,skew:.16667},75:{depth:0,height:.68333,italic:.07153,skew:.05556},76:{depth:0,height:.68333,italic:0,skew:.02778},77:{depth:0,height:.68333,italic:.10903,skew:.08334},78:{depth:0,height:.68333,italic:.10903,skew:.08334},79:{depth:0,height:.68333,italic:.02778,skew:.08334},80:{depth:0,height:.68333,italic:.13889,skew:.08334},81:{depth:.19444,height:.68333,italic:0,skew:.08334},82:{depth:0,height:.68333,italic:.00773,skew:.08334},83:{depth:0,height:.68333,italic:.05764,skew:.08334},84:{depth:0,height:.68333,italic:.13889,skew:.08334},85:{depth:0,height:.68333,italic:.10903,skew:.02778},86:{depth:0,height:.68333,italic:.22222,skew:0},87:{depth:0,height:.68333,italic:.13889,skew:0},88:{depth:0,height:.68333,italic:.07847,skew:.08334},89:{depth:0,height:.68333,italic:.22222,skew:0},90:{depth:0,height:.68333,italic:.07153,skew:.08334},915:{depth:0,height:.68333,italic:.13889,skew:.08334},916:{depth:0,height:.68333,italic:0,skew:.16667},920:{depth:0,height:.68333,italic:.02778,skew:.08334},923:{depth:0,height:.68333,italic:0,skew:.16667},926:{depth:0,height:.68333,italic:.07569,skew:.08334},928:{depth:0,height:.68333,italic:.08125,skew:.05556},931:{depth:0,height:.68333,italic:.05764,skew:.08334},933:{depth:0,height:.68333,italic:.13889,skew:.05556},934:{depth:0,height:.68333,italic:0,skew:.08334},936:{depth:0,height:.68333,italic:.11,skew:.05556},937:{depth:0,height:.68333,italic:.05017,skew:.08334},945:{depth:0,height:.43056,italic:.0037,skew:.02778},946:{depth:.19444,height:.69444,italic:.05278,skew:.08334},947:{depth:.19444,height:.43056,italic:.05556,skew:0},948:{depth:0,height:.69444,italic:.03785,skew:.05556},949:{depth:0,height:.43056,italic:0,skew:.08334},950:{depth:.19444,height:.69444,italic:.07378,skew:.08334},951:{depth:.19444,height:.43056,italic:.03588,skew:.05556},952:{depth:0,height:.69444,italic:.02778,skew:.08334},953:{depth:0,height:.43056,italic:0,skew:.05556},954:{depth:0,height:.43056,italic:0,skew:0},955:{depth:0,height:.69444,italic:0,skew:0},956:{depth:.19444,height:.43056,italic:0,skew:.02778},957:{depth:0,height:.43056,italic:.06366,skew:.02778},958:{depth:.19444,height:.69444,italic:.04601,skew:.11111},959:{depth:0,height:.43056,italic:0,skew:.05556},960:{depth:0,height:.43056,italic:.03588,skew:0},961:{depth:.19444,height:.43056,italic:0,skew:.08334},962:{depth:.09722,height:.43056,italic:.07986,skew:.08334},963:{depth:0,height:.43056,italic:.03588,skew:0},964:{depth:0,height:.43056,italic:.1132,skew:.02778},965:{depth:0,height:.43056,italic:.03588,skew:.02778},966:{depth:.19444,height:.43056,italic:0,skew:.08334},967:{depth:.19444,height:.43056,italic:0,skew:.05556},968:{depth:.19444,height:.69444,italic:.03588,skew:.11111},969:{depth:0,height:.43056,italic:.03588,skew:0},97:{depth:0,height:.43056,italic:0,skew:0},977:{depth:0,height:.69444,italic:0,skew:.08334},98:{depth:0,height:.69444,italic:0,skew:0},981:{depth:.19444,height:.69444,italic:0,skew:.08334},982:{depth:0,height:.43056,italic:.02778,skew:0},99:{depth:0,height:.43056,italic:0,skew:.05556}},"Size1-Regular":{8748:{depth:.306,height:.805,italic:.19445,skew:0},8749:{depth:.306,height:.805,italic:.19445,skew:0},10216:{depth:.35001,height:.85,italic:0,skew:0},10217:{depth:.35001,height:.85,italic:0,skew:0},10752:{depth:.25001,height:.75,italic:0,skew:0},10753:{depth:.25001,height:.75,italic:0,skew:0},10754:{depth:.25001,height:.75,italic:0,skew:0},10756:{depth:.25001,height:.75,italic:0,skew:0},10758:{depth:.25001,height:.75,italic:0,skew:0},123:{depth:.35001,height:.85,italic:0,skew:0},125:{depth:.35001,height:.85,italic:0,skew:0},40:{depth:.35001,height:.85,italic:0,skew:0},41:{depth:.35001,height:.85,italic:0,skew:0},47:{depth:.35001,height:.85,italic:0,skew:0},710:{depth:0,height:.72222,italic:0,skew:0},732:{depth:0,height:.72222,italic:0,skew:0},770:{depth:0,height:.72222,italic:0,skew:0},771:{depth:0,height:.72222,italic:0,skew:0},8214:{depth:-99e-5,height:.601,italic:0,skew:0},8593:{depth:1e-5,height:.6,italic:0,skew:0},8595:{depth:1e-5,height:.6,italic:0,skew:0},8657:{depth:1e-5,height:.6,italic:0,skew:0},8659:{depth:1e-5,height:.6,italic:0,skew:0},8719:{depth:.25001,height:.75,italic:0,skew:0},8720:{depth:.25001,height:.75,italic:0,skew:0},8721:{depth:.25001,height:.75,italic:0,skew:0},8730:{depth:.35001,height:.85,italic:0,skew:0},8739:{depth:-.00599,height:.606,italic:0,skew:0},8741:{depth:-.00599,height:.606,italic:0,skew:0},8747:{depth:.30612,height:.805,italic:.19445,skew:0},8750:{depth:.30612,height:.805,italic:.19445,skew:0},8896:{depth:.25001,height:.75,italic:0,skew:0},8897:{depth:.25001,height:.75,italic:0,skew:0},8898:{depth:.25001,height:.75,italic:0,skew:0},8899:{depth:.25001,height:.75,italic:0,skew:0},8968:{depth:.35001,height:.85,italic:0,skew:0},8969:{depth:.35001,height:.85,italic:0,skew:0},8970:{depth:.35001,height:.85,italic:0,skew:0},8971:{depth:.35001,height:.85,italic:0,skew:0},91:{depth:.35001,height:.85,italic:0,skew:0},9168:{depth:-99e-5,height:.601,italic:0,skew:0},92:{depth:.35001,height:.85,italic:0,skew:0},93:{depth:.35001,height:.85,italic:0,skew:0}},"Size2-Regular":{8748:{depth:.862,height:1.36,italic:.44445,skew:0},8749:{depth:.862,height:1.36,italic:.44445,skew:0},10216:{depth:.65002,height:1.15,italic:0,skew:0},10217:{depth:.65002,height:1.15,italic:0,skew:0},10752:{depth:.55001,height:1.05,italic:0,skew:0},10753:{depth:.55001,height:1.05,italic:0,skew:0},10754:{depth:.55001,height:1.05,italic:0,skew:0},10756:{depth:.55001,height:1.05,italic:0,skew:0},10758:{depth:.55001,height:1.05,italic:0,skew:0},123:{depth:.65002,height:1.15,italic:0,skew:0},125:{depth:.65002,height:1.15,italic:0,skew:0},40:{depth:.65002,height:1.15,italic:0,skew:0},41:{depth:.65002,height:1.15,italic:0,skew:0},47:{depth:.65002,height:1.15,italic:0,skew:0},710:{depth:0,height:.75,italic:0,skew:0},732:{depth:0,height:.75,italic:0,skew:0},770:{depth:0,height:.75,italic:0,skew:0},771:{depth:0,height:.75,italic:0,skew:0},8719:{depth:.55001,height:1.05,italic:0,skew:0},8720:{depth:.55001,height:1.05,italic:0,skew:0},8721:{depth:.55001,height:1.05,italic:0,skew:0},8730:{depth:.65002,height:1.15,italic:0,skew:0},8747:{depth:.86225,height:1.36,italic:.44445,skew:0},8750:{depth:.86225,height:1.36,italic:.44445,skew:0},8896:{depth:.55001,height:1.05,italic:0,skew:0},8897:{depth:.55001,height:1.05,italic:0,skew:0},8898:{depth:.55001,height:1.05,italic:0,skew:0},8899:{depth:.55001,height:1.05,italic:0,skew:0},8968:{depth:.65002,height:1.15,italic:0,skew:0},8969:{depth:.65002,height:1.15,italic:0,skew:0},8970:{depth:.65002,height:1.15,italic:0,skew:0},8971:{depth:.65002,height:1.15,italic:0,skew:0},91:{depth:.65002,height:1.15,italic:0,skew:0},92:{depth:.65002,height:1.15,italic:0,skew:0},93:{depth:.65002,height:1.15,italic:0,skew:0}},"Size3-Regular":{10216:{depth:.95003,height:1.45,italic:0,skew:0},10217:{depth:.95003,height:1.45,italic:0,skew:0},123:{depth:.95003,height:1.45,italic:0,skew:0},125:{depth:.95003,height:1.45,italic:0,skew:0},40:{depth:.95003,height:1.45,italic:0,skew:0},41:{depth:.95003,height:1.45,italic:0,skew:0},47:{depth:.95003,height:1.45,italic:0,skew:0},710:{depth:0,height:.75,italic:0,skew:0},732:{depth:0,height:.75,italic:0,skew:0},770:{depth:0,height:.75,italic:0,skew:0},771:{depth:0,height:.75,italic:0,skew:0},8730:{depth:.95003,height:1.45,italic:0,skew:0},8968:{depth:.95003,height:1.45,italic:0,skew:0},8969:{depth:.95003,height:1.45,italic:0,skew:0},8970:{depth:.95003,height:1.45,italic:0,skew:0},8971:{depth:.95003,height:1.45,italic:0,skew:0},91:{depth:.95003,height:1.45,italic:0,skew:0},92:{depth:.95003,height:1.45,italic:0,skew:0},93:{depth:.95003,height:1.45,italic:0,skew:0}},"Size4-Regular":{10216:{depth:1.25003,height:1.75,italic:0,skew:0},10217:{depth:1.25003,height:1.75,italic:0,skew:0},123:{depth:1.25003,height:1.75,italic:0,skew:0},125:{depth:1.25003,height:1.75,italic:0,skew:0},40:{depth:1.25003,height:1.75,italic:0,skew:0},41:{depth:1.25003,height:1.75,italic:0,skew:0},47:{depth:1.25003,height:1.75,italic:0,skew:0},57344:{depth:-.00499,height:.605,italic:0,skew:0},57345:{depth:-.00499,height:.605,italic:0,skew:0},57680:{depth:0,height:.12,italic:0,skew:0},57681:{depth:0,height:.12,italic:0,skew:0},57682:{depth:0,height:.12,italic:0,skew:0},57683:{depth:0,height:.12,italic:0,skew:0},710:{depth:0,height:.825,italic:0,skew:0},732:{depth:0,height:.825,italic:0,skew:0},770:{depth:0,height:.825,italic:0,skew:0},771:{depth:0,height:.825,italic:0,skew:0},8730:{depth:1.25003,height:1.75,italic:0,skew:0},8968:{depth:1.25003,height:1.75,italic:0,skew:0},8969:{depth:1.25003,height:1.75,italic:0,skew:0},8970:{depth:1.25003,height:1.75,italic:0,skew:0},8971:{depth:1.25003,height:1.75,italic:0,skew:0},91:{depth:1.25003,height:1.75,italic:0,skew:0},9115:{depth:.64502,height:1.155,italic:0,skew:0},9116:{depth:1e-5,height:.6,italic:0,skew:0},9117:{depth:.64502,height:1.155,italic:0,skew:0},9118:{depth:.64502,height:1.155,italic:0,skew:0},9119:{depth:1e-5,height:.6,italic:0,skew:0},9120:{depth:.64502,height:1.155,italic:0,skew:0},9121:{depth:.64502,height:1.155,italic:0,skew:0},9122:{depth:-99e-5,height:.601,italic:0,skew:0},9123:{depth:.64502,height:1.155,italic:0,skew:0},9124:{depth:.64502,height:1.155,italic:0,skew:0},9125:{depth:-99e-5,height:.601,italic:0,skew:0},9126:{depth:.64502,height:1.155,italic:0,skew:0},9127:{depth:1e-5,height:.9,italic:0,skew:0},9128:{depth:.65002,height:1.15,italic:0,skew:0},9129:{depth:.90001,height:0,italic:0,skew:0},9130:{depth:0,height:.3,italic:0,skew:0},9131:{depth:1e-5,height:.9,italic:0,skew:0},9132:{depth:.65002,height:1.15,italic:0,skew:0},9133:{depth:.90001,height:0,italic:0,skew:0},9143:{depth:.88502,height:.915,italic:0,skew:0},92:{depth:1.25003,height:1.75,italic:0,skew:0},93:{depth:1.25003,height:1.75,italic:0,skew:0}}},R=function(e,t){return P[t][e.charCodeAt(0)]}
t.exports={metrics:L,getCharacterMetrics:R}},{"./Style":566}],572:[function(e,t,i){for(var n=e("./utils"),r=e("./ParseError"),a={"\\sqrt":{numArgs:1,numOptionalArgs:1,handler:function(e,t,i,n){if(null!=t)throw new r("Optional arguments to \\sqrt aren't supported yet",this.lexer,n[1]-1)
return{type:"sqrt",body:i}}},"\\text":{numArgs:1,argTypes:["text"],greediness:2,handler:function(e,t){var i
return i="ordgroup"===t.type?t.value:[t],{type:"text",body:i}}},"\\color":{numArgs:2,allowedInText:!0,argTypes:["color","original"],handler:function(e,t,i){var n
return n="ordgroup"===i.type?i.value:[i],{type:"color",color:t.value,value:n}}},"\\overline":{numArgs:1,handler:function(e,t){return{type:"overline",body:t}}},"\\rule":{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"],handler:function(e,t,i,n){return{type:"rule",shift:t&&t.value,width:i.value,height:n.value}}},"\\KaTeX":{numArgs:0,handler:function(e){return{type:"katex"}}}},o={"\\bigl":{type:"open",size:1},"\\Bigl":{type:"open",size:2},"\\biggl":{type:"open",size:3},"\\Biggl":{type:"open",size:4},"\\bigr":{type:"close",size:1},"\\Bigr":{type:"close",size:2},"\\biggr":{type:"close",size:3},"\\Biggr":{type:"close",size:4},"\\bigm":{type:"rel",size:1},"\\Bigm":{type:"rel",size:2},"\\biggm":{type:"rel",size:3},"\\Biggm":{type:"rel",size:4},"\\big":{type:"textord",size:1},"\\Big":{type:"textord",size:2},"\\bigg":{type:"textord",size:3},"\\Bigg":{type:"textord",size:4}},s=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","<",">","\\langle","\\rangle","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],h=[{funcs:["\\blue","\\orange","\\pink","\\red","\\green","\\gray","\\purple"],data:{numArgs:1,allowedInText:!0,handler:function(e,t){var i
return i="ordgroup"===t.type?t.value:[t],{type:"color",color:"katex-"+e.slice(1),value:i}}}},{funcs:["\\arcsin","\\arccos","\\arctan","\\arg","\\cos","\\cosh","\\cot","\\coth","\\csc","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\tan","\\tanh"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!1,symbol:!1,body:e}}}},{funcs:["\\det","\\gcd","\\inf","\\lim","\\liminf","\\limsup","\\max","\\min","\\Pr","\\sup"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!0,symbol:!1,body:e}}}},{funcs:["\\int","\\iint","\\iiint","\\oint"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!1,symbol:!0,body:e}}}},{funcs:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!0,symbol:!0,body:e}}}},{funcs:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom"],data:{numArgs:2,greediness:2,handler:function(e,t,i){var n,r=null,a=null,o="auto"
switch(e){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0
break
case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,r="(",a=")"
break
default:throw new Error("Unrecognized genfrac command")}switch(e){case"\\dfrac":case"\\dbinom":o="display"
break
case"\\tfrac":case"\\tbinom":o="text"}return{type:"genfrac",numer:t,denom:i,hasBarLine:n,leftDelim:r,rightDelim:a,size:o}}}},{funcs:["\\llap","\\rlap"],data:{numArgs:1,allowedInText:!0,handler:function(e,t){return{type:e.slice(1),body:t}}}},{funcs:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg","\\left","\\right"],data:{numArgs:1,handler:function(e,t,i){if(!n.contains(s,t.value))throw new r("Invalid delimiter: '"+t.value+"' after '"+e+"'",this.lexer,i[1])
return"\\left"===e||"\\right"===e?{type:"leftright",value:t.value}:{type:"delimsizing",size:o[e].size,delimType:o[e].type,value:t.value}}}},{funcs:["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],data:{numArgs:0}},{funcs:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],data:{numArgs:0}},{funcs:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot"],data:{numArgs:1,handler:function(e,t){return{type:"accent",accent:e,base:t}}}},{funcs:["\\over","\\choose"],data:{numArgs:0,handler:function(e){var t
switch(e){case"\\over":t="\\frac"
break
case"\\choose":t="\\binom"
break
default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",replaceWith:t}}}}],l=function(e,t){for(var i=0;i<e.length;i++)a[e[i]]=t},c=0;c<h.length;c++)l(h[c].funcs,h[c].data)
var u=function(e){return void 0===a[e].greediness?1:a[e].greediness}
for(var d in a)if(a.hasOwnProperty(d)){var p=a[d]
a[d]={numArgs:p.numArgs,argTypes:p.argTypes,greediness:void 0===p.greediness?1:p.greediness,allowedInText:p.allowedInText?p.allowedInText:!1,numOptionalArgs:void 0===p.numOptionalArgs?0:p.numOptionalArgs,handler:p.handler}}t.exports={funcs:a,getGreediness:u}},{"./ParseError":564,"./utils":575}],573:[function(e,t,i){var n=e("./Parser"),r=function(e){var t=new n(e)
return t.parse()}
t.exports=r},{"./Parser":565}],574:[function(e,t,i){for(var n={math:{"`":{font:"main",group:"textord",replace:"‘"},"\\$":{font:"main",group:"textord",replace:"$"},"\\%":{font:"main",group:"textord",replace:"%"},"\\_":{font:"main",group:"textord",replace:"_"},"\\angle":{font:"main",group:"textord",replace:"∠"},"\\infty":{font:"main",group:"textord",replace:"∞"},"\\prime":{font:"main",group:"textord",replace:"′"},"\\triangle":{font:"main",group:"textord",replace:"△"},"\\Gamma":{font:"main",group:"textord",replace:"Γ"},"\\Delta":{font:"main",group:"textord",replace:"Δ"},"\\Theta":{font:"main",group:"textord",replace:"Θ"},"\\Lambda":{font:"main",group:"textord",replace:"Λ"},"\\Xi":{font:"main",group:"textord",replace:"Ξ"},"\\Pi":{font:"main",group:"textord",replace:"Π"},"\\Sigma":{font:"main",group:"textord",replace:"Σ"},"\\Upsilon":{font:"main",group:"textord",replace:"Υ"},"\\Phi":{font:"main",group:"textord",replace:"Φ"},"\\Psi":{font:"main",group:"textord",replace:"Ψ"},"\\Omega":{font:"main",group:"textord",replace:"Ω"},"\\neg":{font:"main",group:"textord",replace:"¬"},"\\lnot":{font:"main",group:"textord",replace:"¬"},"\\top":{font:"main",group:"textord",replace:"⊤"},"\\bot":{font:"main",group:"textord",replace:"⊥"},"\\emptyset":{font:"main",group:"textord",replace:"∅"},"\\varnothing":{font:"ams",group:"textord",replace:"∅"},"\\alpha":{font:"main",group:"mathord",replace:"α"},"\\beta":{font:"main",group:"mathord",replace:"β"},"\\gamma":{font:"main",group:"mathord",replace:"γ"},"\\delta":{font:"main",group:"mathord",replace:"δ"},"\\epsilon":{font:"main",group:"mathord",replace:"ϵ"},"\\zeta":{font:"main",group:"mathord",replace:"ζ"},"\\eta":{font:"main",group:"mathord",replace:"η"},"\\theta":{font:"main",group:"mathord",replace:"θ"},"\\iota":{font:"main",group:"mathord",replace:"ι"},"\\kappa":{font:"main",group:"mathord",replace:"κ"},"\\lambda":{font:"main",group:"mathord",replace:"λ"},"\\mu":{font:"main",group:"mathord",replace:"μ"},"\\nu":{font:"main",group:"mathord",replace:"ν"},"\\xi":{font:"main",group:"mathord",replace:"ξ"},"\\omicron":{font:"main",group:"mathord",replace:"o"},"\\pi":{font:"main",group:"mathord",replace:"π"},"\\rho":{font:"main",group:"mathord",replace:"ρ"},"\\sigma":{font:"main",group:"mathord",replace:"σ"},"\\tau":{font:"main",group:"mathord",replace:"τ"},"\\upsilon":{font:"main",group:"mathord",replace:"υ"},"\\phi":{font:"main",group:"mathord",replace:"ϕ"},"\\chi":{font:"main",group:"mathord",replace:"χ"},"\\psi":{font:"main",group:"mathord",replace:"ψ"},"\\omega":{font:"main",group:"mathord",replace:"ω"},"\\varepsilon":{font:"main",group:"mathord",replace:"ε"},"\\vartheta":{font:"main",group:"mathord",replace:"ϑ"},"\\varpi":{font:"main",group:"mathord",replace:"ϖ"},"\\varrho":{font:"main",group:"mathord",replace:"ϱ"},"\\varsigma":{font:"main",group:"mathord",replace:"ς"},"\\varphi":{font:"main",group:"mathord",replace:"φ"},"*":{font:"main",group:"bin",replace:"∗"},"+":{font:"main",group:"bin"},"-":{font:"main",group:"bin",replace:"−"},"\\cdot":{font:"main",group:"bin",replace:"⋅"},"\\circ":{font:"main",group:"bin",replace:"∘"},"\\div":{font:"main",group:"bin",replace:"÷"},"\\pm":{font:"main",group:"bin",replace:"±"},"\\times":{font:"main",group:"bin",replace:"×"},"\\cap":{font:"main",group:"bin",replace:"∩"},"\\cup":{font:"main",group:"bin",replace:"∪"},"\\setminus":{font:"main",group:"bin",replace:"∖"},"\\land":{font:"main",group:"bin",replace:"∧"},"\\lor":{font:"main",group:"bin",replace:"∨"},"\\wedge":{font:"main",group:"bin",replace:"∧"},"\\vee":{font:"main",group:"bin",replace:"∨"},"\\surd":{font:"main",group:"textord",replace:"√"},"(":{font:"main",group:"open"},"[":{font:"main",group:"open"},"\\langle":{font:"main",group:"open",replace:"⟨"},"\\lvert":{font:"main",group:"open",replace:"∣"},")":{font:"main",group:"close"},"]":{font:"main",group:"close"},"?":{font:"main",group:"close"},"!":{font:"main",group:"close"},"\\rangle":{font:"main",group:"close",replace:"⟩"},"\\rvert":{font:"main",group:"close",replace:"∣"},"=":{font:"main",group:"rel"},"<":{font:"main",group:"rel"},">":{font:"main",group:"rel"},":":{font:"main",group:"rel"},"\\approx":{font:"main",group:"rel",replace:"≈"},"\\cong":{font:"main",group:"rel",replace:"≅"},"\\ge":{font:"main",group:"rel",replace:"≥"},"\\geq":{font:"main",group:"rel",replace:"≥"},"\\gets":{font:"main",group:"rel",replace:"←"},"\\in":{font:"main",group:"rel",replace:"∈"},"\\notin":{font:"main",group:"rel",replace:"∉"},"\\subset":{font:"main",group:"rel",replace:"⊂"},"\\supset":{font:"main",group:"rel",replace:"⊃"},"\\subseteq":{font:"main",group:"rel",replace:"⊆"},"\\supseteq":{font:"main",group:"rel",replace:"⊇"},"\\nsubseteq":{font:"ams",group:"rel",replace:"⊈"},"\\nsupseteq":{font:"ams",group:"rel",replace:"⊉"},"\\models":{font:"main",group:"rel",replace:"⊨"},"\\leftarrow":{font:"main",group:"rel",replace:"←"},"\\le":{font:"main",group:"rel",replace:"≤"},"\\leq":{font:"main",group:"rel",replace:"≤"},"\\ne":{font:"main",group:"rel",replace:"≠"},"\\neq":{font:"main",group:"rel",replace:"≠"},"\\rightarrow":{font:"main",group:"rel",replace:"→"},"\\to":{font:"main",group:"rel",replace:"→"},"\\ngeq":{font:"ams",group:"rel",replace:"≱"},"\\nleq":{font:"ams",group:"rel",replace:"≰"},"\\!":{font:"main",group:"spacing"},"\\ ":{font:"main",group:"spacing",replace:" "},"~":{font:"main",group:"spacing",replace:" "},"\\,":{font:"main",group:"spacing"},"\\:":{font:"main",group:"spacing"},"\\;":{font:"main",group:"spacing"},"\\enspace":{font:"main",group:"spacing"},"\\qquad":{font:"main",group:"spacing"},"\\quad":{font:"main",group:"spacing"},"\\space":{font:"main",group:"spacing",replace:" "},",":{font:"main",group:"punct"},";":{font:"main",group:"punct"},"\\colon":{font:"main",group:"punct",replace:":"},"\\barwedge":{font:"ams",group:"textord",replace:"⊼"},"\\veebar":{font:"ams",group:"textord",replace:"⊻"},"\\odot":{font:"main",group:"textord",replace:"⊙"},"\\oplus":{font:"main",group:"textord",replace:"⊕"},"\\otimes":{font:"main",group:"textord",replace:"⊗"},"\\partial":{font:"main",group:"textord",replace:"∂"},"\\oslash":{font:"main",group:"textord",replace:"⊘"},"\\circledcirc":{font:"ams",group:"textord",replace:"⊚"},"\\boxdot":{font:"ams",group:"textord",replace:"⊡"},"\\bigtriangleup":{font:"main",group:"textord",replace:"△"},"\\bigtriangledown":{font:"main",group:"textord",replace:"▽"},"\\dagger":{font:"main",group:"textord",replace:"†"},"\\diamond":{font:"main",group:"textord",replace:"⋄"},"\\star":{font:"main",group:"textord",replace:"⋆"},"\\triangleleft":{font:"main",group:"textord",replace:"◃"},"\\triangleright":{font:"main",group:"textord",replace:"▹"},"\\{":{font:"main",group:"open",replace:"{"},"\\}":{font:"main",group:"close",replace:"}"},"\\lbrace":{font:"main",group:"open",replace:"{"},"\\rbrace":{font:"main",group:"close",replace:"}"},"\\lbrack":{font:"main",group:"open",replace:"["},"\\rbrack":{font:"main",group:"close",replace:"]"},"\\lfloor":{font:"main",group:"open",replace:"⌊"},"\\rfloor":{font:"main",group:"close",replace:"⌋"},"\\lceil":{font:"main",group:"open",replace:"⌈"},"\\rceil":{font:"main",group:"close",replace:"⌉"},"\\backslash":{font:"main",group:"textord",replace:"\\"},"|":{font:"main",group:"textord",replace:"∣"},"\\vert":{font:"main",group:"textord",replace:"∣"},"\\|":{font:"main",group:"textord",replace:"∥"},"\\Vert":{font:"main",group:"textord",replace:"∥"},"\\uparrow":{font:"main",group:"textord",replace:"↑"},"\\Uparrow":{font:"main",group:"textord",replace:"⇑"},"\\downarrow":{font:"main",group:"textord",replace:"↓"},"\\Downarrow":{font:"main",group:"textord",replace:"⇓"},"\\updownarrow":{font:"main",group:"textord",replace:"↕"},"\\Updownarrow":{font:"main",group:"textord",replace:"⇕"},"\\coprod":{font:"math",group:"op",replace:"∐"},"\\bigvee":{font:"math",group:"op",replace:"⋁"},"\\bigwedge":{font:"math",group:"op",replace:"⋀"},"\\biguplus":{font:"math",group:"op",replace:"⨄"},"\\bigcap":{font:"math",group:"op",replace:"⋂"},"\\bigcup":{font:"math",group:"op",replace:"⋃"},"\\int":{font:"math",group:"op",replace:"∫"},"\\intop":{font:"math",group:"op",replace:"∫"},"\\iint":{font:"math",group:"op",replace:"∬"},"\\iiint":{font:"math",group:"op",replace:"∭"},"\\prod":{font:"math",group:"op",replace:"∏"},"\\sum":{font:"math",group:"op",replace:"∑"},"\\bigotimes":{font:"math",group:"op",replace:"⨂"},"\\bigoplus":{font:"math",group:"op",replace:"⨁"},"\\bigodot":{font:"math",group:"op",replace:"⨀"},"\\oint":{font:"math",group:"op",replace:"∮"},"\\bigsqcup":{font:"math",group:"op",replace:"⨆"},"\\smallint":{font:"math",group:"op",replace:"∫"},"\\ldots":{font:"main",group:"punct",replace:"…"},"\\cdots":{font:"main",group:"inner",replace:"⋯"},"\\ddots":{font:"main",group:"inner",replace:"⋱"},"\\vdots":{font:"main",group:"textord",replace:"⋮"},"\\acute":{font:"main",group:"accent",replace:"´"},"\\grave":{font:"main",group:"accent",replace:"`"},"\\ddot":{font:"main",group:"accent",replace:"¨"},"\\tilde":{font:"main",group:"accent",replace:"~"},"\\bar":{font:"main",group:"accent",replace:"¯"},"\\breve":{font:"main",group:"accent",replace:"˘"},"\\check":{font:"main",group:"accent",replace:"ˇ"},"\\hat":{font:"main",group:"accent",replace:"^"},"\\vec":{font:"main",group:"accent",replace:"⃗"},"\\dot":{font:"main",group:"accent",replace:"˙"}},text:{"\\ ":{font:"main",group:"spacing",replace:" "}," ":{font:"main",group:"spacing",replace:" "},"~":{font:"main",group:"spacing",replace:" "}}},r='0123456789/@."',a=0;a<r.length;a++){var o=r.charAt(a)
n.math[o]={font:"main",group:"textord"}}for(var s="0123456789`!@*()-=+[]'\";:?/.,",a=0;a<s.length;a++){var o=s.charAt(a)
n.text[o]={font:"main",group:"textord"}}for(var h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=0;a<h.length;a++){var o=h.charAt(a)
n.math[o]={font:"main",group:"mathord"},n.text[o]={font:"main",group:"textord"}}t.exports=n},{}],575:[function(e,t,i){function n(e){return d[e]}function r(e){return(""+e).replace(p,n)}function a(e){o(e,"")}var o,s=Array.prototype.indexOf,h=function(e,t){if(null==e)return-1
if(s&&e.indexOf===s)return e.indexOf(t)
for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i
return-1},l=function(e,t){return-1!==h(e,t)},c=/([A-Z])/g,u=function(e){return e.replace(c,"-$1").toLowerCase()},d={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},p=/[&><"']/g
if("undefined"!=typeof document){var f=document.createElement("span")
o="textContent"in f?function(e,t){e.textContent=t}:function(e,t){e.innerText=t}}t.exports={contains:l,escape:r,hyphenate:u,indexOf:h,setTextContent:o,clearNode:a}},{}],576:[function(e,t,i){t.exports=function(e){function t(t,n){function r(){return 2*Math.PI/60/60*g.autoRotateSpeed}function a(){return Math.pow(.95,g.zoomSpeed)}function o(e){if(g.enabled!==!1){if(e.preventDefault(),e.button===g.mouseButtons.ORBIT){if(g.noRotate===!0)return
O=B.ROTATE,y.set(e.clientX,e.clientY)}else if(e.button===g.mouseButtons.ZOOM){if(g.noZoom===!0)return
O=B.DOLLY,T.set(e.clientX,e.clientY)}else if(e.button===g.mouseButtons.PAN){if(g.noPan===!0)return
O=B.PAN,x.set(e.clientX,e.clientY)}O!==B.NONE&&(document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",h,!1),g.dispatchEvent(N))}}function s(e){if(g.enabled!==!1){e.preventDefault()
var t=g.domElement===document?g.domElement.body:g.domElement
if(O===B.ROTATE){if(g.noRotate===!0)return
w.set(e.clientX,e.clientY),b.subVectors(w,y),g.rotateLeft(2*Math.PI*b.x/t.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*b.y/t.clientHeight*g.rotateSpeed),y.copy(w)}else if(O===B.DOLLY){if(g.noZoom===!0)return
C.set(e.clientX,e.clientY),E.subVectors(C,T),E.y>0?g.dollyIn():g.dollyOut(),T.copy(C)}else if(O===B.PAN){if(g.noPan===!0)return
_.set(e.clientX,e.clientY),k.subVectors(_,x),g.pan(k.x,k.y),x.copy(_)}O!==B.NONE&&g.update()}}function h(){g.enabled!==!1&&(document.removeEventListener("mousemove",s,!1),document.removeEventListener("mouseup",h,!1),g.dispatchEvent(I),O=B.NONE)}function l(e){if(g.enabled!==!1&&g.noZoom!==!0&&O===B.NONE){e.preventDefault(),e.stopPropagation()
var t=0
void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?g.dollyOut():g.dollyIn(),g.update(),g.dispatchEvent(N),g.dispatchEvent(I)}}function c(e){if(g.enabled!==!1&&g.noKeys!==!0&&g.noPan!==!0)switch(e.keyCode){case g.keys.UP:g.pan(0,g.keyPanSpeed),g.update()
break
case g.keys.BOTTOM:g.pan(0,-g.keyPanSpeed),g.update()
break
case g.keys.LEFT:g.pan(g.keyPanSpeed,0),g.update()
break
case g.keys.RIGHT:g.pan(-g.keyPanSpeed,0),g.update()}}function u(e){if(g.enabled!==!1){switch(e.touches.length){case 1:if(g.noRotate===!0)return
O=B.TOUCH_ROTATE,y.set(e.touches[0].pageX,e.touches[0].pageY)
break
case 2:if(g.noZoom===!0)return
O=B.TOUCH_DOLLY
var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i)
T.set(0,n)
break
case 3:if(g.noPan===!0)return
O=B.TOUCH_PAN,x.set(e.touches[0].pageX,e.touches[0].pageY)
break
default:O=B.NONE}O!==B.NONE&&g.dispatchEvent(N)}}function d(e){if(g.enabled!==!1){e.preventDefault(),e.stopPropagation()
var t=g.domElement===document?g.domElement.body:g.domElement
switch(e.touches.length){case 1:if(g.noRotate===!0)return
if(O!==B.TOUCH_ROTATE)return
w.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(w,y),g.rotateLeft(2*Math.PI*b.x/t.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*b.y/t.clientHeight*g.rotateSpeed),y.copy(w),g.update()
break
case 2:if(g.noZoom===!0)return
if(O!==B.TOUCH_DOLLY)return
var i=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(i*i+n*n)
C.set(0,r),E.subVectors(C,T),E.y>0?g.dollyOut():g.dollyIn(),T.copy(C),g.update()
break
case 3:if(g.noPan===!0)return
if(O!==B.TOUCH_PAN)return
_.set(e.touches[0].pageX,e.touches[0].pageY),k.subVectors(_,x),g.pan(k.x,k.y),x.copy(_),g.update()
break
default:O=B.NONE}}}function p(){g.enabled!==!1&&(g.dispatchEvent(I),O=B.NONE)}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:i.LEFT,ZOOM:i.MIDDLE,PAN:i.RIGHT}
var f,m,g=this,v=1e-6,y=new e.Vector2,w=new e.Vector2,b=new e.Vector2,x=new e.Vector2,_=new e.Vector2,k=new e.Vector2,M=new e.Vector3,S=new e.Vector3,T=new e.Vector2,C=new e.Vector2,E=new e.Vector2,A=0,L=0,P=1,R=new e.Vector3,F=new e.Vector3,D=new e.Quaternion,B={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},O=B.NONE
this.target0=this.target.clone(),this.position0=this.object.position.clone()
var V=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),z=V.clone().inverse(),U={type:"change"},N={type:"start"},I={type:"end"}
this.rotateLeft=function(e){void 0===e&&(e=r()),L-=e},this.rotateUp=function(e){void 0===e&&(e=r()),A-=e},this.panLeft=function(e){var t=this.object.matrix.elements
M.set(t[0],t[1],t[2]),M.multiplyScalar(-e),R.add(M)},this.panUp=function(e){var t=this.object.matrix.elements
M.set(t[4],t[5],t[6]),M.multiplyScalar(e),R.add(M)},this.pan=function(e,t){var i=g.domElement===document?g.domElement.body:g.domElement
if(void 0!==g.object.fov){var n=g.object.position,r=n.clone().sub(g.target),a=r.length()
a*=Math.tan(g.object.fov/2*Math.PI/180),g.panLeft(2*e*a/i.clientHeight),g.panUp(2*t*a/i.clientHeight)}else void 0!==g.object.top?(g.panLeft(e*(g.object.right-g.object.left)/i.clientWidth),g.panUp(t*(g.object.top-g.object.bottom)/i.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=a()),P/=e},this.dollyOut=function(e){void 0===e&&(e=a()),P*=e},this.update=function(){var e=this.object.position
S.copy(e).sub(this.target),S.applyQuaternion(V),f=Math.atan2(S.x,S.z),m=Math.atan2(Math.sqrt(S.x*S.x+S.z*S.z),S.y),this.autoRotate&&O===B.NONE&&this.rotateLeft(r()),f+=L,m+=A,f=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,f)),m=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,m)),m=Math.max(v,Math.min(Math.PI-v,m))
var t=S.length()*P
t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(R),S.x=t*Math.sin(m)*Math.sin(f),S.y=t*Math.cos(m),S.z=t*Math.sin(m)*Math.cos(f),S.applyQuaternion(z),e.copy(this.target).add(S),this.object.lookAt(this.target),L=0,A=0,P=1,R.set(0,0,0),(F.distanceToSquared(this.object.position)>v||8*(1-D.dot(this.object.quaternion))>v)&&(this.dispatchEvent(U),F.copy(this.object.position),D.copy(this.object.quaternion))},this.reset=function(){O=B.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.getPolarAngle=function(){return m},this.getAzimuthalAngle=function(){return f},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mousewheel",l,!1),this.domElement.addEventListener("DOMMouseScroll",l,!1),this.domElement.addEventListener("touchstart",u,!1),this.domElement.addEventListener("touchend",p,!1),this.domElement.addEventListener("touchmove",d,!1),window.addEventListener("keydown",c,!1),this.update()}var i=e.MOUSE
return i||(i={LEFT:0,MIDDLE:1,RIGHT:2}),t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,t}},{}],577:[function(e,t,i){var n=n||{},r={REVISION:"70"}
"object"==typeof t&&(t.exports=r),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:0}),r.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},r.CullFaceNone=0,r.CullFaceBack=1,r.CullFaceFront=2,r.CullFaceFrontBack=3,r.FrontFaceDirectionCW=0,r.FrontFaceDirectionCCW=1,r.BasicShadowMap=0,r.PCFShadowMap=1,r.PCFSoftShadowMap=2,r.FrontSide=0,r.BackSide=1,r.DoubleSide=2,r.NoShading=0,r.FlatShading=1,r.SmoothShading=2,r.NoColors=0,r.FaceColors=1,r.VertexColors=2,r.NoBlending=0,r.NormalBlending=1,r.AdditiveBlending=2,r.SubtractiveBlending=3,r.MultiplyBlending=4,r.CustomBlending=5,r.AddEquation=100,r.SubtractEquation=101,r.ReverseSubtractEquation=102,r.MinEquation=103,r.MaxEquation=104,r.ZeroFactor=200,r.OneFactor=201,r.SrcColorFactor=202,r.OneMinusSrcColorFactor=203,r.SrcAlphaFactor=204,r.OneMinusSrcAlphaFactor=205,r.DstAlphaFactor=206,r.OneMinusDstAlphaFactor=207,r.DstColorFactor=208,r.OneMinusDstColorFactor=209,r.SrcAlphaSaturateFactor=210,r.MultiplyOperation=0,r.MixOperation=1,r.AddOperation=2,r.UVMapping=300,r.CubeReflectionMapping=301,r.CubeRefractionMapping=302,r.EquirectangularReflectionMapping=303,r.EquirectangularRefractionMapping=304,r.SphericalReflectionMapping=305,r.RepeatWrapping=1e3,r.ClampToEdgeWrapping=1001,r.MirroredRepeatWrapping=1002,r.NearestFilter=1003,r.NearestMipMapNearestFilter=1004,r.NearestMipMapLinearFilter=1005,r.LinearFilter=1006,r.LinearMipMapNearestFilter=1007,r.LinearMipMapLinearFilter=1008,r.UnsignedByteType=1009,r.ByteType=1010,r.ShortType=1011,r.UnsignedShortType=1012,r.IntType=1013,r.UnsignedIntType=1014,r.FloatType=1015,r.UnsignedShort4444Type=1016,r.UnsignedShort5551Type=1017,r.UnsignedShort565Type=1018,r.AlphaFormat=1019,r.RGBFormat=1020,r.RGBAFormat=1021,r.LuminanceFormat=1022,r.LuminanceAlphaFormat=1023,r.RGBEFormat=r.RGBAFormat,r.RGB_S3TC_DXT1_Format=2001,r.RGBA_S3TC_DXT1_Format=2002,r.RGBA_S3TC_DXT3_Format=2003,r.RGBA_S3TC_DXT5_Format=2004,r.RGB_PVRTC_4BPPV1_Format=2100,r.RGB_PVRTC_2BPPV1_Format=2101,r.RGBA_PVRTC_4BPPV1_Format=2102,r.RGBA_PVRTC_2BPPV1_Format=2103,r.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},r.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},r.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},r.Color.prototype={constructor:r.Color,r:1,g:1,b:1,set:function(e){return e instanceof r.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(e,t,i){if(0===t)this.r=this.g=this.b=i
else{var n=function(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e},r=.5>=i?i*(1+t):i+t-i*t,a=2*i-r
this.r=n(a,r,e+1/3),this.g=n(a,r,e),this.b=n(a,r,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e)
return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e)
return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e)
return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)
return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}return/^(\w+)$/i.test(e)?(this.setHex(r.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b
return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,i,n=e||{h:0,s:0,l:0},r=this.r,a=this.g,o=this.b,s=Math.max(r,a,o),h=Math.min(r,a,o),l=(h+s)/2
if(h===s)t=0,i=0
else{var c=s-h
switch(i=.5>=l?c/(s+h):c/(2-s-h),s){case r:t=(a-o)/c+(o>a?6:0)
break
case a:t=(o-r)/c+2
break
case o:t=(r-a)/c+4}t/=6}return n.h=t,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var n=this.getHSL()
return n.h+=e,n.s+=t,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new r.Color).setRGB(this.r,this.g,this.b)}},r.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},r.Quaternion=function(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==n?n:1},r.Quaternion.prototype={constructor:r.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof r.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.")
var i=Math.cos(e._x/2),n=Math.cos(e._y/2),a=Math.cos(e._z/2),o=Math.sin(e._x/2),s=Math.sin(e._y/2),h=Math.sin(e._z/2)
return"XYZ"===e.order?(this._x=o*n*a+i*s*h,this._y=i*s*a-o*n*h,this._z=i*n*h+o*s*a,this._w=i*n*a-o*s*h):"YXZ"===e.order?(this._x=o*n*a+i*s*h,this._y=i*s*a-o*n*h,this._z=i*n*h-o*s*a,this._w=i*n*a+o*s*h):"ZXY"===e.order?(this._x=o*n*a-i*s*h,this._y=i*s*a+o*n*h,this._z=i*n*h+o*s*a,this._w=i*n*a-o*s*h):"ZYX"===e.order?(this._x=o*n*a-i*s*h,this._y=i*s*a+o*n*h,this._z=i*n*h-o*s*a,this._w=i*n*a+o*s*h):"YZX"===e.order?(this._x=o*n*a+i*s*h,this._y=i*s*a+o*n*h,this._z=i*n*h-o*s*a,this._w=i*n*a-o*s*h):"XZY"===e.order&&(this._x=o*n*a-i*s*h,this._y=i*s*a-o*n*h,this._z=i*n*h+o*s*a,this._w=i*n*a+o*s*h),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i)
return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,n=i[0],r=i[4],a=i[8],o=i[1],s=i[5],h=i[9],l=i[2],c=i[6],u=i[10],d=n+s+u
return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-h)*t,this._y=(a-l)*t,this._z=(o-r)*t):n>s&&n>u?(t=2*Math.sqrt(1+n-s-u),this._w=(c-h)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(a+l)/t):s>u?(t=2*Math.sqrt(1+s-n-u),this._w=(a-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(h+c)/t):(t=2*Math.sqrt(1+u-n-s),this._w=(o-r)/t,this._x=(a+l)/t,this._y=(h+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,i=1e-6
return function(n,a){return void 0===e&&(e=new r.Vector3),t=n.dot(a)+1,i>t?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,a),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length()
return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z,a=e._w,o=t._x,s=t._y,h=t._z,l=t._w
return this._x=i*l+a*o+n*h-r*s,this._y=n*l+a*s+r*o-i*h,this._z=r*l+a*h+i*s-n*o,this._w=a*l-i*o-n*s-r*h,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this
if(1===t)return this.copy(e)
var i=this._x,n=this._y,r=this._z,a=this._w,o=a*e._w+i*e._x+n*e._y+r*e._z
if(0>o?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this
var s=Math.acos(o),h=Math.sqrt(1-o*o)
if(Math.abs(h)<.001)return this._w=.5*(a+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this
var l=Math.sin((1-t)*s)/h,c=Math.sin(t*s)/h
return this._w=a*l+this._w*c,this._x=i*l+this._x*c,this._y=n*l+this._y*c,this._z=r*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new r.Quaternion(this._x,this._y,this._z,this._w)}},r.Quaternion.slerp=function(e,t,i,n){return i.copy(e).slerp(t,n)},r.Vector2=function(e,t){this.x=e||0,this.y=t||0},r.Vector2.prototype={constructor:r.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t
break
case 1:this.y=t
break
default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x
case 1:return this.y
default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){if(0!==e){var t=1/e
this.x*=t,this.y*=t}else this.x=0,this.y=0
return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t
return function(i,n){return void 0===e&&(e=new r.Vector2,t=new r.Vector2),e.set(i,i),t.set(n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y
return t*t+i*i},setLength:function(e){var t=this.length()
return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,i){return void 0===i&&(i=0),t=t*e.itemSize+i,this.x=e.array[t],this.y=e.array[t+1],this},clone:function(){return new r.Vector2(this.x,this.y)}},r.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},r.Vector3.prototype={constructor:r.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t
break
case 1:this.y=t
break
case 2:this.z=t
break
default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x
case 1:return this.y
case 2:return this.z
default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e
return function(t){return t instanceof r.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new r.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e
return function(t,i){return void 0===e&&(e=new r.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,i)),this}}(),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements
return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements
return this.x=r[0]*t+r[4]*i+r[8]*n+r[12],this.y=r[1]*t+r[5]*i+r[9]*n+r[13],this.z=r[2]*t+r[6]*i+r[10]*n+r[14],this},applyProjection:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements,a=1/(r[3]*t+r[7]*i+r[11]*n+r[15])
return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*a,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,o=e.z,s=e.w,h=s*t+a*n-o*i,l=s*i+o*t-r*n,c=s*n+r*i-a*t,u=-r*t-a*i-o*n
return this.x=h*s+u*-r+l*-o-c*-a,this.y=l*s+u*-a+c*-r-h*-o,this.z=c*s+u*-o+h*-a-l*-r,this},project:function(){var e
return function(t){return void 0===e&&(e=new r.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e
return function(t){return void 0===e&&(e=new r.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements
return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e
this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0
return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t
return function(i,n){return void 0===e&&(e=new r.Vector3,t=new r.Vector3),e.set(i,i,i),t.set(n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length()
return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)
var i=this.x,n=this.y,r=this.z
return this.x=n*e.z-r*e.y,this.y=r*e.x-i*e.z,this.z=i*e.y-n*e.x,this},crossVectors:function(e,t){var i=e.x,n=e.y,r=e.z,a=t.x,o=t.y,s=t.z
return this.x=n*s-r*o,this.y=r*a-i*s,this.z=i*o-n*a,this},projectOnVector:function(){var e,t
return function(i){return void 0===e&&(e=new r.Vector3),e.copy(i).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e
return function(t){return void 0===e&&(e=new r.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e
return function(t){return void 0===e&&(e=new r.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length())
return Math.acos(r.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,n=this.z-e.z
return t*t+i*i+n*n},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),i=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),n=this.set(e.elements[8],e.elements[9],e.elements[10]).length()
return this.x=t,this.y=i,this.z=n,this},setFromMatrixColumn:function(e,t){var i=4*e,n=t.elements
return this.x=n[i],this.y=n[i+1],this.z=n[i+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,i){return void 0===i&&(i=0),t=t*e.itemSize+i,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this},clone:function(){return new r.Vector3(this.x,this.y,this.z)}},r.Vector4=function(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1},r.Vector4.prototype={constructor:r.Vector4,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t
break
case 1:this.y=t
break
case 2:this.z=t
break
case 3:this.w=t
break
default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x
case 1:return this.y
case 2:return this.z
case 3:return this.w
default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w,a=e.elements
return this.x=a[0]*t+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*t+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*t+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*t+a[7]*i+a[11]*n+a[15]*r,this},divideScalar:function(e){if(0!==e){var t=1/e
this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1
return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w)
var t=Math.sqrt(1-e.w*e.w)
return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,n,r,a=.01,o=.1,s=e.elements,h=s[0],l=s[4],c=s[8],u=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10]
if(Math.abs(l-u)<a&&Math.abs(c-f)<a&&Math.abs(p-m)<a){if(Math.abs(l+u)<o&&Math.abs(c+f)<o&&Math.abs(p+m)<o&&Math.abs(h+d+g-3)<o)return this.set(1,0,0,0),this
t=Math.PI
var v=(h+1)/2,y=(d+1)/2,w=(g+1)/2,b=(l+u)/4,x=(c+f)/4,_=(p+m)/4
return v>y&&v>w?a>v?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(v),n=b/i,r=x/i):y>w?a>y?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(y),i=b/n,r=_/n):a>w?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(w),i=x/r,n=_/r),this.set(i,n,r,t),this}var k=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(u-l)*(u-l))
return Math.abs(k)<.001&&(k=1),this.x=(m-p)/k,this.y=(c-f)/k,this.z=(u-l)/k,this.w=Math.acos((h+d+g-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t
return function(i,n){return void 0===e&&(e=new r.Vector4,t=new r.Vector4),e.set(i,i,i,i),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length()
return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,i){return void 0===i&&(i=0),t=t*e.itemSize+i,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this},clone:function(){return new r.Vector4(this.x,this.y,this.z,this.w)}},r.Euler=function(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||r.Euler.DefaultOrder},r.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],r.Euler.DefaultOrder="XYZ",r.Euler.prototype={constructor:r.Euler,_x:0,_y:0,_z:0,_order:r.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var n=r.Math.clamp,a=e.elements,o=a[0],s=a[4],h=a[8],l=a[1],c=a[5],u=a[9],d=a[2],p=a[6],f=a[10]
return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(h,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-n(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===t?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(h,f))):"XZY"===t?(this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e
return function(t,i,n){return void 0===e&&(e=new r.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,i,n),this}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new r.Quaternion
return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new r.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new r.Euler(this._x,this._y,this._z,this._order)}},r.Line3=function(e,t){this.start=void 0!==e?e:new r.Vector3,this.end=void 0!==t?t:new r.Vector3},r.Line3.prototype={constructor:r.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new r.Vector3
return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new r.Vector3
return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new r.Vector3
return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new r.Vector3,t=new r.Vector3
return function(i,n){e.subVectors(i,this.start),t.subVectors(this.end,this.start)
var a=t.dot(t),o=t.dot(e),s=o/a
return n&&(s=r.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,i){var n=this.closestPointToPointParameter(e,t),a=i||new r.Vector3
return this.delta(a).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new r.Line3).copy(this)}},r.Box2=function(e,t){this.min=void 0!==e?e:new r.Vector2(1/0,1/0),this.max=void 0!==t?t:new r.Vector2(-(1/0),-(1/0))},r.Box2.prototype={constructor:r.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty()
for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t])
return this},setFromCenterAndSize:function(){var e=new r.Vector2
return function(t,i){var n=e.copy(i).multiplyScalar(.5)
return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new r.Vector2
return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new r.Vector2
return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var i=t||new r.Vector2
return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var i=t||new r.Vector2
return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r.Vector2
return function(t){var i=e.copy(t).clamp(this.min,this.max)
return i.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new r.Box2).copy(this)}},r.Box3=function(e,t){this.min=void 0!==e?e:new r.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new r.Vector3(-(1/0),-(1/0),-(1/0))},r.Box3.prototype={constructor:r.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty()
for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t])
return this},setFromCenterAndSize:function(){var e=new r.Vector3
return function(t,i){var n=e.copy(i).multiplyScalar(.5)
return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new r.Vector3
return function(t){var i=this
return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var n=t.geometry
if(void 0!==n)if(n instanceof r.Geometry)for(var a=n.vertices,o=0,s=a.length;s>o;o++)e.copy(a[o]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)
else if(n instanceof r.BufferGeometry&&void 0!==n.attributes.position)for(var h=n.attributes.position.array,o=0,s=h.length;s>o;o+=3)e.set(h[o],h[o+1],h[o+2]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new r.Vector3
return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new r.Vector3
return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var i=t||new r.Vector3
return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var i=t||new r.Vector3
return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r.Vector3
return function(t){var i=e.copy(t).clamp(this.min,this.max)
return i.sub(t).length()}}(),getBoundingSphere:function(){var e=new r.Vector3
return function(t){var i=t||new r.Sphere
return i.center=this.center(),i.radius=.5*this.size(e).length(),i}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3]
return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new r.Box3).copy(this)}},r.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},r.Matrix3.prototype={constructor:r.Matrix3,set:function(e,t,i,n,r,a,o,s,h){var l=this.elements
return l[0]=e,l[3]=t,l[6]=i,l[1]=n,l[4]=r,l[7]=a,l[2]=o,l[5]=s,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements
return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new r.Vector3
return function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length)
for(var r=0,a=i;n>r;r+=3,a+=3)e.x=t[a],e.y=t[a+1],e.z=t[a+2],e.applyMatrix3(this),t[a]=e.x,t[a+1]=e.y,t[a+2]=e.z
return t}}(),multiplyScalar:function(e){var t=this.elements
return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],o=e[5],s=e[6],h=e[7],l=e[8]
return t*a*l-t*o*h-i*r*l+i*o*s+n*r*h-n*a*s},getInverse:function(e,t){var i=e.elements,n=this.elements
n[0]=i[10]*i[5]-i[6]*i[9],n[1]=-i[10]*i[1]+i[2]*i[9],n[2]=i[6]*i[1]-i[2]*i[5],n[3]=-i[10]*i[4]+i[6]*i[8],n[4]=i[10]*i[0]-i[2]*i[8],n[5]=-i[6]*i[0]+i[2]*i[4],n[6]=i[9]*i[4]-i[5]*i[8],n[7]=-i[9]*i[0]+i[1]*i[8],n[8]=i[5]*i[0]-i[1]*i[4]
var r=i[0]*n[0]+i[1]*n[3]+i[2]*n[6]
if(0===r){var a="Matrix3.getInverse(): can't invert matrix, determinant is 0"
if(t)throw new Error(a)
return console.warn(a),this.identity(),this}return this.multiplyScalar(1/r),this},transpose:function(){var e,t=this.elements
return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements
return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements
return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements
return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new r.Matrix3).fromArray(this.elements)}},r.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},r.Matrix4.prototype={constructor:r.Matrix4,set:function(e,t,i,n,r,a,o,s,h,l,c,u,d,p,f,m){var g=this.elements
return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=h,g[6]=l,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,i=e.elements
return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractBasis:function(e,t,i){var n=this.elements
return e.set(n[0],n[1],n[2]),t.set(n[4],n[5],n[6]),i.set(n[8],n[9],n[10]),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:function(){var e=new r.Vector3
return function(t){var i=this.elements,n=t.elements,r=1/e.set(n[0],n[1],n[2]).length(),a=1/e.set(n[4],n[5],n[6]).length(),o=1/e.set(n[8],n[9],n[10]).length()
return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[8]=n[8]*o,i[9]=n[9]*o,i[10]=n[10]*o,this}}(),makeRotationFromEuler:function(e){e instanceof r.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.")
var t=this.elements,i=e.x,n=e.y,a=e.z,o=Math.cos(i),s=Math.sin(i),h=Math.cos(n),l=Math.sin(n),c=Math.cos(a),u=Math.sin(a)
if("XYZ"===e.order){var d=o*c,p=o*u,f=s*c,m=s*u
t[0]=h*c,t[4]=-h*u,t[8]=l,t[1]=p+f*l,t[5]=d-m*l,t[9]=-s*h,t[2]=m-d*l,t[6]=f+p*l,t[10]=o*h}else if("YXZ"===e.order){var g=h*c,v=h*u,y=l*c,w=l*u
t[0]=g+w*s,t[4]=y*s-v,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=v*s-y,t[6]=w+g*s,t[10]=o*h}else if("ZXY"===e.order){var g=h*c,v=h*u,y=l*c,w=l*u
t[0]=g-w*s,t[4]=-o*u,t[8]=y+v*s,t[1]=v+y*s,t[5]=o*c,t[9]=w-g*s,t[2]=-o*l,t[6]=s,t[10]=o*h}else if("ZYX"===e.order){var d=o*c,p=o*u,f=s*c,m=s*u
t[0]=h*c,t[4]=f*l-p,t[8]=d*l+m,t[1]=h*u,t[5]=m*l+d,t[9]=p*l-f,t[2]=-l,t[6]=s*h,t[10]=o*h}else if("YZX"===e.order){var b=o*h,x=o*l,_=s*h,k=s*l
t[0]=h*c,t[4]=k-b*u,t[8]=_*u+x,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=x*u+_,t[10]=b-k*u}else if("XZY"===e.order){var b=o*h,x=o*l,_=s*h,k=s*l
t[0]=h*c,t[4]=-u,t[8]=l*c,t[1]=b*u+k,t[5]=o*c,t[9]=x*u-_,t[2]=_*u-x,t[6]=s*c,t[10]=k*u+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,i=e.x,n=e.y,r=e.z,a=e.w,o=i+i,s=n+n,h=r+r,l=i*o,c=i*s,u=i*h,d=n*s,p=n*h,f=r*h,m=a*o,g=a*s,v=a*h
return t[0]=1-(d+f),t[4]=c-v,t[8]=u+g,t[1]=c+v,t[5]=1-(l+f),t[9]=p-m,t[2]=u-g,t[6]=p+m,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new r.Vector3,t=new r.Vector3,i=new r.Vector3
return function(n,r,a){var o=this.elements
return i.subVectors(n,r).normalize(),0===i.length()&&(i.z=1),e.crossVectors(a,i).normalize(),0===e.length()&&(i.x+=1e-4,e.crossVectors(a,i).normalize()),t.crossVectors(i,e),o[0]=e.x,o[4]=t.x,o[8]=i.x,o[1]=e.y,o[5]=t.y,o[9]=i.y,o[2]=e.z,o[6]=t.z,o[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements,r=this.elements,a=i[0],o=i[4],s=i[8],h=i[12],l=i[1],c=i[5],u=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],y=i[7],w=i[11],b=i[15],x=n[0],_=n[4],k=n[8],M=n[12],S=n[1],T=n[5],C=n[9],E=n[13],A=n[2],L=n[6],P=n[10],R=n[14],F=n[3],D=n[7],B=n[11],O=n[15]
return r[0]=a*x+o*S+s*A+h*F,r[4]=a*_+o*T+s*L+h*D,r[8]=a*k+o*C+s*P+h*B,r[12]=a*M+o*E+s*R+h*O,r[1]=l*x+c*S+u*A+d*F,r[5]=l*_+c*T+u*L+d*D,r[9]=l*k+c*C+u*P+d*B,r[13]=l*M+c*E+u*R+d*O,r[2]=p*x+f*S+m*A+g*F,r[6]=p*_+f*T+m*L+g*D,r[10]=p*k+f*C+m*P+g*B,r[14]=p*M+f*E+m*R+g*O,r[3]=v*x+y*S+w*A+b*F,r[7]=v*_+y*T+w*L+b*D,r[11]=v*k+y*C+w*P+b*B,r[15]=v*M+y*E+w*R+b*O,this},multiplyToArray:function(e,t,i){var n=this.elements
return this.multiplyMatrices(e,t),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(e){var t=this.elements
return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new r.Vector3
return function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length)
for(var r=0,a=i;n>r;r+=3,a+=3)e.x=t[a],e.y=t[a+1],e.z=t[a+2],e.applyMatrix4(this),t[a]=e.x,t[a+1]=e.y,t[a+2]=e.z
return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],o=e[5],s=e[9],h=e[13],l=e[2],c=e[6],u=e[10],d=e[14],p=e[3],f=e[7],m=e[11],g=e[15]
return p*(+r*s*c-n*h*c-r*o*u+i*h*u+n*o*d-i*s*d)+f*(+t*s*d-t*h*u+r*a*u-n*a*d+n*h*l-r*s*l)+m*(+t*h*c-t*o*d-r*a*c+i*a*d+r*o*l-i*h*l)+g*(-n*o*l-t*s*c+t*o*u+n*a*c-i*a*u+i*s*l)},transpose:function(){var e,t=this.elements
return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements
return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e},getPosition:function(){var e=new r.Vector3
return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.")
var t=this.elements
return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements
return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,n=e.elements,r=n[0],a=n[4],o=n[8],s=n[12],h=n[1],l=n[5],c=n[9],u=n[13],d=n[2],p=n[6],f=n[10],m=n[14],g=n[3],v=n[7],y=n[11],w=n[15]
i[0]=c*m*v-u*f*v+u*p*y-l*m*y-c*p*w+l*f*w,i[4]=s*f*v-o*m*v-s*p*y+a*m*y+o*p*w-a*f*w,i[8]=o*u*v-s*c*v+s*l*y-a*u*y-o*l*w+a*c*w,i[12]=s*c*p-o*u*p-s*l*f+a*u*f+o*l*m-a*c*m,i[1]=u*f*g-c*m*g-u*d*y+h*m*y+c*d*w-h*f*w,i[5]=o*m*g-s*f*g+s*d*y-r*m*y-o*d*w+r*f*w,i[9]=s*c*g-o*u*g-s*h*y+r*u*y+o*h*w-r*c*w,i[13]=o*u*d-s*c*d+s*h*f-r*u*f-o*h*m+r*c*m,i[2]=l*m*g-u*p*g+u*d*v-h*m*v-l*d*w+h*p*w,i[6]=s*p*g-a*m*g-s*d*v+r*m*v+a*d*w-r*p*w,i[10]=a*u*g-s*l*g+s*h*v-r*u*v-a*h*w+r*l*w,i[14]=s*l*d-a*u*d-s*h*p+r*u*p+a*h*m-r*l*m,i[3]=c*p*g-l*f*g-c*d*v+h*f*v+l*d*y-h*p*y,i[7]=a*f*g-o*p*g+o*d*v-r*f*v-a*d*y+r*p*y,i[11]=o*l*g-a*c*g-o*h*v+r*c*v+a*h*y-r*l*y,i[15]=a*c*d-o*l*d+o*h*p-r*c*p-a*h*f+r*l*f
var b=r*i[0]+h*i[4]+d*i[8]+g*i[12]
if(0==b){var x="Matrix4.getInverse(): can't invert matrix, determinant is 0"
if(t)throw new Error(x)
return console.warn(x),this.identity(),this}return this.multiplyScalar(1/b),this},translate:function(e){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,i=e.x,n=e.y,r=e.z
return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10]
return Math.sqrt(Math.max(t,Math.max(i,n)))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e)
return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e)
return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e)
return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),n=Math.sin(t),r=1-i,a=e.x,o=e.y,s=e.z,h=r*a,l=r*o
return this.set(h*a+i,h*o-n*s,h*s+n*o,0,h*o+n*s,l*o+i,l*s-n*a,0,h*s-n*o,l*s+n*a,r*s*s+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var e=new r.Vector3,t=new r.Matrix4
return function(i,n,r){var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),h=e.set(a[8],a[9],a[10]).length(),l=this.determinant()
0>l&&(o=-o),i.x=a[12],i.y=a[13],i.z=a[14],t.elements.set(this.elements)
var c=1/o,u=1/s,d=1/h
return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,n.setFromRotationMatrix(t),r.x=o,r.y=s,r.z=h,this}}(),makeFrustum:function(e,t,i,n,r,a){var o=this.elements,s=2*r/(t-e),h=2*r/(n-i),l=(t+e)/(t-e),c=(n+i)/(n-i),u=-(a+r)/(a-r),d=-2*a*r/(a-r)
return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=h,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,i,n){var a=i*Math.tan(r.Math.degToRad(.5*e)),o=-a,s=o*t,h=a*t
return this.makeFrustum(s,h,o,a,i,n)},makeOrthographic:function(e,t,i,n,r,a){var o=this.elements,s=t-e,h=i-n,l=a-r,c=(t+e)/s,u=(i+n)/h,d=(a+r)/l
return o[0]=2/s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2/h,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2/l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements
return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new r.Matrix4).fromArray(this.elements)}},r.Ray=function(e,t){this.origin=void 0!==e?e:new r.Vector3,this.direction=void 0!==t?t:new r.Vector3},r.Ray.prototype={constructor:r.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var i=t||new r.Vector3
return i.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new r.Vector3
return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var i=t||new r.Vector3
i.subVectors(e,this.origin)
var n=i.dot(this.direction)
return 0>n?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(){var e=new r.Vector3
return function(t){var i=e.subVectors(t,this.origin).dot(this.direction)
return 0>i?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(){var e=new r.Vector3,t=new r.Vector3,i=new r.Vector3
return function(n,r,a,o){e.copy(n).add(r).multiplyScalar(.5),t.copy(r).sub(n).normalize(),i.copy(this.origin).sub(e)
var s,h,l,c,u=.5*n.distanceTo(r),d=-this.direction.dot(t),p=i.dot(this.direction),f=-i.dot(t),m=i.lengthSq(),g=Math.abs(1-d*d)
if(g>0)if(s=d*f-p,h=d*p-f,c=u*g,s>=0)if(h>=-c)if(c>=h){var v=1/g
s*=v,h*=v,l=s*(s+d*h+2*p)+h*(d*s+h+2*f)+m}else h=u,s=Math.max(0,-(d*h+p)),l=-s*s+h*(h+2*f)+m
else h=-u,s=Math.max(0,-(d*h+p)),l=-s*s+h*(h+2*f)+m
else-c>=h?(s=Math.max(0,-(-d*u+p)),h=s>0?-u:Math.min(Math.max(-u,-f),u),l=-s*s+h*(h+2*f)+m):c>=h?(s=0,h=Math.min(Math.max(-u,-f),u),l=h*(h+2*f)+m):(s=Math.max(0,-(d*u+p)),h=s>0?u:Math.min(Math.max(-u,-f),u),l=-s*s+h*(h+2*f)+m)
else h=d>0?-u:u,s=Math.max(0,-(d*h+p)),l=-s*s+h*(h+2*f)+m
return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(h).add(e),l}}(),isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new r.Vector3
return function(t,i){e.subVectors(t.center,this.origin)
var n=e.dot(this.direction),r=e.dot(e)-n*n,a=t.radius*t.radius
if(r>a)return null
var o=Math.sqrt(a-r),s=n-o,h=n+o
return 0>s&&0>h?null:0>s?this.at(h,i):this.at(s,i)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin)
if(0===t)return!0
var i=e.normal.dot(this.direction)
return 0>i*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction)
if(0==t)return 0==e.distanceToPoint(this.origin)?0:null
var i=-(this.origin.dot(e.normal)+e.constant)/t
return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e)
return null===i?null:this.at(i,t)},isIntersectionBox:function(){var e=new r.Vector3
return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var i,n,r,a,o,s,h=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,u=this.origin
return h>=0?(i=(e.min.x-u.x)*h,n=(e.max.x-u.x)*h):(i=(e.max.x-u.x)*h,n=(e.min.x-u.x)*h),l>=0?(r=(e.min.y-u.y)*l,a=(e.max.y-u.y)*l):(r=(e.max.y-u.y)*l,a=(e.min.y-u.y)*l),i>a||r>n?null:((r>i||i!==i)&&(i=r),(n>a||n!==n)&&(n=a),c>=0?(o=(e.min.z-u.z)*c,s=(e.max.z-u.z)*c):(o=(e.max.z-u.z)*c,s=(e.min.z-u.z)*c),i>s||o>n?null:((o>i||i!==i)&&(i=o),(n>s||n!==n)&&(n=s),0>n?null:this.at(i>=0?i:n,t)))},intersectTriangle:function(){var e=new r.Vector3,t=new r.Vector3,i=new r.Vector3,n=new r.Vector3
return function(r,a,o,s,h){t.subVectors(a,r),i.subVectors(o,r),n.crossVectors(t,i)
var l,c=this.direction.dot(n)
if(c>0){if(s)return null
l=1}else{if(!(0>c))return null
l=-1,c=-c}e.subVectors(this.origin,r)
var u=l*this.direction.dot(i.crossVectors(e,i))
if(0>u)return null
var d=l*this.direction.dot(t.cross(e))
if(0>d)return null
if(u+d>c)return null
var p=-l*e.dot(n)
return 0>p?null:this.at(p/c,h)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new r.Ray).copy(this)}},r.Sphere=function(e,t){this.center=void 0!==e?e:new r.Vector3,this.radius=void 0!==t?t:0},r.Sphere.prototype={constructor:r.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new r.Box3
return function(t,i){var n=this.center
void 0!==i?n.copy(i):e.setFromPoints(t).center(n)
for(var r=0,a=0,o=t.length;o>a;a++)r=Math.max(r,n.distanceToSquared(t[a]))
return this.radius=Math.sqrt(r),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius
return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),n=t||new r.Vector3
return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new r.Box3
return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new r.Sphere).copy(this)}},r.Frustum=function(e,t,i,n,a,o){this.planes=[void 0!==e?e:new r.Plane,void 0!==t?t:new r.Plane,void 0!==i?i:new r.Plane,void 0!==n?n:new r.Plane,void 0!==a?a:new r.Plane,void 0!==o?o:new r.Plane]},r.Frustum.prototype={constructor:r.Frustum,set:function(e,t,i,n,r,a){var o=this.planes
return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i])
return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],h=i[5],l=i[6],c=i[7],u=i[8],d=i[9],p=i[10],f=i[11],m=i[12],g=i[13],v=i[14],y=i[15]
return t[0].setComponents(o-n,c-s,f-u,y-m).normalize(),t[1].setComponents(o+n,c+s,f+u,y+m).normalize(),t[2].setComponents(o+r,c+h,f+d,y+g).normalize(),t[3].setComponents(o-r,c-h,f-d,y-g).normalize(),t[4].setComponents(o-a,c-l,f-p,y-v).normalize(),t[5].setComponents(o+a,c+l,f+p,y+v).normalize(),this},intersectsObject:function(){var e=new r.Sphere
return function(t){var i=t.geometry
return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,n=-e.radius,r=0;6>r;r++){var a=t[r].distanceToPoint(i)
if(n>a)return!1}return!0},intersectsBox:function(){var e=new r.Vector3,t=new r.Vector3
return function(i){for(var n=this.planes,r=0;6>r;r++){var a=n[r]
e.x=a.normal.x>0?i.min.x:i.max.x,t.x=a.normal.x>0?i.max.x:i.min.x,e.y=a.normal.y>0?i.min.y:i.max.y,t.y=a.normal.y>0?i.max.y:i.min.y,e.z=a.normal.z>0?i.min.z:i.max.z,t.z=a.normal.z>0?i.max.z:i.min.z
var o=a.distanceToPoint(e),s=a.distanceToPoint(t)
if(0>o&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(t[i].distanceToPoint(e)<0)return!1
return!0},clone:function(){return(new r.Frustum).copy(this)}},r.Plane=function(e,t){this.normal=void 0!==e?e:new r.Vector3(1,0,0),this.constant=void 0!==t?t:0},r.Plane.prototype={constructor:r.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new r.Vector3,t=new r.Vector3
return function(i,n,r){var a=e.subVectors(r,n).cross(t.subVectors(i,n)).normalize()
return this.setFromNormalAndCoplanarPoint(a,i),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length()
return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e),n=t||new r.Vector3
return n.copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end)
return 0>t&&i>0||0>i&&t>0},intersectLine:function(){var e=new r.Vector3
return function(t,i){var n=i||new r.Vector3,a=t.delta(e),o=this.normal.dot(a)
if(0==o)return 0==this.distanceToPoint(t.start)?n.copy(t.start):void 0
var s=-(t.start.dot(this.normal)+this.constant)/o
return 0>s||s>1?void 0:n.copy(a).multiplyScalar(s).add(t.start)}}(),coplanarPoint:function(e){var t=e||new r.Vector3
return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new r.Vector3,t=new r.Vector3,i=new r.Matrix3
return function(n,r){var a=r||i.getNormalMatrix(n),o=e.copy(this.normal).applyMatrix3(a),s=this.coplanarPoint(t)
return s.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(o,s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new r.Plane).copy(this)}},r.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0
return function(){for(var r=0;36>r;r++)8==r||13==r||18==r||23==r?i[r]="-":14==r?i[r]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,i[r]=t[19==r?3&e|8:e])
return i.join("")}}(),clamp:function(e,t,i){return t>e?t:e>i?i:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},smoothstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))},smootherstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return Math.floor(this.randFloat(e,t))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180
return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI
return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e}},r.Spline=function(e){function t(e,t,i,n,r,a,o){var s=.5*(i-e),h=.5*(n-t)
return(2*(t-i)+s+h)*o+(-3*(t-i)-2*s-h)*a+s*r+t}this.points=e
var i,n,a,o,s,h,l,c,u,d=[],p={x:0,y:0,z:0}
this.initFromArray=function(e){this.points=[]
for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return i=(this.points.length-1)*e,n=Math.floor(i),a=i-n,d[0]=0===n?n:n-1,d[1]=n,d[2]=n>this.points.length-2?this.points.length-1:n+1,d[3]=n>this.points.length-3?this.points.length-1:n+2,h=this.points[d[0]],l=this.points[d[1]],c=this.points[d[2]],u=this.points[d[3]],o=a*a,s=a*o,p.x=t(h.x,l.x,c.x,u.x,a,o,s),p.y=t(h.y,l.y,c.y,u.y,a,o,s),p.z=t(h.z,l.z,c.z,u.z,a,o,s),p},this.getControlPointsArray=function(){var e,t,i=this.points.length,n=[]
for(e=0;i>e;e++)t=this.points[e],n[e]=[t.x,t.y,t.z]
return n},this.getLength=function(e){var t,i,n,a,o=0,s=0,h=0,l=new r.Vector3,c=new r.Vector3,u=[],d=0
for(u[0]=0,e||(e=100),n=this.points.length*e,l.copy(this.points[0]),t=1;n>t;t++)i=t/n,a=this.getPoint(i),c.copy(a),d+=c.distanceTo(l),l.copy(a),o=(this.points.length-1)*i,s=Math.floor(o),s!=h&&(u[s]=d,h=s)
return u[u.length]=d,{chunks:u,total:d}},this.reparametrizeByArcLength=function(e){var t,i,n,a,o,s,h,l,c=[],u=new r.Vector3,d=this.getLength()
for(c.push(u.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(s=d.chunks[t]-d.chunks[t-1],h=Math.ceil(e*s/d.total),a=(t-1)/(this.points.length-1),o=t/(this.points.length-1),i=1;h-1>i;i++)n=a+i*(1/h)*(o-a),l=this.getPoint(n),c.push(u.copy(l).clone())
c.push(u.copy(this.points[t]).clone())}this.points=c}},r.Triangle=function(e,t,i){this.a=void 0!==e?e:new r.Vector3,this.b=void 0!==t?t:new r.Vector3,this.c=void 0!==i?i:new r.Vector3},r.Triangle.normal=function(){var e=new r.Vector3
return function(t,i,n,a){var o=a||new r.Vector3
o.subVectors(n,i),e.subVectors(t,i),o.cross(e)
var s=o.lengthSq()
return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),r.Triangle.barycoordFromPoint=function(){var e=new r.Vector3,t=new r.Vector3,i=new r.Vector3
return function(n,a,o,s,h){e.subVectors(s,a),t.subVectors(o,a),i.subVectors(n,a)
var l=e.dot(e),c=e.dot(t),u=e.dot(i),d=t.dot(t),p=t.dot(i),f=l*d-c*c,m=h||new r.Vector3
if(0==f)return m.set(-2,-1,-1)
var g=1/f,v=(d*u-c*p)*g,y=(l*p-c*u)*g
return m.set(1-v-y,y,v)}}(),r.Triangle.containsPoint=function(){var e=new r.Vector3
return function(t,i,n,a){var o=r.Triangle.barycoordFromPoint(t,i,n,a,e)
return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),r.Triangle.prototype={constructor:r.Triangle,set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new r.Vector3,t=new r.Vector3
return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new r.Vector3
return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return r.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new r.Plane
return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return r.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return r.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new r.Triangle).copy(this)}},r.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},r.Clock.prototype={constructor:r.Clock,start:function(){this.startTime=void 0!==n.performance&&void 0!==n.performance.now?n.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0
if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==n.performance&&void 0!==n.performance.now?n.performance.now():Date.now()
e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},r.EventDispatcher=function(){},r.EventDispatcher.prototype={constructor:r.EventDispatcher,apply:function(e){e.addEventListener=r.EventDispatcher.prototype.addEventListener,e.hasEventListener=r.EventDispatcher.prototype.hasEventListener,e.removeEventListener=r.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=r.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={})
var i=this._listeners
void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1
var i=this._listeners
return void 0!==i[e]&&-1!==i[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners,n=i[e]
if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,i=t[e.type]
if(void 0!==i){e.target=this
for(var n=[],r=i.length,a=0;r>a;a++)n[a]=i[a]
for(var a=0;r>a;a++)n[a].call(this,e)}}}},function(e){e.Raycaster=function(t,i,n,r){this.ray=new e.Ray(t,i),this.near=n||0,this.far=r||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}}
var t=function(e,t){return e.distance-t.distance},i=function(e,t,n,r){if(e.raycast(t,n),r===!0)for(var a=e.children,o=0,s=a.length;s>o;o++)i(a[o],t,n,!0)}
e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,i){i instanceof e.PerspectiveCamera?(this.ray.origin.copy(i.position),this.ray.direction.set(t.x,t.y,.5).unproject(i).sub(i.position).normalize()):i instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,n){var r=[]
return i(e,this,r,n),r.sort(t),r},intersectObjects:function(e,n){var r=[]
if(e instanceof Array==!1)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),r
for(var a=0,o=e.length;o>a;a++)i(e[a],this,r,n)
return r.sort(t),r}}}(r),r.Object3D=function(){Object.defineProperty(this,"id",{value:r.Object3DIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=r.Object3D.DefaultUp.clone()
var e=new r.Vector3,t=new r.Euler,i=new r.Quaternion,n=new r.Vector3(1,1,1),a=function(){i.setFromEuler(t,!1)},o=function(){t.setFromQuaternion(i,void 0,!1)}
t.onChange(a),i.onChange(o),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n}}),this.rotationAutoUpdate=!0,this.matrix=new r.Matrix4,this.matrixWorld=new r.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},r.Object3D.DefaultUp=new r.Vector3(0,1,0),r.Object3D.prototype={constructor:r.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new r.Quaternion
return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new r.Vector3(1,0,0)
return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new r.Vector3(0,1,0)
return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new r.Vector3(0,0,1)
return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new r.Vector3
return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new r.Vector3(1,0,0)
return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new r.Vector3(0,1,0)
return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new r.Vector3(0,0,1)
return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new r.Matrix4
return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new r.Matrix4
return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t])
return this}return e===this?(console.error("THREE.Object3D.add:",e,"can't be added as a child of itself."),this):(e instanceof r.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D."),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t])
var i=this.children.indexOf(e);-1!==i&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getChildByName:function(e,t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getObjectById:function(e,t){return this.getObjectByProperty("id",e,t)},getObjectByName:function(e,t){return this.getObjectByProperty("name",e,t)},getObjectByProperty:function(e,t,i){if(this[e]===t)return this
for(var n=0,r=this.children.length;r>n;n++){var a=this.children[n],o=a.getObjectByProperty(e,t,i)
if(void 0!==o)return o}return void 0},getWorldPosition:function(e){var t=e||new r.Vector3
return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new r.Vector3,t=new r.Vector3
return function(i){var n=i||new r.Quaternion
return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldRotation:function(){var e=new r.Quaternion
return function(t){var i=t||new r.Euler
return this.getWorldQuaternion(e),i.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new r.Vector3,t=new r.Quaternion
return function(i){var n=i||new r.Vector3
return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new r.Quaternion
return function(t){var i=t||new r.Vector3
return this.getWorldQuaternion(e),i.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this)
for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this)
for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverseVisible(e)}},traverseAncestors:function(e){this.parent&&(e(this.parent),this.parent.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0)
for(var t=0,i=this.children.length;i>t;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},i=function(i){if(void 0===e.geometries&&(e.geometries=[]),void 0===t[i.uuid]){var n=i.toJSON()
delete n.metadata,t[i.uuid]=n,e.geometries.push(n)}return i.uuid},n={},a=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===n[t.uuid]){var i=t.toJSON()
delete i.metadata,n[t.uuid]=i,e.materials.push(i)}return t.uuid},o=function(e){var t={}
if(t.uuid=e.uuid,t.type=e.type,""!==e.name&&(t.name=e.name),"{}"!==JSON.stringify(e.userData)&&(t.userData=e.userData),e.visible!==!0&&(t.visible=e.visible),e instanceof r.PerspectiveCamera?(t.fov=e.fov,t.aspect=e.aspect,t.near=e.near,t.far=e.far):e instanceof r.OrthographicCamera?(t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.near=e.near,t.far=e.far):e instanceof r.AmbientLight?t.color=e.color.getHex():e instanceof r.DirectionalLight?(t.color=e.color.getHex(),t.intensity=e.intensity):e instanceof r.PointLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance):e instanceof r.SpotLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.angle=e.angle,t.exponent=e.exponent):e instanceof r.HemisphereLight?(t.color=e.color.getHex(),t.groundColor=e.groundColor.getHex()):e instanceof r.Mesh?(t.geometry=i(e.geometry),t.material=a(e.material)):e instanceof r.Line?(t.geometry=i(e.geometry),t.material=a(e.material)):e instanceof r.Sprite&&(t.material=a(e.material)),t.matrix=e.matrix.toArray(),e.children.length>0){t.children=[]
for(var n=0;n<e.children.length;n++)t.children.push(o(e.children[n]))}return t}
return e.object=o(this),e},clone:function(e,t){if(void 0===e&&(e=new r.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),t===!0)for(var i=0;i<this.children.length;i++){var n=this.children[i]
e.add(n.clone())}return e}},r.EventDispatcher.prototype.apply(r.Object3D.prototype),r.Object3DIdCount=0,r.Face3=function(e,t,i,n,a,o){this.a=e,this.b=t,this.c=i,this.normal=n instanceof r.Vector3?n:new r.Vector3,this.vertexNormals=n instanceof Array?n:[],this.color=a instanceof r.Color?a:new r.Color,this.vertexColors=a instanceof Array?a:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},r.Face3.prototype={constructor:r.Face3,clone:function(){var e=new r.Face3(this.a,this.b,this.c)
e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex
for(var t=0,i=this.vertexNormals.length;i>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone()
for(var t=0,i=this.vertexColors.length;i>t;t++)e.vertexColors[t]=this.vertexColors[t].clone()
for(var t=0,i=this.vertexTangents.length;i>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone()
return e}},r.Face4=function(e,t,i,n,a,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new r.Face3(e,t,i,a,o,s)},r.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},r.BufferAttribute.prototype={constructor:r.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize
for(var n=0,r=this.itemSize;r>n;n++)this.array[e+n]=t.array[i+n]},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},clone:function(){return new r.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},r.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(e,t)},r.BufferGeometry=function(){Object.defineProperty(this,"id",{value:r.GeometryIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},r.BufferGeometry.prototype={constructor:r.BufferGeometry,addAttribute:function(e,t){return t instanceof r.BufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[e]={array:arguments[1],itemSize:arguments[2]})):(this.attributes[e]=t,void(this.attributesKeys=Object.keys(this.attributes)))},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,i){this.drawcalls.push({start:e,count:t,index:void 0!==i?i:0})},applyMatrix:function(e){var t=this.attributes.position
void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0)
var i=this.attributes.normal
if(void 0!==i){var n=(new r.Matrix3).getNormalMatrix(e)
n.applyToVector3Array(i.array),i.needsUpdate=!0}},center:function(){},fromGeometry:function(e,t){t=t||{vertexColors:r.NoColors}
var i=e.vertices,n=e.faces,a=e.faceVertexUvs,o=t.vertexColors,s=a[0].length>0,h=3==n[0].vertexNormals.length,l=new Float32Array(3*n.length*3)
this.addAttribute("position",new r.BufferAttribute(l,3))
var c=new Float32Array(3*n.length*3)
if(this.addAttribute("normal",new r.BufferAttribute(c,3)),o!==r.NoColors){var u=new Float32Array(3*n.length*3)
this.addAttribute("color",new r.BufferAttribute(u,3))}if(s===!0){var d=new Float32Array(3*n.length*2)
this.addAttribute("uv",new r.BufferAttribute(d,2))}for(var p=0,f=0,m=0;p<n.length;p++,f+=6,m+=9){var g=n[p],v=i[g.a],y=i[g.b],w=i[g.c]
if(l[m]=v.x,l[m+1]=v.y,l[m+2]=v.z,l[m+3]=y.x,l[m+4]=y.y,l[m+5]=y.z,l[m+6]=w.x,l[m+7]=w.y,l[m+8]=w.z,h===!0){var b=g.vertexNormals[0],x=g.vertexNormals[1],_=g.vertexNormals[2]
c[m]=b.x,c[m+1]=b.y,c[m+2]=b.z,c[m+3]=x.x,c[m+4]=x.y,c[m+5]=x.z,c[m+6]=_.x,c[m+7]=_.y,c[m+8]=_.z}else{var k=g.normal
c[m]=k.x,c[m+1]=k.y,c[m+2]=k.z,c[m+3]=k.x,c[m+4]=k.y,c[m+5]=k.z,c[m+6]=k.x,c[m+7]=k.y,c[m+8]=k.z}if(o===r.FaceColors){var M=g.color
u[m]=M.r,u[m+1]=M.g,u[m+2]=M.b,u[m+3]=M.r,u[m+4]=M.g,u[m+5]=M.b,u[m+6]=M.r,u[m+7]=M.g,u[m+8]=M.b}else if(o===r.VertexColors){var S=g.vertexColors[0],T=g.vertexColors[1],C=g.vertexColors[2]
u[m]=S.r,u[m+1]=S.g,u[m+2]=S.b,u[m+3]=T.r,u[m+4]=T.g,u[m+5]=T.b,u[m+6]=C.r,u[m+7]=C.g,u[m+8]=C.b}if(s===!0){var E=a[0][p][0],A=a[0][p][1],L=a[0][p][2]
d[f]=E.x,d[f+1]=E.y,d[f+2]=A.x,d[f+3]=A.y,d[f+4]=L.x,d[f+5]=L.y}}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var e=new r.Vector3
return function(){null===this.boundingBox&&(this.boundingBox=new r.Box3)
var t=this.attributes.position.array
if(t){var i=this.boundingBox
i.makeEmpty()
for(var n=0,a=t.length;a>n;n+=3)e.set(t[n],t[n+1],t[n+2]),i.expandByPoint(e)}(void 0===t||0===t.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var e=new r.Box3,t=new r.Vector3
return function(){null===this.boundingSphere&&(this.boundingSphere=new r.Sphere)
var i=this.attributes.position.array
if(i){e.makeEmpty()
for(var n=this.boundingSphere.center,a=0,o=i.length;o>a;a+=3)t.set(i[a],i[a+1],i[a+2]),e.expandByPoint(t)
e.center(n)
for(var s=0,a=0,o=i.length;o>a;a+=3)t.set(i[a],i[a+1],i[a+2]),s=Math.max(s,n.distanceToSquared(t))
this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes
if(e.position){var t=e.position.array
if(void 0===e.normal)this.addAttribute("normal",new r.BufferAttribute(new Float32Array(t.length),3))
else for(var i=e.normal.array,n=0,a=i.length;a>n;n++)i[n]=0
var o,s,h,i=e.normal.array,l=new r.Vector3,c=new r.Vector3,u=new r.Vector3,d=new r.Vector3,p=new r.Vector3
if(e.index)for(var f=e.index.array,m=this.offsets.length>0?this.offsets:[{start:0,count:f.length,index:0}],g=0,v=m.length;v>g;++g)for(var y=m[g].start,w=m[g].count,b=m[g].index,n=y,a=y+w;a>n;n+=3)o=3*(b+f[n]),s=3*(b+f[n+1]),h=3*(b+f[n+2]),l.fromArray(t,o),c.fromArray(t,s),u.fromArray(t,h),d.subVectors(u,c),p.subVectors(l,c),d.cross(p),i[o]+=d.x,i[o+1]+=d.y,i[o+2]+=d.z,i[s]+=d.x,i[s+1]+=d.y,i[s+2]+=d.z,i[h]+=d.x,i[h+1]+=d.y,i[h+2]+=d.z
else for(var n=0,a=t.length;a>n;n+=9)l.fromArray(t,n),c.fromArray(t,n+3),u.fromArray(t,n+6),d.subVectors(u,c),p.subVectors(l,c),d.cross(p),i[n]=d.x,i[n+1]=d.y,i[n+2]=d.z,i[n+3]=d.x,i[n+4]=d.y,i[n+5]=d.z,i[n+6]=d.x,i[n+7]=d.y,i[n+8]=d.z
this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){function e(e,t,i){L.fromArray(n,3*e),P.fromArray(n,3*t),R.fromArray(n,3*i),F.fromArray(o,2*e),D.fromArray(o,2*t),B.fromArray(o,2*i),d=P.x-L.x,p=R.x-L.x,f=P.y-L.y,m=R.y-L.y,g=P.z-L.z,v=R.z-L.z,y=D.x-F.x,w=B.x-F.x,b=D.y-F.y,x=B.y-F.y,_=1/(y*x-w*b),O.set((x*d-b*p)*_,(x*f-b*m)*_,(x*g-b*v)*_),V.set((y*p-w*d)*_,(y*m-w*f)*_,(y*v-w*g)*_),l[e].add(O),l[t].add(O),l[i].add(O),c[e].add(V),c[t].add(V),c[i].add(V)}function t(e){X.fromArray(a,3*e),Y.copy(X),H=l[e],q.copy(H),q.sub(X.multiplyScalar(X.dot(H))).normalize(),W.crossVectors(Y,H),G=W.dot(c[e]),j=0>G?-1:1,h[4*e]=q.x,h[4*e+1]=q.y,h[4*e+2]=q.z,h[4*e+3]=j}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()")
var i=this.attributes.index.array,n=this.attributes.position.array,a=this.attributes.normal.array,o=this.attributes.uv.array,s=n.length/3
void 0===this.attributes.tangent&&this.addAttribute("tangent",new r.BufferAttribute(new Float32Array(4*s),4))
for(var h=this.attributes.tangent.array,l=[],c=[],u=0;s>u;u++)l[u]=new r.Vector3,c[u]=new r.Vector3
var d,p,f,m,g,v,y,w,b,x,_,k,M,S,T,C,E,A,L=new r.Vector3,P=new r.Vector3,R=new r.Vector3,F=new r.Vector2,D=new r.Vector2,B=new r.Vector2,O=new r.Vector3,V=new r.Vector3
0===this.drawcalls.length&&this.addDrawCall(0,i.length,0)
var z=this.drawcalls
for(S=0,T=z.length;T>S;++S){var U=z[S].start,N=z[S].count,I=z[S].index
for(k=U,M=U+N;M>k;k+=3)C=I+i[k],E=I+i[k+1],A=I+i[k+2],e(C,E,A)}var j,H,G,q=new r.Vector3,W=new r.Vector3,X=new r.Vector3,Y=new r.Vector3
for(S=0,T=z.length;T>S;++S){var U=z[S].start,N=z[S].count,I=z[S].index
for(k=U,M=U+N;M>k;k+=3)C=I+i[k],E=I+i[k+1],A=I+i[k+2],t(C),t(E),t(A)}},computeOffsets:function(e){var t=e
void 0===e&&(t=65535)
for(var i=(Date.now(),this.attributes.index.array),n=this.attributes.position.array,r=(n.length/3,i.length/3),a=new Uint16Array(i.length),o=0,s=0,h=[{start:0,count:0,index:0}],l=h[0],c=0,u=0,d=new Int32Array(6),p=new Int32Array(n.length),f=new Int32Array(n.length),m=0;m<n.length;m++)p[m]=-1,f[m]=-1
for(var g=0;r>g;g++){u=0
for(var v=0;3>v;v++){var y=i[3*g+v];-1==p[y]?(d[2*v]=y,d[2*v+1]=-1,u++):p[y]<l.index?(d[2*v]=y,d[2*v+1]=-1,c++):(d[2*v]=y,d[2*v+1]=p[y])}var w=s+u
if(w>l.index+t){var b={start:o,count:0,index:s}
h.push(b),l=b
for(var x=0;6>x;x+=2){var _=d[x+1]
_>-1&&_<l.index&&(d[x+1]=-1)}}for(var x=0;6>x;x+=2){var y=d[x],_=d[x+1];-1===_&&(_=s++),p[y]=_,f[_]=y,a[o++]=_-l.index,l.count++}}return this.reorderBuffers(a,f,s),this.offsets=h,h},merge:function(e,t){if(e instanceof r.BufferGeometry==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)
void 0===t&&(t=0)
var i=this.attributes
for(var n in i)if(void 0!==e.attributes[n])for(var a=i[n],o=a.array,s=e.attributes[n],h=s.array,l=s.itemSize,c=0,u=l*t;c<h.length;c++,u++)o[u]=h[c]
return this},normalizeNormals:function(){for(var e,t,i,n,r=this.attributes.normal.array,a=0,o=r.length;o>a;a+=3)e=r[a],t=r[a+1],i=r[a+2],n=1/Math.sqrt(e*e+t*t+i*i),r[a]*=n,r[a+1]*=n,r[a+2]*=n},reorderBuffers:function(e,t,i){var n={}
for(var r in this.attributes)if("index"!=r){var a=this.attributes[r].array
n[r]=new a.constructor(this.attributes[r].itemSize*i)}for(var o=0;i>o;o++){var s=t[o]
for(var r in this.attributes)if("index"!=r)for(var h=this.attributes[r].array,l=this.attributes[r].itemSize,c=n[r],u=0;l>u;u++)c[o*l+u]=h[s*l+u]}this.attributes.index.array=e
for(var r in this.attributes)"index"!=r&&(this.attributes[r].array=n[r],this.attributes[r].numItems=this.attributes[r].itemSize*i)},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},t=this.attributes,i=this.offsets,n=this.boundingSphere
for(var r in t){for(var a=t[r],o=[],s=a.array,h=0,l=s.length;l>h;h++)o[h]=s[h]
e.data.attributes[r]={itemSize:a.itemSize,type:a.array.constructor.name,array:o}}return i.length>0&&(e.data.offsets=JSON.parse(JSON.stringify(i))),null!==n&&(e.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),e},clone:function(){var e=new r.BufferGeometry
for(var t in this.attributes){var i=this.attributes[t]
e.addAttribute(t,i.clone())}for(var n=0,a=this.offsets.length;a>n;n++){var o=this.offsets[n]
e.offsets.push({start:o.start,index:o.index,count:o.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.BufferGeometry.prototype),r.Geometry=function(){Object.defineProperty(this,"id",{value:r.GeometryIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},r.Geometry.prototype={constructor:r.Geometry,applyMatrix:function(e){for(var t=(new r.Matrix3).getNormalMatrix(e),i=0,n=this.vertices.length;n>i;i++){var a=this.vertices[i]
a.applyMatrix4(e)}for(var i=0,n=this.faces.length;n>i;i++){var o=this.faces[i]
o.normal.applyMatrix3(t).normalize()
for(var s=0,h=o.vertexNormals.length;h>s;s++)o.vertexNormals[s].applyMatrix3(t).normalize()}this.boundingBox instanceof r.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof r.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(e){for(var t=this,i=e.attributes,n=i.position.array,a=void 0!==i.index?i.index.array:void 0,o=void 0!==i.normal?i.normal.array:void 0,s=void 0!==i.color?i.color.array:void 0,h=void 0!==i.uv?i.uv.array:void 0,l=[],c=[],u=0,d=0;u<n.length;u+=3,d+=2)t.vertices.push(new r.Vector3(n[u],n[u+1],n[u+2])),void 0!==o&&l.push(new r.Vector3(o[u],o[u+1],o[u+2])),void 0!==s&&t.colors.push(new r.Color(s[u],s[u+1],s[u+2])),void 0!==h&&c.push(new r.Vector2(h[d],h[d+1]))
var p=function(e,i,n){var a=void 0!==o?[l[e].clone(),l[i].clone(),l[n].clone()]:[],u=void 0!==s?[t.colors[e].clone(),t.colors[i].clone(),t.colors[n].clone()]:[]
t.faces.push(new r.Face3(e,i,n,a,u)),void 0!==h&&t.faceVertexUvs[0].push([c[e].clone(),c[i].clone(),c[n].clone()])}
if(void 0!==a)for(var u=0;u<a.length;u+=3)p(a[u],a[u+1],a[u+2])
else for(var u=0;u<n.length/3;u+=3)p(u,u+1,u+2)
return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox()
var e=new r.Vector3
return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-.5),this.applyMatrix((new r.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new r.Vector3,t=new r.Vector3,i=0,n=this.faces.length;n>i;i++){var a=this.faces[i],o=this.vertices[a.a],s=this.vertices[a.b],h=this.vertices[a.c]
e.subVectors(h,s),t.subVectors(o,s),e.cross(t),e.normalize(),a.normal.copy(e)}},computeVertexNormals:function(e){var t,i,n,a,o,s
for(s=new Array(this.vertices.length),t=0,i=this.vertices.length;i>t;t++)s[t]=new r.Vector3
if(e){{var h,l,c,u=new r.Vector3,d=new r.Vector3
new r.Vector3,new r.Vector3,new r.Vector3}for(n=0,a=this.faces.length;a>n;n++)o=this.faces[n],h=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,l),d.subVectors(h,l),u.cross(d),s[o.a].add(u),s[o.b].add(u),s[o.c].add(u)}else for(n=0,a=this.faces.length;a>n;n++)o=this.faces[n],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal)
for(t=0,i=this.vertices.length;i>t;t++)s[t].normalize()
for(n=0,a=this.faces.length;a>n;n++)o=this.faces[n],o.vertexNormals[0]=s[o.a].clone(),o.vertexNormals[1]=s[o.b].clone(),o.vertexNormals[2]=s[o.c].clone()},computeMorphNormals:function(){var e,t,i,n,a
for(i=0,n=this.faces.length;n>i;i++)for(a=this.faces[i],a.__originalFaceNormal?a.__originalFaceNormal.copy(a.normal):a.__originalFaceNormal=a.normal.clone(),a.__originalVertexNormals||(a.__originalVertexNormals=[]),e=0,t=a.vertexNormals.length;t>e;e++)a.__originalVertexNormals[e]?a.__originalVertexNormals[e].copy(a.vertexNormals[e]):a.__originalVertexNormals[e]=a.vertexNormals[e].clone()
var o=new r.Geometry
for(o.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[]
var s,h,l=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals
for(i=0,n=this.faces.length;n>i;i++)s=new r.Vector3,h={a:new r.Vector3,b:new r.Vector3,c:new r.Vector3},l.push(s),c.push(h)}var u=this.morphNormals[e]
o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals()
var s,h
for(i=0,n=this.faces.length;n>i;i++)a=this.faces[i],s=u.faceNormals[i],h=u.vertexNormals[i],s.copy(a.normal),h.a.copy(a.vertexNormals[0]),h.b.copy(a.vertexNormals[1]),h.c.copy(a.vertexNormals[2])}for(i=0,n=this.faces.length;n>i;i++)a=this.faces[i],a.normal=a.__originalFaceNormal,a.vertexNormals=a.__originalVertexNormals},computeTangents:function(){function e(e,t,i,n,r,a,o){c=e.vertices[t],u=e.vertices[i],d=e.vertices[n],p=l[r],f=l[a],m=l[o],g=u.x-c.x,v=d.x-c.x,y=u.y-c.y,w=d.y-c.y,b=u.z-c.z,x=d.z-c.z,_=f.x-p.x,k=m.x-p.x,M=f.y-p.y,S=m.y-p.y,T=1/(_*S-k*M),R.set((S*g-M*v)*T,(S*y-M*w)*T,(S*b-M*x)*T),F.set((_*v-k*g)*T,(_*w-k*y)*T,(_*x-k*b)*T),L[t].add(R),L[i].add(R),L[n].add(R),P[t].add(F),P[i].add(F),P[n].add(F)}var t,i,n,a,o,s,h,l,c,u,d,p,f,m,g,v,y,w,b,x,_,k,M,S,T,C,E,A,L=[],P=[],R=new r.Vector3,F=new r.Vector3,D=new r.Vector3,B=new r.Vector3,O=new r.Vector3
for(n=0,a=this.vertices.length;a>n;n++)L[n]=new r.Vector3,P[n]=new r.Vector3
for(t=0,i=this.faces.length;i>t;t++)h=this.faces[t],l=this.faceVertexUvs[0][t],e(this,h.a,h.b,h.c,0,1,2)
var V=["a","b","c","d"]
for(t=0,i=this.faces.length;i>t;t++)for(h=this.faces[t],o=0;o<Math.min(h.vertexNormals.length,3);o++)O.copy(h.vertexNormals[o]),s=h[V[o]],C=L[s],D.copy(C),D.sub(O.multiplyScalar(O.dot(C))).normalize(),B.crossVectors(h.vertexNormals[o],C),E=B.dot(P[s]),A=0>E?-1:1,h.vertexTangents[o]=new r.Vector4(D.x,D.y,D.z,A)
this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,n=t.length;n>i;i++)i>0&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new r.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new r.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e instanceof r.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)
var n,a=this.vertices.length,o=this.vertices,s=e.vertices,h=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0]
void 0===i&&(i=0),void 0!==t&&(n=(new r.Matrix3).getNormalMatrix(t))
for(var d=0,p=s.length;p>d;d++){var f=s[d],m=f.clone()
void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,p=l.length;p>d;d++){var g,v,y,w=l[d],b=w.vertexNormals,x=w.vertexColors
g=new r.Face3(w.a+a,w.b+a,w.c+a),g.normal.copy(w.normal),void 0!==n&&g.normal.applyMatrix3(n).normalize()
for(var _=0,k=b.length;k>_;_++)v=b[_].clone(),void 0!==n&&v.applyMatrix3(n).normalize(),g.vertexNormals.push(v)
g.color.copy(w.color)
for(var _=0,k=x.length;k>_;_++)y=x[_],g.vertexColors.push(y.clone())
g.materialIndex=w.materialIndex+i,h.push(g)}for(d=0,p=u.length;p>d;d++){var M=u[d],S=[]
if(void 0!==M){for(var _=0,k=M.length;k>_;_++)S.push(M[_].clone())
c.push(S)}}},mergeMesh:function(e){return e instanceof r.Mesh==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,i,n,r,a,o,s,h={},l=[],c=[],u=4,d=Math.pow(10,u)
for(i=0,n=this.vertices.length;n>i;i++)e=this.vertices[i],t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d),void 0===h[t]?(h[t]=i,l.push(this.vertices[i]),c[i]=l.length-1):c[i]=c[h[t]]
var p=[]
for(i=0,n=this.faces.length;n>i;i++){r=this.faces[i],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c]
for(var f=-1,m=0;3>m;m++)if(a[m]==a[(m+1)%3]){f=m,p.push(i)
break}}for(i=p.length-1;i>=0;i--){var g=p[i]
for(this.faces.splice(g,1),o=0,s=this.faceVertexUvs.length;s>o;o++)this.faceVertexUvs[o].splice(g,1)}var v=this.vertices.length-l.length
return this.vertices=l,v},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString()
return void 0!==d[t]?d[t]:(d[t]=u.length/3,u.push(e.x,e.y,e.z),d[t])}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString()
return void 0!==f[t]?f[t]:(f[t]=p.length,p.push(e.getHex()),f[t])}function n(e){var t=e.x.toString()+e.y.toString()
return void 0!==g[t]?g[t]:(g[t]=m.length/2,m.push(e.x,e.y),g[t])}var r={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type}
if(""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a=this.parameters
for(var o in a)void 0!==a[o]&&(r[o]=a[o])
return r}for(var s=[],h=0;h<this.vertices.length;h++){var l=this.vertices[h]
s.push(l.x,l.y,l.z)}for(var c=[],u=[],d={},p=[],f={},m=[],g={},h=0;h<this.faces.length;h++){var v=this.faces[h],y=!1,w=!1,b=void 0!==this.faceVertexUvs[0][h],x=v.normal.length()>0,_=v.vertexNormals.length>0,k=1!==v.color.r||1!==v.color.g||1!==v.color.b,M=v.vertexColors.length>0,S=0
if(S=e(S,0,0),S=e(S,1,y),S=e(S,2,w),S=e(S,3,b),S=e(S,4,x),S=e(S,5,_),S=e(S,6,k),S=e(S,7,M),c.push(S),c.push(v.a,v.b,v.c),b){var T=this.faceVertexUvs[0][h]
c.push(n(T[0]),n(T[1]),n(T[2]))}if(x&&c.push(t(v.normal)),_){var C=v.vertexNormals
c.push(t(C[0]),t(C[1]),t(C[2]))}if(k&&c.push(i(v.color)),M){var E=v.vertexColors
c.push(i(E[0]),i(E[1]),i(E[2]))}}return r.data={},r.data.vertices=s,r.data.normals=u,p.length>0&&(r.data.colors=p),m.length>0&&(r.data.uvs=[m]),r.data.faces=c,r},clone:function(){for(var e=new r.Geometry,t=this.vertices,i=0,n=t.length;n>i;i++)e.vertices.push(t[i].clone())
for(var a=this.faces,i=0,n=a.length;n>i;i++)e.faces.push(a[i].clone())
for(var i=0,n=this.faceVertexUvs.length;n>i;i++){var o=this.faceVertexUvs[i]
void 0===e.faceVertexUvs[i]&&(e.faceVertexUvs[i]=[])
for(var s=0,h=o.length;h>s;s++){for(var l=o[s],c=[],u=0,d=l.length;d>u;u++){var p=l[u]
c.push(p.clone())}e.faceVertexUvs[i].push(c)}}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.Geometry.prototype),r.GeometryIdCount=0,r.Camera=function(){r.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new r.Matrix4,this.projectionMatrix=new r.Matrix4},r.Camera.prototype=Object.create(r.Object3D.prototype),r.Camera.prototype.constructor=r.Camera,r.Camera.prototype.getWorldDirection=function(){var e=new r.Quaternion
return function(t){var i=t||new r.Vector3
return this.getWorldQuaternion(e),i.set(0,0,-1).applyQuaternion(e)}}(),r.Camera.prototype.lookAt=function(){var e=new r.Matrix4
return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),r.Camera.prototype.clone=function(e){return void 0===e&&(e=new r.Camera),r.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},r.CubeCamera=function(e,t,i){r.Object3D.call(this),this.type="CubeCamera"
var n=90,a=1,o=new r.PerspectiveCamera(n,a,e,t)
o.up.set(0,-1,0),o.lookAt(new r.Vector3(1,0,0)),this.add(o)
var s=new r.PerspectiveCamera(n,a,e,t)
s.up.set(0,-1,0),s.lookAt(new r.Vector3(-1,0,0)),this.add(s)
var h=new r.PerspectiveCamera(n,a,e,t)
h.up.set(0,0,1),h.lookAt(new r.Vector3(0,1,0)),this.add(h)
var l=new r.PerspectiveCamera(n,a,e,t)
l.up.set(0,0,-1),l.lookAt(new r.Vector3(0,-1,0)),this.add(l)
var c=new r.PerspectiveCamera(n,a,e,t)
c.up.set(0,-1,0),c.lookAt(new r.Vector3(0,0,1)),this.add(c)
var u=new r.PerspectiveCamera(n,a,e,t)
u.up.set(0,-1,0),u.lookAt(new r.Vector3(0,0,-1)),this.add(u),this.renderTarget=new r.WebGLRenderTargetCube(i,i,{format:r.RGBFormat,magFilter:r.LinearFilter,minFilter:r.LinearFilter}),this.updateCubeMap=function(e,t){var i=this.renderTarget,n=i.generateMipmaps
i.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,o,i),i.activeCubeFace=1,e.render(t,s,i),i.activeCubeFace=2,e.render(t,h,i),i.activeCubeFace=3,e.render(t,l,i),i.activeCubeFace=4,e.render(t,c,i),i.generateMipmaps=n,i.activeCubeFace=5,e.render(t,u,i)}},r.CubeCamera.prototype=Object.create(r.Object3D.prototype),r.CubeCamera.prototype.constructor=r.CubeCamera,r.OrthographicCamera=function(e,t,i,n,a,o){r.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=void 0!==a?a:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},r.OrthographicCamera.prototype=Object.create(r.Camera.prototype),r.OrthographicCamera.prototype.constructor=r.OrthographicCamera,r.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2
this.projectionMatrix.makeOrthographic(i-e,i+e,n+t,n-t,this.near,this.far)},r.OrthographicCamera.prototype.clone=function(){var e=new r.OrthographicCamera
return r.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},r.PerspectiveCamera=function(e,t,i,n){r.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},r.PerspectiveCamera.prototype=Object.create(r.Camera.prototype),r.PerspectiveCamera.prototype.constructor=r.PerspectiveCamera,r.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*r.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},r.PerspectiveCamera.prototype.setViewOffset=function(e,t,i,n,r,a){this.fullWidth=e,this.fullHeight=t,this.x=i,this.y=n,this.width=r,this.height=a,this.updateProjectionMatrix()},r.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=r.Math.radToDeg(2*Math.atan(Math.tan(.5*r.Math.degToRad(this.fov))/this.zoom))
if(this.fullWidth){var t=this.fullWidth/this.fullHeight,i=Math.tan(r.Math.degToRad(.5*e))*this.near,n=-i,a=t*n,o=t*i,s=Math.abs(o-a),h=Math.abs(i-n)
this.projectionMatrix.makeFrustum(a+this.x*s/this.fullWidth,a+(this.x+this.width)*s/this.fullWidth,i-(this.y+this.height)*h/this.fullHeight,i-this.y*h/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},r.PerspectiveCamera.prototype.clone=function(){var e=new r.PerspectiveCamera
return r.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},r.Light=function(e){r.Object3D.call(this),this.type="Light",this.color=new r.Color(e)},r.Light.prototype=Object.create(r.Object3D.prototype),r.Light.prototype.constructor=r.Light,r.Light.prototype.clone=function(e){return void 0===e&&(e=new r.Light),r.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},r.AmbientLight=function(e){r.Light.call(this,e),this.type="AmbientLight"},r.AmbientLight.prototype=Object.create(r.Light.prototype),r.AmbientLight.prototype.constructor=r.AmbientLight,r.AmbientLight.prototype.clone=function(){var e=new r.AmbientLight
return r.Light.prototype.clone.call(this,e),e},r.AreaLight=function(e,t){r.Light.call(this,e),this.type="AreaLight",this.normal=new r.Vector3(0,-1,0),this.right=new r.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},r.AreaLight.prototype=Object.create(r.Light.prototype),r.AreaLight.prototype.constructor=r.AreaLight,r.DirectionalLight=function(e,t){r.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new r.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new r.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},r.DirectionalLight.prototype=Object.create(r.Light.prototype),r.DirectionalLight.prototype.constructor=r.DirectionalLight,r.DirectionalLight.prototype.clone=function(){var e=new r.DirectionalLight
return r.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},r.HemisphereLight=function(e,t,i){r.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new r.Color(t),this.intensity=void 0!==i?i:1},r.HemisphereLight.prototype=Object.create(r.Light.prototype),r.HemisphereLight.prototype.constructor=r.HemisphereLight,r.HemisphereLight.prototype.clone=function(){var e=new r.HemisphereLight
return r.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},r.PointLight=function(e,t,i){r.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0},r.PointLight.prototype=Object.create(r.Light.prototype),r.PointLight.prototype.constructor=r.PointLight,r.PointLight.prototype.clone=function(){var e=new r.PointLight
return r.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},r.SpotLight=function(e,t,i,n,a){r.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new r.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.exponent=void 0!==a?a:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},r.SpotLight.prototype=Object.create(r.Light.prototype),r.SpotLight.prototype.constructor=r.SpotLight,r.SpotLight.prototype.clone=function(){var e=new r.SpotLight
return r.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},r.Cache=function(){this.files={}},r.Cache.prototype={constructor:r.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},r.Loader=function(e){this.showStatus=e,this.statusDomElement=e?r.Loader.prototype.addStatusElement():null,this.imageLoader=new r.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},r.Loader.prototype={constructor:r.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div")
return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded "
t+=e.total?(100*e.loaded/e.total).toFixed(0)+"%":(e.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/")
return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var i=[],n=0;n<e.length;++n)i[n]=this.createMaterial(e[n],t)
return i},needsTangents:function(e){for(var t=0,i=e.length;i>t;t++){var n=e[t]
if(n instanceof r.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function i(e){var t=Math.log(e)/Math.LN2
return Math.pow(2,Math.round(t))}function n(e,n,a,s,h,l,c){var u,d=t+a,p=r.Loader.Handlers.get(d)
if(null!==p?u=p.load(d):(u=new r.Texture,p=o.imageLoader,p.crossOrigin=o.crossOrigin,p.load(d,function(e){if(r.Math.isPowerOfTwo(e.width)===!1||r.Math.isPowerOfTwo(e.height)===!1){var t=i(e.width),n=i(e.height),a=document.createElement("canvas")
a.width=t,a.height=n
var o=a.getContext("2d")
o.drawImage(e,0,0,t,n),u.image=a}else u.image=e
u.needsUpdate=!0})),u.sourceFile=a,s&&(u.repeat.set(s[0],s[1]),1!==s[0]&&(u.wrapS=r.RepeatWrapping),1!==s[1]&&(u.wrapT=r.RepeatWrapping)),h&&u.offset.set(h[0],h[1]),l){var f={repeat:r.RepeatWrapping,mirror:r.MirroredRepeatWrapping}
void 0!==f[l[0]]&&(u.wrapS=f[l[0]]),void 0!==f[l[1]]&&(u.wrapT=f[l[1]])}c&&(u.anisotropy=c),e[n]=u}function a(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var o=this,s="MeshLambertMaterial",h={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1}
if(e.shading){var l=e.shading.toLowerCase()
"phong"===l?s="MeshPhongMaterial":"basic"===l&&(s="MeshBasicMaterial")}void 0!==e.blending&&void 0!==r[e.blending]&&(h.blending=r[e.blending]),(void 0!==e.transparent||e.opacity<1)&&(h.transparent=e.transparent),void 0!==e.depthTest&&(h.depthTest=e.depthTest),void 0!==e.depthWrite&&(h.depthWrite=e.depthWrite),void 0!==e.visible&&(h.visible=e.visible),void 0!==e.flipSided&&(h.side=r.BackSide),void 0!==e.doubleSided&&(h.side=r.DoubleSide),void 0!==e.wireframe&&(h.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?h.vertexColors=r.FaceColors:e.vertexColors&&(h.vertexColors=r.VertexColors)),e.colorDiffuse?h.color=a(e.colorDiffuse):e.DbgColor&&(h.color=e.DbgColor),e.colorSpecular&&(h.specular=a(e.colorSpecular)),e.colorAmbient&&(h.ambient=a(e.colorAmbient)),e.colorEmissive&&(h.emissive=a(e.colorEmissive)),e.transparency&&(h.opacity=e.transparency),e.specularCoef&&(h.shininess=e.specularCoef),e.mapDiffuse&&t&&n(h,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&n(h,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&n(h,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&n(h,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&n(h,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&n(h,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(h.bumpScale=e.mapBumpScale),e.mapNormalFactor&&(h.normalScale=new r.Vector2(e.mapNormalFactor,e.mapNormalFactor))
var c=new r[s](h)
return void 0!==e.DbgName&&(c.name=e.DbgName),c}},r.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,i=this.handlers.length;i>t;t+=2){var n=this.handlers[t],r=this.handlers[t+1]
if(n.test(e))return r}return null}},r.XHRLoader=function(e){this.cache=new r.Cache,this.manager=void 0!==e?e:r.DefaultLoadingManager},r.XHRLoader.prototype={constructor:r.XHRLoader,load:function(e,t,i,n){var r=this,a=r.cache.get(e)
if(void 0!==a)return void(t&&t(a))
var o=new XMLHttpRequest
o.open("GET",e,!0),o.addEventListener("load",function(i){r.cache.add(e,this.response),t&&t(this.response),r.manager.itemEnd(e)},!1),void 0!==i&&o.addEventListener("progress",function(e){i(e)},!1),void 0!==n&&o.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(o.responseType=this.responseType),o.send(null),r.manager.itemStart(e)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},r.ImageLoader=function(e){this.cache=new r.Cache,this.manager=void 0!==e?e:r.DefaultLoadingManager},r.ImageLoader.prototype={constructor:r.ImageLoader,load:function(e,t,i,n){var r=this,a=r.cache.get(e)
if(void 0!==a)return void t(a)
var o=document.createElement("img")
return void 0!==t&&o.addEventListener("load",function(i){r.cache.add(e,this),t(this),r.manager.itemEnd(e)},!1),void 0!==i&&o.addEventListener("progress",function(e){i(e)},!1),void 0!==n&&o.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.src=e,r.manager.itemStart(e),o},setCrossOrigin:function(e){this.crossOrigin=e}},r.JSONLoader=function(e){r.Loader.call(this,e),this.withCredentials=!1},r.JSONLoader.prototype=Object.create(r.Loader.prototype),r.JSONLoader.prototype.constructor=r.JSONLoader,r.JSONLoader.prototype.load=function(e,t,i){i=i&&"string"==typeof i?i:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,i)},r.JSONLoader.prototype.loadAjaxJSON=function(e,t,i,n,r){var a=new XMLHttpRequest,o=0
a.onreadystatechange=function(){if(a.readyState===a.DONE)if(200===a.status||0===a.status){if(a.responseText){var s=JSON.parse(a.responseText)
if(void 0!==s.metadata&&"scene"===s.metadata.type)return void console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.')
var h=e.parse(s,n)
i(h.geometry,h.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.')
e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+a.status+")")
else a.readyState===a.LOADING?r&&(0===o&&(o=a.getResponseHeader("Content-Length")),r({total:o,loaded:a.responseText.length})):a.readyState===a.HEADERS_RECEIVED&&void 0!==r&&(o=a.getResponseHeader("Content-Length"))},a.open("GET",t,!0),a.withCredentials=this.withCredentials,a.send(null)},r.JSONLoader.prototype.parse=function(e,t){function i(t){function i(e,t){return e&1<<t}var n,a,s,h,l,c,u,d,p,f,m,g,v,y,w,b,x,_,k,M,S,T,C,E,A,L,P,R=e.faces,F=e.vertices,D=e.normals,B=e.colors,O=0
if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&O++
for(n=0;O>n;n++)o.faceVertexUvs[n]=[]}for(h=0,l=F.length;l>h;)_=new r.Vector3,_.x=F[h++]*t,_.y=F[h++]*t,_.z=F[h++]*t,o.vertices.push(_)
for(h=0,l=R.length;l>h;)if(f=R[h++],m=i(f,0),g=i(f,1),v=i(f,3),y=i(f,4),w=i(f,5),b=i(f,6),x=i(f,7),m){if(M=new r.Face3,M.a=R[h],M.b=R[h+1],M.c=R[h+3],S=new r.Face3,S.a=R[h+1],S.b=R[h+2],S.c=R[h+3],h+=4,g&&(p=R[h++],M.materialIndex=p,S.materialIndex=p),s=o.faces.length,v)for(n=0;O>n;n++)for(E=e.uvs[n],o.faceVertexUvs[n][s]=[],o.faceVertexUvs[n][s+1]=[],a=0;4>a;a++)d=R[h++],L=E[2*d],P=E[2*d+1],A=new r.Vector2(L,P),2!==a&&o.faceVertexUvs[n][s].push(A),0!==a&&o.faceVertexUvs[n][s+1].push(A)
if(y&&(u=3*R[h++],M.normal.set(D[u++],D[u++],D[u]),S.normal.copy(M.normal)),w)for(n=0;4>n;n++)u=3*R[h++],C=new r.Vector3(D[u++],D[u++],D[u]),2!==n&&M.vertexNormals.push(C),0!==n&&S.vertexNormals.push(C)
if(b&&(c=R[h++],T=B[c],M.color.setHex(T),S.color.setHex(T)),x)for(n=0;4>n;n++)c=R[h++],T=B[c],2!==n&&M.vertexColors.push(new r.Color(T)),0!==n&&S.vertexColors.push(new r.Color(T))
o.faces.push(M),o.faces.push(S)}else{if(k=new r.Face3,k.a=R[h++],k.b=R[h++],k.c=R[h++],g&&(p=R[h++],k.materialIndex=p),s=o.faces.length,v)for(n=0;O>n;n++)for(E=e.uvs[n],o.faceVertexUvs[n][s]=[],a=0;3>a;a++)d=R[h++],L=E[2*d],P=E[2*d+1],A=new r.Vector2(L,P),o.faceVertexUvs[n][s].push(A)
if(y&&(u=3*R[h++],k.normal.set(D[u++],D[u++],D[u])),w)for(n=0;3>n;n++)u=3*R[h++],C=new r.Vector3(D[u++],D[u++],D[u]),k.vertexNormals.push(C)
if(b&&(c=R[h++],k.color.setHex(B[c])),x)for(n=0;3>n;n++)c=R[h++],k.vertexColors.push(new r.Color(B[c]))
o.faces.push(k)}}function n(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2
if(e.skinWeights)for(var i=0,n=e.skinWeights.length;n>i;i+=t){var a=e.skinWeights[i],s=t>1?e.skinWeights[i+1]:0,h=t>2?e.skinWeights[i+2]:0,l=t>3?e.skinWeights[i+3]:0
o.skinWeights.push(new r.Vector4(a,s,h,l))}if(e.skinIndices)for(var i=0,n=e.skinIndices.length;n>i;i+=t){var c=e.skinIndices[i],u=t>1?e.skinIndices[i+1]:0,d=t>2?e.skinIndices[i+2]:0,p=t>3?e.skinIndices[i+3]:0
o.skinIndices.push(new r.Vector4(c,u,d,p))}o.bones=e.bones,o.bones&&o.bones.length>0&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&console.warn("When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match."),o.animation=e.animation,o.animations=e.animations}function a(t){if(void 0!==e.morphTargets){var i,n,a,s,h,l
for(i=0,n=e.morphTargets.length;n>i;i++)for(o.morphTargets[i]={},o.morphTargets[i].name=e.morphTargets[i].name,o.morphTargets[i].vertices=[],h=o.morphTargets[i].vertices,l=e.morphTargets[i].vertices,a=0,s=l.length;s>a;a+=3){var c=new r.Vector3
c.x=l[a]*t,c.y=l[a+1]*t,c.z=l[a+2]*t,h.push(c)}}if(void 0!==e.morphColors){var i,n,u,d,p,f,m
for(i=0,n=e.morphColors.length;n>i;i++)for(o.morphColors[i]={},o.morphColors[i].name=e.morphColors[i].name,o.morphColors[i].colors=[],p=o.morphColors[i].colors,f=e.morphColors[i].colors,u=0,d=f.length;d>u;u+=3)m=new r.Color(16755200),m.setRGB(f[u],f[u+1],f[u+2]),p.push(m)}}var o=new r.Geometry,s=void 0!==e.scale?1/e.scale:1
if(i(s),n(),a(s),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:o}
var h=this.initMaterials(e.materials,t)
return this.needsTangents(h)&&o.computeTangents(),{geometry:o,materials:h}},r.LoadingManager=function(e,t,i){var n=this,r=0,a=0
this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++},this.itemEnd=function(e){r++,void 0!==n.onProgress&&n.onProgress(e,r,a),r===a&&void 0!==n.onLoad&&n.onLoad()}},r.DefaultLoadingManager=new r.LoadingManager,r.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:r.DefaultLoadingManager},r.BufferGeometryLoader.prototype={constructor:r.BufferGeometryLoader,load:function(e,t,i,n){var a=this,o=new r.XHRLoader(a.manager)
o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(a.parse(JSON.parse(e)))},i,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new r.BufferGeometry,i=e.attributes
for(var a in i){var o=i[a],s=new n[o.type](o.array)
t.addAttribute(a,new r.BufferAttribute(s,o.itemSize))}var h=e.offsets
void 0!==h&&(t.offsets=JSON.parse(JSON.stringify(h)))
var l=e.boundingSphere
if(void 0!==l){var c=new r.Vector3
void 0!==l.center&&c.fromArray(l.center),t.boundingSphere=new r.Sphere(c,l.radius)}return t}},r.MaterialLoader=function(e){this.manager=void 0!==e?e:r.DefaultLoadingManager},r.MaterialLoader.prototype={constructor:r.MaterialLoader,load:function(e,t,i,n){var a=this,o=new r.XHRLoader(a.manager)
o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(a.parse(JSON.parse(e)))},i,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new r[e.type]
if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var i=0,n=e.materials.length;n>i;i++)t.materials.push(this.parse(e.materials[i]))
return t}},r.ObjectLoader=function(e){this.manager=void 0!==e?e:r.DefaultLoadingManager},r.ObjectLoader.prototype={constructor:r.ObjectLoader,load:function(e,t,i,n){var a=this,o=new r.XHRLoader(a.manager)
o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(a.parse(JSON.parse(e)))},i,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),i=this.parseMaterials(e.materials),n=this.parseObject(e.object,t,i)
return n},parseGeometries:function(e){var t={}
if(void 0!==e)for(var i=new r.JSONLoader,n=new r.BufferGeometryLoader,a=0,o=e.length;o>a;a++){var s,h=e[a]
switch(h.type){case"PlaneGeometry":s=new r.PlaneGeometry(h.width,h.height,h.widthSegments,h.heightSegments)
break
case"BoxGeometry":case"CubeGeometry":s=new r.BoxGeometry(h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments)
break
case"CircleGeometry":s=new r.CircleGeometry(h.radius,h.segments)
break
case"CylinderGeometry":s=new r.CylinderGeometry(h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded)
break
case"SphereGeometry":s=new r.SphereGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength)
break
case"IcosahedronGeometry":s=new r.IcosahedronGeometry(h.radius,h.detail)
break
case"TorusGeometry":s=new r.TorusGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc)
break
case"TorusKnotGeometry":s=new r.TorusKnotGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.p,h.q,h.heightScale)
break
case"BufferGeometry":s=n.parse(h.data)
break
case"Geometry":s=i.parse(h.data).geometry}s.uuid=h.uuid,void 0!==h.name&&(s.name=h.name),t[h.uuid]=s}return t},parseMaterials:function(e){var t={}
if(void 0!==e)for(var i=new r.MaterialLoader,n=0,a=e.length;a>n;n++){var o=e[n],s=i.parse(o)
s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),t[o.uuid]=s}return t},parseObject:function(){var e=new r.Matrix4
return function(t,i,n){var a
switch(t.type){case"Scene":a=new r.Scene
break
case"PerspectiveCamera":a=new r.PerspectiveCamera(t.fov,t.aspect,t.near,t.far)
break
case"OrthographicCamera":a=new r.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far)
break
case"AmbientLight":a=new r.AmbientLight(t.color)
break
case"DirectionalLight":a=new r.DirectionalLight(t.color,t.intensity)
break
case"PointLight":a=new r.PointLight(t.color,t.intensity,t.distance)
break
case"SpotLight":a=new r.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent)
break
case"HemisphereLight":a=new r.HemisphereLight(t.color,t.groundColor,t.intensity)
break
case"Mesh":var o=i[t.geometry],s=n[t.material]
void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===s&&console.warn("THREE.ObjectLoader: Undefined material",t.material),a=new r.Mesh(o,s)
break
case"Line":var o=i[t.geometry],s=n[t.material]
void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===s&&console.warn("THREE.ObjectLoader: Undefined material",t.material),a=new r.Line(o,s)
break
case"Sprite":var s=n[t.material]
void 0===s&&console.warn("THREE.ObjectLoader: Undefined material",t.material),a=new r.Sprite(s)
break
case"Group":a=new r.Group
break
default:a=new r.Object3D}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var h in t.children)a.add(this.parseObject(t.children[h],i,n))
return a}}()},r.TextureLoader=function(e){this.manager=void 0!==e?e:r.DefaultLoadingManager},r.TextureLoader.prototype={constructor:r.TextureLoader,load:function(e,t,i,n){var a=this,o=new r.ImageLoader(a.manager)
o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){var i=new r.Texture(e)
i.needsUpdate=!0,void 0!==t&&t(i)},i,n)},setCrossOrigin:function(e){this.crossOrigin=e}},r.DataTextureLoader=r.BinaryTextureLoader=function(){this._parser=null},r.BinaryTextureLoader.prototype={constructor:r.BinaryTextureLoader,load:function(e,t,i,n){var a=this,o=new r.DataTexture,s=new r.XHRLoader
return s.setResponseType("arraybuffer"),s.load(e,function(e){var i=a._parser(e)
i&&(void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:r.ClampToEdgeWrapping,o.wrapT=void 0!==i.wrapT?i.wrapT:r.ClampToEdgeWrapping,o.magFilter=void 0!==i.magFilter?i.magFilter:r.LinearFilter,o.minFilter=void 0!==i.minFilter?i.minFilter:r.LinearMipMapLinearFilter,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps),1===i.mipmapCount&&(o.minFilter=r.LinearFilter),o.needsUpdate=!0,t&&t(o,i))},i,n),o}},r.CompressedTextureLoader=function(){this._parser=null},r.CompressedTextureLoader.prototype={constructor:r.CompressedTextureLoader,load:function(e,t,i){var n=this,a=[],o=new r.CompressedTexture
o.image=a
var s=new r.XHRLoader
if(s.setResponseType("arraybuffer"),e instanceof Array)for(var h=0,l=function(i){s.load(e[i],function(e){var s=n._parser(e,!0)
a[i]={width:s.width,height:s.height,format:s.format,mipmaps:s.mipmaps},h+=1,6===h&&(1==s.mipmapCount&&(o.minFilter=r.LinearFilter),o.format=s.format,o.needsUpdate=!0,t&&t(o))})},c=0,u=e.length;u>c;++c)l(c)
else s.load(e,function(e){var i=n._parser(e,!0)
if(i.isCubemap)for(var s=i.mipmaps.length/i.mipmapCount,h=0;s>h;h++){a[h]={mipmaps:[]}
for(var l=0;l<i.mipmapCount;l++)a[h].mipmaps.push(i.mipmaps[h*i.mipmapCount+l]),a[h].format=i.format,a[h].width=i.width,a[h].height=i.height}else o.image.width=i.width,o.image.height=i.height,o.mipmaps=i.mipmaps
1===i.mipmapCount&&(o.minFilter=r.LinearFilter),o.format=i.format,o.needsUpdate=!0,t&&t(o)})
return o}},r.Material=function(){Object.defineProperty(this,"id",{value:r.MaterialIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="Material",this.side=r.FrontSide,this.opacity=1,this.transparent=!1,this.blending=r.NormalBlending,this.blendSrc=r.SrcAlphaFactor,this.blendDst=r.OneMinusSrcAlphaFactor,this.blendEquation=r.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},r.Material.prototype={constructor:r.Material,setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t]
if(void 0!==i){if(t in this){var n=this[t]
n instanceof r.Color?n.set(i):n instanceof r.Vector3&&i instanceof r.Vector3?n.copy(i):"overdraw"==t?this[t]=Number(i):this[t]=i}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type}
return""!==this.name&&(e.name=this.name),this instanceof r.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==r.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==r.NormalBlending&&(e.blending=this.blending),this.side!==r.FrontSide&&(e.side=this.side)):this instanceof r.MeshLambertMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==r.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==r.NormalBlending&&(e.blending=this.blending),this.side!==r.FrontSide&&(e.side=this.side)):this instanceof r.MeshPhongMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==r.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==r.NormalBlending&&(e.blending=this.blending),this.side!==r.FrontSide&&(e.side=this.side)):this instanceof r.MeshNormalMaterial?(this.shading!==r.FlatShading&&(e.shading=this.shading),this.blending!==r.NormalBlending&&(e.blending=this.blending),this.side!==r.FrontSide&&(e.side=this.side)):this instanceof r.MeshDepthMaterial?(this.blending!==r.NormalBlending&&(e.blending=this.blending),this.side!==r.FrontSide&&(e.side=this.side)):this instanceof r.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof r.SpriteMaterial&&(e.color=this.color.getHex()),this.opacity<1&&(e.opacity=this.opacity),this.transparent!==!1&&(e.transparent=this.transparent),this.wireframe!==!1&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new r.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.Material.prototype),r.MaterialIdCount=0,r.LineBasicMaterial=function(e){r.Material.call(this),this.type="LineBasicMaterial",this.color=new r.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=r.NoColors,this.fog=!0,this.setValues(e)},r.LineBasicMaterial.prototype=Object.create(r.Material.prototype),r.LineBasicMaterial.prototype.constructor=r.LineBasicMaterial,r.LineBasicMaterial.prototype.clone=function(){var e=new r.LineBasicMaterial
return r.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},r.LineDashedMaterial=function(e){r.Material.call(this),this.type="LineDashedMaterial",this.color=new r.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},r.LineDashedMaterial.prototype=Object.create(r.Material.prototype),r.LineDashedMaterial.prototype.constructor=r.LineDashedMaterial,r.LineDashedMaterial.prototype.clone=function(){var e=new r.LineDashedMaterial
return r.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},r.MeshBasicMaterial=function(e){r.Material.call(this),this.type="MeshBasicMaterial",this.color=new r.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=r.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=r.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},r.MeshBasicMaterial.prototype=Object.create(r.Material.prototype),r.MeshBasicMaterial.prototype.constructor=r.MeshBasicMaterial,r.MeshBasicMaterial.prototype.clone=function(){var e=new r.MeshBasicMaterial
return r.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},r.MeshLambertMaterial=function(e){r.Material.call(this),this.type="MeshLambertMaterial",this.color=new r.Color(16777215),this.ambient=new r.Color(16777215),this.emissive=new r.Color(0),this.wrapAround=!1,this.wrapRGB=new r.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=r.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=r.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},r.MeshLambertMaterial.prototype=Object.create(r.Material.prototype),r.MeshLambertMaterial.prototype.constructor=r.MeshLambertMaterial,r.MeshLambertMaterial.prototype.clone=function(){var e=new r.MeshLambertMaterial
return r.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},r.MeshPhongMaterial=function(e){r.Material.call(this),this.type="MeshPhongMaterial",this.color=new r.Color(16777215),this.ambient=new r.Color(16777215),this.emissive=new r.Color(0),this.specular=new r.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new r.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=r.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=r.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},r.MeshPhongMaterial.prototype=Object.create(r.Material.prototype),r.MeshPhongMaterial.prototype.constructor=r.MeshPhongMaterial,r.MeshPhongMaterial.prototype.clone=function(){var e=new r.MeshPhongMaterial
return r.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},r.MeshDepthMaterial=function(e){r.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},r.MeshDepthMaterial.prototype=Object.create(r.Material.prototype),r.MeshDepthMaterial.prototype.constructor=r.MeshDepthMaterial,r.MeshDepthMaterial.prototype.clone=function(){var e=new r.MeshDepthMaterial
return r.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},r.MeshNormalMaterial=function(e){r.Material.call(this,e),this.type="MeshNormalMaterial",this.shading=r.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},r.MeshNormalMaterial.prototype=Object.create(r.Material.prototype),r.MeshNormalMaterial.prototype.constructor=r.MeshNormalMaterial,r.MeshNormalMaterial.prototype.clone=function(){var e=new r.MeshNormalMaterial
return r.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},r.MeshFaceMaterial=function(e){this.uuid=r.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},r.MeshFaceMaterial.prototype={constructor:r.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,i=this.materials.length;i>t;t++)e.materials.push(this.materials[t].toJSON())
return e},clone:function(){for(var e=new r.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone())
return e}},r.PointCloudMaterial=function(e){r.Material.call(this),this.type="PointCloudMaterial",this.color=new r.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=r.NoColors,this.fog=!0,this.setValues(e)},r.PointCloudMaterial.prototype=Object.create(r.Material.prototype),r.PointCloudMaterial.prototype.constructor=r.PointCloudMaterial,r.PointCloudMaterial.prototype.clone=function(){var e=new r.PointCloudMaterial
return r.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},r.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new r.PointCloudMaterial(e)},r.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new r.PointCloudMaterial(e)},r.ShaderMaterial=function(e){r.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=r.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=r.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},r.ShaderMaterial.prototype=Object.create(r.Material.prototype),r.ShaderMaterial.prototype.constructor=r.ShaderMaterial,r.ShaderMaterial.prototype.clone=function(){var e=new r.ShaderMaterial
return r.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=r.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},r.RawShaderMaterial=function(e){r.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},r.RawShaderMaterial.prototype=Object.create(r.ShaderMaterial.prototype),r.RawShaderMaterial.prototype.constructor=r.RawShaderMaterial,r.RawShaderMaterial.prototype.clone=function(){var e=new r.RawShaderMaterial
return r.ShaderMaterial.prototype.clone.call(this,e),e},r.SpriteMaterial=function(e){r.Material.call(this),this.type="SpriteMaterial",this.color=new r.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},r.SpriteMaterial.prototype=Object.create(r.Material.prototype),r.SpriteMaterial.prototype.constructor=r.SpriteMaterial,r.SpriteMaterial.prototype.clone=function(){var e=new r.SpriteMaterial
return r.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},r.Texture=function(e,t,i,n,a,o,s,h,l){Object.defineProperty(this,"id",{value:r.TextureIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.image=void 0!==e?e:r.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:r.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:r.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:r.ClampToEdgeWrapping,this.magFilter=void 0!==a?a:r.LinearFilter,this.minFilter=void 0!==o?o:r.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:r.RGBAFormat,this.type=void 0!==h?h:r.UnsignedByteType,this.offset=new r.Vector2(0,0),this.repeat=new r.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},r.Texture.DEFAULT_IMAGE=void 0,r.Texture.DEFAULT_MAPPING=r.UVMapping,r.Texture.prototype={constructor:r.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new r.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.Texture.prototype),r.TextureIdCount=0,r.CubeTexture=function(e,t,i,n,a,o,s,h,l){t=void 0!==t?t:r.CubeReflectionMapping,r.Texture.call(this,e,t,i,n,a,o,s,h,l),this.images=e},r.CubeTexture.prototype=Object.create(r.Texture.prototype),r.CubeTexture.prototype.constructor=r.CubeTexture,r.CubeTexture.clone=function(e){return void 0===e&&(e=new r.CubeTexture),r.Texture.prototype.clone.call(this,e),e.images=this.images,e},r.CompressedTexture=function(e,t,i,n,a,o,s,h,l,c,u){r.Texture.call(this,null,o,s,h,l,c,n,a,u),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},r.CompressedTexture.prototype=Object.create(r.Texture.prototype),r.CompressedTexture.prototype.constructor=r.CompressedTexture,r.CompressedTexture.prototype.clone=function(){var e=new r.CompressedTexture
return r.Texture.prototype.clone.call(this,e),e},r.DataTexture=function(e,t,i,n,a,o,s,h,l,c,u){r.Texture.call(this,null,o,s,h,l,c,n,a,u),this.image={data:e,width:t,height:i}},r.DataTexture.prototype=Object.create(r.Texture.prototype),r.DataTexture.prototype.constructor=r.DataTexture,r.DataTexture.prototype.clone=function(){var e=new r.DataTexture
return r.Texture.prototype.clone.call(this,e),e},r.VideoTexture=function(e,t,i,n,a,o,s,h,l){r.Texture.call(this,e,t,i,n,a,o,s,h,l),this.generateMipmaps=!1
var c=this,u=function(){requestAnimationFrame(u),e.readyState===e.HAVE_ENOUGH_DATA&&(c.needsUpdate=!0)}
u()},r.VideoTexture.prototype=Object.create(r.Texture.prototype),r.VideoTexture.prototype.constructor=r.VideoTexture,r.Group=function(){r.Object3D.call(this),this.type="Group"},r.Group.prototype=Object.create(r.Object3D.prototype),r.Group.prototype.constructor=r.Group,r.PointCloud=function(e,t){r.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new r.Geometry,this.material=void 0!==t?t:new r.PointCloudMaterial({color:16777215*Math.random()})},r.PointCloud.prototype=Object.create(r.Object3D.prototype),r.PointCloud.prototype.constructor=r.PointCloud,r.PointCloud.prototype.raycast=function(){var e=new r.Matrix4,t=new r.Ray
return function(i,n){var a=this,o=a.geometry,s=i.params.PointCloud.threshold
if(e.getInverse(this.matrixWorld),t.copy(i.ray).applyMatrix4(e),null===o.boundingBox||t.isIntersectionBox(o.boundingBox)!==!1){var h=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=new r.Vector3,c=function(e,r){var o=t.distanceToPoint(e)
if(h>o){var s=t.closestPointToPoint(e)
s.applyMatrix4(a.matrixWorld)
var l=i.ray.origin.distanceTo(s)
n.push({distance:l,distanceToRay:o,point:s.clone(),index:r,face:null,object:a})}}
if(o instanceof r.BufferGeometry){var u=o.attributes,d=u.position.array
if(void 0!==u.index){var p=u.index.array,f=o.offsets
if(0===f.length){var m={start:0,count:p.length,index:0}
f=[m]}for(var g=0,v=f.length;v>g;++g)for(var y=f[g].start,w=f[g].count,b=f[g].index,x=y,_=y+w;_>x;x++){var k=b+p[x]
l.fromArray(d,3*k),c(l,k)}}else for(var M=d.length/3,x=0;M>x;x++)l.set(d[3*x],d[3*x+1],d[3*x+2]),c(l,x)}else for(var S=this.geometry.vertices,x=0;x<S.length;x++)c(S[x],x)}}}(),r.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new r.PointCloud(this.geometry,this.material)),r.Object3D.prototype.clone.call(this,e),e},r.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new r.PointCloud(e,t)},r.Line=function(e,t,i){r.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new r.Geometry,this.material=void 0!==t?t:new r.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==i?i:r.LineStrip},r.LineStrip=0,r.LinePieces=1,r.Line.prototype=Object.create(r.Object3D.prototype),r.Line.prototype.constructor=r.Line,r.Line.prototype.raycast=function(){var e=new r.Matrix4,t=new r.Ray,i=new r.Sphere
return function(n,a){var o=n.linePrecision,s=o*o,h=this.geometry
if(null===h.boundingSphere&&h.computeBoundingSphere(),i.copy(h.boundingSphere),i.applyMatrix4(this.matrixWorld),n.ray.isIntersectionSphere(i)!==!1){e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e)
var l=new r.Vector3,c=new r.Vector3,u=new r.Vector3,d=new r.Vector3,p=this.mode===r.LineStrip?1:2
if(h instanceof r.BufferGeometry){var f=h.attributes
if(void 0!==f.index){var m=f.index.array,g=f.position.array,v=h.offsets
0===v.length&&(v=[{start:0,count:m.length,index:0}])
for(var y=0;y<v.length;y++)for(var w=v[y].start,b=v[y].count,x=v[y].index,_=w;w+b-1>_;_+=p){var k=x+m[_],M=x+m[_+1]
l.fromArray(g,3*k),c.fromArray(g,3*M)
var S=t.distanceSqToSegment(l,c,d,u)
if(!(S>s)){var T=t.origin.distanceTo(d)
T<n.near||T>n.far||a.push({distance:T,point:u.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}else for(var g=f.position.array,_=0;_<g.length/3-1;_+=p){l.fromArray(g,3*_),c.fromArray(g,3*_+3)
var S=t.distanceSqToSegment(l,c,d,u)
if(!(S>s)){var T=t.origin.distanceTo(d)
T<n.near||T>n.far||a.push({distance:T,point:u.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}else if(h instanceof r.Geometry)for(var C=h.vertices,E=C.length,_=0;E-1>_;_+=p){var S=t.distanceSqToSegment(C[_],C[_+1],d,u)
if(!(S>s)){var T=t.origin.distanceTo(d)
T<n.near||T>n.far||a.push({distance:T,point:u.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}}}(),r.Line.prototype.clone=function(e){return void 0===e&&(e=new r.Line(this.geometry,this.material,this.mode)),r.Object3D.prototype.clone.call(this,e),e},r.Mesh=function(e,t){r.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new r.Geometry,this.material=void 0!==t?t:new r.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},r.Mesh.prototype=Object.create(r.Object3D.prototype),r.Mesh.prototype.constructor=r.Mesh,r.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={}
for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},r.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},r.Mesh.prototype.raycast=function(){var e=new r.Matrix4,t=new r.Ray,i=new r.Sphere,n=new r.Vector3,a=new r.Vector3,o=new r.Vector3
return function(s,h){var l=this.geometry
if(null===l.boundingSphere&&l.computeBoundingSphere(),i.copy(l.boundingSphere),i.applyMatrix4(this.matrixWorld),s.ray.isIntersectionSphere(i)!==!1&&(e.getInverse(this.matrixWorld),t.copy(s.ray).applyMatrix4(e),null===l.boundingBox||t.isIntersectionBox(l.boundingBox)!==!1))if(l instanceof r.BufferGeometry){var c=this.material
if(void 0===c)return
var u,d,p,f=l.attributes,m=s.precision
if(void 0!==f.index){var g=f.index.array,v=f.position.array,y=l.offsets
0===y.length&&(y=[{start:0,count:g.length,index:0}])
for(var w=0,b=y.length;b>w;++w)for(var x=y[w].start,_=y[w].count,k=y[w].index,M=x,S=x+_;S>M;M+=3){if(u=k+g[M],d=k+g[M+1],p=k+g[M+2],n.fromArray(v,3*u),a.fromArray(v,3*d),o.fromArray(v,3*p),c.side===r.BackSide)var T=t.intersectTriangle(o,a,n,!0)
else var T=t.intersectTriangle(n,a,o,c.side!==r.DoubleSide)
if(null!==T){T.applyMatrix4(this.matrixWorld)
var C=s.ray.origin.distanceTo(T)
m>C||C<s.near||C>s.far||h.push({distance:C,point:T,face:new r.Face3(u,d,p,r.Triangle.normal(n,a,o)),faceIndex:null,object:this})}}}else for(var v=f.position.array,M=0,E=0,S=v.length;S>M;M+=3,E+=9){if(u=M,d=M+1,p=M+2,n.fromArray(v,E),a.fromArray(v,E+3),o.fromArray(v,E+6),c.side===r.BackSide)var T=t.intersectTriangle(o,a,n,!0)
else var T=t.intersectTriangle(n,a,o,c.side!==r.DoubleSide)
if(null!==T){T.applyMatrix4(this.matrixWorld)
var C=s.ray.origin.distanceTo(T)
m>C||C<s.near||C>s.far||h.push({distance:C,point:T,face:new r.Face3(u,d,p,r.Triangle.normal(n,a,o)),faceIndex:null,object:this})}}}else if(l instanceof r.Geometry)for(var u,d,p,A=this.material instanceof r.MeshFaceMaterial,L=A===!0?this.material.materials:null,m=s.precision,P=l.vertices,R=0,F=l.faces.length;F>R;R++){var D=l.faces[R],c=A===!0?L[D.materialIndex]:this.material
if(void 0!==c){if(u=P[D.a],d=P[D.b],p=P[D.c],c.morphTargets===!0){var B=l.morphTargets,O=this.morphTargetInfluences
n.set(0,0,0),a.set(0,0,0),o.set(0,0,0)
for(var V=0,z=B.length;z>V;V++){var U=O[V]
if(0!==U){var N=B[V].vertices
n.x+=(N[D.a].x-u.x)*U,n.y+=(N[D.a].y-u.y)*U,n.z+=(N[D.a].z-u.z)*U,a.x+=(N[D.b].x-d.x)*U,a.y+=(N[D.b].y-d.y)*U,a.z+=(N[D.b].z-d.z)*U,o.x+=(N[D.c].x-p.x)*U,o.y+=(N[D.c].y-p.y)*U,o.z+=(N[D.c].z-p.z)*U}}n.add(u),a.add(d),o.add(p),u=n,d=a,p=o}if(c.side===r.BackSide)var T=t.intersectTriangle(p,d,u,!0)
else var T=t.intersectTriangle(u,d,p,c.side!==r.DoubleSide)
if(null!==T){T.applyMatrix4(this.matrixWorld)
var C=s.ray.origin.distanceTo(T)
m>C||C<s.near||C>s.far||h.push({distance:C,point:T,face:D,faceIndex:R,object:this})}}}}}(),r.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new r.Mesh(this.geometry,this.material)),r.Object3D.prototype.clone.call(this,e,t),e},r.Bone=function(e){r.Object3D.call(this),this.skin=e},r.Bone.prototype=Object.create(r.Object3D.prototype),r.Bone.prototype.constructor=r.Bone,r.Skeleton=function(e,t,i){if(this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new r.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var n
n=this.bones.length>256?64:this.bones.length>64?32:this.bones.length>16?16:8,this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new r.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,r.RGBAFormat,r.FloatType),this.boneTexture.minFilter=r.NearestFilter,this.boneTexture.magFilter=r.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*this.bones.length)
if(void 0===t)this.calculateInverses()
else if(this.bones.length===t.length)this.boneInverses=t.slice(0)
else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[]
for(var a=0,o=this.bones.length;o>a;a++)this.boneInverses.push(new r.Matrix4)}},r.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[]
for(var e=0,t=this.bones.length;t>e;e++){var i=new r.Matrix4
this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},r.Skeleton.prototype.pose=function(){for(var e,t=0,i=this.bones.length;i>t;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t])
for(var t=0,i=this.bones.length;i>t;t++)e=this.bones[t],e&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},r.Skeleton.prototype.update=function(){var e=new r.Matrix4
return function(){for(var t=0,i=this.bones.length;i>t;t++){var n=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix
e.multiplyMatrices(n,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),r.SkinnedMesh=function(e,t,i){r.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new r.Matrix4,this.bindMatrixInverse=new r.Matrix4
var n=[]
if(this.geometry&&void 0!==this.geometry.bones){for(var a,o,s,h,l,c=0,u=this.geometry.bones.length;u>c;++c)o=this.geometry.bones[c],s=o.pos,h=o.rotq,l=o.scl,a=new r.Bone(this),n.push(a),a.name=o.name,a.position.set(s[0],s[1],s[2]),a.quaternion.set(h[0],h[1],h[2],h[3]),void 0!==l?a.scale.set(l[0],l[1],l[2]):a.scale.set(1,1,1)
for(var c=0,u=this.geometry.bones.length;u>c;++c)o=this.geometry.bones[c],-1!==o.parent?n[o.parent].add(n[c]):this.add(n[c])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new r.Skeleton(n,void 0,i))},r.SkinnedMesh.prototype=Object.create(r.Mesh.prototype),r.SkinnedMesh.prototype.constructor=r.SkinnedMesh,r.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},r.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},r.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof r.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],i=1/t.lengthManhattan()
i!==1/0?t.multiplyScalar(i):t.set(1)}},r.SkinnedMesh.prototype.updateMatrixWorld=function(e){r.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},r.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new r.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),r.Mesh.prototype.clone.call(this,e),e},r.MorphAnimMesh=function(e,t){r.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},r.MorphAnimMesh.prototype=Object.create(r.Mesh.prototype),r.MorphAnimMesh.prototype.constructor=r.MorphAnimMesh,r.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},r.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},r.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},r.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry
e.animations||(e.animations={})
for(var t,i=e.animations,n=/([a-z]+)_?(\d+)/,r=0,a=e.morphTargets.length;a>r;r++){var o=e.morphTargets[r],s=o.name.match(n)
if(s&&s.length>1){{var h=s[1]
s[2]}i[h]||(i[h]={start:1/0,end:-(1/0)})
var l=i[h]
r<l.start&&(l.start=r),r>l.end&&(l.end=r),t||(t=h)}}e.firstAnimation=t},r.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:i}},r.MorphAnimMesh.prototype.playAnimation=function(e,t){var i=this.geometry.animations[e]
i?(this.setFrameRange(i.start,i.end),this.duration=1e3*((i.end-i.start)/t),this.time=0):console.warn("animation["+e+"] undefined")},r.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length
this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration))
var i=this.startKeyframe+r.Math.clamp(Math.floor(this.time/t),0,this.length-1)
i!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[i]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=i)
var n=this.time%t/t
this.directionBackwards&&(n=1-n),this.morphTargetInfluences[this.currentKeyframe]=n,this.morphTargetInfluences[this.lastKeyframe]=1-n},r.MorphAnimMesh.prototype.interpolateTargets=function(e,t,i){for(var n=this.morphTargetInfluences,r=0,a=n.length;a>r;r++)n[r]=0
e>-1&&(n[e]=1-i),t>-1&&(n[t]=i)},r.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new r.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,r.Mesh.prototype.clone.call(this,e),e},r.LOD=function(){r.Object3D.call(this),this.objects=[]},r.LOD.prototype=Object.create(r.Object3D.prototype),r.LOD.prototype.constructor=r.LOD,r.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t)
for(var i=0;i<this.objects.length&&!(t<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:t,object:e}),this.add(e)},r.LOD.prototype.getObjectForDistance=function(e){for(var t=1,i=this.objects.length;i>t&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},r.LOD.prototype.raycast=function(){var e=new r.Vector3
return function(t,i){e.setFromMatrixPosition(this.matrixWorld)
var n=t.ray.origin.distanceTo(e)
this.getObjectForDistance(n).raycast(t,i)}}(),r.LOD.prototype.update=function(){var e=new r.Vector3,t=new r.Vector3
return function(i){if(this.objects.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld)
var n=e.distanceTo(t)
this.objects[0].object.visible=!0
for(var r=1,a=this.objects.length;a>r&&n>=this.objects[r].distance;r++)this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0
for(;a>r;r++)this.objects[r].object.visible=!1}}}(),r.LOD.prototype.clone=function(e){void 0===e&&(e=new r.LOD),r.Object3D.prototype.clone.call(this,e)
for(var t=0,i=this.objects.length;i>t;t++){var n=this.objects[t].object.clone()
n.visible=0===t,e.addLevel(n,this.objects[t].distance)}return e},r.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),i=new Float32Array([0,0,1,0,1,1,0,1]),n=new r.BufferGeometry
return n.addAttribute("index",new r.BufferAttribute(e,1)),n.addAttribute("position",new r.BufferAttribute(t,3)),n.addAttribute("uv",new r.BufferAttribute(i,2)),function(e){r.Object3D.call(this),this.type="Sprite",this.geometry=n,this.material=void 0!==e?e:new r.SpriteMaterial}}(),r.Sprite.prototype=Object.create(r.Object3D.prototype),r.Sprite.prototype.constructor=r.Sprite,r.Sprite.prototype.raycast=function(){var e=new r.Vector3
return function(t,i){e.setFromMatrixPosition(this.matrixWorld)
var n=t.ray.distanceToPoint(e)
n>this.scale.x||i.push({distance:n,point:this.position,face:null,object:this})}}(),r.Sprite.prototype.clone=function(e){return void 0===e&&(e=new r.Sprite(this.material)),r.Object3D.prototype.clone.call(this,e),e},r.Particle=r.Sprite,r.LensFlare=function(e,t,i,n,a){r.Object3D.call(this),this.lensFlares=[],this.positionScreen=new r.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,i,n,a)},r.LensFlare.prototype=Object.create(r.Object3D.prototype),r.LensFlare.prototype.constructor=r.LensFlare,r.LensFlare.prototype.add=function(e,t,i,n,a,o){void 0===t&&(t=-1),void 0===i&&(i=0),void 0===o&&(o=1),void 0===a&&(a=new r.Color(16777215)),void 0===n&&(n=r.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:a,blending:n})},r.LensFlare.prototype.updateLensFlares=function(){var e,t,i=this.lensFlares.length,n=2*-this.positionScreen.x,r=2*-this.positionScreen.y
for(e=0;i>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+n*t.distance,t.y=this.positionScreen.y+r*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},r.Scene=function(){r.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},r.Scene.prototype=Object.create(r.Object3D.prototype),r.Scene.prototype.constructor=r.Scene,r.Scene.prototype.clone=function(e){return void 0===e&&(e=new r.Scene),r.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},r.Fog=function(e,t,i){this.name="",this.color=new r.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3},r.Fog.prototype.clone=function(){return new r.Fog(this.color.getHex(),this.near,this.far)},r.FogExp2=function(e,t){this.name="",this.color=new r.Color(e),this.density=void 0!==t?t:25e-5},r.FogExp2.prototype.clone=function(){return new r.FogExp2(this.color.getHex(),this.density)},r.ShaderChunk={},r.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",r.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",r.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",r.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",r.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",r.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",r.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",r.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",r.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",r.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",r.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",r.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",r.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",r.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",r.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",r.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",r.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",r.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",r.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",r.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",r.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",r.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",r.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",r.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",r.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",r.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",r.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",r.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",r.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",r.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\n		vec4 envColor = texture2D( envMap, sampleUV );\n		\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		envColor.xyz *= envColor.xyz;\n\n	#endif\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		gl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",r.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",r.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",r.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",r.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",r.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",r.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",r.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",r.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",r.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",r.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",r.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",r.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",r.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",r.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",r.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",r.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",
r.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n",r.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",r.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",r.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",r.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",r.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",r.UniformsUtils={merge:function(e){for(var t={},i=0;i<e.length;i++){var n=this.clone(e[i])
for(var r in n)t[r]=n[r]}return t},clone:function(e){var t={}
for(var i in e){t[i]={}
for(var n in e[i]){var a=e[i][n]
a instanceof r.Color||a instanceof r.Vector2||a instanceof r.Vector3||a instanceof r.Vector4||a instanceof r.Matrix4||a instanceof r.Texture?t[i][n]=a.clone():a instanceof Array?t[i][n]=a.slice():t[i][n]=a}}return t}},r.UniformsLib={common:{diffuse:{type:"c",value:new r.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new r.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new r.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new r.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new r.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new r.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},r.ShaderLib={basic:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,r.UniformsLib.shadowmap]),vertexShader:[r.ShaderChunk.map_pars_vertex,r.ShaderChunk.lightmap_pars_vertex,r.ShaderChunk.envmap_pars_vertex,r.ShaderChunk.color_pars_vertex,r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.map_vertex,r.ShaderChunk.lightmap_vertex,r.ShaderChunk.color_vertex,r.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",r.ShaderChunk.morphnormal_vertex,r.ShaderChunk.skinnormal_vertex,r.ShaderChunk.defaultnormal_vertex,"	#endif",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.worldpos_vertex,r.ShaderChunk.envmap_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_pars_fragment,r.ShaderChunk.alphamap_pars_fragment,r.ShaderChunk.lightmap_pars_fragment,r.ShaderChunk.envmap_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.specularmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( diffuse, opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_fragment,r.ShaderChunk.alphamap_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.specularmap_fragment,r.ShaderChunk.lightmap_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.envmap_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.linear_to_gamma_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,r.UniformsLib.lights,r.UniformsLib.shadowmap,{ambient:{type:"c",value:new r.Color(16777215)},emissive:{type:"c",value:new r.Color(0)},wrapRGB:{type:"v3",value:new r.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",r.ShaderChunk.map_pars_vertex,r.ShaderChunk.lightmap_pars_vertex,r.ShaderChunk.envmap_pars_vertex,r.ShaderChunk.lights_lambert_pars_vertex,r.ShaderChunk.color_pars_vertex,r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.map_vertex,r.ShaderChunk.lightmap_vertex,r.ShaderChunk.color_vertex,r.ShaderChunk.morphnormal_vertex,r.ShaderChunk.skinbase_vertex,r.ShaderChunk.skinnormal_vertex,r.ShaderChunk.defaultnormal_vertex,r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.worldpos_vertex,r.ShaderChunk.envmap_vertex,r.ShaderChunk.lights_lambert_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_pars_fragment,r.ShaderChunk.alphamap_pars_fragment,r.ShaderChunk.lightmap_pars_fragment,r.ShaderChunk.envmap_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.specularmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_fragment,r.ShaderChunk.alphamap_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			gl_FragColor.xyz *= vLightFront;","		else","			gl_FragColor.xyz *= vLightBack;","	#else","		gl_FragColor.xyz *= vLightFront;","	#endif",r.ShaderChunk.lightmap_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.envmap_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.linear_to_gamma_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.bump,r.UniformsLib.normalmap,r.UniformsLib.fog,r.UniformsLib.lights,r.UniformsLib.shadowmap,{ambient:{type:"c",value:new r.Color(16777215)},emissive:{type:"c",value:new r.Color(0)},specular:{type:"c",value:new r.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new r.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",r.ShaderChunk.map_pars_vertex,r.ShaderChunk.lightmap_pars_vertex,r.ShaderChunk.envmap_pars_vertex,r.ShaderChunk.lights_phong_pars_vertex,r.ShaderChunk.color_pars_vertex,r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.map_vertex,r.ShaderChunk.lightmap_vertex,r.ShaderChunk.color_vertex,r.ShaderChunk.morphnormal_vertex,r.ShaderChunk.skinbase_vertex,r.ShaderChunk.skinnormal_vertex,r.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",r.ShaderChunk.worldpos_vertex,r.ShaderChunk.envmap_vertex,r.ShaderChunk.lights_phong_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_pars_fragment,r.ShaderChunk.alphamap_pars_fragment,r.ShaderChunk.lightmap_pars_fragment,r.ShaderChunk.envmap_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.lights_phong_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.bumpmap_pars_fragment,r.ShaderChunk.normalmap_pars_fragment,r.ShaderChunk.specularmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_fragment,r.ShaderChunk.alphamap_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.specularmap_fragment,r.ShaderChunk.lights_phong_fragment,r.ShaderChunk.lightmap_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.envmap_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.linear_to_gamma_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:r.UniformsUtils.merge([r.UniformsLib.particle,r.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",r.ShaderChunk.color_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.worldpos_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_particle_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( psColor, opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_particle_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",r.ShaderChunk.color_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	gl_FragColor = vec4( diffuse, opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",r.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",r.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",r.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);","sampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",r.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.skinbase_vertex,r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[r.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",r.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")}},r.WebGLRenderer=function(e){function t(e){e.__webglVertexBuffer=Oe.createBuffer(),e.__webglColorBuffer=Oe.createBuffer(),Ve.info.memory.geometries++}function i(e){e.__webglVertexBuffer=Oe.createBuffer(),e.__webglColorBuffer=Oe.createBuffer(),e.__webglLineDistanceBuffer=Oe.createBuffer(),Ve.info.memory.geometries++}function n(e){e.__webglVertexBuffer=Oe.createBuffer(),e.__webglNormalBuffer=Oe.createBuffer(),e.__webglTangentBuffer=Oe.createBuffer(),e.__webglColorBuffer=Oe.createBuffer(),e.__webglUVBuffer=Oe.createBuffer(),e.__webglUV2Buffer=Oe.createBuffer(),e.__webglSkinIndicesBuffer=Oe.createBuffer(),e.__webglSkinWeightsBuffer=Oe.createBuffer(),e.__webglFaceBuffer=Oe.createBuffer(),e.__webglLineBuffer=Oe.createBuffer()
var t=e.numMorphTargets
if(t){e.__webglMorphTargetsBuffers=[]
for(var i=0,n=t;n>i;i++)e.__webglMorphTargetsBuffers.push(Oe.createBuffer())}var r=e.numMorphNormals
if(r){e.__webglMorphNormalsBuffers=[]
for(var i=0,n=r;n>i;i++)e.__webglMorphNormalsBuffers.push(Oe.createBuffer())}Ve.info.memory.geometries++}function a(e){var t=e.geometry,i=e.material,n=t.vertices.length
if(i.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[])
for(var r in i.attributes){var a=i.attributes[r]
if(!a.__webglInitialized||a.createUniqueBuffers){a.__webglInitialized=!0
var o=1
"v2"===a.type?o=2:"v3"===a.type?o=3:"v4"===a.type?o=4:"c"===a.type&&(o=3),a.size=o,a.array=new Float32Array(n*o),a.buffer=Oe.createBuffer(),a.buffer.belongsToAttribute=r,a.needsUpdate=!0}t.__webglCustomAttributesList.push(a)}}}function o(e,t){var i=e.vertices.length
e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__sortArray=[],e.__webglParticleCount=i,a(t)}function s(e,t){var i=e.vertices.length
e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__lineDistanceArray=new Float32Array(1*i),e.__webglLineCount=i,a(t)}function h(e,t){var i=t.geometry,n=e.faces3,r=3*n.length,a=1*n.length,o=3*n.length,s=l(t,e)
e.__vertexArray=new Float32Array(3*r),e.__normalArray=new Float32Array(3*r),e.__colorArray=new Float32Array(3*r),e.__uvArray=new Float32Array(2*r),i.faceVertexUvs.length>1&&(e.__uv2Array=new Float32Array(2*r)),i.hasTangents&&(e.__tangentArray=new Float32Array(4*r)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*r),e.__skinWeightArray=new Float32Array(4*r))
var h=null!==wt.get("OES_element_index_uint")&&a>21845?Uint32Array:Uint16Array
e.__typeArray=h,e.__faceArray=new h(3*a),e.__lineArray=new h(2*o)
var c=e.numMorphTargets
if(c){e.__morphTargetsArrays=[]
for(var u=0,d=c;d>u;u++)e.__morphTargetsArrays.push(new Float32Array(3*r))}var p=e.numMorphNormals
if(p){e.__morphNormalsArrays=[]
for(var u=0,d=p;d>u;u++)e.__morphNormalsArrays.push(new Float32Array(3*r))}if(e.__webglFaceCount=3*a,e.__webglLineCount=2*o,s.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[])
for(var f in s.attributes){var m=s.attributes[f],g={}
for(var v in m)g[v]=m[v]
if(!g.__webglInitialized||g.createUniqueBuffers){g.__webglInitialized=!0
var y=1
"v2"===g.type?y=2:"v3"===g.type?y=3:"v4"===g.type?y=4:"c"===g.type&&(y=3),g.size=y,g.array=new Float32Array(r*y),g.buffer=Oe.createBuffer(),g.buffer.belongsToAttribute=f,m.needsUpdate=!0,g.__original=m}e.__webglCustomAttributesList.push(g)}}e.__inittedArrays=!0}function l(e,t){return e.material instanceof r.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function c(e){return e&&void 0!==e.shading&&e.shading===r.SmoothShading}function u(e,t,i){var n,r,a,o,s,h,l,c,u,d,p,f=e.vertices,m=f.length,g=e.colors,v=g.length,y=e.__vertexArray,w=e.__colorArray,b=(e.__sortArray,e.verticesNeedUpdate),x=(e.elementsNeedUpdate,e.colorsNeedUpdate),_=e.__webglCustomAttributesList
if(b){for(n=0;m>n;n++)a=f[n],o=3*n,y[o]=a.x,y[o+1]=a.y,y[o+2]=a.z
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglVertexBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,y,t)}if(x){for(r=0;v>r;r++)s=g[r],o=3*r,w[o]=s.r,w[o+1]=s.g,w[o+2]=s.b
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglColorBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,w,t)}if(_)for(h=0,l=_.length;l>h;h++){if(p=_[h],p.needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo))if(u=p.value.length,o=0,1===p.size)for(c=0;u>c;c++)p.array[c]=p.value[c]
else if(2===p.size)for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.x,p.array[o+1]=d.y,o+=2
else if(3===p.size)if("c"===p.type)for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.r,p.array[o+1]=d.g,p.array[o+2]=d.b,o+=3
else for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.x,p.array[o+1]=d.y,p.array[o+2]=d.z,o+=3
else if(4===p.size)for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.x,p.array[o+1]=d.y,p.array[o+2]=d.z,p.array[o+3]=d.w,o+=4
Oe.bindBuffer(Oe.ARRAY_BUFFER,p.buffer),Oe.bufferData(Oe.ARRAY_BUFFER,p.array,t),p.needsUpdate=!1}}function d(e,t){var i,n,r,a,o,s,h,l,c,u,d,p,f=e.vertices,m=e.colors,g=e.lineDistances,v=f.length,y=m.length,w=g.length,b=e.__vertexArray,x=e.__colorArray,_=e.__lineDistanceArray,k=e.verticesNeedUpdate,M=e.colorsNeedUpdate,S=e.lineDistancesNeedUpdate,T=e.__webglCustomAttributesList
if(k){for(i=0;v>i;i++)a=f[i],o=3*i,b[o]=a.x,b[o+1]=a.y,b[o+2]=a.z
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglVertexBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,b,t)}if(M){for(n=0;y>n;n++)s=m[n],o=3*n,x[o]=s.r,x[o+1]=s.g,x[o+2]=s.b
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglColorBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,x,t)}if(S){for(r=0;w>r;r++)_[r]=g[r]
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,_,t)}if(T)for(h=0,l=T.length;l>h;h++)if(p=T[h],p.needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo)){if(o=0,u=p.value.length,1===p.size)for(c=0;u>c;c++)p.array[c]=p.value[c]
else if(2===p.size)for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.x,p.array[o+1]=d.y,o+=2
else if(3===p.size)if("c"===p.type)for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.r,p.array[o+1]=d.g,p.array[o+2]=d.b,o+=3
else for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.x,p.array[o+1]=d.y,p.array[o+2]=d.z,o+=3
else if(4===p.size)for(c=0;u>c;c++)d=p.value[c],p.array[o]=d.x,p.array[o+1]=d.y,p.array[o+2]=d.z,p.array[o+3]=d.w,o+=4
Oe.bindBuffer(Oe.ARRAY_BUFFER,p.buffer),Oe.bufferData(Oe.ARRAY_BUFFER,p.array,t),p.needsUpdate=!1}}function p(e,t,i,n,a){if(e.__inittedArrays){var o,s,h,l,u,d,p,f,m,g,v,y,w,b,x,_,k,M,S,T,C,E,A,L,P,R,F,D,B,O,V,z,U,N,I,j,H,G,q,W,X,Y,K=c(a),Z=0,Q=0,$=0,J=0,ee=0,te=0,ie=0,ne=0,re=0,ae=0,oe=0,se=0,he=0,le=e.__vertexArray,ce=e.__uvArray,ue=e.__uv2Array,de=e.__normalArray,pe=e.__tangentArray,fe=e.__colorArray,me=e.__skinIndexArray,ge=e.__skinWeightArray,ve=e.__morphTargetsArrays,ye=e.__morphNormalsArrays,we=e.__webglCustomAttributesList,be=e.__faceArray,xe=e.__lineArray,_e=t.geometry,ke=_e.verticesNeedUpdate,Me=_e.elementsNeedUpdate,Se=_e.uvsNeedUpdate,Te=_e.normalsNeedUpdate,Ce=_e.tangentsNeedUpdate,Ee=_e.colorsNeedUpdate,Ae=_e.morphTargetsNeedUpdate,Le=_e.vertices,Pe=e.faces3,Re=_e.faces,Fe=_e.faceVertexUvs[0],De=_e.faceVertexUvs[1],Be=(_e.colors,_e.skinIndices),Ve=_e.skinWeights,ze=_e.morphTargets,Ue=_e.morphNormals
if(ke){for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],y=Le[l.a],w=Le[l.b],b=Le[l.c],le[Q]=y.x,le[Q+1]=y.y,le[Q+2]=y.z,le[Q+3]=w.x,le[Q+4]=w.y,le[Q+5]=w.z,le[Q+6]=b.x,le[Q+7]=b.y,le[Q+8]=b.z,Q+=9
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglVertexBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,le,i)}if(Ae)for(I=0,j=ze.length;j>I;I++){for(oe=0,o=0,s=Pe.length;s>o;o++)q=Pe[o],l=Re[q],y=ze[I].vertices[l.a],w=ze[I].vertices[l.b],b=ze[I].vertices[l.c],H=ve[I],H[oe]=y.x,H[oe+1]=y.y,H[oe+2]=y.z,H[oe+3]=w.x,H[oe+4]=w.y,H[oe+5]=w.z,H[oe+6]=b.x,H[oe+7]=b.y,H[oe+8]=b.z,a.morphNormals&&(K?(W=Ue[I].vertexNormals[q],M=W.a,S=W.b,T=W.c):(M=Ue[I].faceNormals[q],S=M,T=M),G=ye[I],G[oe]=M.x,G[oe+1]=M.y,G[oe+2]=M.z,G[oe+3]=S.x,G[oe+4]=S.y,G[oe+5]=S.z,G[oe+6]=T.x,G[oe+7]=T.y,G[oe+8]=T.z),oe+=9
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[I]),Oe.bufferData(Oe.ARRAY_BUFFER,ve[I],i),a.morphNormals&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[I]),Oe.bufferData(Oe.ARRAY_BUFFER,ye[I],i))}if(Ve.length){for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],L=Ve[l.a],P=Ve[l.b],R=Ve[l.c],ge[ae]=L.x,ge[ae+1]=L.y,ge[ae+2]=L.z,ge[ae+3]=L.w,ge[ae+4]=P.x,ge[ae+5]=P.y,ge[ae+6]=P.z,ge[ae+7]=P.w,ge[ae+8]=R.x,ge[ae+9]=R.y,ge[ae+10]=R.z,ge[ae+11]=R.w,F=Be[l.a],D=Be[l.b],B=Be[l.c],me[ae]=F.x,me[ae+1]=F.y,me[ae+2]=F.z,me[ae+3]=F.w,me[ae+4]=D.x,me[ae+5]=D.y,me[ae+6]=D.z,me[ae+7]=D.w,me[ae+8]=B.x,me[ae+9]=B.y,me[ae+10]=B.z,me[ae+11]=B.w,ae+=12
ae>0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,me,i),Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,ge,i))}if(Ee){for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],p=l.vertexColors,f=l.color,3===p.length&&a.vertexColors===r.VertexColors?(C=p[0],E=p[1],A=p[2]):(C=f,E=f,A=f),fe[re]=C.r,fe[re+1]=C.g,fe[re+2]=C.b,fe[re+3]=E.r,fe[re+4]=E.g,fe[re+5]=E.b,fe[re+6]=A.r,fe[re+7]=A.g,fe[re+8]=A.b,re+=9
re>0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglColorBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,fe,i))}if(Ce&&_e.hasTangents){for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],m=l.vertexTangents,x=m[0],_=m[1],k=m[2],pe[ie]=x.x,pe[ie+1]=x.y,pe[ie+2]=x.z,pe[ie+3]=x.w,pe[ie+4]=_.x,pe[ie+5]=_.y,pe[ie+6]=_.z,pe[ie+7]=_.w,pe[ie+8]=k.x,pe[ie+9]=k.y,pe[ie+10]=k.z,pe[ie+11]=k.w,ie+=12
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglTangentBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,pe,i)}if(Te){for(o=0,s=Pe.length;s>o;o++)if(l=Re[Pe[o]],u=l.vertexNormals,d=l.normal,3===u.length&&K)for(O=0;3>O;O++)z=u[O],de[te]=z.x,de[te+1]=z.y,de[te+2]=z.z,te+=3
else for(O=0;3>O;O++)de[te]=d.x,de[te+1]=d.y,de[te+2]=d.z,te+=3
Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglNormalBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,de,i)}if(Se&&Fe){for(o=0,s=Pe.length;s>o;o++)if(h=Pe[o],g=Fe[h],void 0!==g)for(O=0;3>O;O++)U=g[O],ce[$]=U.x,ce[$+1]=U.y,$+=2
$>0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglUVBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,ce,i))}if(Se&&De){for(o=0,s=Pe.length;s>o;o++)if(h=Pe[o],v=De[h],void 0!==v)for(O=0;3>O;O++)N=v[O],ue[J]=N.x,ue[J+1]=N.y,J+=2
J>0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglUV2Buffer),Oe.bufferData(Oe.ARRAY_BUFFER,ue,i))}if(Me){for(o=0,s=Pe.length;s>o;o++)be[ee]=Z,be[ee+1]=Z+1,be[ee+2]=Z+2,ee+=3,xe[ne]=Z,xe[ne+1]=Z+1,xe[ne+2]=Z,xe[ne+3]=Z+2,xe[ne+4]=Z+1,xe[ne+5]=Z+2,ne+=6,Z+=3
Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Oe.bufferData(Oe.ELEMENT_ARRAY_BUFFER,be,i),Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Oe.bufferData(Oe.ELEMENT_ARRAY_BUFFER,xe,i)}if(we)for(O=0,V=we.length;V>O;O++)if(Y=we[O],Y.__original.needsUpdate){if(se=0,he=0,1===Y.size){if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],Y.array[se]=Y.value[l.a],Y.array[se+1]=Y.value[l.b],Y.array[se+2]=Y.value[l.c],se+=3
else if("faces"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)X=Y.value[Pe[o]],Y.array[se]=X,Y.array[se+1]=X,Y.array[se+2]=X,se+=3}else if(2===Y.size){if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],y=Y.value[l.a],w=Y.value[l.b],b=Y.value[l.c],Y.array[se]=y.x,Y.array[se+1]=y.y,Y.array[se+2]=w.x,Y.array[se+3]=w.y,Y.array[se+4]=b.x,Y.array[se+5]=b.y,se+=6
else if("faces"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)X=Y.value[Pe[o]],y=X,w=X,b=X,Y.array[se]=y.x,Y.array[se+1]=y.y,Y.array[se+2]=w.x,Y.array[se+3]=w.y,Y.array[se+4]=b.x,Y.array[se+5]=b.y,se+=6}else if(3===Y.size){var Ne
if(Ne="c"===Y.type?["r","g","b"]:["x","y","z"],void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],y=Y.value[l.a],w=Y.value[l.b],b=Y.value[l.c],Y.array[se]=y[Ne[0]],Y.array[se+1]=y[Ne[1]],Y.array[se+2]=y[Ne[2]],Y.array[se+3]=w[Ne[0]],Y.array[se+4]=w[Ne[1]],Y.array[se+5]=w[Ne[2]],Y.array[se+6]=b[Ne[0]],Y.array[se+7]=b[Ne[1]],Y.array[se+8]=b[Ne[2]],se+=9
else if("faces"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)X=Y.value[Pe[o]],y=X,w=X,b=X,Y.array[se]=y[Ne[0]],Y.array[se+1]=y[Ne[1]],Y.array[se+2]=y[Ne[2]],Y.array[se+3]=w[Ne[0]],Y.array[se+4]=w[Ne[1]],Y.array[se+5]=w[Ne[2]],Y.array[se+6]=b[Ne[0]],Y.array[se+7]=b[Ne[1]],Y.array[se+8]=b[Ne[2]],se+=9
else if("faceVertices"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)X=Y.value[Pe[o]],y=X[0],w=X[1],b=X[2],Y.array[se]=y[Ne[0]],Y.array[se+1]=y[Ne[1]],Y.array[se+2]=y[Ne[2]],Y.array[se+3]=w[Ne[0]],Y.array[se+4]=w[Ne[1]],Y.array[se+5]=w[Ne[2]],Y.array[se+6]=b[Ne[0]],Y.array[se+7]=b[Ne[1]],Y.array[se+8]=b[Ne[2]],se+=9}else if(4===Y.size)if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)l=Re[Pe[o]],y=Y.value[l.a],w=Y.value[l.b],b=Y.value[l.c],Y.array[se]=y.x,Y.array[se+1]=y.y,Y.array[se+2]=y.z,Y.array[se+3]=y.w,Y.array[se+4]=w.x,Y.array[se+5]=w.y,Y.array[se+6]=w.z,Y.array[se+7]=w.w,Y.array[se+8]=b.x,Y.array[se+9]=b.y,Y.array[se+10]=b.z,Y.array[se+11]=b.w,se+=12
else if("faces"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)X=Y.value[Pe[o]],y=X,w=X,b=X,Y.array[se]=y.x,Y.array[se+1]=y.y,Y.array[se+2]=y.z,Y.array[se+3]=y.w,Y.array[se+4]=w.x,Y.array[se+5]=w.y,Y.array[se+6]=w.z,Y.array[se+7]=w.w,Y.array[se+8]=b.x,Y.array[se+9]=b.y,Y.array[se+10]=b.z,Y.array[se+11]=b.w,se+=12
else if("faceVertices"===Y.boundTo)for(o=0,s=Pe.length;s>o;o++)X=Y.value[Pe[o]],y=X[0],w=X[1],b=X[2],Y.array[se]=y.x,Y.array[se+1]=y.y,Y.array[se+2]=y.z,Y.array[se+3]=y.w,Y.array[se+4]=w.x,Y.array[se+5]=w.y,Y.array[se+6]=w.z,Y.array[se+7]=w.w,Y.array[se+8]=b.x,Y.array[se+9]=b.y,Y.array[se+10]=b.z,Y.array[se+11]=b.w,se+=12
Oe.bindBuffer(Oe.ARRAY_BUFFER,Y.buffer),Oe.bufferData(Oe.ARRAY_BUFFER,Y.array,i)}n&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function f(e,t,i,n){for(var r=i.attributes,a=t.attributes,o=t.attributesKeys,s=0,h=o.length;h>s;s++){var l=o[s],c=a[l]
if(c>=0){var u=r[l]
if(void 0!==u){var d=u.itemSize
Oe.bindBuffer(Oe.ARRAY_BUFFER,u.buffer),g(c),Oe.vertexAttribPointer(c,d,Oe.FLOAT,!1,0,n*d*4)}else void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[l].length?Oe.vertexAttrib2fv(c,e.defaultAttributeValues[l]):3===e.defaultAttributeValues[l].length&&Oe.vertexAttrib3fv(c,e.defaultAttributeValues[l]))}}v()}function m(){for(var e=0,t=lt.length;t>e;e++)lt[e]=0}function g(e){lt[e]=1,0===ct[e]&&(Oe.enableVertexAttribArray(e),ct[e]=1)}function v(){for(var e=0,t=ct.length;t>e;e++)ct[e]!==lt[e]&&(Oe.disableVertexAttribArray(e),ct[e]=0)}function y(e,t,i){var n=e.program.attributes
if(-1!==i.morphTargetBase&&n.position>=0?(Oe.bindBuffer(Oe.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[i.morphTargetBase]),g(n.position),Oe.vertexAttribPointer(n.position,3,Oe.FLOAT,!1,0,0)):n.position>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,t.__webglVertexBuffer),g(n.position),Oe.vertexAttribPointer(n.position,3,Oe.FLOAT,!1,0,0)),i.morphTargetForcedOrder.length)for(var r,a=0,o=i.morphTargetForcedOrder,s=i.morphTargetInfluences;a<e.numSupportedMorphTargets&&a<o.length;)r=n["morphTarget"+a],r>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[a]]),g(r),Oe.vertexAttribPointer(r,3,Oe.FLOAT,!1,0,0)),r=n["morphNormal"+a],r>=0&&e.morphNormals&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[a]]),g(r),Oe.vertexAttribPointer(r,3,Oe.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[a]=s[o[a]],a++
else{for(var h=[],s=i.morphTargetInfluences,l=0,c=s.length;c>l;l++){var u=s[l]
h.push([u,l])}h.length>e.numSupportedMorphTargets?(h.sort(x),h.length=e.numSupportedMorphTargets):h.length>e.numSupportedMorphNormals?h.sort(x):0===h.length&&h.push([0,0])
for(var r,a=0,d=e.numSupportedMorphTargets;d>a;a++)if(h[a]){var p=h[a][1]
r=n["morphTarget"+a],r>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[p]),g(r),Oe.vertexAttribPointer(r,3,Oe.FLOAT,!1,0,0)),r=n["morphNormal"+a],r>=0&&e.morphNormals&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[p]),g(r),Oe.vertexAttribPointer(r,3,Oe.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[a]=s[p]}else i.__webglMorphTargetInfluences[a]=0}null!==e.program.uniforms.morphTargetInfluences&&Oe.uniform1fv(e.program.uniforms.morphTargetInfluences,i.__webglMorphTargetInfluences)}function w(e,t){return e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function b(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function x(e,t){return t[0]-e[0]}function _(e){if(e.visible!==!1){if(e instanceof r.Scene||e instanceof r.Group);else if(C(e),e instanceof r.Light)Ae.push(e)
else if(e instanceof r.Sprite)De.push(e)
else if(e instanceof r.LensFlare)Be.push(e)
else{var t=Le[e.id]
if(t&&(e.frustumCulled===!1||ut.intersectsObject(e)===!0))for(var i=0,n=t.length;n>i;i++){var a=t[i]
T(a),a.render=!0,Ve.sortObjects===!0&&(pt.setFromMatrixPosition(e.matrixWorld),pt.applyProjection(dt),a.z=pt.z)}}for(var i=0,n=e.children.length;n>i;i++)_(e.children[i])}}function k(e,t,i,n,a,o){for(var s,h=0,l=e.length;l>h;h++){var c=e[h],u=c.object,d=c.buffer
if($(u,t),o)s=o
else{if(s=c.material,!s)continue
a&&Ve.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),Ve.setDepthTest(s.depthTest),Ve.setDepthWrite(s.depthWrite),ne(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}Ve.setMaterialFaces(s),d instanceof r.BufferGeometry?Ve.renderBufferDirect(t,i,n,s,d,u):Ve.renderBuffer(t,i,n,s,d,u)}}function M(e,t,i,n,r,a,o){for(var s,h=0,l=e.length;l>h;h++){var c=e[h],u=c.object
if(u.visible){if(o)s=o
else{if(s=c[t],!s)continue
a&&Ve.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),Ve.setDepthTest(s.depthTest),Ve.setDepthWrite(s.depthWrite),ne(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}Ve.renderImmediateObject(i,n,r,s,u)}}}function S(e){var t=e.object,i=t.material
i.transparent?(e.transparent=i,e.opaque=null):(e.opaque=i,e.transparent=null)}function T(e){var t=e.object,i=e.buffer,n=t.geometry,a=t.material
if(a instanceof r.MeshFaceMaterial){var o=n instanceof r.BufferGeometry?0:i.materialIndex
a=a.materials[o],e.material=a,a.transparent?Fe.push(e):Re.push(e)}else a&&(e.material=a,a.transparent?Fe.push(e):Re.push(e))}function C(e){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new r.Matrix4,e._normalMatrix=new r.Matrix3,e.addEventListener("removed",zt))
var n=e.geometry
if(void 0===n||void 0===n.__webglInit&&(n.__webglInit=!0,n.addEventListener("dispose",Ut),n instanceof r.BufferGeometry?Ve.info.memory.geometries++:e instanceof r.Mesh?A(e,n):e instanceof r.Line?void 0===n.__webglVertexBuffer&&(i(n),s(n,e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0,n.lineDistancesNeedUpdate=!0):e instanceof r.PointCloud&&void 0===n.__webglVertexBuffer&&(t(n),o(n,e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0)),void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof r.Mesh){if(n instanceof r.BufferGeometry)L(Le,n,e)
else if(n instanceof r.Geometry)for(var a=Yt[n.id],h=0,l=a.length;l>h;h++)L(Le,a[h],e)}else e instanceof r.Line||e instanceof r.PointCloud?L(Le,n,e):(e instanceof r.ImmediateRenderObject||e.immediateRenderCallback)&&P(Pe,e)}function E(e,t){for(var i,n,r=wt.get("OES_element_index_uint")?4294967296:65535,a={},o=e.morphTargets.length,s=e.morphNormals.length,h={},l=[],c=0,u=e.faces.length;u>c;c++){var d=e.faces[c],p=t?d.materialIndex:0
p in a||(a[p]={hash:p,counter:0}),i=a[p].hash+"_"+a[p].counter,i in h||(n={id:Kt++,faces3:[],materialIndex:p,vertices:0,numMorphTargets:o,numMorphNormals:s},h[i]=n,l.push(n)),h[i].vertices+3>r&&(a[p].counter+=1,i=a[p].hash+"_"+a[p].counter,i in h||(n={id:Kt++,faces3:[],materialIndex:p,vertices:0,numMorphTargets:o,numMorphNormals:s},h[i]=n,l.push(n))),h[i].faces3.push(c),h[i].vertices+=3}return l}function A(e,t){var i=e.material,a=!1;(void 0===Yt[t.id]||t.groupsNeedUpdate===!0)&&(delete Le[e.id],Yt[t.id]=E(t,i instanceof r.MeshFaceMaterial),t.groupsNeedUpdate=!1)
for(var o=Yt[t.id],s=0,l=o.length;l>s;s++){var c=o[s]
void 0===c.__webglVertexBuffer?(n(c),h(c,e),t.verticesNeedUpdate=!0,t.morphTargetsNeedUpdate=!0,t.elementsNeedUpdate=!0,t.uvsNeedUpdate=!0,t.normalsNeedUpdate=!0,t.tangentsNeedUpdate=!0,t.colorsNeedUpdate=!0,a=!0):a=!1,(a||void 0===e.__webglActive)&&L(Le,c,e)}e.__webglActive=!0}function L(e,t,i){var n=i.id
e[n]=e[n]||[],e[n].push({id:n,buffer:t,object:i,material:null,z:0})}function P(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function R(e){var t=e.geometry
if(t instanceof r.BufferGeometry)for(var i=t.attributes,n=t.attributesKeys,a=0,o=n.length;o>a;a++){var s=n[a],c=i[s]
if(void 0===c.buffer&&(c.buffer=Oe.createBuffer(),c.needsUpdate=!0),c.needsUpdate===!0){var f="index"===s?Oe.ELEMENT_ARRAY_BUFFER:Oe.ARRAY_BUFFER
Oe.bindBuffer(f,c.buffer),Oe.bufferData(f,c.array,Oe.STATIC_DRAW),c.needsUpdate=!1}}else if(e instanceof r.Mesh){t.groupsNeedUpdate===!0&&A(e,t)
for(var m=Yt[t.id],a=0,g=m.length;g>a;a++){var v=m[a],y=l(e,v)
t.groupsNeedUpdate===!0&&h(v,e)
var w=y.attributes&&F(y);(t.verticesNeedUpdate||t.morphTargetsNeedUpdate||t.elementsNeedUpdate||t.uvsNeedUpdate||t.normalsNeedUpdate||t.colorsNeedUpdate||t.tangentsNeedUpdate||w)&&p(v,e,Oe.DYNAMIC_DRAW,!t.dynamic,y)}t.verticesNeedUpdate=!1,t.morphTargetsNeedUpdate=!1,t.elementsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.tangentsNeedUpdate=!1,y.attributes&&D(y)}else if(e instanceof r.Line){var y=l(e,t),w=y.attributes&&F(y);(t.verticesNeedUpdate||t.colorsNeedUpdate||t.lineDistancesNeedUpdate||w)&&d(t,Oe.DYNAMIC_DRAW),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,t.lineDistancesNeedUpdate=!1,y.attributes&&D(y)}else if(e instanceof r.PointCloud){var y=l(e,t),w=y.attributes&&F(y);(t.verticesNeedUpdate||t.colorsNeedUpdate||w)&&u(t,Oe.DYNAMIC_DRAW,e),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,y.attributes&&D(y)}}function F(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0
return!1}function D(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function B(e){e instanceof r.Mesh||e instanceof r.PointCloud||e instanceof r.Line?delete Le[e.id]:(e instanceof r.ImmediateRenderObject||e.immediateRenderCallback)&&O(Pe,e),delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive}function O(e,t){for(var i=e.length-1;i>=0;i--)e[i].object===t&&e.splice(i,1)}function V(e,t,i,n){e.addEventListener("dispose",jt)
var a=Zt[e.type]
if(a){var o=r.ShaderLib[a]
e.__webglShader={uniforms:r.UniformsUtils.clone(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}}else e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}
var s=fe(t),h=me(t),l=pe(n),c={precision:we,supportsVertexTextures:Tt,map:!!e.map,envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,combine:e.combine,vertexColors:e.vertexColors,fog:i,useFog:e.fog,fogExp:i instanceof r.FogExp2,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:Te,skinning:e.skinning,maxBones:l,useVertexTexture:Ct&&n&&n.skeleton&&n.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:Ve.maxMorphTargets,maxMorphNormals:Ve.maxMorphNormals,maxDirLights:s.directional,maxPointLights:s.point,maxSpotLights:s.spot,maxHemiLights:s.hemi,maxShadows:h,shadowMapEnabled:Ve.shadowMapEnabled&&n.receiveShadow&&h>0,shadowMapType:Ve.shadowMapType,shadowMapDebug:Ve.shadowMapDebug,shadowMapCascade:Ve.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===r.DoubleSide,flipSided:e.side===r.BackSide},u=[]
if(a?u.push(a):(u.push(e.fragmentShader),u.push(e.vertexShader)),void 0!==e.defines)for(var d in e.defines)u.push(d),u.push(e.defines[d])
for(var d in c)u.push(d),u.push(c[d])
for(var p,f=u.join(),m=0,g=ze.length;g>m;m++){var v=ze[m]
if(v.code===f){p=v,p.usedTimes++
break}}void 0===p&&(p=new r.WebGLProgram(Ve,f,e,c),ze.push(p),Ve.info.memory.programs=ze.length),e.program=p
var y=p.attributes
if(e.morphTargets){e.numSupportedMorphTargets=0
for(var w,b="morphTarget",x=0;x<Ve.maxMorphTargets;x++)w=b+x,y[w]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0
var w,b="morphNormal"
for(x=0;x<Ve.maxMorphNormals;x++)w=b+x,y[w]>=0&&e.numSupportedMorphNormals++}e.uniformsList=[]
for(var _ in e.__webglShader.uniforms){var k=e.program.uniforms[_]
k&&e.uniformsList.push([e.__webglShader.uniforms[_],k])}}function z(e,t,i,n,a){Ge=0,n.needsUpdate&&(n.program&&Xt(n),V(n,t,i,a),n.needsUpdate=!1),n.morphTargets&&(a.__webglMorphTargetInfluences||(a.__webglMorphTargetInfluences=new Float32Array(Ve.maxMorphTargets)))
var o=!1,s=!1,h=!1,l=n.program,c=l.uniforms,u=n.__webglShader.uniforms
if(l.id!==Ue&&(Oe.useProgram(l.program),Ue=l.id,o=!0,s=!0,h=!0),n.id!==Ie&&(-1===Ie&&(h=!0),Ie=n.id,s=!0),(o||e!==He)&&(Oe.uniformMatrix4fv(c.projectionMatrix,!1,e.projectionMatrix.elements),Te&&Oe.uniform1f(c.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==He&&(He=e),(n instanceof r.ShaderMaterial||n instanceof r.MeshPhongMaterial||n.envMap)&&null!==c.cameraPosition&&(pt.setFromMatrixPosition(e.matrixWorld),Oe.uniform3f(c.cameraPosition,pt.x,pt.y,pt.z)),(n instanceof r.MeshPhongMaterial||n instanceof r.MeshLambertMaterial||n instanceof r.MeshBasicMaterial||n instanceof r.ShaderMaterial||n.skinning)&&null!==c.viewMatrix&&Oe.uniformMatrix4fv(c.viewMatrix,!1,e.matrixWorldInverse.elements)),n.skinning)if(a.bindMatrix&&null!==c.bindMatrix&&Oe.uniformMatrix4fv(c.bindMatrix,!1,a.bindMatrix.elements),a.bindMatrixInverse&&null!==c.bindMatrixInverse&&Oe.uniformMatrix4fv(c.bindMatrixInverse,!1,a.bindMatrixInverse.elements),Ct&&a.skeleton&&a.skeleton.useVertexTexture){if(null!==c.boneTexture){var d=Z()
Oe.uniform1i(c.boneTexture,d),Ve.setTexture(a.skeleton.boneTexture,d)}null!==c.boneTextureWidth&&Oe.uniform1i(c.boneTextureWidth,a.skeleton.boneTextureWidth),null!==c.boneTextureHeight&&Oe.uniform1i(c.boneTextureHeight,a.skeleton.boneTextureHeight)}else a.skeleton&&a.skeleton.boneMatrices&&null!==c.boneGlobalMatrices&&Oe.uniformMatrix4fv(c.boneGlobalMatrices,!1,a.skeleton.boneMatrices)
return s&&(i&&n.fog&&H(u,i),(n instanceof r.MeshPhongMaterial||n instanceof r.MeshLambertMaterial||n.lights)&&(mt&&(h=!0,te(t),mt=!1),h?(W(u,gt),X(u,!0)):X(u,!1)),(n instanceof r.MeshBasicMaterial||n instanceof r.MeshLambertMaterial||n instanceof r.MeshPhongMaterial)&&U(u,n),n instanceof r.LineBasicMaterial?N(u,n):n instanceof r.LineDashedMaterial?(N(u,n),I(u,n)):n instanceof r.PointCloudMaterial?j(u,n):n instanceof r.MeshPhongMaterial?G(u,n):n instanceof r.MeshLambertMaterial?q(u,n):n instanceof r.MeshDepthMaterial?(u.mNear.value=e.near,u.mFar.value=e.far,u.opacity.value=n.opacity):n instanceof r.MeshNormalMaterial&&(u.opacity.value=n.opacity),a.receiveShadow&&!n._shadowPass&&Y(u,t),Q(n.uniformsList)),K(c,a),null!==c.modelMatrix&&Oe.uniformMatrix4fv(c.modelMatrix,!1,a.matrixWorld.elements),l}function U(e,t){e.opacity.value=t.opacity,Ve.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale))
var i
if(t.map?i=t.map:t.specularMap?i=t.specularMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.alphaMap&&(i=t.alphaMap),void 0!==i){var n=i.offset,a=i.repeat
e.offsetRepeat.value.set(n.x,n.y,a.x,a.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof r.WebGLRenderTargetCube?1:-1,Ve.gammaInput?e.reflectivity.value=t.reflectivity:e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function N(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function I(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function j(e,t){e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=ge.height/2,e.map.value=t.map}function H(e,t){e.fogColor.value=t.color,t instanceof r.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof r.FogExp2&&(e.fogDensity.value=t.density)}function G(e,t){e.shininess.value=t.shininess,Ve.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function q(e,t){Ve.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function W(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function X(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function Y(e,t){if(e.shadowMatrix)for(var i=0,n=0,a=t.length;a>n;n++){var o=t[n]
o.castShadow&&(o instanceof r.SpotLight||o instanceof r.DirectionalLight&&!o.shadowCascade)&&(e.shadowMap.value[i]=o.shadowMap,e.shadowMapSize.value[i]=o.shadowMapSize,e.shadowMatrix.value[i]=o.shadowMatrix,e.shadowDarkness.value[i]=o.shadowDarkness,e.shadowBias.value[i]=o.shadowBias,i++)}}function K(e,t){Oe.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&Oe.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}function Z(){var e=Ge
return e>=_t&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+_t),Ge+=1,e}function Q(e){for(var t,i,n,a=0,o=e.length;o>a;a++){var s=e[a][0]
if(s.needsUpdate!==!1){var h=s.type,l=s.value,c=e[a][1]
switch(h){case"1i":Oe.uniform1i(c,l)
break
case"1f":Oe.uniform1f(c,l)
break
case"2f":Oe.uniform2f(c,l[0],l[1])
break
case"3f":Oe.uniform3f(c,l[0],l[1],l[2])
break
case"4f":Oe.uniform4f(c,l[0],l[1],l[2],l[3])
break
case"1iv":Oe.uniform1iv(c,l)
break
case"3iv":Oe.uniform3iv(c,l)
break
case"1fv":Oe.uniform1fv(c,l)
break
case"2fv":Oe.uniform2fv(c,l)
break
case"3fv":Oe.uniform3fv(c,l)
break
case"4fv":Oe.uniform4fv(c,l)
break
case"Matrix3fv":Oe.uniformMatrix3fv(c,!1,l)
break
case"Matrix4fv":Oe.uniformMatrix4fv(c,!1,l)
break
case"i":Oe.uniform1i(c,l)
break
case"f":Oe.uniform1f(c,l)
break
case"v2":Oe.uniform2f(c,l.x,l.y)
break
case"v3":Oe.uniform3f(c,l.x,l.y,l.z)
break
case"v4":Oe.uniform4f(c,l.x,l.y,l.z,l.w)
break
case"c":Oe.uniform3f(c,l.r,l.g,l.b)
break
case"iv1":Oe.uniform1iv(c,l)
break
case"iv":Oe.uniform3iv(c,l)
break
case"fv1":Oe.uniform1fv(c,l)
break
case"fv":Oe.uniform3fv(c,l)
break
case"v2v":void 0===s._array&&(s._array=new Float32Array(2*l.length))
for(var u=0,d=l.length;d>u;u++)n=2*u,s._array[n]=l[u].x,s._array[n+1]=l[u].y
Oe.uniform2fv(c,s._array)
break
case"v3v":void 0===s._array&&(s._array=new Float32Array(3*l.length))
for(var u=0,d=l.length;d>u;u++)n=3*u,s._array[n]=l[u].x,s._array[n+1]=l[u].y,s._array[n+2]=l[u].z
Oe.uniform3fv(c,s._array)
break
case"v4v":void 0===s._array&&(s._array=new Float32Array(4*l.length))
for(var u=0,d=l.length;d>u;u++)n=4*u,s._array[n]=l[u].x,s._array[n+1]=l[u].y,s._array[n+2]=l[u].z,s._array[n+3]=l[u].w
Oe.uniform4fv(c,s._array)
break
case"m3":Oe.uniformMatrix3fv(c,!1,l.elements)
break
case"m3v":void 0===s._array&&(s._array=new Float32Array(9*l.length))
for(var u=0,d=l.length;d>u;u++)l[u].flattenToArrayOffset(s._array,9*u)
Oe.uniformMatrix3fv(c,!1,s._array)
break
case"m4":Oe.uniformMatrix4fv(c,!1,l.elements)
break
case"m4v":void 0===s._array&&(s._array=new Float32Array(16*l.length))
for(var u=0,d=l.length;d>u;u++)l[u].flattenToArrayOffset(s._array,16*u)
Oe.uniformMatrix4fv(c,!1,s._array)
break
case"t":if(t=l,i=Z(),Oe.uniform1i(c,i),!t)continue
t instanceof r.CubeTexture||t.image instanceof Array&&6===t.image.length?oe(t,i):t instanceof r.WebGLRenderTargetCube?se(t,i):Ve.setTexture(t,i)
break
case"tv":void 0===s._array&&(s._array=[])
for(var u=0,d=s.value.length;d>u;u++)s._array[u]=Z()
Oe.uniform1iv(c,s._array)
for(var u=0,d=s.value.length;d>u;u++)t=s.value[u],i=s._array[u],t&&Ve.setTexture(t,i)
break
default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+h)}}}}function $(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function J(e,t,i,n){e[t]=i.r*i.r*n,e[t+1]=i.g*i.g*n,e[t+2]=i.b*i.b*n}function ee(e,t,i,n){e[t]=i.r*n,e[t+1]=i.g*n,e[t+2]=i.b*n}function te(e){var t,i,n,a,o,s,h,l,c,u=0,d=0,p=0,f=gt,m=f.directional.colors,g=f.directional.positions,v=f.point.colors,y=f.point.positions,w=f.point.distances,b=f.spot.colors,x=f.spot.positions,_=f.spot.distances,k=f.spot.directions,M=f.spot.anglesCos,S=f.spot.exponents,T=f.hemi.skyColors,C=f.hemi.groundColors,E=f.hemi.positions,A=0,L=0,P=0,R=0,F=0,D=0,B=0,O=0,V=0,z=0,U=0,N=0
for(t=0,i=e.length;i>t;t++)if(n=e[t],!n.onlyShadow)if(a=n.color,h=n.intensity,c=n.distance,n instanceof r.AmbientLight){if(!n.visible)continue
Ve.gammaInput?(u+=a.r*a.r,d+=a.g*a.g,p+=a.b*a.b):(u+=a.r,d+=a.g,p+=a.b)}else if(n instanceof r.DirectionalLight){if(F+=1,!n.visible)continue
ft.setFromMatrixPosition(n.matrixWorld),pt.setFromMatrixPosition(n.target.matrixWorld),ft.sub(pt),ft.normalize(),V=3*A,g[V]=ft.x,g[V+1]=ft.y,g[V+2]=ft.z,Ve.gammaInput?J(m,V,a,h*h):ee(m,V,a,h),A+=1}else if(n instanceof r.PointLight){if(D+=1,!n.visible)continue
z=3*L,Ve.gammaInput?J(v,z,a,h*h):ee(v,z,a,h),pt.setFromMatrixPosition(n.matrixWorld),y[z]=pt.x,y[z+1]=pt.y,y[z+2]=pt.z,w[L]=c,L+=1}else if(n instanceof r.SpotLight){if(B+=1,!n.visible)continue
U=3*P,Ve.gammaInput?J(b,U,a,h*h):ee(b,U,a,h),ft.setFromMatrixPosition(n.matrixWorld),x[U]=ft.x,x[U+1]=ft.y,x[U+2]=ft.z,_[P]=c,pt.setFromMatrixPosition(n.target.matrixWorld),ft.sub(pt),ft.normalize(),k[U]=ft.x,k[U+1]=ft.y,k[U+2]=ft.z,M[P]=Math.cos(n.angle),S[P]=n.exponent,P+=1}else if(n instanceof r.HemisphereLight){if(O+=1,!n.visible)continue
ft.setFromMatrixPosition(n.matrixWorld),ft.normalize(),N=3*R,E[N]=ft.x,E[N+1]=ft.y,E[N+2]=ft.z,o=n.color,s=n.groundColor,Ve.gammaInput?(l=h*h,J(T,N,o,l),J(C,N,s,l)):(ee(T,N,o,h),ee(C,N,s,h)),R+=1}for(t=3*A,i=Math.max(m.length,3*F);i>t;t++)m[t]=0
for(t=3*L,i=Math.max(v.length,3*D);i>t;t++)v[t]=0
for(t=3*P,i=Math.max(b.length,3*B);i>t;t++)b[t]=0
for(t=3*R,i=Math.max(T.length,3*O);i>t;t++)T[t]=0
for(t=3*R,i=Math.max(C.length,3*O);i>t;t++)C[t]=0
f.directional.length=A,f.point.length=L,f.spot.length=P,f.hemi.length=R,f.ambient[0]=u,f.ambient[1]=d,f.ambient[2]=p}function ie(e){e*=ye,e!==it&&(Oe.lineWidth(e),it=e)}function ne(e,t,i){Je!==e&&(e?Oe.enable(Oe.POLYGON_OFFSET_FILL):Oe.disable(Oe.POLYGON_OFFSET_FILL),Je=e),!e||et===t&&tt===i||(Oe.polygonOffset(t,i),et=t,tt=i)}function re(e,t,i){var n
i?(Oe.texParameteri(e,Oe.TEXTURE_WRAP_S,de(t.wrapS)),Oe.texParameteri(e,Oe.TEXTURE_WRAP_T,de(t.wrapT)),Oe.texParameteri(e,Oe.TEXTURE_MAG_FILTER,de(t.magFilter)),Oe.texParameteri(e,Oe.TEXTURE_MIN_FILTER,de(t.minFilter))):(Oe.texParameteri(e,Oe.TEXTURE_WRAP_S,Oe.CLAMP_TO_EDGE),Oe.texParameteri(e,Oe.TEXTURE_WRAP_T,Oe.CLAMP_TO_EDGE),(t.wrapS!==r.ClampToEdgeWrapping||t.wrapT!==r.ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( "+t.sourceFile+" )"),Oe.texParameteri(e,Oe.TEXTURE_MAG_FILTER,ue(t.magFilter)),Oe.texParameteri(e,Oe.TEXTURE_MIN_FILTER,ue(t.minFilter)),t.minFilter!==r.NearestFilter&&t.minFilter!==r.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( "+t.sourceFile+" )")),n=wt.get("EXT_texture_filter_anisotropic"),n&&t.type!==r.FloatType&&(t.anisotropy>1||t.__oldAnisotropy)&&(Oe.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Ve.getMaxAnisotropy())),t.__oldAnisotropy=t.anisotropy)}function ae(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height),n=document.createElement("canvas")
n.width=Math.floor(e.width*i),n.height=Math.floor(e.height*i)
var r=n.getContext("2d")
return r.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.log("THREE.WebGLRenderer:",e,"is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height+"."),n}return e}function oe(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",Nt),e.image.__webglTextureCube=Oe.createTexture(),Ve.info.memory.textures++),Oe.activeTexture(Oe.TEXTURE0+t),Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,e.flipY)
for(var i=e instanceof r.CompressedTexture,n=e.image[0]instanceof r.DataTexture,a=[],o=0;6>o;o++)!Ve.autoScaleCubemaps||i||n?a[o]=n?e.image[o].image:e.image[o]:a[o]=ae(e.image[o],St)
var s=a[0],h=r.Math.isPowerOfTwo(s.width)&&r.Math.isPowerOfTwo(s.height),l=de(e.format),c=de(e.type)
re(Oe.TEXTURE_CUBE_MAP,e,h)
for(var o=0;6>o;o++)if(i)for(var u,d=a[o].mipmaps,p=0,f=d.length;f>p;p++)u=d[p],e.format!==r.RGBAFormat&&e.format!==r.RGBFormat?Rt().indexOf(l)>-1?Oe.compressedTexImage2D(Oe.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,l,u.width,u.height,0,u.data):console.warn("Attempt to load unsupported compressed texture format"):Oe.texImage2D(Oe.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,l,u.width,u.height,0,l,c,u.data)
else n?Oe.texImage2D(Oe.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,a[o].width,a[o].height,0,l,c,a[o].data):Oe.texImage2D(Oe.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,l,c,a[o])
e.generateMipmaps&&h&&Oe.generateMipmap(Oe.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Oe.activeTexture(Oe.TEXTURE0+t),Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function se(e,t){Oe.activeTexture(Oe.TEXTURE0+t),Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,e.__webglTexture)}function he(e,t,i){Oe.bindFramebuffer(Oe.FRAMEBUFFER,e),Oe.framebufferTexture2D(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,i,t.__webglTexture,0)}function le(e,t){Oe.bindRenderbuffer(Oe.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Oe.renderbufferStorage(Oe.RENDERBUFFER,Oe.DEPTH_COMPONENT16,t.width,t.height),Oe.framebufferRenderbuffer(Oe.FRAMEBUFFER,Oe.DEPTH_ATTACHMENT,Oe.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Oe.renderbufferStorage(Oe.RENDERBUFFER,Oe.DEPTH_STENCIL,t.width,t.height),Oe.framebufferRenderbuffer(Oe.FRAMEBUFFER,Oe.DEPTH_STENCIL_ATTACHMENT,Oe.RENDERBUFFER,e)):Oe.renderbufferStorage(Oe.RENDERBUFFER,Oe.RGBA4,t.width,t.height)}function ce(e){e instanceof r.WebGLRenderTargetCube?(Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,e.__webglTexture),Oe.generateMipmap(Oe.TEXTURE_CUBE_MAP),Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,null)):(Oe.bindTexture(Oe.TEXTURE_2D,e.__webglTexture),Oe.generateMipmap(Oe.TEXTURE_2D),Oe.bindTexture(Oe.TEXTURE_2D,null))}function ue(e){return e===r.NearestFilter||e===r.NearestMipMapNearestFilter||e===r.NearestMipMapLinearFilter?Oe.NEAREST:Oe.LINEAR}function de(e){var t
if(e===r.RepeatWrapping)return Oe.REPEAT
if(e===r.ClampToEdgeWrapping)return Oe.CLAMP_TO_EDGE
if(e===r.MirroredRepeatWrapping)return Oe.MIRRORED_REPEAT
if(e===r.NearestFilter)return Oe.NEAREST
if(e===r.NearestMipMapNearestFilter)return Oe.NEAREST_MIPMAP_NEAREST
if(e===r.NearestMipMapLinearFilter)return Oe.NEAREST_MIPMAP_LINEAR
if(e===r.LinearFilter)return Oe.LINEAR
if(e===r.LinearMipMapNearestFilter)return Oe.LINEAR_MIPMAP_NEAREST
if(e===r.LinearMipMapLinearFilter)return Oe.LINEAR_MIPMAP_LINEAR
if(e===r.UnsignedByteType)return Oe.UNSIGNED_BYTE
if(e===r.UnsignedShort4444Type)return Oe.UNSIGNED_SHORT_4_4_4_4
if(e===r.UnsignedShort5551Type)return Oe.UNSIGNED_SHORT_5_5_5_1
if(e===r.UnsignedShort565Type)return Oe.UNSIGNED_SHORT_5_6_5
if(e===r.ByteType)return Oe.BYTE
if(e===r.ShortType)return Oe.SHORT
if(e===r.UnsignedShortType)return Oe.UNSIGNED_SHORT
if(e===r.IntType)return Oe.INT
if(e===r.UnsignedIntType)return Oe.UNSIGNED_INT
if(e===r.FloatType)return Oe.FLOAT
if(e===r.AlphaFormat)return Oe.ALPHA
if(e===r.RGBFormat)return Oe.RGB
if(e===r.RGBAFormat)return Oe.RGBA
if(e===r.LuminanceFormat)return Oe.LUMINANCE
if(e===r.LuminanceAlphaFormat)return Oe.LUMINANCE_ALPHA
if(e===r.AddEquation)return Oe.FUNC_ADD
if(e===r.SubtractEquation)return Oe.FUNC_SUBTRACT
if(e===r.ReverseSubtractEquation)return Oe.FUNC_REVERSE_SUBTRACT
if(e===r.ZeroFactor)return Oe.ZERO
if(e===r.OneFactor)return Oe.ONE
if(e===r.SrcColorFactor)return Oe.SRC_COLOR
if(e===r.OneMinusSrcColorFactor)return Oe.ONE_MINUS_SRC_COLOR
if(e===r.SrcAlphaFactor)return Oe.SRC_ALPHA
if(e===r.OneMinusSrcAlphaFactor)return Oe.ONE_MINUS_SRC_ALPHA
if(e===r.DstAlphaFactor)return Oe.DST_ALPHA
if(e===r.OneMinusDstAlphaFactor)return Oe.ONE_MINUS_DST_ALPHA
if(e===r.DstColorFactor)return Oe.DST_COLOR
if(e===r.OneMinusDstColorFactor)return Oe.ONE_MINUS_DST_COLOR
if(e===r.SrcAlphaSaturateFactor)return Oe.SRC_ALPHA_SATURATE
if(t=wt.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===r.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT
if(e===r.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT
if(e===r.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT
if(e===r.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=wt.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===r.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG
if(e===r.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG
if(e===r.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG
if(e===r.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=wt.get("EXT_blend_minmax"),null!==t){if(e===r.MinEquation)return t.MIN_EXT
if(e===r.MaxEquation)return t.MAX_EXT}return 0}function pe(e){if(Ct&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024
var t=Oe.getParameter(Oe.MAX_VERTEX_UNIFORM_VECTORS),i=Math.floor((t-20)/4),n=i
return void 0!==e&&e instanceof r.SkinnedMesh&&(n=Math.min(e.skeleton.bones.length,n),n<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")),n}function fe(e){for(var t=0,i=0,n=0,a=0,o=0,s=e.length;s>o;o++){var h=e[o]
h.onlyShadow||h.visible===!1||(h instanceof r.DirectionalLight&&t++,h instanceof r.PointLight&&i++,h instanceof r.SpotLight&&n++,h instanceof r.HemisphereLight&&a++)}return{directional:t,point:i,spot:n,hemi:a}}function me(e){for(var t=0,i=0,n=e.length;n>i;i++){var a=e[i]
a.castShadow&&(a instanceof r.SpotLight&&t++,a instanceof r.DirectionalLight&&!a.shadowCascade&&t++)}return t}console.log("THREE.WebGLRenderer",r.REVISION),e=e||{}
var ge=void 0!==e.canvas?e.canvas:document.createElement("canvas"),ve=void 0!==e.context?e.context:null,ye=1,we=void 0!==e.precision?e.precision:"highp",be=void 0!==e.alpha?e.alpha:!1,xe=void 0!==e.depth?e.depth:!0,_e=void 0!==e.stencil?e.stencil:!0,ke=void 0!==e.antialias?e.antialias:!1,Me=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,Se=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,Te=void 0!==e.logarithmicDepthBuffer?e.logarithmicDepthBuffer:!1,Ce=new r.Color(0),Ee=0,Ae=[],Le={},Pe=[],Re=[],Fe=[],De=[],Be=[]
this.domElement=ge,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=r.PCFShadowMap,this.shadowMapCullFace=r.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}}
var Oe,Ve=this,ze=[],Ue=null,Ne=null,Ie=-1,je="",He=null,Ge=0,qe=-1,We=-1,Xe=-1,Ye=-1,Ke=-1,Ze=-1,Qe=-1,$e=-1,Je=null,et=null,tt=null,it=null,nt=0,rt=0,at=ge.width,ot=ge.height,st=0,ht=0,lt=new Uint8Array(16),ct=new Uint8Array(16),ut=new r.Frustum,dt=new r.Matrix4,pt=(new r.Matrix4,new r.Vector3),ft=new r.Vector3,mt=!0,gt={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}}
try{var vt={alpha:be,depth:xe,stencil:_e,antialias:ke,premultipliedAlpha:Me,preserveDrawingBuffer:Se}
if(Oe=ve||ge.getContext("webgl",vt)||ge.getContext("experimental-webgl",vt),null===Oe)throw null!==ge.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context."
ge.addEventListener("webglcontextlost",function(e){e.preventDefault(),xt(),bt(),Le={}},!1)}catch(yt){console.error(yt)}void 0===Oe.getShaderPrecisionFormat&&(Oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})
var wt=new r.WebGLExtensions(Oe)
wt.get("OES_texture_float"),wt.get("OES_texture_float_linear"),wt.get("OES_standard_derivatives"),Te&&wt.get("EXT_frag_depth")
var bt=function(){Oe.clearColor(0,0,0,1),Oe.clearDepth(1),Oe.clearStencil(0),Oe.enable(Oe.DEPTH_TEST),Oe.depthFunc(Oe.LEQUAL),Oe.frontFace(Oe.CCW),Oe.cullFace(Oe.BACK),Oe.enable(Oe.CULL_FACE),Oe.enable(Oe.BLEND),Oe.blendEquation(Oe.FUNC_ADD),Oe.blendFunc(Oe.SRC_ALPHA,Oe.ONE_MINUS_SRC_ALPHA),Oe.viewport(nt,rt,at,ot),Oe.clearColor(Ce.r,Ce.g,Ce.b,Ee)},xt=function(){Ue=null,He=null,Xe=-1,Qe=-1,$e=-1,qe=-1,We=-1,je="",Ie=-1,mt=!0
for(var e=0;e<ct.length;e++)ct[e]=0}
bt(),this.context=Oe
var _t=Oe.getParameter(Oe.MAX_TEXTURE_IMAGE_UNITS),kt=Oe.getParameter(Oe.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Mt=Oe.getParameter(Oe.MAX_TEXTURE_SIZE),St=Oe.getParameter(Oe.MAX_CUBE_MAP_TEXTURE_SIZE),Tt=kt>0,Ct=Tt&&wt.get("OES_texture_float"),Et=Oe.getShaderPrecisionFormat(Oe.VERTEX_SHADER,Oe.HIGH_FLOAT),At=Oe.getShaderPrecisionFormat(Oe.VERTEX_SHADER,Oe.MEDIUM_FLOAT),Lt=(Oe.getShaderPrecisionFormat(Oe.VERTEX_SHADER,Oe.LOW_FLOAT),Oe.getShaderPrecisionFormat(Oe.FRAGMENT_SHADER,Oe.HIGH_FLOAT)),Pt=Oe.getShaderPrecisionFormat(Oe.FRAGMENT_SHADER,Oe.MEDIUM_FLOAT),Rt=(Oe.getShaderPrecisionFormat(Oe.FRAGMENT_SHADER,Oe.LOW_FLOAT),function(){var e
return function(){if(void 0!==e)return e
if(e=[],wt.get("WEBGL_compressed_texture_pvrtc")||wt.get("WEBGL_compressed_texture_s3tc"))for(var t=Oe.getParameter(Oe.COMPRESSED_TEXTURE_FORMATS),i=0;i<t.length;i++)e.push(t[i])
return e}}()),Ft=Et.precision>0&&Lt.precision>0,Dt=At.precision>0&&Pt.precision>0
"highp"!==we||Ft||(Dt?(we="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(we="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==we||Dt||(we="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."))
var Bt=new r.ShadowMapPlugin(this,Ae,Le,Pe),Ot=new r.SpritePlugin(this,De),Vt=new r.LensFlarePlugin(this,Be)
this.getContext=function(){return Oe},this.forceContextLoss=function(){wt.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return Tt},this.supportsFloatTextures=function(){return wt.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return wt.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return wt.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return wt.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return wt.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var e
return function(){if(void 0!==e)return e
var t=wt.get("EXT_texture_filter_anisotropic")
return e=null!==t?Oe.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return we},this.getPixelRatio=function(){return ye},this.setPixelRatio=function(e){ye=e},this.setSize=function(e,t,i){ge.width=e*ye,ge.height=t*ye,i!==!1&&(ge.style.width=e+"px",ge.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,n){nt=e*ye,rt=t*ye,at=i*ye,ot=n*ye,Oe.viewport(nt,rt,at,ot)},this.setScissor=function(e,t,i,n){Oe.scissor(e*ye,t*ye,i*ye,n*ye)},this.enableScissorTest=function(e){e?Oe.enable(Oe.SCISSOR_TEST):Oe.disable(Oe.SCISSOR_TEST)},this.getClearColor=function(){return Ce},this.setClearColor=function(e,t){Ce.set(e),Ee=void 0!==t?t:1,Oe.clearColor(Ce.r,Ce.g,Ce.b,Ee)},this.getClearAlpha=function(){return Ee},this.setClearAlpha=function(e){Ee=e,Oe.clearColor(Ce.r,Ce.g,Ce.b,Ee)},this.clear=function(e,t,i){var n=0;(void 0===e||e)&&(n|=Oe.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=Oe.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=Oe.STENCIL_BUFFER_BIT),Oe.clear(n)},this.clearColor=function(){Oe.clear(Oe.COLOR_BUFFER_BIT)},this.clearDepth=function(){Oe.clear(Oe.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Oe.clear(Oe.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,i,n){this.setRenderTarget(e),this.clear(t,i,n)},this.resetGLState=xt
var zt=function(e){var t=e.target
t.traverse(function(e){e.removeEventListener("remove",zt),B(e)})},Ut=function(e){var t=e.target
t.removeEventListener("dispose",Ut),Gt(t)},Nt=function(e){var t=e.target
t.removeEventListener("dispose",Nt),qt(t),Ve.info.memory.textures--},It=function(e){var t=e.target
t.removeEventListener("dispose",It),Wt(t),Ve.info.memory.textures--},jt=function(e){var t=e.target
t.removeEventListener("dispose",jt),Xt(t)},Ht=function(e){for(var t=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],i=0,n=t.length;n>i;i++){var r=t[i]
void 0!==e[r]&&(Oe.deleteBuffer(e[r]),delete e[r])}if(void 0!==e.__webglCustomAttributesList){for(var r in e.__webglCustomAttributesList)Oe.deleteBuffer(e.__webglCustomAttributesList[r].buffer)
delete e.__webglCustomAttributesList}Ve.info.memory.geometries--},Gt=function(e){if(delete e.__webglInit,e instanceof r.BufferGeometry){for(var t in e.attributes){var i=e.attributes[t]
void 0!==i.buffer&&(Oe.deleteBuffer(i.buffer),delete i.buffer)}Ve.info.memory.geometries--}else{var n=Yt[e.id]
if(void 0!==n){for(var a=0,o=n.length;o>a;a++){var s=n[a]
if(void 0!==s.numMorphTargets){for(var h=0,l=s.numMorphTargets;l>h;h++)Oe.deleteBuffer(s.__webglMorphTargetsBuffers[h])
delete s.__webglMorphTargetsBuffers}if(void 0!==s.numMorphNormals){for(var h=0,l=s.numMorphNormals;l>h;h++)Oe.deleteBuffer(s.__webglMorphNormalsBuffers[h])
delete s.__webglMorphNormalsBuffers}Ht(s)}delete Yt[e.id]}else Ht(e)}je=""},qt=function(e){if(e.image&&e.image.__webglTextureCube)Oe.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube
else{if(void 0===e.__webglInit)return
Oe.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit}},Wt=function(e){if(e&&void 0!==e.__webglTexture){if(Oe.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof r.WebGLRenderTargetCube)for(var t=0;6>t;t++)Oe.deleteFramebuffer(e.__webglFramebuffer[t]),Oe.deleteRenderbuffer(e.__webglRenderbuffer[t])
else Oe.deleteFramebuffer(e.__webglFramebuffer),Oe.deleteRenderbuffer(e.__webglRenderbuffer)
delete e.__webglFramebuffer,delete e.__webglRenderbuffer}},Xt=function(e){var t=e.program.program
if(void 0!==t){e.program=void 0
var i,n,r,a=!1
for(i=0,n=ze.length;n>i;i++)if(r=ze[i],r.program===t){r.usedTimes--,0===r.usedTimes&&(a=!0)
break}if(a===!0){var o=[]
for(i=0,n=ze.length;n>i;i++)r=ze[i],r.program!==t&&o.push(r)
ze=o,Oe.deleteProgram(t),Ve.info.memory.programs--}}}
this.renderBufferImmediate=function(e,t,i){if(m(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Oe.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Oe.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Oe.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Oe.createBuffer()),e.hasPositions&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglVertexBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,e.positionArray,Oe.DYNAMIC_DRAW),g(t.attributes.position),Oe.vertexAttribPointer(t.attributes.position,3,Oe.FLOAT,!1,0,0)),e.hasNormals){if(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglNormalBuffer),i.shading===r.FlatShading){var n,a,o,s,h,l,c,u,d,p,f,y,w,b,x=3*e.count
for(b=0;x>b;b+=9)w=e.normalArray,s=w[b],c=w[b+1],p=w[b+2],h=w[b+3],u=w[b+4],f=w[b+5],l=w[b+6],d=w[b+7],y=w[b+8],n=(s+h+l)/3,a=(c+u+d)/3,o=(p+f+y)/3,w[b]=n,w[b+1]=a,w[b+2]=o,w[b+3]=n,w[b+4]=a,w[b+5]=o,w[b+6]=n,w[b+7]=a,w[b+8]=o}Oe.bufferData(Oe.ARRAY_BUFFER,e.normalArray,Oe.DYNAMIC_DRAW),g(t.attributes.normal),Oe.vertexAttribPointer(t.attributes.normal,3,Oe.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglUvBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,e.uvArray,Oe.DYNAMIC_DRAW),g(t.attributes.uv),Oe.vertexAttribPointer(t.attributes.uv,2,Oe.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==r.NoColors&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,e.__webglColorBuffer),Oe.bufferData(Oe.ARRAY_BUFFER,e.colorArray,Oe.DYNAMIC_DRAW),g(t.attributes.color),Oe.vertexAttribPointer(t.attributes.color,3,Oe.FLOAT,!1,0,0)),v(),Oe.drawArrays(Oe.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,a,o){if(n.visible!==!1){R(o)
var s=z(e,t,i,n,o),h=!1,l=n.wireframe?1:0,c="direct_"+a.id+"_"+s.id+"_"+l
if(c!==je&&(je=c,h=!0),h&&m(),o instanceof r.Mesh){var u=n.wireframe===!0?Oe.LINES:Oe.TRIANGLES,d=a.attributes.index
if(d){var p,g
d.array instanceof Uint32Array&&wt.get("OES_element_index_uint")?(p=Oe.UNSIGNED_INT,g=4):(p=Oe.UNSIGNED_SHORT,g=2)
var v=a.offsets
if(0===v.length)h&&(f(n,s,a,0),Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,d.buffer)),Oe.drawElements(u,d.array.length,p,0),Ve.info.render.calls++,Ve.info.render.vertices+=d.array.length,Ve.info.render.faces+=d.array.length/3
else{h=!0
for(var y=0,w=v.length;w>y;y++){var b=v[y].index
h&&(f(n,s,a,b),Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,d.buffer)),Oe.drawElements(u,v[y].count,p,v[y].start*g),Ve.info.render.calls++,Ve.info.render.vertices+=v[y].count,Ve.info.render.faces+=v[y].count/3}}}else{h&&f(n,s,a,0)
var x=a.attributes.position
Oe.drawArrays(u,0,x.array.length/3),Ve.info.render.calls++,Ve.info.render.vertices+=x.array.length/3,Ve.info.render.faces+=x.array.length/9}}else if(o instanceof r.PointCloud){var u=Oe.POINTS,d=a.attributes.index
if(d){var p,g
d.array instanceof Uint32Array&&wt.get("OES_element_index_uint")?(p=Oe.UNSIGNED_INT,g=4):(p=Oe.UNSIGNED_SHORT,g=2)
var v=a.offsets
if(0===v.length)h&&(f(n,s,a,0),Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,d.buffer)),Oe.drawElements(u,d.array.length,p,0),Ve.info.render.calls++,Ve.info.render.points+=d.array.length
else{v.length>1&&(h=!0)
for(var y=0,w=v.length;w>y;y++){var b=v[y].index
h&&(f(n,s,a,b),Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,d.buffer)),Oe.drawElements(u,v[y].count,p,v[y].start*g),Ve.info.render.calls++,Ve.info.render.points+=v[y].count}}}else{h&&f(n,s,a,0)
var x=a.attributes.position,v=a.offsets
if(0===v.length)Oe.drawArrays(u,0,x.array.length/3),Ve.info.render.calls++,Ve.info.render.points+=x.array.length/3
else for(var y=0,w=v.length;w>y;y++)Oe.drawArrays(u,v[y].index,v[y].count),Ve.info.render.calls++,Ve.info.render.points+=v[y].count}}else if(o instanceof r.Line){var u=o.mode===r.LineStrip?Oe.LINE_STRIP:Oe.LINES
ie(n.linewidth)
var d=a.attributes.index
if(d){var p,g
d.array instanceof Uint32Array?(p=Oe.UNSIGNED_INT,g=4):(p=Oe.UNSIGNED_SHORT,g=2)
var v=a.offsets
if(0===v.length)h&&(f(n,s,a,0),Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,d.buffer)),Oe.drawElements(u,d.array.length,p,0),Ve.info.render.calls++,Ve.info.render.vertices+=d.array.length
else{v.length>1&&(h=!0)
for(var y=0,w=v.length;w>y;y++){var b=v[y].index
h&&(f(n,s,a,b),Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,d.buffer)),Oe.drawElements(u,v[y].count,p,v[y].start*g),Ve.info.render.calls++,Ve.info.render.vertices+=v[y].count}}}else{h&&f(n,s,a,0)
var x=a.attributes.position,v=a.offsets
if(0===v.length)Oe.drawArrays(u,0,x.array.length/3),Ve.info.render.calls++,Ve.info.render.vertices+=x.array.length/3
else for(var y=0,w=v.length;w>y;y++)Oe.drawArrays(u,v[y].index,v[y].count),Ve.info.render.calls++,Ve.info.render.vertices+=v[y].count}}}},this.renderBuffer=function(e,t,i,n,a,o){if(n.visible!==!1){R(o)
var s=z(e,t,i,n,o),h=s.attributes,l=!1,c=n.wireframe?1:0,u=a.id+"_"+s.id+"_"+c
if(u!==je&&(je=u,l=!0),l&&m(),!n.morphTargets&&h.position>=0?l&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglVertexBuffer),g(h.position),Oe.vertexAttribPointer(h.position,3,Oe.FLOAT,!1,0,0)):o.morphTargetBase&&y(n,a,o),l){if(a.__webglCustomAttributesList)for(var d=0,p=a.__webglCustomAttributesList.length;p>d;d++){var f=a.__webglCustomAttributesList[d]
h[f.buffer.belongsToAttribute]>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,f.buffer),g(h[f.buffer.belongsToAttribute]),Oe.vertexAttribPointer(h[f.buffer.belongsToAttribute],f.size,Oe.FLOAT,!1,0,0))}h.color>=0&&(o.geometry.colors.length>0||o.geometry.faces.length>0?(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglColorBuffer),g(h.color),Oe.vertexAttribPointer(h.color,3,Oe.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&Oe.vertexAttrib3fv(h.color,n.defaultAttributeValues.color)),h.normal>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglNormalBuffer),g(h.normal),Oe.vertexAttribPointer(h.normal,3,Oe.FLOAT,!1,0,0)),h.tangent>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglTangentBuffer),g(h.tangent),Oe.vertexAttribPointer(h.tangent,4,Oe.FLOAT,!1,0,0)),h.uv>=0&&(o.geometry.faceVertexUvs[0]?(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglUVBuffer),g(h.uv),Oe.vertexAttribPointer(h.uv,2,Oe.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&Oe.vertexAttrib2fv(h.uv,n.defaultAttributeValues.uv)),h.uv2>=0&&(o.geometry.faceVertexUvs[1]?(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglUV2Buffer),g(h.uv2),Oe.vertexAttribPointer(h.uv2,2,Oe.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&Oe.vertexAttrib2fv(h.uv2,n.defaultAttributeValues.uv2)),n.skinning&&h.skinIndex>=0&&h.skinWeight>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglSkinIndicesBuffer),g(h.skinIndex),Oe.vertexAttribPointer(h.skinIndex,4,Oe.FLOAT,!1,0,0),Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglSkinWeightsBuffer),g(h.skinWeight),Oe.vertexAttribPointer(h.skinWeight,4,Oe.FLOAT,!1,0,0)),h.lineDistance>=0&&(Oe.bindBuffer(Oe.ARRAY_BUFFER,a.__webglLineDistanceBuffer),g(h.lineDistance),Oe.vertexAttribPointer(h.lineDistance,1,Oe.FLOAT,!1,0,0))}if(v(),o instanceof r.Mesh){var w=a.__typeArray===Uint32Array?Oe.UNSIGNED_INT:Oe.UNSIGNED_SHORT
n.wireframe?(ie(n.wireframeLinewidth),l&&Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,a.__webglLineBuffer),Oe.drawElements(Oe.LINES,a.__webglLineCount,w,0)):(l&&Oe.bindBuffer(Oe.ELEMENT_ARRAY_BUFFER,a.__webglFaceBuffer),Oe.drawElements(Oe.TRIANGLES,a.__webglFaceCount,w,0)),Ve.info.render.calls++,Ve.info.render.vertices+=a.__webglFaceCount,Ve.info.render.faces+=a.__webglFaceCount/3}else if(o instanceof r.Line){var b=o.mode===r.LineStrip?Oe.LINE_STRIP:Oe.LINES
ie(n.linewidth),Oe.drawArrays(b,0,a.__webglLineCount),Ve.info.render.calls++}else o instanceof r.PointCloud&&(Oe.drawArrays(Oe.POINTS,0,a.__webglParticleCount),Ve.info.render.calls++,Ve.info.render.points+=a.__webglParticleCount)}},this.render=function(e,t,i,n){if(t instanceof r.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")
var a=e.fog
je="",Ie=-1,He=null,mt=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof r.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),dt.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ut.setFromMatrix(dt),Ae.length=0,Re.length=0,Fe.length=0,De.length=0,Be.length=0,_(e),Ve.sortObjects===!0&&(Re.sort(w),Fe.sort(b)),Bt.render(e,t),Ve.info.render.calls=0,Ve.info.render.vertices=0,Ve.info.render.faces=0,Ve.info.render.points=0,this.setRenderTarget(i),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil)
for(var o=0,s=Pe.length;s>o;o++){var h=Pe[o],l=h.object
l.visible&&($(l,t),S(h))}if(e.overrideMaterial){var c=e.overrideMaterial
this.setBlending(c.blending,c.blendEquation,c.blendSrc,c.blendDst),this.setDepthTest(c.depthTest),this.setDepthWrite(c.depthWrite),ne(c.polygonOffset,c.polygonOffsetFactor,c.polygonOffsetUnits),k(Re,t,Ae,a,!0,c),k(Fe,t,Ae,a,!0,c),M(Pe,"",t,Ae,a,!1,c)}else{var c=null
this.setBlending(r.NoBlending),k(Re,t,Ae,a,!1,c),M(Pe,"opaque",t,Ae,a,!1,c),k(Fe,t,Ae,a,!0,c),M(Pe,"transparent",t,Ae,a,!0,c)}Ot.render(e,t),Vt.render(e,t,st,ht),i&&i.generateMipmaps&&i.minFilter!==r.NearestFilter&&i.minFilter!==r.LinearFilter&&ce(i),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(e,t,i,n,r){var a=z(e,t,i,n,r)
je="",Ve.setMaterialFaces(n),r.immediateRenderCallback?r.immediateRenderCallback(a,Oe,ut):r.render(function(e){Ve.renderBufferImmediate(e,a,n)})}
var Yt={},Kt=0,Zt={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"}
this.setFaceCulling=function(e,t){e===r.CullFaceNone?Oe.disable(Oe.CULL_FACE):(Oe.frontFace(t===r.FrontFaceDirectionCW?Oe.CW:Oe.CCW),Oe.cullFace(e===r.CullFaceBack?Oe.BACK:e===r.CullFaceFront?Oe.FRONT:Oe.FRONT_AND_BACK),Oe.enable(Oe.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===r.DoubleSide,i=e.side===r.BackSide
qe!==t&&(t?Oe.disable(Oe.CULL_FACE):Oe.enable(Oe.CULL_FACE),qe=t),We!==i&&(Oe.frontFace(i?Oe.CW:Oe.CCW),We=i)},this.setDepthTest=function(e){Qe!==e&&(e?Oe.enable(Oe.DEPTH_TEST):Oe.disable(Oe.DEPTH_TEST),Qe=e)},this.setDepthWrite=function(e){$e!==e&&(Oe.depthMask(e),$e=e)},this.setBlending=function(e,t,i,n){e!==Xe&&(e===r.NoBlending?Oe.disable(Oe.BLEND):e===r.AdditiveBlending?(Oe.enable(Oe.BLEND),Oe.blendEquation(Oe.FUNC_ADD),Oe.blendFunc(Oe.SRC_ALPHA,Oe.ONE)):e===r.SubtractiveBlending?(Oe.enable(Oe.BLEND),Oe.blendEquation(Oe.FUNC_ADD),Oe.blendFunc(Oe.ZERO,Oe.ONE_MINUS_SRC_COLOR)):e===r.MultiplyBlending?(Oe.enable(Oe.BLEND),Oe.blendEquation(Oe.FUNC_ADD),Oe.blendFunc(Oe.ZERO,Oe.SRC_COLOR)):e===r.CustomBlending?Oe.enable(Oe.BLEND):(Oe.enable(Oe.BLEND),Oe.blendEquationSeparate(Oe.FUNC_ADD,Oe.FUNC_ADD),Oe.blendFuncSeparate(Oe.SRC_ALPHA,Oe.ONE_MINUS_SRC_ALPHA,Oe.ONE,Oe.ONE_MINUS_SRC_ALPHA)),Xe=e),e===r.CustomBlending?(t!==Ye&&(Oe.blendEquation(de(t)),Ye=t),(i!==Ke||n!==Ze)&&(Oe.blendFunc(de(i),de(n)),Ke=i,Ze=n)):(Ye=null,Ke=null,Ze=null)},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",Nt),e.__webglTexture=Oe.createTexture(),Ve.info.memory.textures++),Oe.bindTexture(Oe.TEXTURE_2D,e.__webglTexture),Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,e.flipY),Oe.pixelStorei(Oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Oe.pixelStorei(Oe.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=ae(e.image,Mt)
var t=e.image,i=r.Math.isPowerOfTwo(t.width)&&r.Math.isPowerOfTwo(t.height),n=de(e.format),a=de(e.type)
re(Oe.TEXTURE_2D,e,i)
var o,s=e.mipmaps
if(e instanceof r.DataTexture)if(s.length>0&&i){for(var h=0,l=s.length;l>h;h++)o=s[h],Oe.texImage2D(Oe.TEXTURE_2D,h,n,o.width,o.height,0,n,a,o.data)
e.generateMipmaps=!1}else Oe.texImage2D(Oe.TEXTURE_2D,0,n,t.width,t.height,0,n,a,t.data)
else if(e instanceof r.CompressedTexture)for(var h=0,l=s.length;l>h;h++)o=s[h],e.format!==r.RGBAFormat&&e.format!==r.RGBFormat?Rt().indexOf(n)>-1?Oe.compressedTexImage2D(Oe.TEXTURE_2D,h,n,o.width,o.height,0,o.data):console.warn("Attempt to load unsupported compressed texture format"):Oe.texImage2D(Oe.TEXTURE_2D,h,n,o.width,o.height,0,n,a,o.data)
else if(s.length>0&&i){for(var h=0,l=s.length;l>h;h++)o=s[h],Oe.texImage2D(Oe.TEXTURE_2D,h,n,n,a,o)
e.generateMipmaps=!1}else Oe.texImage2D(Oe.TEXTURE_2D,0,n,n,a,e.image)
e.generateMipmaps&&i&&Oe.generateMipmap(Oe.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){Oe.activeTexture(Oe.TEXTURE0+t),e.needsUpdate?Ve.uploadTexture(e):Oe.bindTexture(Oe.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof r.WebGLRenderTargetCube
if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",It),e.__webglTexture=Oe.createTexture(),Ve.info.memory.textures++
var i=r.Math.isPowerOfTwo(e.width)&&r.Math.isPowerOfTwo(e.height),n=de(e.format),a=de(e.type)
if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,e.__webglTexture),re(Oe.TEXTURE_CUBE_MAP,e,i)
for(var o=0;6>o;o++)e.__webglFramebuffer[o]=Oe.createFramebuffer(),e.__webglRenderbuffer[o]=Oe.createRenderbuffer(),Oe.texImage2D(Oe.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,n,e.width,e.height,0,n,a,null),he(e.__webglFramebuffer[o],e,Oe.TEXTURE_CUBE_MAP_POSITIVE_X+o),le(e.__webglRenderbuffer[o],e)
i&&Oe.generateMipmap(Oe.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Oe.createFramebuffer(),e.shareDepthFrom?e.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer:e.__webglRenderbuffer=Oe.createRenderbuffer(),Oe.bindTexture(Oe.TEXTURE_2D,e.__webglTexture),re(Oe.TEXTURE_2D,e,i),Oe.texImage2D(Oe.TEXTURE_2D,0,n,e.width,e.height,0,n,a,null),he(e.__webglFramebuffer,e,Oe.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Oe.framebufferRenderbuffer(Oe.FRAMEBUFFER,Oe.DEPTH_ATTACHMENT,Oe.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Oe.framebufferRenderbuffer(Oe.FRAMEBUFFER,Oe.DEPTH_STENCIL_ATTACHMENT,Oe.RENDERBUFFER,e.__webglRenderbuffer):le(e.__webglRenderbuffer,e),i&&Oe.generateMipmap(Oe.TEXTURE_2D)
t?Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,null):Oe.bindTexture(Oe.TEXTURE_2D,null),Oe.bindRenderbuffer(Oe.RENDERBUFFER,null),Oe.bindFramebuffer(Oe.FRAMEBUFFER,null)}var s,h,l,c,u
e?(s=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,h=e.width,l=e.height,c=0,u=0):(s=null,h=at,l=ot,c=nt,u=rt),s!==Ne&&(Oe.bindFramebuffer(Oe.FRAMEBUFFER,s),Oe.viewport(c,u,h,l),Ne=s),st=h,ht=l},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},r.WebGLRenderTarget=function(e,t,i){this.width=e,this.height=t,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:r.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:r.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:r.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:r.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new r.Vector2(0,0),this.repeat=new r.Vector2(1,1),this.format=void 0!==i.format?i.format:r.RGBAFormat,this.type=void 0!==i.type?i.type:r.UnsignedByteType,this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},r.WebGLRenderTarget.prototype={constructor:r.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new r.WebGLRenderTarget(this.width,this.height)
return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.WebGLRenderTarget.prototype),r.WebGLRenderTargetCube=function(e,t,i){r.WebGLRenderTarget.call(this,e,t,i),this.activeCubeFace=0},r.WebGLRenderTargetCube.prototype=Object.create(r.WebGLRenderTarget.prototype),r.WebGLRenderTargetCube.prototype.constructor=r.WebGLRenderTargetCube,r.WebGLExtensions=function(e){var t={}
this.get=function(i){if(void 0!==t[i])return t[i]
var n
switch(i){case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")
break
case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")
break
case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc")
break
default:n=e.getExtension(i)}return null===n&&console.log("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=n,n}},r.WebGLProgram=function(){var e=0,t=function(e){var t,i,n=[]
for(var r in e)t=e[r],t!==!1&&(i="#define "+r+" "+t,n.push(i))
return n.join("\n")},i=function(e,t,i){for(var n={},r=0,a=i.length;a>r;r++){var o=i[r]
n[o]=e.getUniformLocation(t,o)}return n},n=function(e,t,i){for(var n={},r=0,a=i.length;a>r;r++){var o=i[r]
n[o]=e.getAttribLocation(t,o)}return n}
return function(a,o,s,h){var l=a,c=l.context,u=s.defines,d=s.__webglShader.uniforms,p=s.attributes,f=s.__webglShader.vertexShader,m=s.__webglShader.fragmentShader,g=s.index0AttributeName
void 0===g&&h.morphTargets===!0&&(g="position")
var v="SHADOWMAP_TYPE_BASIC"
h.shadowMapType===r.PCFShadowMap?v="SHADOWMAP_TYPE_PCF":h.shadowMapType===r.PCFSoftShadowMap&&(v="SHADOWMAP_TYPE_PCF_SOFT")
var y="ENVMAP_TYPE_CUBE",w="ENVMAP_MODE_REFLECTION",b="ENVMAP_BLENDING_MULTIPLY"
if(h.envMap){switch(s.envMap.mapping){case r.CubeReflectionMapping:case r.CubeRefractionMapping:y="ENVMAP_TYPE_CUBE"
break
case r.EquirectangularReflectionMapping:case r.EquirectangularRefractionMapping:y="ENVMAP_TYPE_EQUIREC"
break
case r.SphericalReflectionMapping:y="ENVMAP_TYPE_SPHERE"}switch(s.envMap.mapping){case r.CubeRefractionMapping:case r.EquirectangularRefractionMapping:w="ENVMAP_MODE_REFRACTION"}switch(s.combine){case r.MultiplyOperation:b="ENVMAP_BLENDING_MULTIPLY"
break
case r.MixOperation:b="ENVMAP_BLENDING_MIX"
break
case r.AddOperation:b="ENVMAP_BLENDING_ADD"}}var x,_,k=t(u),M=c.createProgram()
s instanceof r.RawShaderMaterial?(x="",_=""):(x=["precision "+h.precision+" float;","precision "+h.precision+" int;",k,h.supportsVertexTextures?"#define VERTEX_TEXTURES":"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,"#define MAX_BONES "+h.maxBones,h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+w:"",h.lightMap?"#define USE_LIGHTMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals?"#define USE_MORPHNORMALS":"",h.wrapAround?"#define WRAP_AROUND":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+v:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",h.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join("\n"),_=["precision "+h.precision+" float;","precision "+h.precision+" int;",h.bumpMap||h.normalMap?"#extension GL_OES_standard_derivatives : enable":"",k,"#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,h.alphaTest?"#define ALPHATEST "+h.alphaTest:"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"",h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+y:"",h.envMap?"#define "+w:"",h.envMap?"#define "+b:"",h.lightMap?"#define USE_LIGHTMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.metal?"#define METAL":"",h.wrapAround?"#define WRAP_AROUND":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+v:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",h.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"))
var S=new r.WebGLShader(c,c.VERTEX_SHADER,x+f),T=new r.WebGLShader(c,c.FRAGMENT_SHADER,_+m)
c.attachShader(M,S),c.attachShader(M,T),void 0!==g&&c.bindAttribLocation(M,0,g),c.linkProgram(M),c.getProgramParameter(M,c.LINK_STATUS)===!1&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",c.getProgramParameter(M,c.VALIDATE_STATUS)),console.error("gl.getError()",c.getError())),""!==c.getProgramInfoLog(M)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",c.getProgramInfoLog(M)),c.deleteShader(S),c.deleteShader(T)
var C=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"]
h.useVertexTexture?(C.push("boneTexture"),C.push("boneTextureWidth"),C.push("boneTextureHeight")):C.push("boneGlobalMatrices"),h.logarithmicDepthBuffer&&C.push("logDepthBufFC")
for(var E in d)C.push(E)
this.uniforms=i(c,M,C),C=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"]
for(var A=0;A<h.maxMorphTargets;A++)C.push("morphTarget"+A)
for(var A=0;A<h.maxMorphNormals;A++)C.push("morphNormal"+A)
for(var L in p)C.push(L)
return this.attributes=n(c,M,C),this.attributesKeys=Object.keys(this.attributes),this.id=e++,this.code=o,this.usedTimes=1,this.program=M,this.vertexShader=S,this.fragmentShader=T,this}}(),r.WebGLShader=function(){var e=function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i]
return t.join("\n")}
return function(t,i,n){var r=t.createShader(i)
return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(r)),console.warn(e(n))),r}}(),r.LensFlarePlugin=function(e,t){function i(t){var i=d.createProgram(),n=d.createShader(d.FRAGMENT_SHADER),r=d.createShader(d.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n"
return d.shaderSource(n,a+t.fragmentShader),d.shaderSource(r,a+t.vertexShader),d.compileShader(n),d.compileShader(r),d.attachShader(i,n),d.attachShader(i,r),d.linkProgram(i),i}var n,a,o,s,h,l,c,u,d=e.context,p=function(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3])
n=d.createBuffer(),a=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,n),d.bufferData(d.ARRAY_BUFFER,e,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.bufferData(d.ELEMENT_ARRAY_BUFFER,t,d.STATIC_DRAW),c=d.createTexture(),u=d.createTexture(),d.bindTexture(d.TEXTURE_2D,c),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.bindTexture(d.TEXTURE_2D,u),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),l=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0
var r
r=l?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},o=i(r),s={vertex:d.getAttribLocation(o,"position"),uv:d.getAttribLocation(o,"uv")},h={renderType:d.getUniformLocation(o,"renderType"),map:d.getUniformLocation(o,"map"),occlusionMap:d.getUniformLocation(o,"occlusionMap"),opacity:d.getUniformLocation(o,"opacity"),color:d.getUniformLocation(o,"color"),scale:d.getUniformLocation(o,"scale"),rotation:d.getUniformLocation(o,"rotation"),screenPosition:d.getUniformLocation(o,"screenPosition")}}
this.render=function(i,f,m,g){if(0!==t.length){var v=new r.Vector3,y=g/m,w=.5*m,b=.5*g,x=16/g,_=new r.Vector2(x*y,x),k=new r.Vector3(1,1,0),M=new r.Vector2(1,1)
void 0===o&&p(),d.useProgram(o),d.enableVertexAttribArray(s.vertex),d.enableVertexAttribArray(s.uv),d.uniform1i(h.occlusionMap,0),d.uniform1i(h.map,1),d.bindBuffer(d.ARRAY_BUFFER,n),d.vertexAttribPointer(s.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(s.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.disable(d.CULL_FACE),d.depthMask(!1)
for(var S=0,T=t.length;T>S;S++){x=16/g,_.set(x*y,x)
var C=t[S]
if(v.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),v.applyMatrix4(f.matrixWorldInverse),v.applyProjection(f.projectionMatrix),k.copy(v),M.x=k.x*w+w,M.y=k.y*b+b,l||M.x>0&&M.x<m&&M.y>0&&M.y<g){d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,c),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,M.x-8,M.y-8,16,16,0),d.uniform1i(h.renderType,0),d.uniform2f(h.scale,_.x,_.y),d.uniform3f(h.screenPosition,k.x,k.y,k.z),d.disable(d.BLEND),d.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,u),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,M.x-8,M.y-8,16,16,0),d.uniform1i(h.renderType,1),d.disable(d.DEPTH_TEST),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,c),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),C.positionScreen.copy(k),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),d.uniform1i(h.renderType,2),d.enable(d.BLEND)
for(var E=0,A=C.lensFlares.length;A>E;E++){var L=C.lensFlares[E]
L.opacity>.001&&L.scale>.001&&(k.x=L.x,k.y=L.y,k.z=L.z,x=L.size*L.scale/g,_.x=x*y,_.y=x,d.uniform3f(h.screenPosition,k.x,k.y,k.z),d.uniform2f(h.scale,_.x,_.y),d.uniform1f(h.rotation,L.rotation),d.uniform1f(h.opacity,L.opacity),d.uniform3f(h.color,L.color.r,L.color.g,L.color.b),e.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),e.setTexture(L.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}d.enable(d.CULL_FACE),d.enable(d.DEPTH_TEST),d.depthMask(!0),e.resetGLState()}}},r.ShadowMapPlugin=function(e,t,i,n){function a(e,t,n){if(t.visible){var r=i[t.id]
if(r&&t.castShadow&&(t.frustumCulled===!1||m.intersectsObject(t)===!0))for(var o=0,s=r.length;s>o;o++){var h=r[o]
t._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),b.push(h)}for(var o=0,s=t.children.length;s>o;o++)a(e,t.children[o],n)}}function o(e,t){var i=new r.DirectionalLight
i.isVirtual=!0,i.onlyShadow=!0,i.castShadow=!0,i.shadowCameraNear=e.shadowCameraNear,i.shadowCameraFar=e.shadowCameraFar,i.shadowCameraLeft=e.shadowCameraLeft,i.shadowCameraRight=e.shadowCameraRight,i.shadowCameraBottom=e.shadowCameraBottom,i.shadowCameraTop=e.shadowCameraTop,i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t],i.shadowMapWidth=e.shadowCascadeWidth[t],i.shadowMapHeight=e.shadowCascadeHeight[t],i.pointsWorld=[],i.pointsFrustum=[]
for(var n=i.pointsWorld,a=i.pointsFrustum,o=0;8>o;o++)n[o]=new r.Vector3,a[o]=new r.Vector3
var s=e.shadowCascadeNearZ[t],h=e.shadowCascadeFarZ[t]
return a[0].set(-1,-1,s),a[1].set(1,-1,s),a[2].set(-1,1,s),a[3].set(1,1,s),a[4].set(-1,-1,h),a[5].set(1,-1,h),a[6].set(-1,1,h),a[7].set(1,1,h),i}function s(e,t){var i=e.shadowCascadeArray[t]
i.position.copy(e.position),i.target.position.copy(e.target.position),i.lookAt(i.target),i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t]
var n=e.shadowCascadeNearZ[t],r=e.shadowCascadeFarZ[t],a=i.pointsFrustum
a[0].z=n,a[1].z=n,a[2].z=n,a[3].z=n,a[4].z=r,a[5].z=r,a[6].z=r,a[7].z=r}function h(e,t){var i=t.shadowCamera,n=t.pointsFrustum,r=t.pointsWorld
v.set(1/0,1/0,1/0),y.set(-(1/0),-(1/0),-(1/0))
for(var a=0;8>a;a++){var o=r[a]
o.copy(n[a]),o.unproject(e),o.applyMatrix4(i.matrixWorldInverse),o.x<v.x&&(v.x=o.x),o.x>y.x&&(y.x=o.x),o.y<v.y&&(v.y=o.y),o.y>y.y&&(y.y=o.y),o.z<v.z&&(v.z=o.z),o.z>y.z&&(y.z=o.z)}i.left=v.x,i.right=y.x,i.top=y.y,i.bottom=v.y,i.updateProjectionMatrix()}function l(e){return e.material instanceof r.MeshFaceMaterial?e.material.materials[0]:e.material}var c,u,d,p,f=e.context,m=new r.Frustum,g=new r.Matrix4,v=new r.Vector3,y=new r.Vector3,w=new r.Vector3,b=[],x=r.ShaderLib.depthRGBA,_=r.UniformsUtils.clone(x.uniforms)
c=new r.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader}),u=new r.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,morphTargets:!0}),d=new r.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,skinning:!0}),p=new r.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,morphTargets:!0,skinning:!0}),c._shadowPass=!0,u._shadowPass=!0,d._shadowPass=!0,p._shadowPass=!0,this.render=function(i,v){if(e.shadowMapEnabled!==!1){var y,x,_,k,M,S,T,C,E,A,L,P,R,F=[],D=0,B=null
for(f.clearColor(1,1,1,1),f.disable(f.BLEND),f.enable(f.CULL_FACE),f.frontFace(f.CCW),f.cullFace(e.shadowMapCullFace===r.CullFaceFront?f.FRONT:f.BACK),e.setDepthTest(!0),y=0,x=t.length;x>y;y++)if(R=t[y],R.castShadow)if(R instanceof r.DirectionalLight&&R.shadowCascade)for(M=0;M<R.shadowCascadeCount;M++){var O
if(R.shadowCascadeArray[M])O=R.shadowCascadeArray[M]
else{O=o(R,M),O.originalCamera=v
var V=new r.Gyroscope
V.position.copy(R.shadowCascadeOffset),V.add(O),V.add(O.target),v.add(V),R.shadowCascadeArray[M]=O,console.log("Created virtualLight",O)}s(R,M),F[D]=O,D++}else F[D]=R,D++
for(y=0,x=F.length;x>y;y++){if(R=F[y],!R.shadowMap){var z=r.LinearFilter
e.shadowMapType===r.PCFSoftShadowMap&&(z=r.NearestFilter)
var U={minFilter:z,magFilter:z,format:r.RGBAFormat}
R.shadowMap=new r.WebGLRenderTarget(R.shadowMapWidth,R.shadowMapHeight,U),R.shadowMapSize=new r.Vector2(R.shadowMapWidth,R.shadowMapHeight),R.shadowMatrix=new r.Matrix4}if(!R.shadowCamera){if(R instanceof r.SpotLight)R.shadowCamera=new r.PerspectiveCamera(R.shadowCameraFov,R.shadowMapWidth/R.shadowMapHeight,R.shadowCameraNear,R.shadowCameraFar)
else{if(!(R instanceof r.DirectionalLight)){console.error("Unsupported light type for shadow")
continue}R.shadowCamera=new r.OrthographicCamera(R.shadowCameraLeft,R.shadowCameraRight,R.shadowCameraTop,R.shadowCameraBottom,R.shadowCameraNear,R.shadowCameraFar)}i.add(R.shadowCamera),i.autoUpdate===!0&&i.updateMatrixWorld()}R.shadowCameraVisible&&!R.cameraHelper&&(R.cameraHelper=new r.CameraHelper(R.shadowCamera),i.add(R.cameraHelper)),R.isVirtual&&O.originalCamera==v&&h(v,R),S=R.shadowMap,T=R.shadowMatrix,C=R.shadowCamera,C.position.setFromMatrixPosition(R.matrixWorld),w.setFromMatrixPosition(R.target.matrixWorld),C.lookAt(w),C.updateMatrixWorld(),C.matrixWorldInverse.getInverse(C.matrixWorld),R.cameraHelper&&(R.cameraHelper.visible=R.shadowCameraVisible),R.shadowCameraVisible&&R.cameraHelper.update(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(C.projectionMatrix),T.multiply(C.matrixWorldInverse),g.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),m.setFromMatrix(g),e.setRenderTarget(S),e.clear(),b.length=0,a(i,i,C)
var N,I,j
for(_=0,k=b.length;k>_;_++)L=b[_],P=L.object,E=L.buffer,N=l(P),I=void 0!==P.geometry.morphTargets&&P.geometry.morphTargets.length>0&&N.morphTargets,j=P instanceof r.SkinnedMesh&&N.skinning,A=P.customDepthMaterial?P.customDepthMaterial:j?I?p:d:I?u:c,e.setMaterialFaces(N),E instanceof r.BufferGeometry?e.renderBufferDirect(C,t,B,A,E,P):e.renderBuffer(C,t,B,A,E,P)
for(_=0,k=n.length;k>_;_++)L=n[_],P=L.object,P.visible&&P.castShadow&&(P._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,P.matrixWorld),e.renderImmediateObject(C,t,B,c,P))}var H=e.getClearColor(),G=e.getClearAlpha()
f.clearColor(H.r,H.g,H.b,G),f.enable(f.BLEND),e.shadowMapCullFace===r.CullFaceFront&&f.cullFace(f.BACK),e.resetGLState()}}},r.SpritePlugin=function(e,t){function i(){var t=u.createProgram(),i=u.createShader(u.VERTEX_SHADER),n=u.createShader(u.FRAGMENT_SHADER)
return u.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),u.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),u.compileShader(i),u.compileShader(n),u.attachShader(t,i),u.attachShader(t,n),u.linkProgram(t),t}function n(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var a,o,s,h,l,c,u=e.context,d=new r.Vector3,p=new r.Quaternion,f=new r.Vector3,m=function(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3])
a=u.createBuffer(),o=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,a),u.bufferData(u.ARRAY_BUFFER,e,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o),u.bufferData(u.ELEMENT_ARRAY_BUFFER,t,u.STATIC_DRAW),s=i(),h={position:u.getAttribLocation(s,"position"),uv:u.getAttribLocation(s,"uv")},l={uvOffset:u.getUniformLocation(s,"uvOffset"),uvScale:u.getUniformLocation(s,"uvScale"),rotation:u.getUniformLocation(s,"rotation"),scale:u.getUniformLocation(s,"scale"),color:u.getUniformLocation(s,"color"),map:u.getUniformLocation(s,"map"),opacity:u.getUniformLocation(s,"opacity"),modelViewMatrix:u.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:u.getUniformLocation(s,"projectionMatrix"),fogType:u.getUniformLocation(s,"fogType"),fogDensity:u.getUniformLocation(s,"fogDensity"),fogNear:u.getUniformLocation(s,"fogNear"),fogFar:u.getUniformLocation(s,"fogFar"),fogColor:u.getUniformLocation(s,"fogColor"),alphaTest:u.getUniformLocation(s,"alphaTest")}
var n=document.createElement("canvas")
n.width=8,n.height=8
var d=n.getContext("2d")
d.fillStyle="white",d.fillRect(0,0,8,8),c=new r.Texture(n),c.needsUpdate=!0}
this.render=function(i,g){if(0!==t.length){void 0===s&&m(),u.useProgram(s),u.enableVertexAttribArray(h.position),u.enableVertexAttribArray(h.uv),u.disable(u.CULL_FACE),u.enable(u.BLEND),u.bindBuffer(u.ARRAY_BUFFER,a),u.vertexAttribPointer(h.position,2,u.FLOAT,!1,16,0),u.vertexAttribPointer(h.uv,2,u.FLOAT,!1,16,8),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o),u.uniformMatrix4fv(l.projectionMatrix,!1,g.projectionMatrix.elements),u.activeTexture(u.TEXTURE0),u.uniform1i(l.map,0)
var v=0,y=0,w=i.fog
w?(u.uniform3f(l.fogColor,w.color.r,w.color.g,w.color.b),w instanceof r.Fog?(u.uniform1f(l.fogNear,w.near),u.uniform1f(l.fogFar,w.far),u.uniform1i(l.fogType,1),v=1,y=1):w instanceof r.FogExp2&&(u.uniform1f(l.fogDensity,w.density),u.uniform1i(l.fogType,2),v=2,y=2)):(u.uniform1i(l.fogType,0),v=0,y=0)
for(var b=0,x=t.length;x>b;b++){var _=t[b]
_._modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,_.matrixWorld),_.z=-_._modelViewMatrix.elements[14]}t.sort(n)
for(var k=[],b=0,x=t.length;x>b;b++){var _=t[b],M=_.material
u.uniform1f(l.alphaTest,M.alphaTest),u.uniformMatrix4fv(l.modelViewMatrix,!1,_._modelViewMatrix.elements),_.matrixWorld.decompose(d,p,f),k[0]=f.x,k[1]=f.y
var S=0
i.fog&&M.fog&&(S=y),v!==S&&(u.uniform1i(l.fogType,S),v=S),null!==M.map?(u.uniform2f(l.uvOffset,M.map.offset.x,M.map.offset.y),u.uniform2f(l.uvScale,M.map.repeat.x,M.map.repeat.y)):(u.uniform2f(l.uvOffset,0,0),u.uniform2f(l.uvScale,1,1)),u.uniform1f(l.opacity,M.opacity),u.uniform3f(l.color,M.color.r,M.color.g,M.color.b),u.uniform1f(l.rotation,M.rotation),u.uniform2fv(l.scale,k),e.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst),e.setDepthTest(M.depthTest),e.setDepthWrite(M.depthWrite),M.map&&M.map.image&&M.map.image.width?e.setTexture(M.map,0):e.setTexture(c,0),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0)}u.enable(u.CULL_FACE),e.resetGLState()}}},r.GeometryUtils={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.")
var n
t instanceof r.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},r.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,i,n){var a=new r.ImageLoader
a.crossOrigin=this.crossOrigin
var o=new r.Texture(void 0,t)
return a.load(e,function(e){o.image=e,o.needsUpdate=!0,i&&i(o)},void 0,function(e){n&&n(e)}),o.sourceFile=e,o},loadTextureCube:function(e,t,i,n){var a=[],o=new r.ImageLoader
o.crossOrigin=this.crossOrigin
var s=new r.CubeTexture(a,t)
s.flipY=!1
for(var h=0,l=function(t){o.load(e[t],function(e){s.images[t]=e,h+=1,6===h&&(s.needsUpdate=!0,i&&i(s))},void 0,n)},c=0,u=e.length;u>c;++c)l(c)
return s},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var i=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},n=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},r=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])
return[e[0]/t,e[1]/t,e[2]/t]}
t=1|t
var a=e.width,o=e.height,s=document.createElement("canvas")
s.width=a,s.height=o
var h=s.getContext("2d")
h.drawImage(e,0,0)
for(var l=h.getImageData(0,0,a,o).data,c=h.createImageData(a,o),u=c.data,d=0;a>d;d++)for(var p=0;o>p;p++){var f=0>p-1?0:p-1,m=p+1>o-1?o-1:p+1,g=0>d-1?0:d-1,v=d+1>a-1?a-1:d+1,y=[],w=[0,0,l[4*(p*a+d)]/255*t]
y.push([-1,0,l[4*(p*a+g)]/255*t]),y.push([-1,-1,l[4*(f*a+g)]/255*t]),y.push([0,-1,l[4*(f*a+d)]/255*t]),y.push([1,-1,l[4*(f*a+v)]/255*t]),y.push([1,0,l[4*(p*a+v)]/255*t]),y.push([1,1,l[4*(m*a+v)]/255*t]),y.push([0,1,l[4*(m*a+d)]/255*t]),y.push([-1,1,l[4*(m*a+g)]/255*t])
for(var b=[],x=y.length,_=0;x>_;_++){var k=y[_],M=y[(_+1)%x]
k=n(k,w),M=n(M,w),b.push(r(i(k,M)))}for(var S=[0,0,0],_=0;_<b.length;_++)S[0]+=b[_][0],S[1]+=b[_][1],S[2]+=b[_][2]
S[0]/=b.length,S[1]/=b.length,S[2]/=b.length
var T=4*(p*a+d)
u[T]=(S[0]+1)/2*255|0,u[T+1]=(S[1]+1)/2*255|0,u[T+2]=255*S[2]|0,u[T+3]=255}return h.putImageData(c,0,0),s},generateDataTexture:function(e,t,i){for(var n=e*t,a=new Uint8Array(3*n),o=Math.floor(255*i.r),s=Math.floor(255*i.g),h=Math.floor(255*i.b),l=0;n>l;l++)a[3*l]=o,a[3*l+1]=s,a[3*l+2]=h
var c=new r.DataTexture(a,e,t,r.RGBFormat)
return c.needsUpdate=!0,c}},r.SceneUtils={createMultiMaterialObject:function(e,t){for(var i=new r.Object3D,n=0,a=t.length;a>n;n++)i.add(new r.Mesh(e,t[n]))
return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attach:function(e,t,i){var n=new r.Matrix4
n.getInverse(i.matrixWorld),e.applyMatrix(n),t.remove(e),i.add(e)}},r.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase(),i=this
i.faces[t]=i.faces[t]||{},i.faces[t][e.cssFontWeight]=i.faces[t][e.cssFontWeight]||{},i.faces[t][e.cssFontWeight][e.cssFontStyle]=e
i.faces[t][e.cssFontWeight][e.cssFontStyle]=e
return e},drawText:function(e){var t,i=this.getFace(),n=this.size/i.resolution,a=0,o=String(e).split(""),s=o.length,h=[]
for(t=0;s>t;t++){var l=new r.Path,c=this.extractGlyphPoints(o[t],i,n,a,l)
a+=c.offset,h.push(c.path)}var u=a/2
return{paths:h,offset:u}},extractGlyphPoints:function(e,t,i,n,a){var o,s,h,l,c,u,d,p,f,m,g,v,y,w,b,x,_,k,M,S=[],T=t.glyphs[e]||t.glyphs["?"]
if(T){if(T.o)for(l=T._cachedOutline||(T._cachedOutline=T.o.split(" ")),u=l.length,d=i,p=i,o=0;u>o;)switch(c=l[o++]){case"m":f=l[o++]*d+n,m=l[o++]*p,a.moveTo(f,m)
break
case"l":f=l[o++]*d+n,m=l[o++]*p,a.lineTo(f,m)
break
case"q":if(g=l[o++]*d+n,v=l[o++]*p,b=l[o++]*d+n,x=l[o++]*p,a.quadraticCurveTo(b,x,g,v),M=S[S.length-1])for(y=M.x,w=M.y,s=1,h=this.divisions;h>=s;s++){var C=s/h
r.Shape.Utils.b2(C,y,b,g),r.Shape.Utils.b2(C,w,x,v)}break
case"b":if(g=l[o++]*d+n,v=l[o++]*p,b=l[o++]*d+n,x=l[o++]*p,_=l[o++]*d+n,k=l[o++]*p,a.bezierCurveTo(b,x,_,k,g,v),M=S[S.length-1])for(y=M.x,w=M.y,s=1,h=this.divisions;h>=s;s++){var C=s/h
r.Shape.Utils.b3(C,y,b,_,g),r.Shape.Utils.b3(C,w,x,k,v)}}return{offset:T.ha*i,path:a}}}},r.FontUtils.generateShapes=function(e,t){t=t||{}
var i=void 0!==t.size?t.size:100,n=void 0!==t.curveSegments?t.curveSegments:4,a=void 0!==t.font?t.font:"helvetiker",o=void 0!==t.weight?t.weight:"normal",s=void 0!==t.style?t.style:"normal"
r.FontUtils.size=i,r.FontUtils.divisions=n,r.FontUtils.face=a,r.FontUtils.weight=o,r.FontUtils.style=s
for(var h=r.FontUtils.drawText(e),l=h.paths,c=[],u=0,d=l.length;d>u;u++)Array.prototype.push.apply(c,l[u].toShapes())
return c},function(e){var t=1e-10,i=function(e,t){var i=e.length
if(3>i)return null
var a,o,s,h=[],l=[],c=[]
if(n(e)>0)for(o=0;i>o;o++)l[o]=o
else for(o=0;i>o;o++)l[o]=i-1-o
var u=i,d=2*u
for(o=u-1;u>2;){if(d--<=0)return console.log("Warning, unable to triangulate polygon!"),t?c:h
if(a=o,a>=u&&(a=0),o=a+1,o>=u&&(o=0),s=o+1,s>=u&&(s=0),r(e,a,o,s,u,l)){var p,f,m,g,v
for(p=l[a],f=l[o],m=l[s],h.push([e[p],e[f],e[m]]),c.push([l[a],l[o],l[s]]),g=o,v=o+1;u>v;g++,v++)l[g]=l[v]
u--,d=2*u}}return t?c:h},n=function(e){for(var t=e.length,i=0,n=t-1,r=0;t>r;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y
return.5*i},r=function(e,i,n,r,a,o){var s,h,l,c,u,d,p,f,m
if(h=e[o[i]].x,l=e[o[i]].y,c=e[o[n]].x,u=e[o[n]].y,d=e[o[r]].x,p=e[o[r]].y,t>(c-h)*(p-l)-(u-l)*(d-h))return!1
var g,v,y,w,b,x,_,k,M,S,T,C,E,A,L
for(g=d-c,v=p-u,y=h-d,w=l-p,b=c-h,x=u-l,s=0;a>s;s++)if(f=e[o[s]].x,m=e[o[s]].y,!(f===h&&m===l||f===c&&m===u||f===d&&m===p)&&(_=f-h,k=m-l,M=f-c,S=m-u,T=f-d,C=m-p,L=g*S-v*M,E=b*k-x*_,A=y*C-w*T,L>=-t&&A>=-t&&E>=-t))return!1
return!0}
return e.Triangulate=i,e.Triangulate.area=n,e}(r.FontUtils),n._typeface_js={faces:r.FontUtils.faces,loadFace:r.FontUtils.loadFace},r.typeface_js=n._typeface_js,r.Audio=function(e){r.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},r.Audio.prototype=Object.create(r.Object3D.prototype),r.Audio.prototype.constructor=r.Audio,r.Audio.prototype.load=function(e){var t=this,i=new XMLHttpRequest
return i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.source.connect(t.panner),t.source.start(0)})},i.send(),this},r.Audio.prototype.setLoop=function(e){this.source.loop=e},r.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},r.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},r.Audio.prototype.updateMatrixWorld=function(){var e=new r.Vector3
return function(t){r.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),r.AudioListener=function(){r.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},r.AudioListener.prototype=Object.create(r.Object3D.prototype),r.AudioListener.prototype.constructor=r.AudioListener,r.AudioListener.prototype.updateMatrixWorld=function(){var e=new r.Vector3,t=new r.Quaternion,i=new r.Vector3,n=new r.Vector3,a=new r.Vector3,o=new r.Vector3
return function(s){r.Object3D.prototype.updateMatrixWorld.call(this,s)
var h=this.context.listener,l=this.up
this.matrixWorld.decompose(e,t,i),n.set(0,0,-1).applyQuaternion(t),a.subVectors(e,o),h.setPosition(e.x,e.y,e.z),h.setOrientation(n.x,n.y,n.z,l.x,l.y,l.z),h.setVelocity(a.x,a.y,a.z),o.copy(e)}}(),r.Curve=function(){},r.Curve.prototype.getPoint=function(e){return console.log("Warning, getPoint() not implemented!"),null},r.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e)
return this.getPoint(t)},r.Curve.prototype.getPoints=function(e){e||(e=5)
var t,i=[]
for(t=0;e>=t;t++)i.push(this.getPoint(t/e))
return i},r.Curve.prototype.getSpacedPoints=function(e){e||(e=5)
var t,i=[]
for(t=0;e>=t;t++)i.push(this.getPointAt(t/e))
return i},r.Curve.prototype.getLength=function(){var e=this.getLengths()
return e[e.length-1]},r.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths
this.needsUpdate=!1
var t,i,n=[],r=this.getPoint(0),a=0
for(n.push(0),i=1;e>=i;i++)t=this.getPoint(i/e),a+=t.distanceTo(r),n.push(a),r=t
return this.cacheArcLengths=n,n},r.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},r.Curve.prototype.getUtoTmapping=function(e,t){var i,n=this.getLengths(),r=0,a=n.length
i=t?t:e*n[a-1]
for(var o,s=0,h=a-1;h>=s;)if(r=Math.floor(s+(h-s)/2),o=n[r]-i,0>o)s=r+1
else{if(!(o>0)){h=r
break}h=r-1}if(r=h,n[r]==i){var l=r/(a-1)
return l}var c=n[r],u=n[r+1],d=u-c,p=(i-c)/d,l=(r+p)/(a-1)
return l},r.Curve.prototype.getTangent=function(e){var t=1e-4,i=e-t,n=e+t
0>i&&(i=0),n>1&&(n=1)
var r=this.getPoint(i),a=this.getPoint(n),o=a.clone().sub(r)
return o.normalize()},r.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e)
return this.getTangent(t)},r.Curve.Utils={tangentQuadraticBezier:function(e,t,i,n){return 2*(1-e)*(i-t)+2*e*(n-i)},tangentCubicBezier:function(e,t,i,n,r){return-3*t*(1-e)*(1-e)+3*i*(1-e)*(1-e)-6*e*i*(1-e)+6*e*n*(1-e)-3*e*e*n+3*e*e*r},tangentSpline:function(e,t,i,n,r){var a=6*e*e-6*e,o=3*e*e-4*e+1,s=-6*e*e+6*e,h=3*e*e-2*e
return a+o+s+h},interpolate:function(e,t,i,n,r){var a=.5*(i-e),o=.5*(n-t),s=r*r,h=r*s
return(2*t-2*i+a+o)*h+(-3*t+3*i-2*a-o)*s+a*r+t}},r.Curve.create=function(e,t){return e.prototype=Object.create(r.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},r.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},r.CurvePath.prototype=Object.create(r.Curve.prototype),r.CurvePath.prototype.constructor=r.CurvePath,r.CurvePath.prototype.add=function(e){this.curves.push(e)},r.CurvePath.prototype.checkConnection=function(){},r.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1)
e.equals(t)||this.curves.push(new r.LineCurve(t,e))},r.CurvePath.prototype.getPoint=function(e){for(var t,i,n=e*this.getLength(),r=this.getCurveLengths(),a=0;a<r.length;){if(r[a]>=n){t=r[a]-n,i=this.curves[a]
var o=1-t/i.getLength()
return i.getPointAt(o)}a++}return null},r.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths()
return e[e.length-1]},r.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths
var e,t=[],i=0,n=this.curves.length
for(e=0;n>e;e++)i+=this.curves[e].getLength(),t.push(i)
return this.cacheLengths=t,t},r.CurvePath.prototype.getBoundingBox=function(){var e,t,i,n,a,o,s=this.getPoints()
e=t=Number.NEGATIVE_INFINITY,n=a=Number.POSITIVE_INFINITY
var h,l,c,u,d=s[0]instanceof r.Vector3
for(u=d?new r.Vector3:new r.Vector2,l=0,c=s.length;c>l;l++)h=s[l],h.x>e?e=h.x:h.x<n&&(n=h.x),h.y>t?t=h.y:h.y<a&&(a=h.y),d&&(h.z>i?i=h.z:h.z<o&&(o=h.z)),u.add(h)
var p={minX:n,minY:a,maxX:e,maxY:t}
return d&&(p.maxZ=i,p.minZ=o),p},r.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0)
return this.createGeometry(t)},r.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0)
return this.createGeometry(t)},r.CurvePath.prototype.createGeometry=function(e){for(var t=new r.Geometry,i=0;i<e.length;i++)t.vertices.push(new r.Vector3(e[i].x,e[i].y,e[i].z||0))
return t},r.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},r.CurvePath.prototype.getTransformedPoints=function(e,t){var i,n,r=this.getPoints(e)
for(t||(t=this.bends),i=0,n=t.length;n>i;i++)r=this.getWrapPoints(r,t[i])
return r},r.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var i,n,r=this.getSpacedPoints(e)
for(t||(t=this.bends),i=0,n=t.length;n>i;i++)r=this.getWrapPoints(r,t[i])
return r},r.CurvePath.prototype.getWrapPoints=function(e,t){var i,n,r,a,o,s,h=this.getBoundingBox()
for(i=0,n=e.length;n>i;i++){r=e[i],a=r.x,o=r.y,s=a/h.maxX,s=t.getUtoTmapping(s,a)
var l=t.getPoint(s),c=t.getTangent(s)
c.set(-c.y,c.x).multiplyScalar(o),r.x=l.x+c.x,r.y=l.y+c.y}return e},r.Gyroscope=function(){r.Object3D.call(this)},r.Gyroscope.prototype=Object.create(r.Object3D.prototype),r.Gyroscope.prototype.constructor=r.Gyroscope,r.Gyroscope.prototype.updateMatrixWorld=function(){var e=new r.Vector3,t=new r.Quaternion,i=new r.Vector3,n=new r.Vector3,a=new r.Quaternion,o=new r.Vector3
return function(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(n,a,o),this.matrix.decompose(e,t,i),this.matrixWorld.compose(n,t,o)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0)
for(var s=0,h=this.children.length;h>s;s++)this.children[s].updateMatrixWorld(r)}}(),r.Path=function(e){r.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},r.Path.prototype=Object.create(r.CurvePath.prototype),r.Path.prototype.constructor=r.Path,r.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},r.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y)
for(var t=1,i=e.length;i>t;t++)this.lineTo(e[t].x,e[t].y)},r.Path.prototype.moveTo=function(e,t){var i=Array.prototype.slice.call(arguments)
this.actions.push({action:r.PathActions.MOVE_TO,args:i})},r.Path.prototype.lineTo=function(e,t){var i=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,a=n[n.length-2],o=n[n.length-1],s=new r.LineCurve(new r.Vector2(a,o),new r.Vector2(e,t))
this.curves.push(s),this.actions.push({action:r.PathActions.LINE_TO,args:i})},r.Path.prototype.quadraticCurveTo=function(e,t,i,n){var a=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,s=o[o.length-2],h=o[o.length-1],l=new r.QuadraticBezierCurve(new r.Vector2(s,h),new r.Vector2(e,t),new r.Vector2(i,n))
this.curves.push(l),this.actions.push({action:r.PathActions.QUADRATIC_CURVE_TO,args:a})},r.Path.prototype.bezierCurveTo=function(e,t,i,n,a,o){var s=Array.prototype.slice.call(arguments),h=this.actions[this.actions.length-1].args,l=h[h.length-2],c=h[h.length-1],u=new r.CubicBezierCurve(new r.Vector2(l,c),new r.Vector2(e,t),new r.Vector2(i,n),new r.Vector2(a,o))
this.curves.push(u),this.actions.push({action:r.PathActions.BEZIER_CURVE_TO,args:s})},r.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,n=i[i.length-2],a=i[i.length-1],o=[new r.Vector2(n,a)]
Array.prototype.push.apply(o,e)
var s=new r.SplineCurve(o)
this.curves.push(s),this.actions.push({action:r.PathActions.CSPLINE_THRU,args:t})},r.Path.prototype.arc=function(e,t,i,n,r,a){var o=this.actions[this.actions.length-1].args,s=o[o.length-2],h=o[o.length-1]
this.absarc(e+s,t+h,i,n,r,a)},r.Path.prototype.absarc=function(e,t,i,n,r,a){this.absellipse(e,t,i,i,n,r,a)},r.Path.prototype.ellipse=function(e,t,i,n,r,a,o){var s=this.actions[this.actions.length-1].args,h=s[s.length-2],l=s[s.length-1]
this.absellipse(e+h,t+l,i,n,r,a,o)},r.Path.prototype.absellipse=function(e,t,i,n,a,o,s){var h=Array.prototype.slice.call(arguments),l=new r.EllipseCurve(e,t,i,n,a,o,s)
this.curves.push(l)
var c=l.getPoint(1)
h.push(c.x),h.push(c.y),this.actions.push({action:r.PathActions.ELLIPSE,args:h})},r.Path.prototype.getSpacedPoints=function(e,t){e||(e=40)
for(var i=[],n=0;e>n;n++)i.push(this.getPoint(n/e))
return i},r.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t)
e=e||12
var i,n,a,o,s,h,l,c,u,d,p,f,m,g,v,y,w,b,x=[]
for(i=0,n=this.actions.length;n>i;i++)switch(a=this.actions[i],o=a.action,s=a.args,o){case r.PathActions.MOVE_TO:x.push(new r.Vector2(s[0],s[1]))
break
case r.PathActions.LINE_TO:x.push(new r.Vector2(s[0],s[1]))
break
case r.PathActions.QUADRATIC_CURVE_TO:for(h=s[2],l=s[3],d=s[0],p=s[1],x.length>0?(g=x[x.length-1],f=g.x,m=g.y):(g=this.actions[i-1].args,f=g[g.length-2],m=g[g.length-1]),v=1;e>=v;v++)y=v/e,w=r.Shape.Utils.b2(y,f,d,h),b=r.Shape.Utils.b2(y,m,p,l),x.push(new r.Vector2(w,b))
break
case r.PathActions.BEZIER_CURVE_TO:for(h=s[4],l=s[5],d=s[0],p=s[1],c=s[2],u=s[3],x.length>0?(g=x[x.length-1],f=g.x,m=g.y):(g=this.actions[i-1].args,f=g[g.length-2],m=g[g.length-1]),v=1;e>=v;v++)y=v/e,w=r.Shape.Utils.b3(y,f,d,c,h),b=r.Shape.Utils.b3(y,m,p,u,l),x.push(new r.Vector2(w,b))
break
case r.PathActions.CSPLINE_THRU:g=this.actions[i-1].args
var _=new r.Vector2(g[g.length-2],g[g.length-1]),k=[_],M=e*s[0].length
k=k.concat(s[0])
var S=new r.SplineCurve(k)
for(v=1;M>=v;v++)x.push(S.getPointAt(v/M))
break
case r.PathActions.ARC:var T,C=s[0],E=s[1],A=s[2],L=s[3],P=s[4],R=!!s[5],F=P-L,D=2*e
for(v=1;D>=v;v++)y=v/D,R||(y=1-y),T=L+y*F,w=C+A*Math.cos(T),b=E+A*Math.sin(T),x.push(new r.Vector2(w,b))
break
case r.PathActions.ELLIPSE:var T,C=s[0],E=s[1],B=s[2],O=s[3],L=s[4],P=s[5],R=!!s[6],F=P-L,D=2*e
for(v=1;D>=v;v++)y=v/D,R||(y=1-y),T=L+y*F,w=C+B*Math.cos(T),b=E+O*Math.sin(T),x.push(new r.Vector2(w,b))}var V=x[x.length-1],z=1e-10
return Math.abs(V.x-x[0].x)<z&&Math.abs(V.y-x[0].y)<z&&x.splice(x.length-1,1),t&&x.push(x[0]),x},r.Path.prototype.toShapes=function(e,t){function i(e){var t,i,n,a,o,s=[],h=new r.Path
for(t=0,i=e.length;i>t;t++)n=e[t],o=n.args,a=n.action,a==r.PathActions.MOVE_TO&&0!=h.actions.length&&(s.push(h),h=new r.Path),h[a].apply(h,o)
return 0!=h.actions.length&&s.push(h),s}function n(e){for(var t=[],i=0,n=e.length;n>i;i++){var a=e[i],o=new r.Shape
o.actions=a.actions,o.curves=a.curves,t.push(o)}return t}function a(e,t){for(var i=1e-10,n=t.length,r=!1,a=n-1,o=0;n>o;a=o++){var s=t[a],h=t[o],l=h.x-s.x,c=h.y-s.y
if(Math.abs(c)>i){if(0>c&&(s=t[o],l=-l,h=t[a],c=-c),e.y<s.y||e.y>h.y)continue
if(e.y==s.y){if(e.x==s.x)return!0}else{var u=c*(e.x-s.x)-l*(e.y-s.y)
if(0==u)return!0
if(0>u)continue
r=!r}}else{if(e.y!=s.y)continue
if(h.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=h.x)return!0}}return r}var o=i(this.actions)
if(0==o.length)return[]
if(t===!0)return n(o)
var s,h,l,c=[]
if(1==o.length)return h=o[0],l=new r.Shape,l.actions=h.actions,l.curves=h.curves,c.push(l),c
var u=!r.Shape.Utils.isClockWise(o[0].getPoints())
u=e?!u:u
var d,p=[],f=[],m=[],g=0
f[g]=void 0,m[g]=[]
var v,y
for(v=0,y=o.length;y>v;v++)h=o[v],d=h.getPoints(),s=r.Shape.Utils.isClockWise(d),s=e?!s:s,s?(!u&&f[g]&&g++,f[g]={s:new r.Shape,p:d},f[g].s.actions=h.actions,f[g].s.curves=h.curves,u&&g++,m[g]=[]):m[g].push({h:h,p:d[0]})
if(!f[0])return n(o)
if(f.length>1){for(var w=!1,b=[],x=0,_=f.length;_>x;x++)p[x]=[]
for(var x=0,_=f.length;_>x;x++)for(var k=(f[x],m[x]),M=0;M<k.length;M++){for(var S=k[M],T=!0,C=0;C<f.length;C++)a(S.p,f[C].p)&&(x!=C&&b.push({froms:x,tos:C,hole:M}),T?(T=!1,p[C].push(S)):w=!0)
T&&p[x].push(S)}b.length>0&&(w||(m=p))}var E,A,L
for(v=0,y=f.length;y>v;v++)for(l=f[v].s,c.push(l),E=m[v],A=0,L=E.length;L>A;A++)l.holes.push(E[A].h)
return c},r.Shape=function(){r.Path.apply(this,arguments),this.holes=[]},r.Shape.prototype=Object.create(r.Path.prototype),r.Shape.prototype.constructor=r.Shape,r.Shape.prototype.extrude=function(e){var t=new r.ExtrudeGeometry(this,e)
return t},r.Shape.prototype.makeGeometry=function(e){var t=new r.ShapeGeometry(this,e)
return t},r.Shape.prototype.getPointsHoles=function(e){var t,i=this.holes.length,n=[]
for(t=0;i>t;t++)n[t]=this.holes[t].getTransformedPoints(e,this.bends)
return n},r.Shape.prototype.getSpacedPointsHoles=function(e){var t,i=this.holes.length,n=[]
for(t=0;i>t;t++)n[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends)
return n},r.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},r.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},r.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},r.Shape.Utils={triangulateShape:function(e,t){function i(e,t,i){return e.x!=t.x?e.x<t.x?e.x<=i.x&&i.x<=t.x:t.x<=i.x&&i.x<=e.x:e.y<t.y?e.y<=i.y&&i.y<=t.y:t.y<=i.y&&i.y<=e.y}function n(e,t,n,r,a){var o=1e-10,s=t.x-e.x,h=t.y-e.y,l=r.x-n.x,c=r.y-n.y,u=e.x-n.x,d=e.y-n.y,p=h*l-s*c,f=h*u-s*d
if(Math.abs(p)>o){var m
if(p>0){if(0>f||f>p)return[]
if(m=c*u-l*d,0>m||m>p)return[]}else{if(f>0||p>f)return[]
if(m=c*u-l*d,m>0||p>m)return[]}if(0==m)return!a||0!=f&&f!=p?[e]:[]
if(m==p)return!a||0!=f&&f!=p?[t]:[]
if(0==f)return[n]
if(f==p)return[r]
var g=m/p
return[{x:e.x+g*s,y:e.y+g*h}]}if(0!=f||c*u!=l*d)return[]
var v=0==s&&0==h,y=0==l&&0==c
if(v&&y)return e.x!=n.x||e.y!=n.y?[]:[e]
if(v)return i(n,r,e)?[e]:[]
if(y)return i(e,t,n)?[n]:[]
var w,b,x,_,k,M,S,T
return 0!=s?(e.x<t.x?(w=e,x=e.x,b=t,_=t.x):(w=t,x=t.x,b=e,_=e.x),n.x<r.x?(k=n,S=n.x,M=r,T=r.x):(k=r,S=r.x,M=n,T=n.x)):(e.y<t.y?(w=e,x=e.y,b=t,_=t.y):(w=t,x=t.y,b=e,_=e.y),n.y<r.y?(k=n,S=n.y,M=r,T=r.y):(k=r,S=r.y,M=n,T=n.y)),S>=x?S>_?[]:_==S?a?[]:[k]:T>=_?[k,b]:[k,M]:x>T?[]:x==T?a?[]:[w]:T>=_?[w,b]:[w,M]}function a(e,t,i,n){var r=1e-10,a=t.x-e.x,o=t.y-e.y,s=i.x-e.x,h=i.y-e.y,l=n.x-e.x,c=n.y-e.y,u=a*h-o*s,d=a*c-o*l
if(Math.abs(u)>r){var p=l*h-c*s
return u>0?d>=0&&p>=0:d>=0||p>=0}return d>0}function o(e,t){function i(e,t){var i=y.length-1,n=e-1
0>n&&(n=i)
var r=e+1
r>i&&(r=0)
var o=a(y[e],y[n],y[r],s[t])
if(!o)return!1
var h=s.length-1,l=t-1
0>l&&(l=h)
var c=t+1
return c>h&&(c=0),o=a(s[t],s[l],s[c],y[e]),o?!0:!1}function r(e,t){var i,r,a
for(i=0;i<y.length;i++)if(r=i+1,r%=y.length,a=n(e,t,y[i],y[r],!0),a.length>0)return!0
return!1}function o(e,i){var r,a,o,s,h
for(r=0;r<w.length;r++)for(a=t[w[r]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,h=n(e,i,a[o],a[s],!0),h.length>0)return!0
return!1}for(var s,h,l,c,u,d,p,f,m,g,v,y=e.concat(),w=[],b=[],x=0,_=t.length;_>x;x++)w.push(x)
for(var k=0,M=2*w.length;w.length>0;){if(M--,0>M){console.log("Infinite Loop! Holes left:"+w.length+", Probably Hole outside Shape!")
break}for(l=k;l<y.length;l++){c=y[l],h=-1
for(var x=0;x<w.length;x++)if(d=w[x],p=c.x+":"+c.y+":"+d,void 0===b[p]){s=t[d]
for(var S=0;S<s.length;S++)if(u=s[S],i(l,S)&&!r(c,u)&&!o(c,u)){h=S,w.splice(x,1),f=y.slice(0,l+1),m=y.slice(l),g=s.slice(h),v=s.slice(0,h+1),y=f.concat(g).concat(v).concat(m),k=l
break}if(h>=0)break
b[p]=!0}if(h>=0)break}}return y}for(var s,h,l,c,u,d,p={},f=e.concat(),m=0,g=t.length;g>m;m++)Array.prototype.push.apply(f,t[m])
for(s=0,h=f.length;h>s;s++)u=f[s].x+":"+f[s].y,void 0!==p[u]&&console.log("Duplicate point",u),p[u]=s
var v=o(e,t),y=r.FontUtils.Triangulate(v,!1)
for(s=0,h=y.length;h>s;s++)for(c=y[s],l=0;3>l;l++)u=c[l].x+":"+c[l].y,d=p[u],void 0!==d&&(c[l]=d)
return y.concat()},isClockWise:function(e){return r.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var i=1-e
return i*i*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,i,n){return this.b2p0(e,t)+this.b2p1(e,i)+this.b2p2(e,n)},b3p0:function(e,t){var i=1-e
return i*i*i*t},b3p1:function(e,t){var i=1-e
return 3*i*i*e*t},b3p2:function(e,t){var i=1-e
return 3*i*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,i,n,r){return this.b3p0(e,t)+this.b3p1(e,i)+this.b3p2(e,n)+this.b3p3(e,r)}},r.LineCurve=function(e,t){this.v1=e,this.v2=t},r.LineCurve.prototype=Object.create(r.Curve.prototype),r.LineCurve.prototype.constructor=r.LineCurve,r.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1)
return t.multiplyScalar(e).add(this.v1),t},r.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},r.LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1)
return t.normalize()},r.QuadraticBezierCurve=function(e,t,i){this.v0=e,this.v1=t,this.v2=i},r.QuadraticBezierCurve.prototype=Object.create(r.Curve.prototype),r.QuadraticBezierCurve.prototype.constructor=r.QuadraticBezierCurve,r.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new r.Vector2
return t.x=r.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=r.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},r.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new r.Vector2
return t.x=r.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=r.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},r.CubicBezierCurve=function(e,t,i,n){this.v0=e,this.v1=t,this.v2=i,this.v3=n},r.CubicBezierCurve.prototype=Object.create(r.Curve.prototype),r.CubicBezierCurve.prototype.constructor=r.CubicBezierCurve,r.CubicBezierCurve.prototype.getPoint=function(e){var t,i
return t=r.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=r.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new r.Vector2(t,i)},r.CubicBezierCurve.prototype.getTangent=function(e){var t,i
t=r.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=r.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)
var n=new r.Vector2(t,i)
return n.normalize(),n},r.SplineCurve=function(e){this.points=void 0==e?[]:e},r.SplineCurve.prototype=Object.create(r.Curve.prototype),r.SplineCurve.prototype.constructor=r.SplineCurve,r.SplineCurve.prototype.getPoint=function(e){var t=this.points,i=(t.length-1)*e,n=Math.floor(i),a=i-n,o=t[0==n?n:n-1],s=t[n],h=t[n>t.length-2?t.length-1:n+1],l=t[n>t.length-3?t.length-1:n+2],c=new r.Vector2
return c.x=r.Curve.Utils.interpolate(o.x,s.x,h.x,l.x,a),c.y=r.Curve.Utils.interpolate(o.y,s.y,h.y,l.y,a),c},r.EllipseCurve=function(e,t,i,n,r,a,o){this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o},r.EllipseCurve.prototype=Object.create(r.Curve.prototype),r.EllipseCurve.prototype.constructor=r.EllipseCurve,r.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle
0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI)
var i
i=this.aClockwise===!0?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t
var n=new r.Vector2
return n.x=this.aX+this.xRadius*Math.cos(i),n.y=this.aY+this.yRadius*Math.sin(i),n},r.ArcCurve=function(e,t,i,n,a,o){r.EllipseCurve.call(this,e,t,i,i,n,a,o)},r.ArcCurve.prototype=Object.create(r.EllipseCurve.prototype),r.ArcCurve.prototype.constructor=r.ArcCurve,r.LineCurve3=r.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new r.Vector3
return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),r.QuadraticBezierCurve3=r.Curve.create(function(e,t,i){this.v0=e,this.v1=t,this.v2=i},function(e){var t=new r.Vector3
return t.x=r.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=r.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=r.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),r.CubicBezierCurve3=r.Curve.create(function(e,t,i,n){this.v0=e,this.v1=t,this.v2=i,this.v3=n},function(e){var t=new r.Vector3
return t.x=r.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=r.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=r.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),r.SplineCurve3=r.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,i=(t.length-1)*e,n=Math.floor(i),a=i-n,o=t[0==n?n:n-1],s=t[n],h=t[n>t.length-2?t.length-1:n+1],l=t[n>t.length-3?t.length-1:n+2],c=new r.Vector3
return c.x=r.Curve.Utils.interpolate(o.x,s.x,h.x,l.x,a),c.y=r.Curve.Utils.interpolate(o.y,s.y,h.y,l.y,a),c.z=r.Curve.Utils.interpolate(o.z,s.z,h.z,l.z,a),c}),r.ClosedSplineCurve3=r.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,i=(t.length-0)*e,n=Math.floor(i),a=i-n
n+=n>0?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length
var o=t[(n-1)%t.length],s=t[n%t.length],h=t[(n+1)%t.length],l=t[(n+2)%t.length],c=new r.Vector3
return c.x=r.Curve.Utils.interpolate(o.x,s.x,h.x,l.x,a),c.y=r.Curve.Utils.interpolate(o.y,s.y,h.y,l.y,a),c.z=r.Curve.Utils.interpolate(o.z,s.z,h.z,l.z,a),c}),r.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(e.initialized===!0)return e
for(var t=0;t<e.hierarchy.length;t++){for(var i=0;i<e.hierarchy[t].keys.length;i++)if(e.hierarchy[t].keys[i].time<0&&(e.hierarchy[t].keys[i].time=0),void 0!==e.hierarchy[t].keys[i].rot&&!(e.hierarchy[t].keys[i].rot instanceof r.Quaternion)){var n=e.hierarchy[t].keys[i].rot
e.hierarchy[t].keys[i].rot=(new r.Quaternion).fromArray(n)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var a={},i=0;i<e.hierarchy[t].keys.length;i++)for(var o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++){var s=e.hierarchy[t].keys[i].morphTargets[o]
a[s]=-1}e.hierarchy[t].usedMorphTargets=a
for(var i=0;i<e.hierarchy[t].keys.length;i++){var h={}
for(var s in a){for(var o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++)if(e.hierarchy[t].keys[i].morphTargets[o]===s){h[s]=e.hierarchy[t].keys[i].morphTargetsInfluences[o]
break}o===e.hierarchy[t].keys[i].morphTargets.length&&(h[s]=0)}e.hierarchy[t].keys[i].morphTargetsInfluences=h}}for(var i=1;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].time===e.hierarchy[t].keys[i-1].time&&(e.hierarchy[t].keys.splice(i,1),i--)
for(var i=0;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].index=i}return e.initialized=!0,e},parse:function(e){var t=function(e,i){i.push(e)
for(var n=0;n<e.children.length;n++)t(e.children[n],i)},i=[]
if(e instanceof r.SkinnedMesh)for(var n=0;n<e.skeleton.bones.length;n++)i.push(e.skeleton.bones[n])
else t(e,i)
return i},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){var t=this.animations.indexOf(e);-1!==t&&this.animations.splice(t,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights()
for(var t=0;t<this.animations.length;t++)this.animations[t].update(e)}},r.Animation=function(e,t){this.root=e,this.data=r.AnimationHandler.init(t),this.hierarchy=r.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=r.AnimationHandler.LINEAR},r.Animation.prototype.keyTypes=["pos","rot","scl"],r.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),r.AnimationHandler.play(this)},r.Animation.prototype.stop=function(){this.isPlaying=!1,r.AnimationHandler.stop(this)},r.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e]
void 0===i.animationCache&&(i.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===i.animationCache.animations[this.data.name]&&(i.animationCache.animations[this.data.name]={},i.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].originalMatrix=i.matrix)
for(var n=i.animationCache.animations[this.data.name],r=0;3>r;r++){for(var a=this.keyTypes[r],o=this.data.hierarchy[e].keys[0],s=this.getNextKeyWith(a,e,1);s.time<this.currentTime&&s.index>o.index;)o=s,s=this.getNextKeyWith(a,e,s.index+1)
n.prevKey[a]=o,n.nextKey[a]=s}}},r.Animation.prototype.resetBlendWeights=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e]
void 0!==i.animationCache&&(i.animationCache.blending.positionWeight=0,i.animationCache.blending.quaternionWeight=0,i.animationCache.blending.scaleWeight=0)}},r.Animation.prototype.update=function(){var e=[],t=new r.Vector3,i=new r.Vector3,n=new r.Quaternion,a=function(e,t){var i,n,r,a,s,h,l,c,u,d=[],p=[]
return i=(e.length-1)*t,n=Math.floor(i),r=i-n,d[0]=0===n?n:n-1,d[1]=n,d[2]=n>e.length-2?n:n+1,d[3]=n>e.length-3?n:n+2,h=e[d[0]],l=e[d[1]],c=e[d[2]],u=e[d[3]],a=r*r,s=r*a,p[0]=o(h[0],l[0],c[0],u[0],r,a,s),p[1]=o(h[1],l[1],c[1],u[1],r,a,s),p[2]=o(h[2],l[2],c[2],u[2],r,a,s),p},o=function(e,t,i,n,r,a,o){var s=.5*(i-e),h=.5*(n-t)
return(2*(t-i)+s+h)*o+(-3*(t-i)-2*s-h)*a+s*r+t}
return function(o){if(this.isPlaying!==!1&&(this.currentTime+=o*this.timeScale,0!==this.weight)){var s=this.data.length;(this.currentTime>s||this.currentTime<0)&&(this.loop?(this.currentTime%=s,this.currentTime<0&&(this.currentTime+=s),this.reset()):this.stop())
for(var h=0,l=this.hierarchy.length;l>h;h++)for(var c=this.hierarchy[h],u=c.animationCache.animations[this.data.name],d=c.animationCache.blending,p=0;3>p;p++){var f=this.keyTypes[p],m=u.prevKey[f],g=u.nextKey[f]
if(this.timeScale>0&&g.time<=this.currentTime||this.timeScale<0&&m.time>=this.currentTime){for(m=this.data.hierarchy[h].keys[0],g=this.getNextKeyWith(f,h,1);g.time<this.currentTime&&g.index>m.index;)m=g,g=this.getNextKeyWith(f,h,g.index+1)
u.prevKey[f]=m,u.nextKey[f]=g}var v=(this.currentTime-m.time)/(g.time-m.time),y=m[f],w=g[f]
if(0>v&&(v=0),v>1&&(v=1),"pos"===f){if(this.interpolationType===r.AnimationHandler.LINEAR){i.x=y[0]+(w[0]-y[0])*v,i.y=y[1]+(w[1]-y[1])*v,i.z=y[2]+(w[2]-y[2])*v
var b=this.weight/(this.weight+d.positionWeight)
c.position.lerp(i,b),d.positionWeight+=this.weight}else if(this.interpolationType===r.AnimationHandler.CATMULLROM||this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD){e[0]=this.getPrevKeyWith("pos",h,m.index-1).pos,e[1]=y,e[2]=w,e[3]=this.getNextKeyWith("pos",h,g.index+1).pos,v=.33*v+.33
var x=a(e,v),b=this.weight/(this.weight+d.positionWeight)
d.positionWeight+=this.weight
var _=c.position
if(_.x=_.x+(x[0]-_.x)*b,_.y=_.y+(x[1]-_.y)*b,_.z=_.z+(x[2]-_.z)*b,this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD){var k=a(e,1.01*v)
t.set(k[0],k[1],k[2]),t.sub(_),t.y=0,t.normalize()
var M=Math.atan2(t.x,t.z)
c.rotation.set(0,M,0)}}}else if("rot"===f)if(r.Quaternion.slerp(y,w,n,v),0===d.quaternionWeight)c.quaternion.copy(n),d.quaternionWeight=this.weight
else{var b=this.weight/(this.weight+d.quaternionWeight)
r.Quaternion.slerp(c.quaternion,n,c.quaternion,b),d.quaternionWeight+=this.weight}else if("scl"===f){i.x=y[0]+(w[0]-y[0])*v,i.y=y[1]+(w[1]-y[1])*v,i.z=y[2]+(w[2]-y[2])*v
var b=this.weight/(this.weight+d.scaleWeight)
c.scale.lerp(i,b),d.scaleWeight+=this.weight}}return!0}}}(),r.Animation.prototype.getNextKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys
for(this.interpolationType===r.AnimationHandler.CATMULLROM||this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD?i=i<n.length-1?i:n.length-1:i%=n.length;i<n.length;i++)if(void 0!==n[i][e])return n[i]
return this.data.hierarchy[t].keys[0]},r.Animation.prototype.getPrevKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys
for(i=this.interpolationType===r.AnimationHandler.CATMULLROM||this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD?i>0?i:0:i>=0?i:i+n.length;i>=0;i--)if(void 0!==n[i][e])return n[i]
return this.data.hierarchy[t].keys[n.length-1]},r.KeyFrameAnimation=function(e){this.root=e.node,this.data=r.AnimationHandler.init(e),this.hierarchy=r.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0
for(var t=0,i=this.hierarchy.length;i>t;t++){var n=this.data.hierarchy[t].keys,a=this.data.hierarchy[t].sids,o=this.hierarchy[t]
if(n.length&&a){for(var s=0;s<a.length;s++){var h=a[s],l=this.getNextKeyWith(h,t,0)
l&&l.apply(h)}o.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}},r.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,this.isPlaying===!1){this.isPlaying=!0
var t,i,n,a=this.hierarchy.length
for(t=0;a>t;t++){i=this.hierarchy[t],n=this.data.hierarchy[t],void 0===n.animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=i.matrix)
var o=this.data.hierarchy[t].keys
o.length&&(n.animationCache.prevKey=o[0],n.animationCache.nextKey=o[1],this.startTime=Math.min(o[0].time,this.startTime),this.endTime=Math.max(o[o.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,r.AnimationHandler.play(this)},r.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,r.AnimationHandler.stop(this)
for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],i=this.data.hierarchy[e]
if(void 0!==i.animationCache){var n=i.animationCache.originalMatrix
n.copy(t.matrix),t.matrix=n,delete i.animationCache}}},r.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying!==!1){this.currentTime+=e*this.timeScale
var t=this.data.length
this.loop===!0&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t)
for(var i=0,n=this.hierarchy.length;n>i;i++){var r=this.hierarchy[i],a=this.data.hierarchy[i],o=a.keys,s=a.animationCache
if(o.length){var h=s.prevKey,l=s.nextKey
if(l.time<=this.currentTime){for(;l.time<this.currentTime&&l.index>h.index;)h=l,l=o[h.index+1]
s.prevKey=h,s.nextKey=l}l.time>=this.currentTime?h.interpolate(l,this.currentTime):h.interpolate(l,l.time),this.data.hierarchy[i].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}}},r.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys
for(i%=n.length;i<n.length;i++)if(n[i].hasTarget(e))return n[i]
return n[0]},r.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys
for(i=i>=0?i:i+n.length;i>=0;i--)if(n[i].hasTarget(e))return n[i]
return n[n.length-1]},r.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.lastFrame=0,this.currentFrame=0,this.isPlaying=!1},r.MorphAnimation.prototype={constructor:r.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(e){if(this.isPlaying!==!1){this.currentTime+=e,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration)
var t=this.duration/this.frames,i=Math.floor(this.currentTime/t)
i!=this.currentFrame&&(this.mesh.morphTargetInfluences[this.lastFrame]=0,this.mesh.morphTargetInfluences[this.currentFrame]=1,this.mesh.morphTargetInfluences[i]=0,this.lastFrame=this.currentFrame,this.currentFrame=i),this.mesh.morphTargetInfluences[i]=this.currentTime%t/t,this.mesh.morphTargetInfluences[this.lastFrame]=1-this.mesh.morphTargetInfluences[i]}}},r.BoxGeometry=function(e,t,i,n,a,o){function s(e,t,i,n,a,o,s,l){var c,u,d,p=h.widthSegments,f=h.heightSegments,m=a/2,g=o/2,v=h.vertices.length
"x"===e&&"y"===t||"y"===e&&"x"===t?c="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(c="y",f=h.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(c="x",p=h.depthSegments)
var y=p+1,w=f+1,b=a/p,x=o/f,_=new r.Vector3
for(_[c]=s>0?1:-1,d=0;w>d;d++)for(u=0;y>u;u++){var k=new r.Vector3
k[e]=(u*b-m)*i,k[t]=(d*x-g)*n,k[c]=s,h.vertices.push(k)}for(d=0;f>d;d++)for(u=0;p>u;u++){var M=u+y*d,S=u+y*(d+1),T=u+1+y*(d+1),C=u+1+y*d,E=new r.Vector2(u/p,1-d/f),A=new r.Vector2(u/p,1-(d+1)/f),L=new r.Vector2((u+1)/p,1-(d+1)/f),P=new r.Vector2((u+1)/p,1-d/f),R=new r.Face3(M+v,S+v,C+v)
R.normal.copy(_),R.vertexNormals.push(_.clone(),_.clone(),_.clone()),R.materialIndex=l,h.faces.push(R),h.faceVertexUvs[0].push([E,A,P]),R=new r.Face3(S+v,T+v,C+v),R.normal.copy(_),R.vertexNormals.push(_.clone(),_.clone(),_.clone()),R.materialIndex=l,h.faces.push(R),h.faceVertexUvs[0].push([A.clone(),L,P.clone()])}}r.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:a,depthSegments:o},this.widthSegments=n||1,this.heightSegments=a||1,this.depthSegments=o||1
var h=this,l=e/2,c=t/2,u=i/2
s("z","y",-1,-1,i,t,l,0),s("z","y",1,-1,i,t,-l,1),s("x","z",1,1,e,i,c,2),s("x","z",1,-1,e,i,-c,3),s("x","y",1,-1,e,t,u,4),s("x","y",-1,-1,e,t,-u,5),this.mergeVertices()},r.BoxGeometry.prototype=Object.create(r.Geometry.prototype),r.BoxGeometry.prototype.constructor=r.BoxGeometry,r.CircleGeometry=function(e,t,i,n){r.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},e=e||50,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI
var a,o=[],s=new r.Vector3,h=new r.Vector2(.5,.5)
for(this.vertices.push(s),o.push(h),a=0;t>=a;a++){var l=new r.Vector3,c=i+a/t*n
l.x=e*Math.cos(c),l.y=e*Math.sin(c),this.vertices.push(l),o.push(new r.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var u=new r.Vector3(0,0,1)
for(a=1;t>=a;a++)this.faces.push(new r.Face3(a,a+1,0,[u.clone(),u.clone(),u.clone()])),this.faceVertexUvs[0].push([o[a].clone(),o[a+1].clone(),h.clone()])
this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,e)},r.CircleGeometry.prototype=Object.create(r.Geometry.prototype),r.CircleGeometry.prototype.constructor=r.CircleGeometry,r.CubeGeometry=function(e,t,i,n,a,o){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new r.BoxGeometry(e,t,i,n,a,o)},r.CylinderGeometry=function(e,t,i,n,a,o,s,h){r.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:h},e=void 0!==e?e:20,t=void 0!==t?t:20,i=void 0!==i?i:100,n=n||8,a=a||1,o=void 0!==o?o:!1,s=void 0!==s?s:0,h=void 0!==h?h:2*Math.PI
var l,c,u=i/2,d=[],p=[]
for(c=0;a>=c;c++){var f=[],m=[],g=c/a,v=g*(t-e)+e
for(l=0;n>=l;l++){var y=l/n,w=new r.Vector3
w.x=v*Math.sin(y*h+s),w.y=-g*i+u,w.z=v*Math.cos(y*h+s),this.vertices.push(w),f.push(this.vertices.length-1),m.push(new r.Vector2(y,1-g))}d.push(f),p.push(m)}var b,x,_=(t-e)/i
for(l=0;n>l;l++)for(0!==e?(b=this.vertices[d[0][l]].clone(),x=this.vertices[d[0][l+1]].clone()):(b=this.vertices[d[1][l]].clone(),x=this.vertices[d[1][l+1]].clone()),b.setY(Math.sqrt(b.x*b.x+b.z*b.z)*_).normalize(),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*_).normalize(),c=0;a>c;c++){var k=d[c][l],M=d[c+1][l],S=d[c+1][l+1],T=d[c][l+1],C=b.clone(),E=b.clone(),A=x.clone(),L=x.clone(),P=p[c][l].clone(),R=p[c+1][l].clone(),F=p[c+1][l+1].clone(),D=p[c][l+1].clone()
this.faces.push(new r.Face3(k,M,T,[C,E,L])),this.faceVertexUvs[0].push([P,R,D]),this.faces.push(new r.Face3(M,S,T,[E.clone(),A,L.clone()])),this.faceVertexUvs[0].push([R.clone(),F,D.clone()])}if(o===!1&&e>0)for(this.vertices.push(new r.Vector3(0,u,0)),l=0;n>l;l++){var k=d[0][l],M=d[0][l+1],S=this.vertices.length-1,C=new r.Vector3(0,1,0),E=new r.Vector3(0,1,0),A=new r.Vector3(0,1,0),P=p[0][l].clone(),R=p[0][l+1].clone(),F=new r.Vector2(R.x,0)
this.faces.push(new r.Face3(k,M,S,[C,E,A])),this.faceVertexUvs[0].push([P,R,F])}if(o===!1&&t>0)for(this.vertices.push(new r.Vector3(0,-u,0)),l=0;n>l;l++){var k=d[a][l+1],M=d[a][l],S=this.vertices.length-1,C=new r.Vector3(0,-1,0),E=new r.Vector3(0,-1,0),A=new r.Vector3(0,-1,0),P=p[a][l+1].clone(),R=p[a][l].clone(),F=new r.Vector2(R.x,1)
this.faces.push(new r.Face3(k,M,S,[C,E,A])),this.faceVertexUvs[0].push([P,R,F])}this.computeFaceNormals()},r.CylinderGeometry.prototype=Object.create(r.Geometry.prototype),r.CylinderGeometry.prototype.constructor=r.CylinderGeometry,r.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?void(e=[]):(r.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())},r.ExtrudeGeometry.prototype=Object.create(r.Geometry.prototype),r.ExtrudeGeometry.prototype.constructor=r.ExtrudeGeometry,r.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var i=e.length,n=0;i>n;n++){var r=e[n]
this.addShape(r,t)}},r.ExtrudeGeometry.prototype.addShape=function(e,t){function i(e,t,i){return t||console.log("die"),t.clone().multiplyScalar(i).add(e)}function n(e,t,i){var n,a,o=1e-10,s=1,h=e.x-t.x,l=e.y-t.y,c=i.x-e.x,u=i.y-e.y,d=h*h+l*l,p=h*u-l*c
if(Math.abs(p)>o){var f=Math.sqrt(d),m=Math.sqrt(c*c+u*u),g=t.x-l/f,v=t.y+h/f,y=i.x-u/m,w=i.y+c/m,b=((y-g)*u-(w-v)*c)/(h*u-l*c)
n=g+h*b-e.x,a=v+l*b-e.y
var x=n*n+a*a
if(2>=x)return new r.Vector2(n,a)
s=Math.sqrt(x/2)}else{var _=!1
h>o?c>o&&(_=!0):-o>h?-o>c&&(_=!0):Math.sign(l)==Math.sign(u)&&(_=!0),_?(n=-l,a=h,s=Math.sqrt(d)):(n=h,a=l,s=Math.sqrt(d/2))}return new r.Vector2(n/s,a/s)}function a(){if(b){var e=0,t=q*e
for(Y=0;W>Y;Y++)G=V[Y],l(G[2]+t,G[1]+t,G[0]+t)
for(e=_+2*w,t=q*e,Y=0;W>Y;Y++)G=V[Y],l(G[0]+t,G[1]+t,G[2]+t)}else{for(Y=0;W>Y;Y++)G=V[Y],l(G[2],G[1],G[0])
for(Y=0;W>Y;Y++)G=V[Y],l(G[0]+q*_,G[1]+q*_,G[2]+q*_)}}function o(){var e=0
for(s(z,e),e+=z.length,A=0,L=B.length;L>A;A++)E=B[A],s(E,e),e+=E.length}function s(e,t){var i,n
for(Y=e.length;--Y>=0;){i=Y,n=Y-1,0>n&&(n=e.length-1)
var r=0,a=_+2*w
for(r=0;a>r;r++){var o=q*r,s=q*(r+1),h=t+i+o,l=t+n+o,u=t+n+s,d=t+i+s
c(h,l,u,d,e,r,a,i,n)}}}function h(e,t,i){P.vertices.push(new r.Vector3(e,t,i))}function l(e,t,i){e+=R,t+=R,i+=R,P.faces.push(new r.Face3(e,t,i,null,null,S))
var n=C.generateTopUV(P,e,t,i)
P.faceVertexUvs[0].push(n)}function c(e,t,i,n,a,o,s,h,l){e+=R,t+=R,i+=R,n+=R,P.faces.push(new r.Face3(e,t,n,null,null,T)),P.faces.push(new r.Face3(t,i,n,null,null,T))
var c=C.generateSideWallUV(P,e,t,i,n)
P.faceVertexUvs[0].push([c[0],c[1],c[3]]),P.faceVertexUvs[0].push([c[1],c[2],c[3]])}var u,d,p,f,m,g=void 0!==t.amount?t.amount:100,v=void 0!==t.bevelThickness?t.bevelThickness:6,y=void 0!==t.bevelSize?t.bevelSize:v-2,w=void 0!==t.bevelSegments?t.bevelSegments:3,b=void 0!==t.bevelEnabled?t.bevelEnabled:!0,x=void 0!==t.curveSegments?t.curveSegments:12,_=void 0!==t.steps?t.steps:1,k=t.extrudePath,M=!1,S=t.material,T=t.extrudeMaterial,C=void 0!==t.UVGenerator?t.UVGenerator:r.ExtrudeGeometry.WorldUVGenerator
k&&(u=k.getSpacedPoints(_),M=!0,b=!1,d=void 0!==t.frames?t.frames:new r.TubeGeometry.FrenetFrames(k,_,!1),p=new r.Vector3,f=new r.Vector3,m=new r.Vector3),b||(w=0,v=0,y=0)
var E,A,L,P=this,R=this.vertices.length,F=e.extractPoints(x),D=F.shape,B=F.holes,O=!r.Shape.Utils.isClockWise(D)
if(O){for(D=D.reverse(),A=0,L=B.length;L>A;A++)E=B[A],r.Shape.Utils.isClockWise(E)&&(B[A]=E.reverse())
O=!1}var V=r.Shape.Utils.triangulateShape(D,B),z=D
for(A=0,L=B.length;L>A;A++)E=B[A],D=D.concat(E)
for(var U,N,I,j,H,G,q=D.length,W=V.length,X=(z.length,180/Math.PI,[]),Y=0,K=z.length,Z=K-1,Q=Y+1;K>Y;Y++,Z++,Q++){Z===K&&(Z=0),Q===K&&(Q=0)
{z[Y],z[Z],z[Q]}X[Y]=n(z[Y],z[Z],z[Q])}var $,J=[],ee=X.concat()
for(A=0,L=B.length;L>A;A++){for(E=B[A],$=[],Y=0,K=E.length,Z=K-1,Q=Y+1;K>Y;Y++,Z++,Q++)Z===K&&(Z=0),Q===K&&(Q=0),$[Y]=n(E[Y],E[Z],E[Q])
J.push($),ee=ee.concat($)}for(U=0;w>U;U++){for(I=U/w,j=v*(1-I),N=y*Math.sin(I*Math.PI/2),Y=0,K=z.length;K>Y;Y++)H=i(z[Y],X[Y],N),h(H.x,H.y,-j)
for(A=0,L=B.length;L>A;A++)for(E=B[A],$=J[A],Y=0,K=E.length;K>Y;Y++)H=i(E[Y],$[Y],N),h(H.x,H.y,-j)}for(N=y,Y=0;q>Y;Y++)H=b?i(D[Y],ee[Y],N):D[Y],M?(f.copy(d.normals[0]).multiplyScalar(H.x),p.copy(d.binormals[0]).multiplyScalar(H.y),m.copy(u[0]).add(f).add(p),h(m.x,m.y,m.z)):h(H.x,H.y,0)
var te
for(te=1;_>=te;te++)for(Y=0;q>Y;Y++)H=b?i(D[Y],ee[Y],N):D[Y],M?(f.copy(d.normals[te]).multiplyScalar(H.x),p.copy(d.binormals[te]).multiplyScalar(H.y),m.copy(u[te]).add(f).add(p),h(m.x,m.y,m.z)):h(H.x,H.y,g/_*te)
for(U=w-1;U>=0;U--){for(I=U/w,j=v*(1-I),N=y*Math.sin(I*Math.PI/2),Y=0,K=z.length;K>Y;Y++)H=i(z[Y],X[Y],N),h(H.x,H.y,g+j)
for(A=0,L=B.length;L>A;A++)for(E=B[A],$=J[A],Y=0,K=E.length;K>Y;Y++)H=i(E[Y],$[Y],N),M?h(H.x,H.y+u[_-1].y,u[_-1].x+j):h(H.x,H.y,g+j)}a(),o()},r.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,i,n){var a=e.vertices,o=a[t],s=a[i],h=a[n]
return[new r.Vector2(o.x,o.y),new r.Vector2(s.x,s.y),new r.Vector2(h.x,h.y)]},generateSideWallUV:function(e,t,i,n,a){var o=e.vertices,s=o[t],h=o[i],l=o[n],c=o[a]
return Math.abs(s.y-h.y)<.01?[new r.Vector2(s.x,1-s.z),new r.Vector2(h.x,1-h.z),new r.Vector2(l.x,1-l.z),new r.Vector2(c.x,1-c.z)]:[new r.Vector2(s.y,1-s.z),new r.Vector2(h.y,1-h.z),new r.Vector2(l.y,1-l.z),new r.Vector2(c.y,1-c.z)]}},r.ShapeGeometry=function(e,t){r.Geometry.call(this),this.type="ShapeGeometry",e instanceof Array==!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},r.ShapeGeometry.prototype=Object.create(r.Geometry.prototype),r.ShapeGeometry.prototype.constructor=r.ShapeGeometry,r.ShapeGeometry.prototype.addShapeList=function(e,t){for(var i=0,n=e.length;n>i;i++)this.addShape(e[i],t)
return this},r.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={})
var i,n,a,o=void 0!==t.curveSegments?t.curveSegments:12,s=t.material,h=void 0===t.UVGenerator?r.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,c=e.extractPoints(o),u=c.shape,d=c.holes,p=!r.Shape.Utils.isClockWise(u)
if(p){for(u=u.reverse(),i=0,n=d.length;n>i;i++)a=d[i],r.Shape.Utils.isClockWise(a)&&(d[i]=a.reverse())
p=!1}var f=r.Shape.Utils.triangulateShape(u,d),m=u
for(i=0,n=d.length;n>i;i++)a=d[i],u=u.concat(a)
{var g,v,y=u.length,w=f.length
m.length}for(i=0;y>i;i++)g=u[i],this.vertices.push(new r.Vector3(g.x,g.y,0))
for(i=0;w>i;i++){v=f[i]
var b=v[0]+l,x=v[1]+l,_=v[2]+l
this.faces.push(new r.Face3(b,x,_,null,null,s)),this.faceVertexUvs[0].push(h.generateTopUV(this,b,x,_))}},r.LatheGeometry=function(e,t,i,n){r.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=t||12,i=i||0,n=n||2*Math.PI
for(var a=1/(e.length-1),o=1/t,s=0,h=t;h>=s;s++)for(var l=i+s*o*n,c=Math.cos(l),u=Math.sin(l),d=0,p=e.length;p>d;d++){var f=e[d],m=new r.Vector3
m.x=c*f.x-u*f.y,m.y=u*f.x+c*f.y,m.z=f.z,this.vertices.push(m)}for(var g=e.length,s=0,h=t;h>s;s++)for(var d=0,p=e.length-1;p>d;d++){var v=d+g*s,y=v,w=v+g,c=v+1+g,b=v+1,x=s*o,_=d*a,k=x+o,M=_+a
this.faces.push(new r.Face3(y,w,b)),this.faceVertexUvs[0].push([new r.Vector2(x,_),new r.Vector2(k,_),new r.Vector2(x,M)]),this.faces.push(new r.Face3(w,c,b)),this.faceVertexUvs[0].push([new r.Vector2(k,_),new r.Vector2(k,M),new r.Vector2(x,M)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},r.LatheGeometry.prototype=Object.create(r.Geometry.prototype),r.LatheGeometry.prototype.constructor=r.LatheGeometry,r.PlaneGeometry=function(e,t,i,n){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),r.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new r.PlaneBufferGeometry(e,t,i,n))},r.PlaneGeometry.prototype=Object.create(r.Geometry.prototype),r.PlaneGeometry.prototype.constructor=r.PlaneGeometry,r.PlaneBufferGeometry=function(e,t,i,n){r.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n}
for(var a=e/2,o=t/2,s=i||1,h=n||1,l=s+1,c=h+1,u=e/s,d=t/h,p=new Float32Array(l*c*3),f=new Float32Array(l*c*3),m=new Float32Array(l*c*2),g=0,v=0,y=0;c>y;y++)for(var w=y*d-o,b=0;l>b;b++){var x=b*u-a
p[g]=x,p[g+1]=-w,f[g+2]=1,m[v]=b/s,m[v+1]=1-y/h,g+=3,v+=2}g=0
for(var _=new(p.length/3>65535?Uint32Array:Uint16Array)(s*h*6),y=0;h>y;y++)for(var b=0;s>b;b++){var k=b+l*y,M=b+l*(y+1),S=b+1+l*(y+1),T=b+1+l*y
_[g]=k,_[g+1]=M,_[g+2]=T,_[g+3]=M,_[g+4]=S,_[g+5]=T,g+=6}this.addAttribute("index",new r.BufferAttribute(_,1)),this.addAttribute("position",new r.BufferAttribute(p,3)),this.addAttribute("normal",new r.BufferAttribute(f,3)),this.addAttribute("uv",new r.BufferAttribute(m,2))},r.PlaneBufferGeometry.prototype=Object.create(r.BufferGeometry.prototype),r.PlaneBufferGeometry.prototype.constructor=r.PlaneBufferGeometry,r.RingGeometry=function(e,t,i,n,a,o){r.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:a,thetaLength:o},e=e||0,t=t||50,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,n=void 0!==n?Math.max(1,n):8
var s,h,l=[],c=e,u=(t-e)/n
for(s=0;n+1>s;s++){for(h=0;i+1>h;h++){var d=new r.Vector3,p=a+h/i*o
d.x=c*Math.cos(p),d.y=c*Math.sin(p),this.vertices.push(d),l.push(new r.Vector2((d.x/t+1)/2,(d.y/t+1)/2))}c+=u}var f=new r.Vector3(0,0,1)
for(s=0;n>s;s++){var m=s*(i+1)
for(h=0;i>h;h++){var p=h+m,g=p,v=p+i+1,y=p+i+2
this.faces.push(new r.Face3(g,v,y,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[g].clone(),l[v].clone(),l[y].clone()]),g=p,v=p+i+2,y=p+1,this.faces.push(new r.Face3(g,v,y,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[g].clone(),l[v].clone(),l[y].clone()])}}this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,c)},r.RingGeometry.prototype=Object.create(r.Geometry.prototype),r.RingGeometry.prototype.constructor=r.RingGeometry,r.SphereGeometry=function(e,t,i,n,a,o,s){r.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:a,thetaStart:o,thetaLength:s},e=e||50,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI
var h,l,c=[],u=[]
for(l=0;i>=l;l++){var d=[],p=[]
for(h=0;t>=h;h++){var f=h/t,m=l/i,g=new r.Vector3
g.x=-e*Math.cos(n+f*a)*Math.sin(o+m*s),g.y=e*Math.cos(o+m*s),g.z=e*Math.sin(n+f*a)*Math.sin(o+m*s),this.vertices.push(g),d.push(this.vertices.length-1),p.push(new r.Vector2(f,1-m))}c.push(d),u.push(p)}for(l=0;i>l;l++)for(h=0;t>h;h++){var v=c[l][h+1],y=c[l][h],w=c[l+1][h],b=c[l+1][h+1],x=this.vertices[v].clone().normalize(),_=this.vertices[y].clone().normalize(),k=this.vertices[w].clone().normalize(),M=this.vertices[b].clone().normalize(),S=u[l][h+1].clone(),T=u[l][h].clone(),C=u[l+1][h].clone(),E=u[l+1][h+1].clone()
Math.abs(this.vertices[v].y)===e?(S.x=(S.x+T.x)/2,this.faces.push(new r.Face3(v,w,b,[x,k,M])),this.faceVertexUvs[0].push([S,C,E])):Math.abs(this.vertices[w].y)===e?(C.x=(C.x+E.x)/2,this.faces.push(new r.Face3(v,y,w,[x,_,k])),this.faceVertexUvs[0].push([S,T,C])):(this.faces.push(new r.Face3(v,y,b,[x,_,M])),this.faceVertexUvs[0].push([S,T,E]),this.faces.push(new r.Face3(y,w,b,[_.clone(),k,M.clone()])),this.faceVertexUvs[0].push([T.clone(),C,E.clone()]))}this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,e)},r.SphereGeometry.prototype=Object.create(r.Geometry.prototype),r.SphereGeometry.prototype.constructor=r.SphereGeometry,r.TextGeometry=function(e,t){t=t||{}
var i=r.FontUtils.generateShapes(e,t)
t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),r.ExtrudeGeometry.call(this,i,t),this.type="TextGeometry"},r.TextGeometry.prototype=Object.create(r.ExtrudeGeometry.prototype),r.TextGeometry.prototype.constructor=r.TextGeometry,r.TorusGeometry=function(e,t,i,n,a){r.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:a},e=e||100,t=t||40,i=i||8,n=n||6,a=a||2*Math.PI
for(var o=new r.Vector3,s=[],h=[],l=0;i>=l;l++)for(var c=0;n>=c;c++){var u=c/n*a,d=l/i*Math.PI*2
o.x=e*Math.cos(u),o.y=e*Math.sin(u)
var p=new r.Vector3
p.x=(e+t*Math.cos(d))*Math.cos(u),p.y=(e+t*Math.cos(d))*Math.sin(u),p.z=t*Math.sin(d),this.vertices.push(p),s.push(new r.Vector2(c/n,l/i)),h.push(p.clone().sub(o).normalize())}for(var l=1;i>=l;l++)for(var c=1;n>=c;c++){var f=(n+1)*l+c-1,m=(n+1)*(l-1)+c-1,g=(n+1)*(l-1)+c,v=(n+1)*l+c,y=new r.Face3(f,m,v,[h[f].clone(),h[m].clone(),h[v].clone()])
this.faces.push(y),this.faceVertexUvs[0].push([s[f].clone(),s[m].clone(),s[v].clone()]),y=new r.Face3(m,g,v,[h[m].clone(),h[g].clone(),h[v].clone()]),this.faces.push(y),this.faceVertexUvs[0].push([s[m].clone(),s[g].clone(),s[v].clone()])}this.computeFaceNormals()},r.TorusGeometry.prototype=Object.create(r.Geometry.prototype),r.TorusGeometry.prototype.constructor=r.TorusGeometry,r.TorusKnotGeometry=function(e,t,i,n,a,o,s){function h(e,t,i,n,a){var o=Math.cos(e),s=Math.sin(e),h=t/i*e,l=Math.cos(h),c=n*(2+l)*.5*o,u=n*(2+l)*s*.5,d=a*n*Math.sin(h)*.5
return new r.Vector3(c,u,d)}r.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,p:a,q:o,heightScale:s},e=e||100,t=t||40,i=i||64,n=n||8,a=a||2,o=o||3,s=s||1
for(var l=new Array(i),c=new r.Vector3,u=new r.Vector3,d=new r.Vector3,p=0;i>p;++p){l[p]=new Array(n)
var f=p/i*2*a*Math.PI,m=h(f,o,a,e,s),g=h(f+.01,o,a,e,s)
c.subVectors(g,m),u.addVectors(g,m),d.crossVectors(c,u),u.crossVectors(d,c),d.normalize(),u.normalize()
for(var v=0;n>v;++v){var y=v/n*2*Math.PI,w=-t*Math.cos(y),b=t*Math.sin(y),x=new r.Vector3
x.x=m.x+w*u.x+b*d.x,x.y=m.y+w*u.y+b*d.y,x.z=m.z+w*u.z+b*d.z,l[p][v]=this.vertices.push(x)-1}}for(var p=0;i>p;++p)for(var v=0;n>v;++v){var _=(p+1)%i,k=(v+1)%n,M=l[p][v],S=l[_][v],T=l[_][k],C=l[p][k],E=new r.Vector2(p/i,v/n),A=new r.Vector2((p+1)/i,v/n),L=new r.Vector2((p+1)/i,(v+1)/n),P=new r.Vector2(p/i,(v+1)/n)
this.faces.push(new r.Face3(M,S,C)),this.faceVertexUvs[0].push([E,A,P]),this.faces.push(new r.Face3(S,T,C)),this.faceVertexUvs[0].push([A.clone(),L,P.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},r.TorusKnotGeometry.prototype=Object.create(r.Geometry.prototype),r.TorusKnotGeometry.prototype.constructor=r.TorusKnotGeometry,r.TubeGeometry=function(e,t,i,n,a,o){function s(e,t,i){return L.vertices.push(new r.Vector3(e,t,i))-1}r.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:i,radialSegments:n,closed:a},t=t||64,i=i||1,n=n||8,a=a||!1,o=o||r.TubeGeometry.NoTaper
var h,l,c,u,d,p,f,m,g,v,y,w,b,x,_,k,M,S,T,C,E,A=[],L=this,P=t+1,R=new r.Vector3,F=new r.TubeGeometry.FrenetFrames(e,t,a),D=F.tangents,B=F.normals,O=F.binormals
for(this.tangents=D,this.normals=B,this.binormals=O,v=0;P>v;v++)for(A[v]=[],u=v/(P-1),g=e.getPointAt(u),h=D[v],l=B[v],c=O[v],p=i*o(u),y=0;n>y;y++)d=y/n*2*Math.PI,f=-p*Math.cos(d),m=p*Math.sin(d),R.copy(g),R.x+=f*l.x+m*c.x,R.y+=f*l.y+m*c.y,R.z+=f*l.z+m*c.z,A[v][y]=s(R.x,R.y,R.z)
for(v=0;t>v;v++)for(y=0;n>y;y++)w=a?(v+1)%t:v+1,b=(y+1)%n,x=A[v][y],_=A[w][y],k=A[w][b],M=A[v][b],S=new r.Vector2(v/t,y/n),T=new r.Vector2((v+1)/t,y/n),C=new r.Vector2((v+1)/t,(y+1)/n),E=new r.Vector2(v/t,(y+1)/n),this.faces.push(new r.Face3(x,_,M)),this.faceVertexUvs[0].push([S,T,E]),this.faces.push(new r.Face3(_,k,M)),this.faceVertexUvs[0].push([T.clone(),C,E.clone()])
this.computeFaceNormals(),this.computeVertexNormals()},r.TubeGeometry.prototype=Object.create(r.Geometry.prototype),r.TubeGeometry.prototype.constructor=r.TubeGeometry,r.TubeGeometry.NoTaper=function(e){return 1},r.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},r.TubeGeometry.FrenetFrames=function(e,t,i){function n(){f[0]=new r.Vector3,m[0]=new r.Vector3,o=Number.MAX_VALUE,s=Math.abs(p[0].x),h=Math.abs(p[0].y),l=Math.abs(p[0].z),o>=s&&(o=s,d.set(1,0,0)),o>=h&&(o=h,d.set(0,1,0)),o>=l&&d.set(0,0,1),g.crossVectors(p[0],d).normalize(),f[0].crossVectors(p[0],g),m[0].crossVectors(p[0],f[0])}var a,o,s,h,l,c,u,d=(new r.Vector3,new r.Vector3),p=(new r.Vector3,[]),f=[],m=[],g=new r.Vector3,v=new r.Matrix4,y=t+1,w=1e-4
for(this.tangents=p,this.normals=f,this.binormals=m,c=0;y>c;c++)u=c/(y-1),p[c]=e.getTangentAt(u),p[c].normalize()
for(n(),c=1;y>c;c++)f[c]=f[c-1].clone(),m[c]=m[c-1].clone(),g.crossVectors(p[c-1],p[c]),g.length()>w&&(g.normalize(),a=Math.acos(r.Math.clamp(p[c-1].dot(p[c]),-1,1)),f[c].applyMatrix4(v.makeRotationAxis(g,a))),m[c].crossVectors(p[c],f[c])
if(i)for(a=Math.acos(r.Math.clamp(f[0].dot(f[y-1]),-1,1)),a/=y-1,p[0].dot(g.crossVectors(f[0],f[y-1]))>0&&(a=-a),c=1;y>c;c++)f[c].applyMatrix4(v.makeRotationAxis(p[c],a*c)),m[c].crossVectors(p[c],f[c])},r.PolyhedronGeometry=function(e,t,i,n){function a(e){var t=e.normalize().clone()
t.index=u.vertices.push(t)-1
var i=h(e)/2/Math.PI+.5,n=l(e)/Math.PI+.5
return t.uv=new r.Vector2(i,1-n),t}function o(e,t,i){var n=new r.Face3(e.index,t.index,i.index,[e.clone(),t.clone(),i.clone()])
u.faces.push(n),b.copy(e).add(t).add(i).divideScalar(3)
var a=h(b)
u.faceVertexUvs[0].push([c(e.uv,e,a),c(t.uv,t,a),c(i.uv,i,a)])}function s(e,t){for(var i=Math.pow(2,t),n=(Math.pow(4,t),a(u.vertices[e.a])),r=a(u.vertices[e.b]),s=a(u.vertices[e.c]),h=[],l=0;i>=l;l++){h[l]=[]
for(var c=a(n.clone().lerp(s,l/i)),d=a(r.clone().lerp(s,l/i)),p=i-l,f=0;p>=f;f++)0==f&&l==i?h[l][f]=c:h[l][f]=a(c.clone().lerp(d,f/p))}for(var l=0;i>l;l++)for(var f=0;2*(i-l)-1>f;f++){var m=Math.floor(f/2)
f%2==0?o(h[l][m+1],h[l+1][m],h[l][m]):o(h[l][m+1],h[l+1][m+1],h[l+1][m])}}function h(e){return Math.atan2(e.z,-e.x)}function l(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function c(e,t,i){return 0>i&&1===e.x&&(e=new r.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new r.Vector2(i/2/Math.PI+.5,e.y)),e.clone()}r.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1,n=n||0
for(var u=this,d=0,p=e.length;p>d;d+=3)a(new r.Vector3(e[d],e[d+1],e[d+2]))
for(var f=this.vertices,m=[],d=0,g=0,p=t.length;p>d;d+=3,g++){var v=f[t[d]],y=f[t[d+1]],w=f[t[d+2]]
m[g]=new r.Face3(v.index,y.index,w.index,[v.clone(),y.clone(),w.clone()])}for(var b=new r.Vector3,d=0,p=m.length;p>d;d++)s(m[d],n)
for(var d=0,p=this.faceVertexUvs[0].length;p>d;d++){var x=this.faceVertexUvs[0][d],_=x[0].x,k=x[1].x,M=x[2].x,S=Math.max(_,Math.max(k,M)),T=Math.min(_,Math.min(k,M))
S>.9&&.1>T&&(.2>_&&(x[0].x+=1),.2>k&&(x[1].x+=1),.2>M&&(x[2].x+=1))}for(var d=0,p=this.vertices.length;p>d;d++)this.vertices[d].multiplyScalar(i)
this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,i)},r.PolyhedronGeometry.prototype=Object.create(r.Geometry.prototype),r.PolyhedronGeometry.prototype.constructor=r.PolyhedronGeometry,r.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t}
var i=(1+Math.sqrt(5))/2,n=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9]
r.PolyhedronGeometry.call(this,a,o,e,t)},r.DodecahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.DodecahedronGeometry.prototype.constructor=r.DodecahedronGeometry,r.IcosahedronGeometry=function(e,t){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]
r.PolyhedronGeometry.call(this,n,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},r.IcosahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.IcosahedronGeometry.prototype.constructor=r.IcosahedronGeometry,r.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t}
var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2]
r.PolyhedronGeometry.call(this,i,n,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},r.OctahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.OctahedronGeometry.prototype.constructor=r.OctahedronGeometry,r.TetrahedronGeometry=function(e,t){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1]
r.PolyhedronGeometry.call(this,i,n,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},r.TetrahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.TetrahedronGeometry.prototype.constructor=r.TetrahedronGeometry,r.ParametricGeometry=function(e,t,i){r.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i}
var n,a,o,s,h,l=this.vertices,c=this.faces,u=this.faceVertexUvs[0],d=t+1
for(n=0;i>=n;n++)for(h=n/i,a=0;t>=a;a++)s=a/t,o=e(s,h),l.push(o)
var p,f,m,g,v,y,w,b
for(n=0;i>n;n++)for(a=0;t>a;a++)p=n*d+a,f=n*d+a+1,m=(n+1)*d+a+1,g=(n+1)*d+a,v=new r.Vector2(a/t,n/i),y=new r.Vector2((a+1)/t,n/i),w=new r.Vector2((a+1)/t,(n+1)/i),b=new r.Vector2(a/t,(n+1)/i),c.push(new r.Face3(p,f,g)),u.push([v,y,b]),c.push(new r.Face3(f,m,g)),u.push([y.clone(),w,b.clone()])
this.computeFaceNormals(),this.computeVertexNormals()},r.ParametricGeometry.prototype=Object.create(r.Geometry.prototype),r.ParametricGeometry.prototype.constructor=r.ParametricGeometry,r.AxisHelper=function(e){e=e||1
var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new r.BufferGeometry
n.addAttribute("position",new r.BufferAttribute(t,3)),n.addAttribute("color",new r.BufferAttribute(i,3))
var a=new r.LineBasicMaterial({vertexColors:r.VertexColors})
r.Line.call(this,n,a,r.LinePieces)},r.AxisHelper.prototype=Object.create(r.Line.prototype),r.AxisHelper.prototype.constructor=r.AxisHelper,r.ArrowHelper=function(){var e=new r.Geometry
e.vertices.push(new r.Vector3(0,0,0),new r.Vector3(0,1,0))
var t=new r.CylinderGeometry(0,.5,1,5,1)
return t.applyMatrix((new r.Matrix4).makeTranslation(0,-.5,0)),function(i,n,a,o,s,h){r.Object3D.call(this),void 0===o&&(o=16776960),void 0===a&&(a=1),void 0===s&&(s=.2*a),void 0===h&&(h=.2*s),this.position.copy(n),this.line=new r.Line(e,new r.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new r.Mesh(t,new r.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(a,s,h)}}(),r.ArrowHelper.prototype=Object.create(r.Object3D.prototype),r.ArrowHelper.prototype.constructor=r.ArrowHelper,r.ArrowHelper.prototype.setDirection=function(){var e,t=new r.Vector3
return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),r.ArrowHelper.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,e-t,1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},r.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},r.BoxHelper=function(e){var t=new r.BufferGeometry
t.addAttribute("position",new r.BufferAttribute(new Float32Array(72),3)),r.Line.call(this,t,new r.LineBasicMaterial({color:16776960}),r.LinePieces),void 0!==e&&this.update(e)},r.BoxHelper.prototype=Object.create(r.Line.prototype),r.BoxHelper.prototype.constructor=r.BoxHelper,r.BoxHelper.prototype.update=function(e){var t=e.geometry
null===t.boundingBox&&t.computeBoundingBox()
var i=t.boundingBox.min,n=t.boundingBox.max,r=this.geometry.attributes.position.array
r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=i.x,r[4]=n.y,r[5]=n.z,r[6]=i.x,r[7]=n.y,r[8]=n.z,r[9]=i.x,r[10]=i.y,r[11]=n.z,r[12]=i.x,r[13]=i.y,r[14]=n.z,r[15]=n.x,r[16]=i.y,r[17]=n.z,r[18]=n.x,r[19]=i.y,r[20]=n.z,r[21]=n.x,r[22]=n.y,r[23]=n.z,r[24]=n.x,r[25]=n.y,r[26]=i.z,r[27]=i.x,r[28]=n.y,r[29]=i.z,r[30]=i.x,r[31]=n.y,r[32]=i.z,r[33]=i.x,r[34]=i.y,r[35]=i.z,r[36]=i.x,r[37]=i.y,r[38]=i.z,r[39]=n.x,r[40]=i.y,r[41]=i.z,r[42]=n.x,r[43]=i.y,r[44]=i.z,r[45]=n.x,r[46]=n.y,r[47]=i.z,r[48]=n.x,r[49]=n.y,r[50]=n.z,r[51]=n.x,r[52]=n.y,r[53]=i.z,r[54]=i.x,r[55]=n.y,r[56]=n.z,r[57]=i.x,r[58]=n.y,r[59]=i.z,r[60]=i.x,r[61]=i.y,r[62]=n.z,r[63]=i.x,r[64]=i.y,r[65]=i.z,r[66]=n.x,r[67]=i.y,r[68]=n.z,r[69]=n.x,r[70]=i.y,r[71]=i.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},r.BoundingBoxHelper=function(e,t){var i=void 0!==t?t:8947848
this.object=e,this.box=new r.Box3,r.Mesh.call(this,new r.BoxGeometry(1,1,1),new r.MeshBasicMaterial({color:i,wireframe:!0}))},r.BoundingBoxHelper.prototype=Object.create(r.Mesh.prototype),r.BoundingBoxHelper.prototype.constructor=r.BoundingBoxHelper,r.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},r.CameraHelper=function(e){function t(e,t,n){i(e,n),i(t,n)}function i(e,t){n.vertices.push(new r.Vector3),n.colors.push(new r.Color(t)),void 0===o[e]&&(o[e]=[]),o[e].push(n.vertices.length-1)}var n=new r.Geometry,a=new r.LineBasicMaterial({color:16777215,vertexColors:r.FaceColors}),o={},s=16755200,h=16711680,l=43775,c=16777215,u=3355443
t("n1","n2",s),t("n2","n4",s),t("n4","n3",s),t("n3","n1",s),t("f1","f2",s),t("f2","f4",s),t("f4","f3",s),t("f3","f1",s),t("n1","f1",s),t("n2","f2",s),t("n3","f3",s),t("n4","f4",s),t("p","n1",h),t("p","n2",h),t("p","n3",h),t("p","n4",h),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",c),t("p","c",u),t("cn1","cn2",u),t("cn3","cn4",u),t("cf1","cf2",u),t("cf3","cf4",u),r.Line.call(this,n,a,r.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},r.CameraHelper.prototype=Object.create(r.Line.prototype),r.CameraHelper.prototype.constructor=r.CameraHelper,r.CameraHelper.prototype.update=function(){var e,t,i=new r.Vector3,n=new r.Camera,a=function(r,a,o,s){i.set(a,o,s).unproject(n)
var h=t[r]
if(void 0!==h)for(var l=0,c=h.length;c>l;l++)e.vertices[h[l]].copy(i)}
return function(){e=this.geometry,t=this.pointMap
var i=1,r=1
n.projectionMatrix.copy(this.camera.projectionMatrix),a("c",0,0,-1),a("t",0,0,1),a("n1",-i,-r,-1),a("n2",i,-r,-1),a("n3",-i,r,-1),a("n4",i,r,-1),a("f1",-i,-r,1),a("f2",i,-r,1),a("f3",-i,r,1),a("f4",i,r,1),a("u1",.7*i,1.1*r,-1),a("u2",.7*-i,1.1*r,-1),a("u3",0,2*r,-1),a("cf1",-i,0,1),a("cf2",i,0,1),a("cf3",0,-r,1),a("cf4",0,r,1),a("cn1",-i,0,-1),a("cn2",i,0,-1),a("cn3",0,-r,-1),a("cn4",0,r,-1),e.verticesNeedUpdate=!0}}(),r.DirectionalLightHelper=function(e,t){r.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1
var i=new r.Geometry
i.vertices.push(new r.Vector3(-t,t,0),new r.Vector3(t,t,0),new r.Vector3(t,-t,0),new r.Vector3(-t,-t,0),new r.Vector3(-t,t,0))
var n=new r.LineBasicMaterial({fog:!1})
n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new r.Line(i,n),this.add(this.lightPlane),i=new r.Geometry,i.vertices.push(new r.Vector3,new r.Vector3),n=new r.LineBasicMaterial({fog:!1}),n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new r.Line(i,n),this.add(this.targetLine),this.update()},r.DirectionalLightHelper.prototype=Object.create(r.Object3D.prototype),r.DirectionalLightHelper.prototype.constructor=r.DirectionalLightHelper,r.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},r.DirectionalLightHelper.prototype.update=function(){var e=new r.Vector3,t=new r.Vector3,i=new r.Vector3
return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),r.EdgesHelper=function(e,t){var i=void 0!==t?t:16777215,n=[0,0],a={},o=function(e,t){return e-t},s=["a","b","c"],h=new r.BufferGeometry,l=e.geometry.clone()
l.mergeVertices(),l.computeFaceNormals()
for(var c=l.vertices,u=l.faces,d=0,p=0,f=u.length;f>p;p++)for(var m=u[p],g=0;3>g;g++){n[0]=m[s[g]],n[1]=m[s[(g+1)%3]],n.sort(o)
var v=n.toString()
void 0===a[v]?(a[v]={vert1:n[0],vert2:n[1],face1:p,face2:void 0},d++):a[v].face2=p}var y=new Float32Array(2*d*3),w=0
for(var v in a){var b=a[v]
if(void 0===b.face2||u[b.face1].normal.dot(u[b.face2].normal)<.9999){var x=c[b.vert1]
y[w++]=x.x,y[w++]=x.y,y[w++]=x.z,x=c[b.vert2],y[w++]=x.x,y[w++]=x.y,y[w++]=x.z}}h.addAttribute("position",new r.BufferAttribute(y,3)),r.Line.call(this,h,new r.LineBasicMaterial({color:i}),r.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},r.EdgesHelper.prototype=Object.create(r.Line.prototype),r.EdgesHelper.prototype.constructor=r.EdgesHelper,r.FaceNormalsHelper=function(e,t,i,n){this.object=e,this.size=void 0!==t?t:1
for(var a=void 0!==i?i:16776960,o=void 0!==n?n:1,s=new r.Geometry,h=this.object.geometry.faces,l=0,c=h.length;c>l;l++)s.vertices.push(new r.Vector3,new r.Vector3)
r.Line.call(this,s,new r.LineBasicMaterial({color:a,linewidth:o}),r.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new r.Matrix3,this.update()},r.FaceNormalsHelper.prototype=Object.create(r.Line.prototype),r.FaceNormalsHelper.prototype.constructor=r.FaceNormalsHelper,r.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,i=t.geometry.vertices,n=t.geometry.faces,r=t.matrixWorld
t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(r)
for(var a=0,o=0,s=n.length;s>a;a++,o+=2){var h=n[a]
e[o].copy(i[h.a]).add(i[h.b]).add(i[h.c]).divideScalar(3).applyMatrix4(r),e[o+1].copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[o])}return this.geometry.verticesNeedUpdate=!0,this},r.GridHelper=function(e,t){var i=new r.Geometry,n=new r.LineBasicMaterial({vertexColors:r.VertexColors})
this.color1=new r.Color(4473924),this.color2=new r.Color(8947848)
for(var a=-e;e>=a;a+=t){i.vertices.push(new r.Vector3(-e,0,a),new r.Vector3(e,0,a),new r.Vector3(a,0,-e),new r.Vector3(a,0,e))
var o=0===a?this.color1:this.color2
i.colors.push(o,o,o,o)}r.Line.call(this,i,n,r.LinePieces)},r.GridHelper.prototype=Object.create(r.Line.prototype),r.GridHelper.prototype.constructor=r.GridHelper,r.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},r.HemisphereLightHelper=function(e,t,i,n){r.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new r.Color,new r.Color]
var a=new r.SphereGeometry(t,4,2)
a.applyMatrix((new r.Matrix4).makeRotationX(-Math.PI/2))
for(var o=0,s=8;s>o;o++)a.faces[o].color=this.colors[4>o?0:1]
var h=new r.MeshBasicMaterial({vertexColors:r.FaceColors,wireframe:!0})
this.lightSphere=new r.Mesh(a,h),this.add(this.lightSphere),this.update()},r.HemisphereLightHelper.prototype=Object.create(r.Object3D.prototype),r.HemisphereLightHelper.prototype.constructor=r.HemisphereLightHelper,r.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},r.HemisphereLightHelper.prototype.update=function(){var e=new r.Vector3
return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),r.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld()
var i=new r.SphereGeometry(t,4,2),n=new r.MeshBasicMaterial({wireframe:!0,fog:!1})
n.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.Mesh.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},r.PointLightHelper.prototype=Object.create(r.Mesh.prototype),r.PointLightHelper.prototype.constructor=r.PointLightHelper,r.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},r.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},r.SkeletonHelper=function(e){this.bones=this.getBoneList(e)
for(var t=new r.Geometry,i=0;i<this.bones.length;i++){var n=this.bones[i]
n.parent instanceof r.Bone&&(t.vertices.push(new r.Vector3),t.vertices.push(new r.Vector3),t.colors.push(new r.Color(0,0,1)),t.colors.push(new r.Color(0,1,0)))}var a=new r.LineBasicMaterial({vertexColors:r.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0})
r.Line.call(this,t,a,r.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},r.SkeletonHelper.prototype=Object.create(r.Line.prototype),r.SkeletonHelper.prototype.constructor=r.SkeletonHelper,r.SkeletonHelper.prototype.getBoneList=function(e){var t=[]
e instanceof r.Bone&&t.push(e)
for(var i=0;i<e.children.length;i++)t.push.apply(t,this.getBoneList(e.children[i]))
return t},r.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new r.Matrix4).getInverse(this.root.matrixWorld),i=new r.Matrix4,n=0,a=0;a<this.bones.length;a++){var o=this.bones[a]
o.parent instanceof r.Bone&&(i.multiplyMatrices(t,o.matrixWorld),e.vertices[n].setFromMatrixPosition(i),i.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[n+1].setFromMatrixPosition(i),n+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},r.SpotLightHelper=function(e){r.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1
var t=new r.CylinderGeometry(0,1,1,8,1,!0)
t.applyMatrix((new r.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new r.Matrix4).makeRotationX(-Math.PI/2))
var i=new r.MeshBasicMaterial({wireframe:!0,fog:!1})
this.cone=new r.Mesh(t,i),this.add(this.cone),this.update()},r.SpotLightHelper.prototype=Object.create(r.Object3D.prototype),r.SpotLightHelper.prototype.constructor=r.SpotLightHelper,r.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},r.SpotLightHelper.prototype.update=function(){var e=new r.Vector3,t=new r.Vector3
return function(){var i=this.light.distance?this.light.distance:1e4,n=i*Math.tan(this.light.angle)
this.cone.scale.set(n,n,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),r.VertexNormalsHelper=function(e,t,i,n){this.object=e,this.size=void 0!==t?t:1
for(var a=void 0!==i?i:16711680,o=void 0!==n?n:1,s=new r.Geometry,h=(e.geometry.vertices,e.geometry.faces),l=0,c=h.length;c>l;l++)for(var u=h[l],d=0,p=u.vertexNormals.length;p>d;d++)s.vertices.push(new r.Vector3,new r.Vector3)
r.Line.call(this,s,new r.LineBasicMaterial({color:a,linewidth:o}),r.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new r.Matrix3,this.update()},r.VertexNormalsHelper.prototype=Object.create(r.Line.prototype),r.VertexNormalsHelper.prototype.constructor=r.VertexNormalsHelper,r.VertexNormalsHelper.prototype.update=function(e){var t=new r.Vector3
return function(e){var i=["a","b","c","d"]
this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld)
for(var n=this.geometry.vertices,r=this.object.geometry.vertices,a=this.object.geometry.faces,o=this.object.matrixWorld,s=0,h=0,l=a.length;l>h;h++)for(var c=a[h],u=0,d=c.vertexNormals.length;d>u;u++){var p=c[i[u]],f=r[p],m=c.vertexNormals[u]
n[s].copy(f).applyMatrix4(o),t.copy(m).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(n[s]),s+=1,n[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),r.VertexTangentsHelper=function(e,t,i,n){this.object=e,this.size=void 0!==t?t:1
for(var a=void 0!==i?i:255,o=void 0!==n?n:1,s=new r.Geometry,h=(e.geometry.vertices,e.geometry.faces),l=0,c=h.length;c>l;l++)for(var u=h[l],d=0,p=u.vertexTangents.length;p>d;d++)s.vertices.push(new r.Vector3),s.vertices.push(new r.Vector3)
r.Line.call(this,s,new r.LineBasicMaterial({color:a,linewidth:o}),r.LinePieces),this.matrixAutoUpdate=!1,this.update()},r.VertexTangentsHelper.prototype=Object.create(r.Line.prototype),r.VertexTangentsHelper.prototype.constructor=r.VertexTangentsHelper,r.VertexTangentsHelper.prototype.update=function(e){var t=new r.Vector3
return function(e){var i=["a","b","c","d"]
this.object.updateMatrixWorld(!0)
for(var n=this.geometry.vertices,r=this.object.geometry.vertices,a=this.object.geometry.faces,o=this.object.matrixWorld,s=0,h=0,l=a.length;l>h;h++)for(var c=a[h],u=0,d=c.vertexTangents.length;d>u;u++){var p=c[i[u]],f=r[p],m=c.vertexTangents[u]
n[s].copy(f).applyMatrix4(o),t.copy(m).transformDirection(o).multiplyScalar(this.size),t.add(n[s]),s+=1,n[s].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),r.WireframeHelper=function(e,t){var i=void 0!==t?t:16777215,n=[0,0],a={},o=function(e,t){return e-t},s=["a","b","c"],h=new r.BufferGeometry
if(e.geometry instanceof r.Geometry){for(var l=e.geometry.vertices,c=e.geometry.faces,u=0,d=new Uint32Array(6*c.length),p=0,f=c.length;f>p;p++)for(var m=c[p],g=0;3>g;g++){n[0]=m[s[g]],n[1]=m[s[(g+1)%3]],n.sort(o)
var v=n.toString()
void 0===a[v]&&(d[2*u]=n[0],d[2*u+1]=n[1],a[v]=!0,u++)}for(var y=new Float32Array(2*u*3),p=0,f=u;f>p;p++)for(var g=0;2>g;g++){var w=l[d[2*p+g]],b=6*p+3*g
y[b+0]=w.x,y[b+1]=w.y,y[b+2]=w.z}h.addAttribute("position",new r.BufferAttribute(y,3))}else if(e.geometry instanceof r.BufferGeometry)if(void 0!==e.geometry.attributes.index){var l=e.geometry.attributes.position.array,x=e.geometry.attributes.index.array,_=e.geometry.drawcalls,u=0
0===_.length&&(_=[{count:x.length,index:0,start:0}])
for(var d=new Uint32Array(2*x.length),k=0,M=_.length;M>k;++k)for(var S=_[k].start,T=_[k].count,b=_[k].index,p=S,C=S+T;C>p;p+=3)for(var g=0;3>g;g++){n[0]=b+x[p+g],n[1]=b+x[p+(g+1)%3],n.sort(o)
var v=n.toString()
void 0===a[v]&&(d[2*u]=n[0],d[2*u+1]=n[1],a[v]=!0,u++)}for(var y=new Float32Array(2*u*3),p=0,f=u;f>p;p++)for(var g=0;2>g;g++){var b=6*p+3*g,E=3*d[2*p+g]
y[b+0]=l[E],y[b+1]=l[E+1],y[b+2]=l[E+2]}h.addAttribute("position",new r.BufferAttribute(y,3))}else{for(var l=e.geometry.attributes.position.array,u=l.length/3,A=u/3,y=new Float32Array(2*u*3),p=0,f=A;f>p;p++)for(var g=0;3>g;g++){var b=18*p+6*g,L=9*p+3*g
y[b+0]=l[L],y[b+1]=l[L+1],y[b+2]=l[L+2]
var E=9*p+3*((g+1)%3)
y[b+3]=l[E],y[b+4]=l[E+1],y[b+5]=l[E+2]}h.addAttribute("position",new r.BufferAttribute(y,3))}r.Line.call(this,h,new r.LineBasicMaterial({color:i}),r.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},r.WireframeHelper.prototype=Object.create(r.Line.prototype),r.WireframeHelper.prototype.constructor=r.WireframeHelper,r.ImmediateRenderObject=function(){r.Object3D.call(this),this.render=function(e){}},r.ImmediateRenderObject.prototype=Object.create(r.Object3D.prototype),r.ImmediateRenderObject.prototype.constructor=r.ImmediateRenderObject,r.MorphBlendMesh=function(e,t){r.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[]
var i=this.geometry.morphTargets.length,n="__default",a=0,o=i-1,s=i/1
this.createAnimation(n,a,o,s),this.setAnimationWeight(n,1)},r.MorphBlendMesh.prototype=Object.create(r.Mesh.prototype),r.MorphBlendMesh.prototype.constructor=r.MorphBlendMesh,r.MorphBlendMesh.prototype.createAnimation=function(e,t,i,n){var r={startFrame:t,endFrame:i,length:i-t+1,fps:n,duration:(i-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1}
this.animationsMap[e]=r,this.animationsList.push(r)},r.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,i=/([a-z]+)_?(\d+)/,n={},r=this.geometry,a=0,o=r.morphTargets.length;o>a;a++){var s=r.morphTargets[a],h=s.name.match(i)
if(h&&h.length>1){{var l=h[1]
h[2]}n[l]||(n[l]={start:1/0,end:-(1/0)})
var c=n[l]
a<c.start&&(c.start=a),a>c.end&&(c.end=a),t||(t=l)}}for(var l in n){var c=n[l]
this.createAnimation(l,c.start,c.end,e)}this.firstAnimation=t},r.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e]
t&&(t.direction=1,t.directionBackwards=!1)},r.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e]
t&&(t.direction=-1,t.directionBackwards=!0)},r.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e]
i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)},r.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e]
i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)},r.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e]
i&&(i.weight=t)},r.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e]
i&&(i.time=t)},r.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,i=this.animationsMap[e]
return i&&(t=i.time),t},r.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,i=this.animationsMap[e]
return i&&(t=i.duration),t},r.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e]
t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},r.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e]
t&&(t.active=!1)},r.MorphBlendMesh.prototype.update=function(e){for(var t=0,i=this.animationsList.length;i>t;t++){var n=this.animationsList[t]
if(n.active){var a=n.duration/n.length
n.time+=n.direction*e,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration))
var o=n.startFrame+r.Math.clamp(Math.floor(n.time/a),0,n.length-1),s=n.weight
o!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*s,this.morphTargetInfluences[o]=0,n.lastFrame=n.currentFrame,n.currentFrame=o)
var h=n.time%a/a
n.directionBackwards&&(h=1-h),this.morphTargetInfluences[n.currentFrame]=h*s,this.morphTargetInfluences[n.lastFrame]=(1-h)*s}}},"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=r),i.THREE=r):this.THREE=r},{}],578:[function(e,t,i){(function(){function e(e){function t(t,i,n,r,a,o){for(;a>=0&&o>a;a+=e){var s=r?r[a]:a
n=i(n,t[s],s,t)}return n}return function(i,n,r,a){n=x(n,a,4)
var o=!E(i)&&b.keys(i),s=(o||i).length,h=e>0?0:s-1
return arguments.length<3&&(r=i[o?o[h]:h],h+=e),t(i,n,r,o,h,s)}}function n(e){return function(t,i,n){i=_(i,n)
for(var r=C(t),a=e>0?0:r-1;a>=0&&r>a;a+=e)if(i(t[a],a,t))return a
return-1}}function r(e,t,i){return function(n,r,a){var o=0,s=C(n)
if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1
else if(i&&a&&s)return a=i(n,r),n[a]===r?a:-1
if(r!==r)return a=t(d.call(n,o,s),b.isNaN),a>=0?a+o:-1
for(a=e>0?o:s-1;a>=0&&s>a;a+=e)if(n[a]===r)return a
return-1}}function a(e,t){var i=F.length,n=e.constructor,r=b.isFunction(n)&&n.prototype||l,a="constructor"
for(b.has(e,a)&&!b.contains(t,a)&&t.push(a);i--;)a=F[i],a in e&&e[a]!==r[a]&&!b.contains(t,a)&&t.push(a)}var o=this,s=o._,h=Array.prototype,l=Object.prototype,c=Function.prototype,u=h.push,d=h.slice,p=l.toString,f=l.hasOwnProperty,m=Array.isArray,g=Object.keys,v=c.bind,y=Object.create,w=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)}
"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=b),i._=b):o._=b,b.VERSION="1.8.3"
var x=function(e,t,i){if(void 0===t)return e
switch(null==i?3:i){case 1:return function(i){return e.call(t,i)}
case 2:return function(i,n){return e.call(t,i,n)}
case 3:return function(i,n,r){return e.call(t,i,n,r)}
case 4:return function(i,n,r,a){return e.call(t,i,n,r,a)}}return function(){return e.apply(t,arguments)}},_=function(e,t,i){return null==e?b.identity:b.isFunction(e)?x(e,t,i):b.isObject(e)?b.matcher(e):b.property(e)}
b.iteratee=function(e,t){return _(e,t,1/0)}
var k=function(e,t){return function(i){var n=arguments.length
if(2>n||null==i)return i
for(var r=1;n>r;r++)for(var a=arguments[r],o=e(a),s=o.length,h=0;s>h;h++){var l=o[h]
t&&void 0!==i[l]||(i[l]=a[l])}return i}},M=function(e){if(!b.isObject(e))return{}
if(y)return y(e)
w.prototype=e
var t=new w
return w.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},T=Math.pow(2,53)-1,C=S("length"),E=function(e){var t=C(e)
return"number"==typeof t&&t>=0&&T>=t}
b.each=b.forEach=function(e,t,i){t=x(t,i)
var n,r
if(E(e))for(n=0,r=e.length;r>n;n++)t(e[n],n,e)
else{var a=b.keys(e)
for(n=0,r=a.length;r>n;n++)t(e[a[n]],a[n],e)}return e},b.map=b.collect=function(e,t,i){t=_(t,i)
for(var n=!E(e)&&b.keys(e),r=(n||e).length,a=Array(r),o=0;r>o;o++){var s=n?n[o]:o
a[o]=t(e[s],s,e)}return a},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,i){var n
return n=E(e)?b.findIndex(e,t,i):b.findKey(e,t,i),void 0!==n&&-1!==n?e[n]:void 0},b.filter=b.select=function(e,t,i){var n=[]
return t=_(t,i),b.each(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n},b.reject=function(e,t,i){return b.filter(e,b.negate(_(t)),i)},b.every=b.all=function(e,t,i){t=_(t,i)
for(var n=!E(e)&&b.keys(e),r=(n||e).length,a=0;r>a;a++){var o=n?n[a]:a
if(!t(e[o],o,e))return!1}return!0},b.some=b.any=function(e,t,i){t=_(t,i)
for(var n=!E(e)&&b.keys(e),r=(n||e).length,a=0;r>a;a++){var o=n?n[a]:a
if(t(e[o],o,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,i,n){return E(e)||(e=b.values(e)),("number"!=typeof i||n)&&(i=0),b.indexOf(e,t,i)>=0},b.invoke=function(e,t){var i=d.call(arguments,2),n=b.isFunction(t)
return b.map(e,function(e){var r=n?t:e[t]
return null==r?r:r.apply(e,i)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,i){var n,r,a=-(1/0),o=-(1/0)
if(null==t&&null!=e){e=E(e)?e:b.values(e)
for(var s=0,h=e.length;h>s;s++)n=e[s],n>a&&(a=n)}else t=_(t,i),b.each(e,function(e,i,n){r=t(e,i,n),(r>o||r===-(1/0)&&a===-(1/0))&&(a=e,o=r)})
return a},b.min=function(e,t,i){var n,r,a=1/0,o=1/0
if(null==t&&null!=e){e=E(e)?e:b.values(e)
for(var s=0,h=e.length;h>s;s++)n=e[s],a>n&&(a=n)}else t=_(t,i),b.each(e,function(e,i,n){r=t(e,i,n),(o>r||r===1/0&&a===1/0)&&(a=e,o=r)})
return a},b.shuffle=function(e){for(var t,i=E(e)?e:b.values(e),n=i.length,r=Array(n),a=0;n>a;a++)t=b.random(0,a),t!==a&&(r[a]=r[t]),r[t]=i[a]
return r},b.sample=function(e,t,i){return null==t||i?(E(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,i){return t=_(t,i),b.pluck(b.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria
if(i!==n){if(i>n||void 0===i)return 1
if(n>i||void 0===n)return-1}return e.index-t.index}),"value")}
var A=function(e){return function(t,i,n){var r={}
return i=_(i,n),b.each(t,function(n,a){var o=i(n,a,t)
e(r,n,o)}),r}}
b.groupBy=A(function(e,t,i){b.has(e,i)?e[i].push(t):e[i]=[t]}),b.indexBy=A(function(e,t,i){e[i]=t}),b.countBy=A(function(e,t,i){b.has(e,i)?e[i]++:e[i]=1}),b.toArray=function(e){return e?b.isArray(e)?d.call(e):E(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:E(e)?e.length:b.keys(e).length},b.partition=function(e,t,i){t=_(t,i)
var n=[],r=[]
return b.each(e,function(e,i,a){(t(e,i,a)?n:r).push(e)}),[n,r]},b.first=b.head=b.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,i){return d.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},b.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,i){return d.call(e,null==t||i?1:t)},b.compact=function(e){return b.filter(e,b.identity)}
var L=function(e,t,i,n){for(var r=[],a=0,o=n||0,s=C(e);s>o;o++){var h=e[o]
if(E(h)&&(b.isArray(h)||b.isArguments(h))){t||(h=L(h,t,i))
var l=0,c=h.length
for(r.length+=c;c>l;)r[a++]=h[l++]}else i||(r[a++]=h)}return r}
b.flatten=function(e,t){return L(e,t,!1)},b.without=function(e){return b.difference(e,d.call(arguments,1))},b.uniq=b.unique=function(e,t,i,n){b.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=_(i,n))
for(var r=[],a=[],o=0,s=C(e);s>o;o++){var h=e[o],l=i?i(h,o,e):h
t?(o&&a===l||r.push(h),a=l):i?b.contains(a,l)||(a.push(l),r.push(h)):b.contains(r,h)||r.push(h)}return r},b.union=function(){return b.uniq(L(arguments,!0,!0))},b.intersection=function(e){for(var t=[],i=arguments.length,n=0,r=C(e);r>n;n++){var a=e[n]
if(!b.contains(t,a)){for(var o=1;i>o&&b.contains(arguments[o],a);o++);o===i&&t.push(a)}}return t},b.difference=function(e){var t=L(arguments,!0,!0,1)
return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,C).length||0,i=Array(t),n=0;t>n;n++)i[n]=b.pluck(e,n)
return i},b.object=function(e,t){for(var i={},n=0,r=C(e);r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1]
return i},b.findIndex=n(1),b.findLastIndex=n(-1),b.sortedIndex=function(e,t,i,n){i=_(i,n,1)
for(var r=i(t),a=0,o=C(e);o>a;){var s=Math.floor((a+o)/2)
i(e[s])<r?a=s+1:o=s}return a},b.indexOf=r(1,b.findIndex,b.sortedIndex),b.lastIndexOf=r(-1,b.findLastIndex),b.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1
for(var n=Math.max(Math.ceil((t-e)/i),0),r=Array(n),a=0;n>a;a++,e+=i)r[a]=e
return r}
var P=function(e,t,i,n,r){if(!(n instanceof t))return e.apply(i,r)
var a=M(e.prototype),o=e.apply(a,r)
return b.isObject(o)?o:a}
b.bind=function(e,t){if(v&&e.bind===v)return v.apply(e,d.call(arguments,1))
if(!b.isFunction(e))throw new TypeError("Bind must be called on a function")
var i=d.call(arguments,2),n=function(){return P(e,n,t,this,i.concat(d.call(arguments)))}
return n},b.partial=function(e){var t=d.call(arguments,1),i=function(){for(var n=0,r=t.length,a=Array(r),o=0;r>o;o++)a[o]=t[o]===b?arguments[n++]:t[o]
for(;n<arguments.length;)a.push(arguments[n++])
return P(e,i,this,this,a)}
return i},b.bindAll=function(e){var t,i,n=arguments.length
if(1>=n)throw new Error("bindAll must be passed function names")
for(t=1;n>t;t++)i=arguments[t],e[i]=b.bind(e[i],e)
return e},b.memoize=function(e,t){var i=function(n){var r=i.cache,a=""+(t?t.apply(this,arguments):n)
return b.has(r,a)||(r[a]=e.apply(this,arguments)),r[a]}
return i.cache={},i},b.delay=function(e,t){var i=d.call(arguments,2)
return setTimeout(function(){return e.apply(null,i)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,i){var n,r,a,o=null,s=0
i||(i={})
var h=function(){s=i.leading===!1?0:b.now(),o=null,a=e.apply(n,r),o||(n=r=null)}
return function(){var l=b.now()
s||i.leading!==!1||(s=l)
var c=t-(l-s)
return n=this,r=arguments,0>=c||c>t?(o&&(clearTimeout(o),o=null),s=l,a=e.apply(n,r),o||(n=r=null)):o||i.trailing===!1||(o=setTimeout(h,c)),a}},b.debounce=function(e,t,i){var n,r,a,o,s,h=function(){var l=b.now()-o
t>l&&l>=0?n=setTimeout(h,t-l):(n=null,i||(s=e.apply(a,r),n||(a=r=null)))}
return function(){a=this,r=arguments,o=b.now()
var l=i&&!n
return n||(n=setTimeout(h,t)),l&&(s=e.apply(a,r),a=r=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1
return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n)
return n}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var i
return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}},b.once=b.partial(b.before,2)
var R=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"]
b.keys=function(e){if(!b.isObject(e))return[]
if(g)return g(e)
var t=[]
for(var i in e)b.has(e,i)&&t.push(i)
return R&&a(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[]
var t=[]
for(var i in e)t.push(i)
return R&&a(e,t),t},b.values=function(e){for(var t=b.keys(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=e[t[r]]
return n},b.mapObject=function(e,t,i){t=_(t,i)
for(var n,r=b.keys(e),a=r.length,o={},s=0;a>s;s++)n=r[s],o[n]=t(e[n],n,e)
return o},b.pairs=function(e){for(var t=b.keys(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]]
return n},b.invert=function(e){for(var t={},i=b.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n]
return t},b.functions=b.methods=function(e){var t=[]
for(var i in e)b.isFunction(e[i])&&t.push(i)
return t.sort()},b.extend=k(b.allKeys),b.extendOwn=b.assign=k(b.keys),b.findKey=function(e,t,i){t=_(t,i)
for(var n,r=b.keys(e),a=0,o=r.length;o>a;a++)if(n=r[a],t(e[n],n,e))return n},b.pick=function(e,t,i){var n,r,a={},o=e
if(null==o)return a
b.isFunction(t)?(r=b.allKeys(o),n=x(t,i)):(r=L(arguments,!1,!1,1),n=function(e,t,i){return t in i},o=Object(o))
for(var s=0,h=r.length;h>s;s++){var l=r[s],c=o[l]
n(c,l,o)&&(a[l]=c)}return a},b.omit=function(e,t,i){if(b.isFunction(t))t=b.negate(t)
else{var n=b.map(L(arguments,!1,!1,1),String)
t=function(e,t){return!b.contains(n,t)}}return b.pick(e,t,i)},b.defaults=k(b.allKeys,!0),b.create=function(e,t){var i=M(e)
return t&&b.extendOwn(i,t),i},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var i=b.keys(t),n=i.length
if(null==e)return!n
for(var r=Object(e),a=0;n>a;a++){var o=i[a]
if(t[o]!==r[o]||!(o in r))return!1}return!0}
var D=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t
if(null==e||null==t)return e===t
e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped)
var r=p.call(e)
if(r!==p.call(t))return!1
switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t
case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t
case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===r
if(!a){if("object"!=typeof e||"object"!=typeof t)return!1
var o=e.constructor,s=t.constructor
if(o!==s&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[]
for(var h=i.length;h--;)if(i[h]===e)return n[h]===t
if(i.push(e),n.push(t),a){if(h=e.length,h!==t.length)return!1
for(;h--;)if(!D(e[h],t[h],i,n))return!1}else{var l,c=b.keys(e)
if(h=c.length,b.keys(t).length!==h)return!1
for(;h--;)if(l=c[h],!b.has(t,l)||!D(e[l],t[l],i,n))return!1}return i.pop(),n.pop(),!0}
b.isEqual=function(e,t){return D(e,t)},b.isEmpty=function(e){return null==e?!0:E(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=m||function(e){return"[object Array]"===p.call(e)},b.isObject=function(e){var t=typeof e
return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&f.call(e,t)},b.noConflict=function(){return o._=s,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=S,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,i){var n=Array(Math.max(0,e))
t=x(t,i,1)
for(var r=0;e>r;r++)n[r]=t(r)
return n},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()}
var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},O=b.invert(B),V=function(e){var t=function(t){return e[t]},i="(?:"+b.keys(e).join("|")+")",n=RegExp(i),r=RegExp(i,"g")
return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(r,t):e}}
b.escape=V(B),b.unescape=V(O),b.result=function(e,t,i){var n=null==e?void 0:e[t]
return void 0===n&&(n=i),b.isFunction(n)?n.call(e):n}
var z=0
b.uniqueId=function(e){var t=++z+""
return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}
var U=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,j=function(e){return"\\"+N[e]}
b.template=function(e,t,i){!t&&i&&(t=i),t=b.defaults({},t,b.templateSettings)
var n=RegExp([(t.escape||U).source,(t.interpolate||U).source,(t.evaluate||U).source].join("|")+"|$","g"),r=0,a="__p+='"
e.replace(n,function(t,i,n,o,s){return a+=e.slice(r,s).replace(I,j),r=s+t.length,i?a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n"
try{var o=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var h=function(e){return o.call(this,e,b)},l=t.variable||"obj"
return h.source="function("+l+"){\n"+a+"}",h},b.chain=function(e){var t=b(e)
return t._chain=!0,t}
var H=function(e,t){return e._chain?b(t).chain():t}
b.mixin=function(e){b.each(b.functions(e),function(t){var i=b[t]=e[t]
b.prototype[t]=function(){var e=[this._wrapped]
return u.apply(e,arguments),H(this,i.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=h[e]
b.prototype[e]=function(){var i=this._wrapped
return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],H(this,i)}}),b.each(["concat","join","slice"],function(e){var t=h[e]
b.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],579:[function(e,t,i){"use strict"
function n(e,t,i){if(!(this instanceof n))return new n(e,t,i)
var l,c,u,d,p=s.test(e),f=typeof t,m=this,g=0
for("object"!==f&&"string"!==f&&(i=t,t=null),i&&"function"!=typeof i&&(i=o.parse),t=a(t);g<h.length;g++)c=h[g],l=c[0],d=c[1],l!==l?m[d]=e:"string"==typeof l?~(u=e.indexOf(l))&&("number"==typeof c[2]?(m[d]=e.slice(0,u),e=e.slice(u+c[2])):(m[d]=e.slice(u),e=e.slice(0,u))):(u=l.exec(e))&&(m[d]=u[1],e=e.slice(0,e.length-u[0].length)),m[d]=m[d]||(c[3]||"port"===d&&p?t[d]||"":""),c[4]&&(m[d]=m[d].toLowerCase())
i&&(m.query=i(m.query)),r(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(c=m.auth.split(":"),m.username=c[0]||"",m.password=c[1]||""),m.href=m.toString()}var r=e("requires-port"),a=e("./lolcation"),o=e("querystringify"),s=/^\/(?!\/)/,h=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[0/0,"host",void 0,1,1],[/\:(\d+)$/,"port"],[0/0,"hostname",void 0,1,1]]
n.prototype.set=function(e,t,i){var n=this
return"query"===e?("string"==typeof t&&(t=(i||o.parse)(t)),n[e]=t):"port"===e?(n[e]=t,r(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="")):"hostname"===e?(n[e]=t,n.port&&(t+=":"+n.port),n.host=t):"host"===e?(n[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),n.hostname=t[0],n.port=t[1])):n[e]=t,n.href=n.toString(),n},n.prototype.toString=function(e){e&&"function"==typeof e||(e=o.stringify)
var t,i=this,n=i.protocol+"//"
return i.username&&(n+=i.username+":"+i.password+"@"),n+=i.hostname,i.port&&(n+=":"+i.port),n+=i.pathname,i.query&&(t="object"==typeof i.query?e(i.query):i.query,n+=("?"===t.charAt(0)?"":"?")+t),i.hash&&(n+=i.hash),n},n.qs=o,n.location=a,t.exports=n},{"./lolcation":580,querystringify:581,"requires-port":582}],580:[function(e,t,i){(function(i){"use strict"
var n,r={hash:1,query:1}
t.exports=function(t){t=t||i.location||{},n=n||e("./")
var a,o={},s=typeof t
if("blob:"===t.protocol)o=new n(unescape(t.pathname),{})
else if("string"===s){o=new n(t,{})
for(a in r)delete o[a]}else if("object"===s)for(a in t)a in r||(o[a]=t[a])
return o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":579}],581:[function(e,t,i){"use strict"
function n(e){for(var t,i=/([^=?&]+)=([^&]*)/g,n={};t=i.exec(e);n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return n}function r(e,t){t=t||""
var i=[]
"string"!=typeof t&&(t="?")
for(var n in e)a.call(e,n)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))
return t+i.join("&")}var a=Object.prototype.hasOwnProperty
i.stringify=r,i.parse=n},{}],582:[function(e,t,i){"use strict"
t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1
switch(t){case"http":case"ws":return 80!==e
case"https":case"wss":return 443!==e
case"ftp":return 22!==e
case"gopher":return 70!==e
case"file":return!1}return 0!==e}},{}],583:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("ampersand-form-view"),s=(e("ampersand-select-view"),e("ampersand-input-view"),e("./model")),h=e("../models/model"),l=(e("ampersand-checkbox-view"),e("../forms/paginated-collection-view")),c=(e("../forms/tests.js"),o.extend({submitCallback:function(e,t){var i=!1
"spatial"==e&&(e="population",i=!0)
for(var r=this.collection.models.length,a="model"+r,o=this.collection.map(function(e){return e.name});n.contains(o,a);)r+=1,a="model"+r
var s=new h({name:a,units:e,type:"massaction",isSpatial:i,mesh:this.meshCollection.at(0)})
this.collection.add(s).save(),this.selectView.select(s,!0)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e,t){this.collection=e.collection,this.meshCollection=e.meshCollection,this.selectView=e.selectView},render:function(){o.prototype.render.apply(this,arguments),r(this.el).find("input").prop("autocomplete","off"),this.buttonTemplate='<div class="btn-group">   <a class="btn btn-large btn-primary dropdown-toggle" data-toggle="dropdown" href="#">     Add Model     <span class="caret"></span>   </a>   <ul class="dropdown-menu">     <li><a data-hook="concentration" tabindex="-1" href="#">Concentration, Well-mixed</a></li>     <li><a data-hook="population" tabindex="-1" href="#">Population, Well-mixed</a></li>     <li><a data-hook="spatial" tabindex="-1" href="#">Population, Spatial</a></li>   </ul> </div>',this.button=r(this.buttonTemplate).appendTo(r(this.el)),r(this.el).find("[data-hook=concentration]").click(n.bind(n.partial(this.submitCallback,"concentration"),this)),r(this.el).find("[data-hook=population]").click(n.bind(n.partial(this.submitCallback,"population"),this)),r(this.el).find("[data-hook=spatial]").click(n.bind(n.partial(this.submitCallback,"spatial"),this))}})),u=a.extend({template:"<div>   <div data-hook='modelCollection'></div>   <br />   <form data-hook='addModelForm'></form> </div>",props:{selected:"object",valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent&&this.parent.update&&this.parent.update()},initialize:function(e,t){a.prototype.initialize.call(this,e,t),this.meshCollection=e.meshCollection},select:function(e){e instanceof h?this.selectView.select(e):this.selected=this.selectView.value},render:function(){var e="<div>   <table data-hook='table' class='table table-bordered'>     <thead>       <th width='25px'></th><th width='170px'>Name</th><th>Properties</th><th width='25px'>Delete</th>     </thead>     <tbody data-hook='items'></tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>"
return a.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new l({template:e,collection:this.collection,viewModel:s,parent:this,limit:10,value:this.selected,autoSelect:!1}),this.queryByHook("modelCollection")),this.listenToAndRun(this.selectView,"change:value",n.bind(this.select,this)),this.addForm=new c({el:this.el.querySelector("[data-hook=addModelForm]"),selectView:this.selectView,meshCollection:this.meshCollection,collection:this.collection}),this}})
t.exports=u},{"../forms/paginated-collection-view":19,"../forms/tests.js":30,"../models/model":36,"./model":584,"ampersand-checkbox-view":49,"ampersand-form-view":104,"ampersand-input-view":108,"ampersand-select-view":142,"ampersand-view":451,jquery:560,underscore:578}],584:[function(e,t,i){var n=e("underscore"),r=e("jquery"),a=e("ampersand-view"),o=e("../forms/tests")
t.exports=a.extend({template:'<tr data-hook="row">   <td>     <button data-hook="edit" class="btn-small btn">Select</button>   </td>   <td data-hook="name">   </td>   <td data-hook="type">   </td>   <td>     <button type="button" class="btn btn-default" data-hook="delete">       x     </button>   </td> </tr>',props:{valid:"boolean",message:"string"},bindings:{invalid:{type:"booleanClass",name:"invalidRow",hook:"row"},textType:{type:"text",hook:"type"}},derived:{textType:{deps:["model.units","model.type","model.isSpatial"],fn:function(){var e=""
return e+="massaction"==this.model.type?"Mass action, ":"Non-mass action, ",e+="concentration"==this.model.units?"concentration, non-spatial":this.model.isSpatial?"population, spatial":"population, non-spatial"}},invalid:{deps:["valid"],fn:function(){return!this.valid}}},events:{"click [data-hook=edit]":"selectSelf","click [data-hook=delete]":"removeModel"},updateValid:function(){this.valid=!this.nameBox||this.nameBox.valid,this.message="",this.nameBox&&!this.nameBox.valid&&(this.message="Model name invalid")},update:function(e){this.updateValid(),this.parent&&this.parent.update&&this.parent.update()},selectSelf:function(){this.parent.select(this.model)},deSelect:function(){r(this.queryByHook("edit")).removeClass("btn-success"),r(this.queryByHook("name")).find("input").prop("disabled",!0)},select:function(){r(this.queryByHook("edit")).addClass("btn-success"),r(this.queryByHook("name")).find("input").prop("disabled",!1)},removeModel:function(){if(confirm("Are you sure you want to delete this model?")){var e=r('[data-hook="saveMessage"]')
e.removeClass("alert-success alert-error"),e.text("Deleting model..."),this.model.destroy({success:n.bind(this.modelDeleted,this),error:n.bind(this.modelFailedToDelete,this)})}},modelDeleted:function(){var e=r('[data-hook="saveMessage"]')
e.removeClass("alert-error"),e.addClass("alert-success"),e.text("Model deleted")},modelFailedToDelete:function(){var e=r('[data-hook="saveMessage"]')
e.removeClass("alert-success"),e.addClass("alert-error"),e.text("Model not saved to local library!")},initialize:function(){a.prototype.initialize.apply(this,arguments),this.updateValid()},render:function(){a.prototype.render.apply(this,arguments),this.nameBox=this.renderSubview(new ModifyingInputView({label:"",name:"name",value:this.model.name,required:!1,parent:this,placeholder:"Name",model:this.model,tests:[].concat(o.naming(this.model.collection,this.model))}),this.el.querySelector("[data-hook='name']"))
this.model
return this.deSelect(),this.updateValid(),this}})},{"../forms/tests":30,"ampersand-view":451,jquery:560,underscore:578}]},{},[1])
