!function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return o(i?i:e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({"/home/bbales2/stochssModel/app/static/modelEditor/app.js":[function(e,t){var i=e("jquery"),n=e("underscore"),o=(e("andlog"),e("clientconfig"),e("ampersand-view")),r=(e("ampersand-model"),e("ampersand-rest-collection")),s=e("./forms/model"),a=e("./select/model-collection"),l=e("./models/model"),h=e("domready"),d=e("./models/mesh"),c=e("./models/mesh-collection"),u=(e("./forms/mesh-collection"),e("url-parse")),p=o.extend({props:{selected:"object",modelNameText:"string"},bindings:{modelNameText:{type:"text",hook:"modelName"},selected:[{type:"toggle",selector:".reqModel"}]},updateModelNameText:function(){this.modelNameText=this.selected?"(current: "+this.selected.name+")":""},updateSaveMessage:function(e,t){var n=i(this.queryByHook("saveMessage"));"boolean"==typeof e?e?(n.removeClass("alert-error"),n.addClass("alert-success"),n.text(t)):(n.removeClass("alert-success"),n.addClass("alert-error"),n.text(t)):"saved"==this.selected.saveState?(n.removeClass("alert-error"),n.addClass("alert-success"),n.text("Saved")):"saving"==this.selected.saveState?(n.removeClass("alert-success alert-error"),n.text("Saving...")):"failed"==this.selected.saveState?(n.removeClass("alert-success"),n.addClass("alert-error"),n.text("Model Save Failed!")):"invalid"==this.selected.saveState&&(n.removeClass("alert-success"),n.addClass("alert-error"),n.text(this.message))},updateValid:function(){this.modelSelector.updateValid(),this.valid=this.modelSelector.valid,this.message="",this.modelSelector.valid||(this.message=this.modelSelector.message),this.modelEditor&&(this.modelEditor.updateValid(),this.valid=this.valid&&this.modelEditor.valid,this.modelEditor.valid||0!=this.message.length||(this.message=this.modelEditor.message))},update:function(){this.updateModelNameText();var e=this.valid;this.updateValid(),this.valid||this.updateSaveMessage(!1,this.message),e!=this.valid&&0==e&&this.saveModel()},saveModel:function(){this.updateValid(),this.valid?this.selected&&this.selected.saveModel():this.valid||this.updateSaveMessage(!1,this.message)},initialize:function(e,t){o.prototype.initialize.call(this,e,t),this.meshCollection=e.meshCollection,i("[data-hook='exportToPublic']").click(n.bind(this.exportModel,this)),i("[data-hook='exportToZip']").click(n.bind(this.exportModelAsZip,this)),i('[data-hook="duplicateLink"]').click(n.bind(function(){this.modelEditor.duplicateModel()},this)),i('[data-hook="convertToPopulationLink"]').click(n.bind(function(){this.modelEditor.convertToPopulation(),i(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".speciesAccordion").find("a").first()[0].click(),i(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".parametersAccordion").find("a").first()[0].click(),i(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),i(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),i(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".reactionsAccordion").find("a").first()[0].click()},this)),i('[data-hook="convertToSpatialLink"]').click(n.bind(function(){this.modelEditor.convertToSpatial(),i(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".speciesAccordion").find("a").first()[0].click(),i(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".parametersAccordion").find("a").first()[0].click(),i(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),i(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),i(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".reactionsAccordion").find("a").first()[0].click()},this))},remove:function(){i('[data-hook="duplicateLink"]').off("click"),i('[data-hook="convertToPopulationLink"]').off("click"),i('[data-hook="convertToSpatialLink"]').off("click"),p.prototype.remove.apply(this,arguments)},selectModel:function(){this.modelSelector.selected&&(this.modelEditor&&(this.modelEditor.remove(),this.stopListening(this.selected),delete this.modelEditor),this.modelEditor=new s({el:i("<div>").appendTo(this.queryByHook("editor"))[0],model:this.modelSelector.selected,meshCollection:this.meshCollection,parent:this}),this.listenTo(this.modelSelector.selected,"remove",n.bind(this.modelDeleted,this)),this.listenTo(this.modelSelector.selected,"requestSave",n.bind(this.saveModel,this)),this.listenTo(this.modelSelector.selected,"change:saveState",n.bind(this.updateSaveMessage,this)),this.registerSubview(this.modelEditor),this.modelEditor.render(),i(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".speciesAccordion").find("a").first()[0].click(),i(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".parametersAccordion").find("a").first()[0].click(),i(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),i(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),i(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||i(this.el).find(".reactionsAccordion").find("a").first()[0].click(),this.selected=this.modelSelector.selected),this.updateModelNameText()},exportModel:function(){var e=i(this.queryByHook("saveMessage"));e.removeClass("alert-success alert-error"),e.text("Duplicating model...");var t=i.ajax({type:"GET",url:"/publicModels/names",async:!1,dataType:"JSON"}).responseJSON,o=t.map(function(e){return e.name});model=new l(this.modelSelector.selected.toJSON());for(var r=model.name;n.contains(o,r);)r=model.name+"_"+Math.random().toString(36).substr(2,3);model.name=r,model.is_public=!0,model.id=void 0,model.setupMesh(this.meshCollection),m.add(model),e.text("Saving model..."),model.save(void 0,{success:n.bind(this.modelSaved,this),error:n.bind(this.modelNotSaved,this)})},modelSaved:function(){var e=i(this.queryByHook("saveMessage"));e.removeClass("alert-error"),e.addClass("alert-success"),e.text("Saved model to public library"),window.location="/publicLibrary"},modelNotSaved:function(){var e=i(this.queryByHook("saveMessage"));e.removeClass("alert-success"),e.addClass("alert-error"),e.text("Error! Model not saved to public library!")},modelDeleted:function(){this.modelEditor&&(this.modelEditor.remove(),this.stopListening(this.modelSelector.selected),this.selected=void 0,delete this.modelEditor),this.updateModelNameText()},exportModelAsZip:function(){i.ajax({type:"GET",url:"/modeleditor",data:{reqType:"exportToZip",id:this.modelSelector.selected.id},dataType:"json",success:n.bind(this.forwardToFile)})},exportModelAsXML:function(){i.ajax({type:"GET",url:"/modeleditor",data:{reqType:"exportToXML",id:this.modelSelector.selected.id},dataType:"json",success:n.bind(this.forwardToFile)})},forwardToFile:function(e){window.location=e.url},render:function(){i(this.queryByHook("modelSelect")).empty();var e,t=new u(document.URL,!0);if(t.query.select)e=this.collection.get(parseInt(t.query.select),"id");else if(t.query.model_edited)for(var o=0;o<this.collection.models.length;o++)this.collection.at(o).name==t.query.model_edited&&(e=this.collection.at(o));return this.modelSelector=this.renderSubview(new a({collection:this.collection,meshCollection:this.meshCollection,parent:this,selected:e}),this.queryByHook("modelSelect")),this.selectModel(),this.modelSelector.on("change:selected",n.bind(this.selectModel,this)),this}});ModelCollection=r.extend({url:"/models",model:l}),PublicModelCollection=r.extend({url:"/publicModels",model:l}),c=r.extend({url:"/meshes",model:d});var m=new PublicModelCollection,f=new ModelCollection,g=new c,v=!1,y=!1,b=!1;f.fetch({success:function(){v=!0,y&&b&&t.exports.blastoff()}}),g.fetch({success:function(){y=!0,v&&b&&t.exports.blastoff()}}),m.fetch({success:function(){b=!0,y&&v&&t.exports.blastoff()}}),t.exports={blastoff:function(){var e=(window.app=this,i(".modelEditor")[0]);e||(e=document.body),h(function(){for(var t=0;t<f.models.length;t++)f.models[t].setupMesh(g),f.models[t].saveState="saved";var i=new p({el:e,collection:f,meshCollection:g});i.render()})}}},{"./forms/mesh-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/mesh-collection.js","./forms/model":"/home/bbales2/stochssModel/app/static/modelEditor/forms/model.js","./models/mesh":"/home/bbales2/stochssModel/app/static/modelEditor/models/mesh.js","./models/mesh-collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/mesh-collection.js","./models/model":"/home/bbales2/stochssModel/app/static/modelEditor/models/model.js","./select/model-collection":"/home/bbales2/stochssModel/app/static/modelEditor/select/model-collection.js","ampersand-model":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/ampersand-model.js","ampersand-rest-collection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/ampersand-rest-collection.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",andlog:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/andlog/andlog.js",clientconfig:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/clientconfig/clientconfig.js",domready:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/domready/ready.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js","url-parse":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/model.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("./reaction"),s=e("./parameter-collection"),a=e("./specie-collection"),l=e("./reaction-collection"),h=e("ampersand-input-view"),d=e("../forms/tests");t.exports=o.extend({template:n(".convertToPopulationTemplate").text(),props:{volume:"Number"},initialize:function(){o.prototype.initialize.apply(this,arguments),this.volume=1},events:{"click [data-hook=finishConvertToPopulationButton]":"clickConvertToPopulation","click [data-hook=cancelConvertToPopulationButton]":"clickCancel"},bindings:{"model.type":{type:"text",hook:"type"}},clickConvertToPopulation:function(){this.parent.convertToPopulation()},clickCancel:function(){this.parent.cancelConvertToPopulation()},update:function(e){"volume"==e.name&&e.valid&&(this.volume=Number(e.value))},convertToPopulation:function(){for(var e=this.model.species.models,t=0;t<e.length;t++)e[t].initialCondition=Math.floor(this.volume*e[t].initialCondition);for(var n=this.model.reactions.models,o=this.model.parameters.models,e=this.model.species.models,t=0;t<n.length;t++)if("custom"!=n[t].type){var s=r.computeConversionFactor(n[t],this.volume);if(s&&s.length>0){for(var a=n[t].rate.name+"_",l=0;i.findWhere(o,{name:a+l})||i.findWhere(e,{name:a+l});)l+=1;var h=this.model.parameters.addParameter(a+l,n[t].rate.value+s);n[t].rate=h}}this.model.units="population"},render:function(){o.prototype.render.apply(this,arguments);var e=this.model;return this.subViews=[new a({el:this.el.querySelector("[data-hook='specie']"),collection:e.species}),new s({el:this.el.querySelector("[data-hook='parameter']"),collection:e.parameters}),new l({el:this.el.querySelector("[data-hook='reaction']"),collection:e.reactions}),new h({el:this.el.querySelector("[data-hook='volume']"),label:"",name:"volume",value:this.volume,required:!0,placeholder:"Volume",tests:[].concat(d.nonzero())})],this.subViews.forEach(i.bind(function(e){this.registerSubview(e),e.render()},this)),n(this.el).find("input").prop("autocomplete","off"),this}})},{"../forms/tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","./parameter-collection":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/parameter-collection.js","./reaction":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/reaction.js","./reaction-collection":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/reaction-collection.js","./specie-collection":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/specie-collection.js","ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/parameter-collection.js":[function(e,t){var i=(e("jquery"),e("ampersand-view")),n=e("./parameter"),o=e("../forms/paginated-collection-view"),r=i.extend({template:"<div><div data-hook='parametersTable'></div></div>",render:function(){var e="<div>   <h3>Parameters</h3>   <table class='table table-bordered' data-hook='table'>     <thead>       <th width='120px'>Name</th><th width='120px'>Value</th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>";return i.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new o({template:e,collection:this.collection,viewModel:n,parent:this,limit:10}),this.queryByHook("parametersTable")),this}});t.exports=r},{"../forms/paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","./parameter":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/parameter.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/parameter.js":[function(e,t){var i=(e("underscore"),e("jquery"),e("ampersand-view"));t.exports=i.extend({template:"<tr><td data-hook='name'></td><td data-hook='value'></td></tr>",bindings:{"model.name":{type:"text",hook:"name"},"model.value":{type:"text",hook:"value"}}})},{"ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/reaction-collection.js":[function(e,t){var i=(e("jquery"),e("ampersand-view")),n=e("./reaction"),o=e("../forms/paginated-collection-view"),r=i.extend({template:"<div><div data-hook='reactionTable'></div></div>",render:function(){var e="<div>   <h3>Reactions</h3>   <table class='table table-bordered' data-hook='table'>     <thead>       <th width='120px'>Name</th><th>Rate</th><th>Summary</th><th>Result</th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>";return i.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new o({template:e,collection:this.collection,viewModel:n,parent:this,limit:10}),this.queryByHook("reactionTable")),this}});t.exports=r},{"../forms/paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","./reaction":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/reaction.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/reaction.js":[function(e,t){var i=(e("underscore"),e("jquery")),n=e("ampersand-view"),o=e("../forms/reaction"),r=e("katex"),s=n.extend({template:"<tr><td data-hook='name'></td><td data-hook='parameter'></td><td data-hook='equation'></td><td data-hook='latex'></td><td data-hook='result'></td></tr>",volumeChange:function(){var e=s.computeConversionFactor(this.model,this.baseView.volume),t=i(this.queryByHook("result")),n="X";this.model.rate&&this.model.rate.name&&(n=this.model.rate.name),"massaction"!=this.model.type&&"custom"!=this.model.type?"undefined"!=typeof e?(r.render((n+e).replace(/_/g,"\\_"),this.queryByHook("parameter")),t.text("Successfully converted")):(r.render(n.replace(/_/g,"\\_"),this.queryByHook("parameter")),t.text("Failed, valid mass action, but invalid under SSA assumptions")):"massaction"==this.model.type?"undefined"!=typeof e?(r.render((n+e).replace(/_/g,"\\_"),this.queryByHook("parameter")),t.text("Successfully converted")):(r.render(n.replace(/_/g,"\\_"),this.queryByHook("parameter")),t.text("Failed, valid mass action, but invalid under SSA assumptions")):t.text("Cannot convert custom propensities automatically")},redrawLatex:o.prototype.redrawLatex,bindings:{"model.name":{type:"text",hook:"name"},modelType:[{type:"switch",cases:{notCustom:'[data-hook="parameter"]',custom:'[data-hook="equation"]'}}]},derived:{modelType:{deps:["model.type"],fn:function(){return"custom"==this.model.type?"custom":"notCustom"}}},render:function(){return n.prototype.render.apply(this,arguments),this.baseView=this.parent.parent.parent.parent,this.listenToAndRun(this.baseView,"change:volume",this.volumeChange),this.redrawLatex(),this}});s.computeConversionFactor=function(e,t){for(var i=e.reactants.models,n=i.length,o=0,r=!0,s=null,a=0;a<i.length;a++){var l=i[a].specie;null!=s&&s!=l&&(r=!1),o+=Number(i[a].stoichiometry),s=l}return"custom"!=e.type?0==n?" * "+t:1==n&&1==o?"":1!=n&&2!=n||2!=o?void 0:1==r&&2==o?" * 2 / "+t:" / "+t:void 0},t.exports=s},{"../forms/reaction":"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",katex:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/katex.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/specie-collection.js":[function(e,t){var i=(e("jquery"),e("ampersand-view")),n=e("./specie"),o=e("../forms/paginated-collection-view"),r=i.extend({template:"<div><div data-hook='speciesTable'></div></div>",render:function(){var e="<div>   <h3>Species</h3>   <table class='table table-bordered' data-hook='table'>     <thead>       <th width='120px'>Name</th><th width='120px'>Initial Condition</th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>";return i.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new o({template:e,collection:this.collection,viewModel:n,parent:this,limit:10}),this.queryByHook("speciesTable")),this}});t.exports=r},{"../forms/paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","./specie":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/specie.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/specie.js":[function(e,t){var i=(e("underscore"),e("jquery")),n=e("ampersand-view");t.exports=n.extend({template:"<tr><td data-hook='name'></td><td data-hook='initialCondition'></td></tr>",bindings:{"model.name":{type:"text",hook:"name"}},volumeChange:function(){i(this.queryByHook("initialCondition")).text(Math.floor(this.model.initialCondition*this.baseView.volume))},render:function(){return n.prototype.render.apply(this,arguments),this.baseView=this.parent.parent.parent.parent,this.listenToAndRun(this.baseView,"change:volume",this.volumeChange),this}})},{"ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/initial-condition-collection.js":[function(e,t){var i=e("jquery"),n=e("ampersand-view"),o=e("ampersand-form-view"),r=(e("ampersand-input-view"),e("ampersand-select-view"),e("./initial-condition")),s=e("./paginated-collection-view"),a=(e("./tests"),o.extend({submitCallback:function(){var e=this.collection.addScatterInitialCondition(this.baseModel.species.at(0),0,this.baseModel.mesh.uniqueSubdomains.at(0).name);this.selectView.select(e,!0)},initialize:function(e,t){this.collection=t.collection,this.selectView=e.selectView,this.baseModel=this.collection.parent},render:function(){o.prototype.render.apply(this,arguments),this.button=i('<button class="btn btn-large btn-primary" type="submit">Add Initial Condition</button>').appendTo(i(this.el))}})),l=n.extend({template:"<div>  <div data-hook='initialConditionCollection'></div>   <br />  <form data-hook='addInitialConditionForm'></form></div>",props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent.update()},render:function(){this.baseModel=this.collection.parent;var e="<div>   <table data-hook='table'>    <thead>      <th></th><th>Type</th><th>Specie</th><th>Details</th>    </thead>    <tbody data-hook='items'>     </tbody>   </table>  <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='position'></span> / <span data-hook='total'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>";return n.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new s({template:e,collection:this.collection,viewModel:r,parent:this,limit:10}),this.queryByHook("initialConditionCollection")),this.addForm=new a({el:this.el.querySelector("[data-hook=addInitialConditionForm]"),selectView:this.selectView},{collection:this.collection}),this}});t.exports=l},{"./initial-condition":"/home/bbales2/stochssModel/app/static/modelEditor/forms/initial-condition.js","./paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-form-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/ampersand-form-view.js","ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js","ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/initial-condition.js":[function(e,t){var i=e("underscore"),n=(e("jquery"),e("ampersand-view")),o=(e("./modifying-input-view"),e("./modifying-number-input-view")),r=e("ampersand-select-view"),s=e("./modifying-select-view"),a=(e("./subdomain"),e("./tests"));t.exports=n.extend({template:"<tr data-hook='row'>   <td valign='top'>     <button class='btn' data-hook='delete'>x</button>   </td>   <td data-hook='typeSelect' valign='top'></td>   <td data-hook='specie' valign='top'></td>   <td data-hook='details' valign='top'>     <table>       <tr>         <td>Count:</td><td><div data-hook='count'></div></td>       </tr>       <tbody data-hook='xyz'>         <tr><td>X:</td><td><div data-hook='X'></div></td></tr>         <tr><td>Y:</td><td><div data-hook='Y'></div></td></tr>         <tr><td>Z:</td><td><div data-hook='Z'></div></td></tr>       </tbody>       <tbody data-hook='subdomainTbody'>         <tr><td>Subdomain</td><td><div data-hook='subdomain'></div></td></tr>       </tbody>     </table>   </td> </tr>",props:{valid:"boolean",message:"string"},updateValid:function(){var e=!0,t="";try{for(var i=0;i<this._subviews.length&&("undefined"!=typeof this._subviews[i].valid&&(e=e&&this._subviews[i].valid,t="Invalid initial condition, please fix"),e);i++);}catch(n){}this.valid=e,this.message=t},update:function(e){"type"==e.name?this.model.type=e.value:"specie"==e.name?this.model.specie=e.value:"subdomain"==e.name&&"undefined"!=typeof e.value&&e.value.length>0&&(this.model.subdomain=Number(e.value)),this.updateValid(),this.parent&&this.parent.update&&this.parent.update(),this.parent&&this.parent.parent&&this.parent.parent.update&&this.parent.parent.update()},removeThis:function(){this.model.collection.remove(this.model)},events:{'click [data-hook="delete"]':"removeThis"},derived:{subdomainOrXYZ:{deps:["model.type"],fn:function(){return"scatter"==this.model.type||"distribute"==this.model.type?"subdomain":"xyz"}},invalid:{deps:["valid"],fn:function(){return!this.valid}}},bindings:{subdomainOrXYZ:{type:"switch",cases:{subdomain:'[data-hook="subdomainTbody"]',xyz:'[data-hook="xyz"]'}},invalid:{type:"booleanClass",name:"invalidRow",hook:"row"}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.updateValid()},renderSubdomainSelector:function(){this.subdomainSelector&&this.subdomainSelector.remove();var e=this.baseModel.mesh.uniqueSubdomains.map(function(e){return[String(e.name),String(e.name)]});this.subdomainSelector=this.renderSubview(new r({template:'<div><select></select><div data-hook="message-container"><div class="message" data-hook="message-text"></div></div></div>',label:"",name:"subdomain",value:String(this.model.subdomain),options:e,unselectedText:"Select subdomain",parent:this,required:!0}),this.el.querySelector('[data-hook="subdomain"]')),this.update(this.subdomainSelector)},render:function(){return n.prototype.render.apply(this,arguments),this.baseModel=this.collection.parent,this.renderSubview(new r({template:'<div><select></select><div data-hook="message-container"><div class="message" data-hook="message-text"></div></div></div>',label:"",name:"type",parent:this,value:this.model.type,options:[["scatter","Scatter"],["place","Place"],["distribute","Distribute Uniformly"]],required:!0}),this.el.querySelector("[data-hook='typeSelect']")),this.renderSubview(new o({label:"",name:"count",value:this.model.count,required:!1,parent:this,placeholder:"Count",model:this.model,tests:[].concat(a.positive(),a.integer())}),this.el.querySelector("[data-hook='count']")),this.renderSubview(new o({label:"",name:"X",value:this.model.X,required:!1,parent:this,placeholder:"X",model:this.model,tests:[].concat(a.isNumber())}),this.el.querySelector("[data-hook='X']")),this.renderSubview(new o({label:"",name:"Y",value:this.model.Y,parent:this,required:!1,placeholder:"Y",model:this.model,tests:[].concat(a.isNumber())}),this.el.querySelector("[data-hook='Y']")),this.renderSubview(new o({label:"",name:"Z",value:this.model.Z,parent:this,required:!1,placeholder:"Z",model:this.model,tests:[].concat(a.isNumber())}),this.el.querySelector("[data-hook='Z']")),this.renderSubview(new s({template:'<div><select></select><div data-hook="message-container"><div class="message" data-hook="message-text"></div></div></div>',label:"",name:"specie",value:this.model.specie,options:this.baseModel.species,unselectedText:"Pick species",parent:this,required:!0,idAttribute:"cid",textAttribute:"name",yieldModel:!0}),this.el.querySelector("[data-hook='specie']")),this.listenToAndRun(this.baseModel,"change:mesh",i.bind(this.renderSubdomainSelector,this)),this.updateValid(),this}})},{"./modifying-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-input-view.js","./modifying-number-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-number-input-view.js","./modifying-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-select-view.js","./subdomain":"/home/bbales2/stochssModel/app/static/modelEditor/forms/subdomain.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/mesh-collection.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("./mesh"),s=e("../models/mesh"),a=(e("blueimp-file-upload"),e("./paginated-collection-view")),l=(e("../forms/tests.js"),o.extend({template:n(".meshCollectionAddTemplate").text(),props:{meshFileData:"object"},derived:{notValid:{deps:["meshFileData"],fn:function(){return!Boolean(this.meshFileData)}}},bindings:{notValid:{type:"booleanAttribute",hook:"meshUploadButton",name:"disabled"}},initialize:function(e,t){o.prototype.initialize.apply(this,arguments),this.collection=t.collection},events:{"click [data-hook=meshUploadButton]":"handleMeshUploadButton","click [data-hook=resetFormButton]":"meshReset"},updateMessage:function(e,t){var o=n(this.el).find(e);if(o.html(""),!t||!i.has(t,"status"))return void o.text("").prop("class","").hide();var r=t.msg;o.html(r),t.status?o.prop("class","alert alert-success"):o.prop("class","alert alert-error"),o.show()},render:function(){o.prototype.render.apply(this,arguments),n(this.el).find("#meshDataUpload").fileupload({url:"/FileServer/large/meshFiles",dataType:"json",replaceFileInput:!1,add:i.bind(this.handleMeshDataAdd,this),done:i.bind(this.handleMeshUploadFinish,this)}),n(this.el).find("#subdomainDataUpload").fileupload({url:"/FileServer/large/subdomainFiles",dataType:"json",replaceFileInput:!1,add:i.bind(this.handleSubdomainsDataAdd,this)})
},handleMeshUploadButton:function(){this.meshFileData&&(this.meshFileData.submit(),this.meshSubmitted=!0,this.updateMessage(n(this.el).find("#meshDataUploadStatus"),{status:!0,msg:"Uploading mesh..."})),this.subdomainsFileData&&(this.reader=new FileReader,this.reader.onload=i.bind(this.handleSubdomainsUploadFinish,this),this.reader.readAsText(this.subdomainsFileData.files[0]),this.subdomainsSubmitted=!0,this.updateMessage(n(this.el).find("#subdomainDataUploadStatus"),{status:!0,msg:"Uploading subdomain..."})),this.name=n(this.el).find(".name").val(),this.description=n(this.el).find(".descriptionText").val()},handleMeshDataAdd:function(e,t){this.meshFileData&&(this.meshFileData=null,delete this.meshSubmitted,delete this.meshFileId);var i=t.files[0].name.split("."),o=i[i.length-1];if("xml"!=o.toLowerCase())return void this.updateMessage(n(this.el).find("#meshDataUploadStatus"),{status:!1,msg:"Mesh file must be a .xml"});n(e.target).prop("title",t.files[0].name);var r,s=n(this.el).find(".name");r=""==s.val().trim()?t.files[0].name.split(".")[0]:s.val().trim(),s.val(r),this.meshFileData=t},handleSubdomainsDataAdd:function(e,t){this.subdomainFileData&&(delete this.subdomainsFileData,delete this.subdomainsSubmitted,delete this.subdomains,delete this.uniqueSubdomains);var i=t.files[0].name.split("."),o=i[i.length-1];return"txt"!=o.toLowerCase()?void this.updateMessage(n(this.el).find("#subdomainDataUploadStatus"),{status:!1,msg:"Subdomain file must be a .txt"}):void(this.subdomainsFileData=t)},handleMeshUploadFinish:function(e,t){this.meshFileId=t.result[0].id,this.updateMessage(n(this.el).find("#meshDataUploadStatus"),{status:!0,msg:"Mesh uploaded"}),this.createMeshWrapper()},handleSubdomainsUploadFinish:function(e){for(var t=e.target.result.split("\n"),o=[],r=0;r<t.length;r++){var s=t[r].split(",");2==s.length&&o.push([parseInt(s[0]),parseInt(s[1])])}this.subdomains=i.map(i.sortBy(o,function(e){return e[0]}),function(e){return e[1]}),this.uniqueSubdomains=i.unique(this.subdomains),this.updateMessage(n(this.el).find("#subdomainDataUploadStatus"),{status:!0,msg:"Subdomains uploaded"}),this.createMeshWrapper()},createMeshWrapper:function(){var e={};if(this.meshSubmitted&&this.meshFileId&&(e.meshFileId=this.meshFileId,e.name=this.name,e.description=this.description,this.subdomainsSubmitted&&this.subdomains?(e.subdomains=this.subdomains,e.uniqueSubdomains=this.uniqueSubdomains):(e.subdomains=[],e.uniqueSubdomains=[1]),e.undeletable=!1,!this.subdomainsFiledata||this.subdomains)){var t=new s(e);this.mesh=t,this.handleMeshWrapperCreated()}},handleMeshWrapperCreated:function(){this.collection.add(this.mesh),this.mesh.save(),this.parent.selectModel(this.mesh),this.meshReset()},meshReset:function(){this.updateMessage("#subdomainDataUploadStatus"),this.updateMessage("#meshDataUploadStatus"),this.meshFileData=null,delete this.meshSubmitted,delete this.meshFileId,delete this.subdomainsFileData,delete this.subdomainsSubmitted,delete this.subdomains,delete this.uniqueSubdomains,n("#meshForm")[0].reset()}})),h=o.extend({template:n(".meshCollectionTemplate").text(),props:{selected:"object"},initialize:function(e,t){o.prototype.initialize.call(this,e,t)},selectModel:function(){this.selected=this.selectView.value,n(this.el).find("#collapseThree2").hasClass("in")&&n(this.el).find(".meshLibrary")[0].click(),this.model.mesh=this.selected,n(this.el).find(".description").text(this.selected.description)},render:function(){var e="<div>   <table cellpadding='0' cellspacing='0' border='0' class='table table-striped table-bordered' data-hook='table'>     <thead><tr><th>Delete</th><th>Select</th><th style='width: 100%'>Mesh Name</th></tr></thead>     <tbody data-hook='items'></tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>";return o.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new a({template:e,collection:this.collection,viewModel:r,limit:10}),this.queryByHook("meshTable")),this.selectView.select(this.model.mesh),this.listenToAndRun(this.selectView,"change:value",i.bind(this.selectModel,this)),this.addForm=new l({el:this.el.querySelector("[data-hook=addMeshForm]"),parent:this},{collection:this.collection}),this.addForm.render(),this}});t.exports=h},{"../forms/tests.js":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","../models/mesh":"/home/bbales2/stochssModel/app/static/modelEditor/models/mesh.js","./mesh":"/home/bbales2/stochssModel/app/static/modelEditor/forms/mesh.js","./paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js","blueimp-file-upload":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/blueimp-file-upload/js/jquery.fileupload.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/mesh.js":[function(e,t){var i=(e("underscore"),e("jquery")),n=e("ampersand-view");t.exports=n.extend({template:'<tr>   <td>     <button type="button" class="btn btn-default" data-hook="delete">       x     </button>   </td>   <td>     <input type="radio" name="mesh" />   </td>   <td data-hook="name">   </td> </tr>',bindings:{"model.name":{type:"text",hook:"name"},"model.description":{type:"text",hook:"description"},"model.deletable":{type:"toggle",hook:"delete"}},events:{"click input":"selectSelf","click button":"removeModel"},selectSelf:function(){this.parent.parent.select(this.model)},select:function(){i(this.el).find("input[type='radio']").prop("checked",!0)},removeModel:function(){this.model.destroy()},render:function(){n.prototype.render.apply(this,arguments);this.model;return this}})},{"ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/mesh3d.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("three"),s=e("three-orbit-controls")(r),a=e("./subdomain");t.exports=o.extend({template:n(".mesh3dTemplate").text(),remove:function(){this.removing=!0,delete this.camera,delete this.renderer,delete this.controls,o.prototype.remove.apply(this,arguments)},updateWorldCamera:function(){this.camera2.position.subVectors(this.camera.position,this.controls.target),this.camera2.position.setLength(1.8),this.camera2.lookAt(this.scene2.position)},renderFrame:function(){"undefined"!=typeof this.renderer&&(this.renderer.render(this.scene,this.camera),this.updateWorldCamera(),this.renderer2.render(this.scene2,this.camera2),requestAnimationFrame(i.bind(this.renderFrame,this)),this.controls.update())},update:function(e){var t=e.value.model,n=e.value.checked;this.subdomains=n?i.union(this.subdomains,[t.name]):i.difference(this.subdomains,[t.name]),this.highLightSubdomains(this.subdomains)},highLightSubdomains:function(e){for(var t=this.model.mesh.subdomains,n=new Array(t.length),o=0;o<t.length;o++)n[o]=new r.Color(i.contains(e,t[o])?10035712:153);this.redrawColors(n)},redrawColors:function(e){for(var t=0;t<this.mesh.geometry.faces.length;t++)for(var i=["a","b","c"],n=this.mesh.geometry.faces[t],o=0;3>o;o++){var r=n[i[o]];n.vertexColors[o]=e[r]}this.mesh.geometry.colorsNeedUpdate=!0},addGui:function(){n(this.queryByHook("container")).show(),n(this.queryByHook("zoomPlus_btn")).click(i.bind(function(){this.controls.dollyOut()},this)),n(this.queryByHook("zoomMinus_btn")).click(i.bind(function(){this.controls.dollyIn()},this)),n(this.queryByHook("panLeft_btn")).click(i.bind(function(){this.controls.panLeft(-.1)},this)),n(this.queryByHook("panRight_btn")).click(i.bind(function(){this.controls.panLeft(.1)},this)),n(this.queryByHook("panUp_btn")).click(i.bind(function(){this.controls.panUp(-.1)},this)),n(this.queryByHook("panDown_btn")).click(i.bind(function(){this.controls.panUp(.1)},this)),n(this.queryByHook("rotateUp_btn")).click(i.bind(function(){this.controls.rotateUp(.5)},this)),n(this.queryByHook("rotateDown_btn")).click(i.bind(function(){this.controls.rotateUp(-.5)},this)),n(this.queryByHook("rotateRight_btn")).click(i.bind(function(){this.controls.rotateLeft(.5)},this)),n(this.queryByHook("rotateLeft_btn")).click(i.bind(function(){this.controls.rotateLeft(-.5)},this)),n(this.queryByHook("reset_btn")).click(i.bind(function(){this.controls.reset(),this.camera.position.z=1.5},this))},createText:function(e,t,i,n){var o=document.createElement("canvas"),s=o.getContext("2d");s.font="Bold 20px Arial",s.fillStyle="rgba(0,0,0,0.95)",s.fillText(e,20,20);var a=new r.Texture(o);a.needsUpdate=!0;var l=new r.MeshBasicMaterial({map:a,side:r.DoubleSide});l.transparent=!0;var h=new r.Mesh(new r.PlaneGeometry(1,1),l);h.position.set(t,i,n),this.scene2.add(h)},addAxes:function(){var e=n(this.queryByHook("inset")).empty(),t=new r.OrthographicCamera(-1,1,1,-1,1,1e3);this.camera2=t;var i=new r.WebGLRenderer({alpha:!0});i.setClearColor(0,0),i.setSize(this.d_width/5,this.d_width/5),n(i.domElement).appendTo(e),this.renderer2=i;var o=new r.Scene;this.scene2=o;var s=new r.Vector3(1,0,0),a=new r.Vector3(0,0,0),l=16711680,h=new r.LineBasicMaterial({color:l}),d=new r.Geometry;d.vertices.push(a,s);var c=new r.Line(d,h);this.createText("X",1.25,-.3,0),this.scene2.add(c),s=new r.Vector3(0,1,0),a=new r.Vector3(0,0,0),l=255,h=new r.LineBasicMaterial({color:l}),d=new r.Geometry,d.vertices.push(a,s),c=new r.Line(d,h),this.createText("Y",.5,.5,0),o.add(c),s=new r.Vector3(0,0,1),a=new r.Vector3(0,0,0),l=65280,h=new r.LineBasicMaterial({color:l}),d=new r.Geometry,d.vertices.push(a,s),c=new r.Line(d,h),this.createText("Z",.5,-.4,.9),o.add(c)},meshDataPreview:function(){var e=this.model.mesh.threeJsMesh;if(!window.WebGLRenderingContext)return void n(this.queryByHook("mesh")).html('<center><h2 style="color: red;">WebGL Not Supported</h2><br /> <ul><li>Download an updated Firefox or Chromium to use StochSS (both come with WebGL support)</li> <li>It may be necessary to update system video drivers to make this work</li></ul></center>');if("undefined"==typeof this.webGL){var t=document.createElement("canvas");this.webGL=Boolean(t.getContext("webgl")),delete t}if(!this.webGL)return void n(this.queryByHook("mesh")).html('<center><h2 style="color: red;">WebGL Disabled</h2><br /> <ul><li>In Safari and certain older browsers, this must be enabled manually</li> <li>Browsers can also throw this error when they detect old or incompatible video drivers</li> <li>Enable WebGL, or try using StochSS in an up to date Chrome or Firefox browser</li> </ul></center>');if(this.renderer)delete this.scene;else{var i=new r.Scene,o=n(this.el).width();this.d_width=o;var a=.75*o;this.d_height=a;var l=new r.PerspectiveCamera(75,4/3,.1,1e3),h=new r.WebGLRenderer;h.setSize(o,a),h.setClearColor(16777215,1),this.rendererDom=n(h.domElement).appendTo(this.queryByHook("mesh"));var d=new s(l,h.domElement);d.noZoom=!0,l.position.z=1.5,this.camera=l,this.renderer=h,this.controls=d,this.addGui(),this.addAxes()}var i=new r.Scene,c=new r.JSONLoader,u=c.parse(e),p=new r.MeshBasicMaterial({vertexColors:r.VertexColors,wireframe:!0});p.side=r.DoubleSide,mesh=new r.Mesh(u.geometry,p),i.add(mesh),this.mesh=mesh,delete c,delete p;var m=new r.AmbientLight(0);i.add(m),hemiLight=new r.HemisphereLight(0,65280,.6),i.add(hemiLight);var f=new r.DirectionalLight(16777215);f.position.set(1,1,1).normalize(),i.add(f),this.scene=i,this.highLightSubdomains([]),this.rendererInitialized||(this.rendererInitialized=!0,this.renderFrame())},downloadNewMesh:function(){this.subdomainsView&&this.subdomainsView.remove(),this.subdomainsView=this.renderCollection(this.model.mesh.uniqueSubdomains,a,this.queryByHook("subdomains")),this.subdomains=[],this.model.mesh.downloadMesh(i.bind(this.meshDataPreview,this))},render:function(){return o.prototype.render.apply(this,arguments),this.listenToAndRun(this.model,"change:mesh",i.bind(this.downloadNewMesh,this)),this}})},{"./subdomain":"/home/bbales2/stochssModel/app/static/modelEditor/forms/subdomain.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",three:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/three/three.js","three-orbit-controls":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/three-orbit-controls/index.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/model.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("../models/model"),s=e("./parameter-collection"),a=e("./specie-collection"),l=e("./reaction-collection"),h=e("./mesh-collection"),d=e("./initial-condition-collection"),c=e("../convertToPopulation/model"),u=e("./mesh3d");t.exports=o.extend({template:n(".modelEditorTemplate").text(),props:{state:"string",valid:"boolean"},bindings:{"model.name":{type:"text",hook:"modelName"}},events:{"click [data-hook='convertToPopulationButton']":"convertToPopulation"},updateValid:function(){for(var e=!0,t="",i=0;i<this.subViews.length&&(this.subViews[i].updateValid&&this.subViews[i].updateValid(),"undefined"!=typeof this.subViews[i].valid&&(e=e&&this.subViews[i].valid,t=this.subViews[i].message),e);i++);this.valid=e,this.message=t},update:function(){this.updateValid(),this.parent&&this.parent.update&&this.parent.update()},duplicateModel:function(){for(var e=new r(this.model.toJSON()),t=this.model.collection.map(function(e){return e.name});;){var n=this.model.name+"_"+Math.random().toString(36).substr(2,3);if(!i.contains(t,n)){e.name=n;break}}e.id=void 0,e.setupMesh(this.model.mesh.collection),this.model.collection.add(e),e.save()},convertToPopulation:function(){"concentration"==this.state?(this.state="converting",this.remove(),this.render()):"converting"==this.state&&(this.modelConverter.convertToPopulation(),this.state="population",this.remove(),this.render())},cancelConvertToPopulation:function(){"converting"==this.state&&(this.state="concentration",this.remove(),this.render())},convertToSpatial:function(){"population"==this.state&&(this.state="spatial",this.model.isSpatial=!0,this.remove(),this.render())},updateVisibility:function(){"concentration"==this.state?(n(this.el).find('[data-hook="editor"]').show(),n('[data-hook="convertToPopulationLink"]').show(),n(this.el).find('[data-hook="convertToPopulation"]').hide(),n('[data-hook="convertToSpatialLink"]').hide(),n(this.el).find(".spatial").hide()):"converting"==this.state?(n(this.el).find('[data-hook="convertToPopulation"]').show(),n('[data-hook="convertToPopulationLink"]').show(),n(this.el).find('[data-hook="editor"]').hide(),n('[data-hook="convertToPopulationLink"]').show(),n('[data-hook="convertToSpatialLink"]').hide(),n(this.el).find(".spatial").hide()):"population"==this.state?(n(this.el).find('[data-hook="convertToPopulation"]').hide(),n('[data-hook="convertToPopulationLink"]').hide(),n(this.el).find('[data-hook="editor"]').show(),n('[data-hook="convertToSpatialLink"]').show(),n(this.el).find(".spatial").hide(),n(this.el).find(".speciesAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".speciesAccordion").find("a").first()[0].click(),n(this.el).find(".parametersAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".parametersAccordion").find("a").first()[0].click(),n(this.el).find(".mesh3dAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".mesh3dAccordion").find("a").first()[0].click(),n(this.el).find(".initialConditionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".initialConditionsAccordion").find("a").first()[0].click(),n(this.el).find(".reactionsAccordion .accordion-body").first().hasClass("in")||n(this.el).find(".reactionsAccordion").find("a").first()[0].click()):"spatial"==this.state&&(n(this.el).find('[data-hook="convertToPopulation"]').hide(),n('[data-hook="convertToPopulationLink"]').hide(),n(this.el).find('[data-hook="editor"]').show(),n('[data-hook="convertToSpatialLink"]').hide(),n(this.el).find(".spatial").show())},initialize:function(e){this.listenTo(this.model,"duplicateLink",i.bind(this.duplicateModel,this)),this.listenTo(this.model,"convertToPopulationLink",i.bind(this.convertToPopulation,this)),this.listenTo(this.model,"convertToSpatialLink",i.bind(this.convertToSpatial,this)),this.state=this.model.isSpatial?"spatial":this.model.units,this.meshCollection=e.meshCollection,this.on("change:state",this.updateVisibility)},remove:function(){"undefined"!=typeof this.subViews&&(this.subViews.forEach(function(e){e.remove(),delete e}),this.subViews=void 0),n(this.el).empty()},render:function(){if(o.prototype.render.apply(this,arguments),!this.model)return this;var e=this.model;this.modelConverter=new c({parent:this,el:n("<div>").appendTo(this.el.querySelector("[data-hook='convertToPopulation']"))[0],model:this.model}),this.subViews=[new a({parent:this,el:n("<div>").appendTo(this.el.querySelector("[data-hook='specie']"))[0],collection:e.species}),new s({parent:this,el:n("<div>").appendTo(this.el.querySelector("[data-hook='parameter']"))[0],collection:e.parameters}),new l({parent:this,el:n("<div>").appendTo(this.el.querySelector("[data-hook='reaction']"))[0],collection:e.reactions}),new d({parent:this,el:n("<div>").appendTo(this.el.querySelector("[data-hook='initialConditions']"))[0],collection:this.model.initialConditions}),new h({parent:this,el:n("<div>").appendTo(this.el.querySelector("[data-hook='mesh']"))[0],model:this.model,collection:this.meshCollection}),new u({parent:this,el:n("<div>").appendTo(this.el.querySelector("[data-hook='mesh3d']"))[0],model:this.model,collection:this.meshCollection}),this.modelConverter],this.subViews.forEach(i.bind(function(e){this.registerSubview(e),e.render()},this)),this.updateVisibility();var t=n(this.queryByHook("saveMessage"));return t.removeClass("alert-error"),t.addClass("alert-success"),t.text("Saved"),this}})},{"../convertToPopulation/model":"/home/bbales2/stochssModel/app/static/modelEditor/convertToPopulation/model.js","../models/model":"/home/bbales2/stochssModel/app/static/modelEditor/models/model.js","./initial-condition-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/initial-condition-collection.js","./mesh-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/mesh-collection.js","./mesh3d":"/home/bbales2/stochssModel/app/static/modelEditor/forms/mesh3d.js","./parameter-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/parameter-collection.js","./reaction-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction-collection.js","./specie-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/specie-collection.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-input-view.js":[function(e,t){var i=e("jquery"),n=e("underscore"),o=e("ampersand-input-view");ModifyingInputView=o.extend({initialize:function(e,t){o.prototype.initialize.call(this,e,t),this._derived.valid.cache=!1,this.on("change:value",n.bind(this.setModelVariable,this))},render:function(){o.prototype.render.call(this),i(this.el).find("input").prop("autocomplete","off")},setModelVariable:function(){this.valid&&(this.model[this.name]=this.value)}}),t.exports=ModifyingInputView},{"ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-number-input-view.js":[function(e,t){var i=(e("jquery"),e("underscore"),e("./modifying-input-view"));ModifyingNumberInputView=i.extend({setModelVariable:function(){this.valid&&(this.model[this.name]=Number(this.value))}}),t.exports=ModifyingNumberInputView},{"./modifying-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-input-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-select-view.js":[function(e,t){var i=(e("jquery"),e("underscore")),n=e("ampersand-select-view"),o=i.extend(n,{initialize:function(e,t){InputView.prototype.initialize.call(this,e,t),this.on("change:value",i.bind(this.setModelVariable,this))},setModelVariable:function(){this.valid&&(this.model[this.name]=this.value)}});t.exports=o},{"ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js":[function(e,t){var i=e("ampersand-view"),n=e("ampersand-subcollection"),o=(e("underscore"),i.extend({updateValid:function(){var e=!0,t="";if(this.subCollectionViews)for(var i=0;i<this.subCollectionViews.views.length&&(this.subCollectionViews.views[i].updateValid&&this.subCollectionViews.views[i].updateValid(),"undefined"!=typeof this.subCollectionViews.views[i].valid&&(e=e&&this.subCollectionViews.views[i].valid,t=this.subCollectionViews.views[i].message),e);i++);this.valid=e,this.message=t},update:function(){this.parent&&this.parent.update&&this.parent.update()},initialize:function(e,t){i.prototype.initialize.call(this,e,t),this.limit=e.limit,this.viewModel=e.viewModel,this.offset=0,this.autoSelect="undefined"!=typeof e.autoSelect?e.autoSelect:!0,this.listenTo(this.collection,"add remove",this.updateModelCount.bind(this)),this.subCollection=new n(this.collection,{limit:this.limit,offset:this.offset}),this.subCollection.parent=this.collection.parent},select:function(e,t,i){if(i||this.value!=e){this.view&&this.view.deSelect&&this.view.deSelect();for(var n=0;n<this.subCollection.models.length;n++)if(e==this.subCollection.models[n]){if(this.view=this.subCollectionViews._getViewByModel(e),this.view&&("function"==typeof this.view.select&&this.view.select(),t)){var o=$(this.view.el).find("input[type=text]").filter(":visible").last();o&&o.focus()}return void(this.value=e)}var n;for(n=0;n<this.collection.models.length;n++)if(e==this.collection.models[n]){if(this.offset=n==this.collection.models.length-1?Math.max(0,n+1-this.limit):n,this.subCollection.configure({limit:this.limit,offset:this.offset}),this.view=this.subCollectionViews._getViewByModel(e),this.view&&("function"==typeof this.view.select&&this.view.select(),t)){var o=$(this.view.el).find("input[type=text]").filter(":visible").last();o&&o.focus()}this.value=e;break}}},shiftPlus:function(e){this.offset+this.limit<this.collection.models.length&&(this.offset=this.offset+this.limit),this.subCollection.configure({limit:this.limit,offset:this.offset}),e.preventDefault()},shiftMinus:function(e){this.offset=this.offset-this.limit>=0?this.offset-this.limit:0,this.subCollection.configure({limit:this.limit,offset:this.offset}),e.preventDefault()},events:{"click [data-hook='next']":"shiftPlus","click [data-hook='previous']":"shiftMinus"},props:{valid:"boolean",message:"string",value:"object",offset:"number",modelCount:"number",overLimit:"boolean"},bindings:{modelCount:[{type:"toggle",selector:"div"},{type:"text",hook:"total"}],overLimit:{type:"toggle",hook:"nav"},leftPosition:{type:"text",hook:"leftPosition"},rightPosition:{type:"text",hook:"rightPosition"}},derived:{leftPosition:{deps:["offset"],fn:function(){return this.offset+1}},rightPosition:{deps:["offset","modelCount"],fn:function(){return Math.min(this.modelCount,this.offset+10)}}},updateModelCount:function(){this.modelCount=this.collection.models.length,this.overLimit=!(this.collection.models.length>this.limit),this.overLimit=this.collection.models.length>this.limit},render:function(){return i.prototype.render.apply(this,arguments),this.subCollectionViews=this.renderCollection(this.subCollection,this.viewModel,this.el.querySelector("[data-hook=table]")),this.value?this.select(this.value,!0,!0):this.autoSelect&&this.collection.models.length>0&&this.select(this.collection.models[0]),this.updateModelCount(),this}}));t.exports=o},{"ampersand-subcollection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/ampersand-subcollection.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/parameter-collection.js":[function(e,t){var i=e("jquery"),n=e("ampersand-view"),o=e("ampersand-form-view"),r=(e("ampersand-input-view"),e("./parameter")),s=e("./paginated-collection-view"),a=(e("./tests"),o.extend({submitCallback:function(){for(var e=this.collection.models.length,t="k"+e,i=this.collection.map(function(e){return e.name});_.contains(i,t);)e+=1,t="k"+e;this.selectView.select(this.collection.addParameter(t,"0"),!0)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e,t){this.collection=t.collection,this.selectView=e.selectView},render:function(){o.prototype.render.apply(this,arguments),this.button=i('<button class="btn btn-large btn-primary" type="submit">Add Parameter</button>').appendTo(i(this.el))}})),l=n.extend({template:"<div>   <div data-hook='collection'></div>   <br />   <form data-hook='addParametersForm'></form> </div>",props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent.update()},initialize:function(e,t){n.prototype.initialize.call(this,e,t)},render:function(){return n.prototype.render.apply(this,arguments),collectionTemplate="<div>   <table width='100%' data-hook='table'>     <thead>       <th width='120px'>Name</th><th width='120px'>Value</th><th></th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>",this.selectView=this.renderSubview(new s({template:collectionTemplate,collection:this.collection,viewModel:r,parent:this,limit:10}),this.queryByHook("collection")),this.addForm=new a({el:this.el.querySelector("[data-hook=addParametersForm]"),selectView:this.selectView},{collection:this.collection}),this}});t.exports=l},{"./paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","./parameter":"/home/bbales2/stochssModel/app/static/modelEditor/forms/parameter.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-form-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/ampersand-form-view.js","ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/parameter.js":[function(e,t){var i=(e("underscore"),e("jquery")),n=e("ampersand-view"),o=e("./modifying-input-view"),r=(e("./modifying-number-input-view"),e("./tests"));t.exports=n.extend({template:"<tr data-hook='row'><td data-hook='name'></td><td data-hook='value'></td><td><button class='btn' data-hook='delete'>x</button></td></tr>",props:{valid:"boolean",message:"string"},derived:{invalid:{deps:["valid"],fn:function(){return!this.valid}}},updateValid:function(){var e=!0,t="";if(this._subviews)for(var i=0;i<this._subviews.length&&("undefined"!=typeof this._subviews[i].valid&&(e=e&&this._subviews[i].valid,t="Invalid parameter, please fix"),e);i++);this.valid=e,this.message=t},update:function(){this.updateValid(),this.parent&&this.parent.update&&this.parent.update(),this.parent&&this.parent.parent&&this.parent.parent.update&&this.parent.parent.update()},removeParameter:function(){this.model.collection.remove(this.model)},events:{'click [data-hook="delete"]':"removeParameter"},bindings:{invalid:{type:"booleanClass",name:"invalidRow",hook:"row"},"model.inUse":{type:"booleanAttribute",hook:"delete",name:"disabled"}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.updateValid()},render:function(){return n.prototype.render.apply(this,arguments),this.renderSubview(new o({label:"",name:"name",value:this.model.name,required:!1,placeholder:"Name",parent:this,model:this.model,tests:[].concat(r.naming(this.model.collection,this.model),r.naming(this.model.collection.parent.species,this.model,"between species and parameters"))}),this.el.querySelector("[data-hook='name']")),this.renderSubview(new o({label:"",name:"value",value:this.model.value,required:!1,placeholder:"Value",parent:this,model:this.model,tests:[]}),this.el.querySelector("[data-hook='value']")),i(this.el).find('[data-hook="label"]').hide(),this.updateValid(),this}})},{"./modifying-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-input-view.js","./modifying-number-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-number-input-view.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction-collection.js":[function(e,t){var i=e("jquery"),n=e("ampersand-view"),o=e("ampersand-form-view"),r=(e("ampersand-input-view"),e("ampersand-select-view"),e("./reaction-detail")),s=e("./reaction"),a=(e("ampersand-subcollection"),e("./paginated-collection-view")),l=e("katex"),h=(e("./tests"),o.extend({submitCallback:function(e,t){var i,n=this.baseModel.mesh.uniqueSubdomains.map(function(e){return e.name}),o=0,r=0;"creation"==e?(o=0,r=1):"destruction"==e&&(o=1,r=0),"change"==e&&(o=1,r=1),"merge"==e&&(o=2,r=1),"dimerization"==e&&(o=1,r=1),"split"==e&&(o=1,r=2),"four"==e&&(o=2,r=2);for(var s=[],a=[],l=0;o>l;l++)s.push([this.baseModel.species.at(l),1]);
for(var l=0;r>l;l++)a.push([this.baseModel.species.at(l),1]);"dimerization"==e&&(s[0][1]=2);for(var l=this.collection.models.length,h="R"+l,d=this.collection.map(function(e){return e.name});_.contains(d,h);)l+=1,h="R"+l;var c=this.baseModel.parameters.at(0);i=this.collection.addMassActionReaction(h,e,c,s,a,n),this.selectView.select(i,!0),t.preventDefault()},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},update:function(){o.prototype.update.apply(this,arguments)},initialize:function(e,t){this.collection=t.collection,this.selectView=e.selectView,this.baseModel=this.collection.parent},render:function(){o.prototype.render.apply(this,arguments),this.update({name:"type",value:"massaction"}),i(this.el).find("input").prop("autocomplete","off"),this.buttonTemplate='<div class="btn-group">   <a class="btn btn-large btn-primary dropdown-toggle" data-toggle="dropdown" href="#">     Add Reaction     <span class="caret"></span>   </a>   <ul class="dropdown-menu">     <li><a data-hook="creation" tabindex="-1" href="#"></a></li>     <li><a data-hook="destruction" tabindex="-1" href="#"></a></li>     <li><a data-hook="change" tabindex="-1" href="#"></a></li>     <li><a data-hook="dimerization" tabindex="-1" href="#"></a></li>     <li><a data-hook="merge" tabindex="-1" href="#"></a></li>     <li><a data-hook="split" tabindex="-1" href="#"></a></li>     <li><a data-hook="four" tabindex="-1" href="#"></a></li>     <li><a data-hook="massaction" tabindex="-1" href="#">Custom mass action</a></li>     <li><a data-hook="custom" tabindex="-1" href="#">Custom propensity</a></li>   </ul> </div>',this.button=i(this.buttonTemplate).appendTo(i(this.el)),l.render("\\emptyset \\rightarrow A",i(this.el).find("[data-hook=creation]")[0]),l.render("A \\rightarrow \\emptyset",i(this.el).find("[data-hook=destruction]")[0]),l.render("A \\rightarrow B",i(this.el).find("[data-hook=change]")[0]),l.render("A + A \\rightarrow B",i(this.el).find("[data-hook=dimerization]")[0]),l.render("A + B \\rightarrow C",i(this.el).find("[data-hook=merge]")[0]),l.render("A \\rightarrow B + C",i(this.el).find("[data-hook=split]")[0]),l.render("A + B \\rightarrow C + D",i(this.el).find("[data-hook=four]")[0]),i(this.el).find("[data-hook=creation]").click(_.bind(_.partial(this.submitCallback,"creation"),this)),i(this.el).find("[data-hook=destruction]").click(_.bind(_.partial(this.submitCallback,"destruction"),this)),i(this.el).find("[data-hook=change]").click(_.bind(_.partial(this.submitCallback,"change"),this)),i(this.el).find("[data-hook=dimerization]").click(_.bind(_.partial(this.submitCallback,"dimerization"),this)),i(this.el).find("[data-hook=merge]").click(_.bind(_.partial(this.submitCallback,"merge"),this)),i(this.el).find("[data-hook=split]").click(_.bind(_.partial(this.submitCallback,"split"),this)),i(this.el).find("[data-hook=four]").click(_.bind(_.partial(this.submitCallback,"four"),this)),i(this.el).find("[data-hook=massaction]").click(_.bind(_.partial(this.submitCallback,"massaction"),this)),i(this.el).find("[data-hook=custom]").click(_.bind(_.partial(this.submitCallback,"custom"),this))}})),d=n.extend({props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.selectView.valid||(this.message=this.selectView.message)):(this.valid=!0,this.message="")},update:function(){this.parent.update()},initialize:function(e,t){n.prototype.initialize.call(this,e,t)},remove:function(){this.removeDetailView(),n.prototype.remove.apply(this,arguments)},handleCollectionRemove:function(e){e==this.selectView.value&&(this.removeDetailView(),this.selectView.select(this.collection.at(0)))},removeDetailView:function(){"undefined"!=typeof this.detailView&&(this.detailView.remove(),delete this.detailView)},select:function(){this.removeDetailView();var e=this.selectView.value;e&&(this.detailView=new r({el:i("<div>").appendTo(this.queryByHook("reactionEditorWorkspace"))[0],model:e,parent:this}),this.detailView.render())},render:function(){var e;e=this.collection.parent.isSpatial?"Define reactions. Select from the given reaction templates, or use the custom types. Using templated reaction types will help eliminate errors. For non-linear reactions, use the custom propensity type. Reactions can be restricted to specific subdomains.":"Define reactions. Select from the given reaction templates, or use the custom types. Using templated reaction types will help eliminate errors. For non-linear reactions, use the custom propensity type.",this.template="<div>"+e+"  <div>    <div data-hook='collection'></div>    <div data-hook='reactionEditorWorkspace'></div>  </div>   <div style='clear: both;'>     <br />     <form data-hook='addReactionForm'></form>  </div> </div>",this.baseModel=this.collection.parent;var t="";return t="<div>  <table data-hook='table'>    <thead>      <th width='25px'>Edit</th><th width='120px'>Name</th><th>Summary</th><th width='40px'>Delete</th>    </thead>    <tbody data-hook='items'>    </tbody>  </table>  <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>",n.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new a({template:t,collection:this.collection,viewModel:s,parent:this,limit:10}),this.queryByHook("collection")),this.addForm=new h({el:this.el.querySelector("[data-hook=addReactionForm]"),selectView:this.selectView},{collection:this.collection}),this.listenToAndRun(this.selectView,"change:value",_.bind(this.select,this)),this.listenTo(this.collection,"remove",_.bind(this.handleCollectionRemove,this)),this}});t.exports=d},{"./paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","./reaction":"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction.js","./reaction-detail":"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction-detail.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-form-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/ampersand-form-view.js","ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js","ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js","ampersand-subcollection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/ampersand-subcollection.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",katex:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/katex.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction-detail.js":[function(e,t){{var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("./modifying-input-view"),s=(e("./modifying-number-input-view"),e("./stoich-specie-collection")),a=e("./subdomain"),l=e("ampersand-select-view"),h=e("./reaction"),d=e("katex");e("./tests")}t.exports=o.extend({update:function(e){if("type"==e.name){if("custom"!=e.name&&null==this.model.rate&&(this.model.rate=this.rateSelect.value),"custom"!=e.value&&"massaction"!=e.value){var t,n;for("creation"==e.value?(t=0,n=1):"destruction"==e.value&&(t=1,n=0),"merge"==e.value&&(t=2,n=1),"change"==e.value&&(t=1,n=1),"dimerization"==e.value&&(t=1,n=1),"split"==e.value&&(t=1,n=2),"four"==e.value&&(t=2,n=2);this.model.reactants.length>t;)this.model.reactants.remove(this.model.reactants.at(0));for(;this.model.products.length>n;)this.model.products.remove(this.model.products.at(0));for(;this.model.reactants.length<t;)this.model.reactants.addStoichSpecie(null,1);for(;this.model.products.length<n;)this.model.products.addStoichSpecie(null,1);"dimerization"==e.value?this.model.reactants.at(0).stoichiometry=2:this.model.reactants.each(function(e){e.stoichiometry=1}),this.model.products.each(function(e){e.stoichiometry=1})}this.model.type=e.value}else"parameter"==e.name?this.model.rate=e.value:"subdomains"==e.name&&(this.model.subdomains=e.value.checked?i.union(this.model.subdomains,[e.value.model.name]):i.difference(this.model.subdomains,[e.value.model.name]))},initialize:function(e){o.prototype.initialize.apply(this,arguments),this.model=e.model,this.collection=this.model.collection.parent.mesh.uniqueSubdomains},renderSubdomains:function(){this.subdomainsView&&this.subdomainsView.remove(),this.subdomainsView=this.renderCollection(this.baseModel.mesh.uniqueSubdomains,a,this.el.querySelector('[data-hook="subdomains"]')),this.updateSelected()},updateSelected:function(){var e=this.collection.map(function(e){return e.name});this.subdomains=i.intersection(this.subdomains,e);for(var t=n(this.queryByHook("subdomains")).find("input"),o=0;o<t.length;o++)i.contains(this.subdomains,this.baseModel.mesh.uniqueSubdomains.models[o].name)&&n(t.get(o)).prop("checked",!0)},redrawLatex:h.prototype.redrawLatex,bindings:{massAction:{type:"toggle",hook:"parameter"},showCustom:{type:"toggle",hook:"custom"},notValid:{type:"toggle",hook:"reactionMessage"},validMessage:{type:"text",hook:"reactionMessage"}},derived:{massAction:{deps:["model.type"],fn:function(){return"custom"!=this.model.type}},showCustom:{deps:["model.type"],fn:function(){return"custom"==this.model.type}},validMessage:{deps:["model.type","model.rate","model.reactants","model.products"],fn:function(){if("custom"!=this.model.type&&!this.model.rate)return"Select a valid rate parameter!";var e,t;"creation"==this.model.type?(e=0,t=1):"destruction"==this.model.type&&(e=1,t=0),"merge"==this.model.type&&(e=2,t=1),"change"==this.model.type&&(e=1,t=1),"dimerization"==this.model.type&&(e=1,t=1),"split"==this.model.type&&(e=1,t=2),"four"==this.model.type&&(e=2,t=2),"massaction"==this.model.type&&(e=this.model.reactants.models.length,t=this.model.products.models.length);for(var i=0;e>i;i++){if(!this.model.reactants.at(i))return"Not enough reactants!";if(!this.model.reactants.at(i).specie)return"Select valid reactants!"}for(var i=0;t>i;i++){if(!this.model.products.at(i))return"Not enough products!";if(!this.model.products.at(i).specie)return"Select valid products!"}return!0}},notValid:{deps:["model.valid"],fn:function(){return!this.model.valid}}},render:function(){this.baseModel=this.model.collection.parent,this.template=this.baseModel.isSpatial?"<div> <div class='reactionDetail'><center><div data-hook='latex' class='largeLatex'></div></center> <div data-hook='typeSelect'></div> <div data-hook='parameter'></div> <div data-hook='custom'></div> <div>Subdomains reaction can occur in:</div> <div data-hook='subdomains'></div>   <table width='100%' data-hook='advanced'>    <tr>       <td style='vertical-align:top'><div data-hook='reactants'></div></td>      <td style='vertical-align:top'><div data-hook='products'></div></td>    </tr>  </table>  <br>  <div class='alert alert-error' data-hook='reactionMessage'></div> </div></div>":"<div><div class='reactionDetail'><center><div data-hook='latex' class='largeLatex'></div></center> <div data-hook='typeSelect'></div> <div data-hook='parameter'></div> <div data-hook='custom'></div>   <table width='100%' data-hook='advanced'>    <tr>       <td style='vertical-align:top'><div data-hook='reactants'></div></td>      <td style='vertical-align:top'><div data-hook='products'></div></td>    </tr>  </table>  <br>   <div class='alert alert-error' data-hook='reactionMessage'></div> </div></div>",o.prototype.render.apply(this,arguments),this.listenTo(this.model,"change",i.bind(this.redrawLatex,this)),this.listenTo(this.baseModel.species,"change:name",i.bind(this.redrawLatex,this)),this.listenTo(this.model.reactants,"add remove change",i.bind(this.redrawLatex,this)),this.listenToAndRun(this.model.products,"add remove change",i.bind(this.redrawLatex,this));var e=[],t=n("<div>");d.render("\\emptyset \\rightarrow A",t[0]),e.push(["creation",t.html()]),d.render("A \\rightarrow \\emptyset",t[0]),e.push(["destruction",t.html()]),d.render("A \\rightarrow B",t[0]),e.push(["change",t.html()]),d.render("A + A \\rightarrow B",t[0]),e.push(["dimerization",t.html()]),d.render("A + B \\rightarrow C",t[0]),e.push(["merge",t.html()]),d.render("A \\rightarrow B + C",t[0]),e.push(["split",t.html()]),d.render("A + B \\rightarrow C + D",t[0]),e.push(["four",t.html()]),e.push(["massaction","Custom mass action"]),e.push(["custom","Custom propensity"]),this.renderSubview(new l({label:"Reaction Type: ",name:"type",value:this.model.type,options:e,required:!0}),this.el.querySelector("[data-hook='typeSelect']"));var a=this.model.rate;return null==a&&(a=this.baseModel.parameters.at(0)),this.rateSelect=this.renderSubview(new l({label:"Rate parameter: ",name:"parameter",value:a,unselectedText:"Select a parameter",options:this.baseModel.parameters,required:!1,idAttribute:"cid",textAttribute:"name",yieldModel:!0}),this.el.querySelector("[data-hook='parameter']")),this.renderSubview(new r({label:"Custom rate equation: ",name:"equation",value:this.model.equation,required:!1,placeholder:"",model:this.model,tests:[]}),this.el.querySelector("[data-hook='custom']")),this.baseModel.isSpatial&&(this.renderSubdomains(),this.listenToAndRun(this.baseModel,"change:mesh",i.bind(this.renderSubdomains,this))),this.listenToAndRun(this.baseModel.mesh.uniqueSubdomains,"add remove change",this.updateSelected),this.renderSubview(new s({label:"Reactants",collection:this.model.reactants}),this.el.querySelector("[data-hook='reactants']")),this.renderSubview(new s({label:"Products",collection:this.model.products}),this.el.querySelector("[data-hook='products']")),this}})},{"./modifying-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-input-view.js","./modifying-number-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-number-input-view.js","./reaction":"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction.js","./stoich-specie-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/stoich-specie-collection.js","./subdomain":"/home/bbales2/stochssModel/app/static/modelEditor/forms/subdomain.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",katex:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/katex.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/reaction.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("./modifying-input-view"),s=(e("./modifying-number-input-view"),e("./stoich-specie-collection"),e("./subdomain"),e("ampersand-select-view"),e("katex")),a=e("./tests");t.exports=o.extend({template:"<tr data-hook='row'>    <td><center><input type='radio' name='reaction' data-hook='radio'></center></td>    <td><center><span data-hook='name'></span></center></td>     <td><center><span data-hook='latex'></span></center></td>     <td><center><button class='btn' data-hook='remove'>x</button></center></td>  </tr>",props:{valid:"boolean",message:"string"},updateValid:function(){this.valid=(!this.nameBox||this.nameBox.valid)&&!this.notValid,this.message="",this.valid||(this.message="Invalid reaction, please fix")},update:function(){this.updateValid(),this.parent&&this.parent.update&&this.parent.update(),this.parent&&this.parent.parent&&this.parent.parent.update&&this.parent.parent.update()},redrawLatex:function(){var e="",t=this.model.reactants.models.length;if(0==t)e="\\emptyset";else for(var i=0;t>i;i++){var n=this.model.reactants.models[i],o=n.specie?n.specie.name:"X";e+=n.stoichiometry>1?n.stoichiometry+o:o,t-1>i&&(e+=" + ")}e+=" \\rightarrow ";var r=this.model.products.models.length;if(0==r)e+="\\emptyset";else for(var i=0;r>i;i++){var n=this.model.products.models[i],o=n.specie?n.specie.name:"X";e+=n.stoichiometry>1?n.stoichiometry+o:o,r-1>i&&(e+=" + ")}e=e.replace(/_/g,"\\_"),s.render(e,this.queryByHook("latex"))},removeModel:function(){confirm("Are you sure you want to delete reaction "+this.model.name+"?")&&this.model.collection.remove(this.model)},selectMe:function(){this.parent.parent.select(this.model)},select:function(){n(this.el).find("[data-hook='radio']").prop("checked",!0)},derived:{invalid:{deps:["model.valid","valid"],fn:function(){return!(this.model.valid&&this.valid)}}},bindings:{invalid:{type:"booleanClass",hook:"row",name:"invalidRow"}},events:{"click [data-hook='remove']":"removeModel","click [data-hook='radio']":"selectMe"},remove:function(){this.stopListening(),o.prototype.remove.apply(this,arguments)},initialize:function(){o.prototype.render.apply(this,arguments),this.updateValid()},render:function(){return this.baseModel=this.model.collection.parent,o.prototype.render.apply(this,arguments),this.listenTo(this.model,"change",i.bind(this.update,this)),this.listenTo(this.model,"change",i.bind(this.redrawLatex,this)),this.listenTo(this.model.reactants,"add remove change",i.bind(this.redrawLatex,this)),this.listenToAndRun(this.model.products,"add remove change",i.bind(this.redrawLatex,this)),this.nameBox=this.renderSubview(new r({label:"",name:"name",value:this.model.name,parent:this,required:!1,placeholder:"Name",model:this.model,tests:[].concat(a.naming(this.model.collection,this.model))}),this.el.querySelector("[data-hook='name']")),this.updateValid(),this}})},{"./modifying-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-input-view.js","./modifying-number-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-number-input-view.js","./stoich-specie-collection":"/home/bbales2/stochssModel/app/static/modelEditor/forms/stoich-specie-collection.js","./subdomain":"/home/bbales2/stochssModel/app/static/modelEditor/forms/subdomain.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",katex:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/katex.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/specie-collection.js":[function(e,t){var i=e("jquery"),n=e("ampersand-view"),o=e("ampersand-form-view"),r=(e("ampersand-input-view"),e("./specie")),s=e("./paginated-collection-view"),a=(e("./tests"),o.extend({submitCallback:function(){for(var e=this.baseModel.mesh.uniqueSubdomains.map(function(e){return e.name}),t=this.collection.models.length,i="S"+t,n=this.collection.map(function(e){return e.name});_.contains(n,i);)t+=1,i="S"+t;var o=this.collection.addSpecie(i,0,0,e);this.selectView.select(o,!0)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e,t){this.collection=t.collection,this.baseModel=this.collection.parent,this.selectView=e.selectView},render:function(){o.prototype.render.apply(this,arguments),i(this.el).find("input").prop("autocomplete","off"),this.button=i('<button class="btn btn-large btn-primary" type="submit">Add Species</button>').appendTo(i(this.el))}})),l=n.extend({template:"<div>   <div data-hook='collection'></div>   <br />   <form data-hook='addSpeciesForm'></form> </div>",props:{valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent.update()},initialize:function(e,t){n.prototype.initialize.call(this,e,t)},render:function(){var e;e=this.collection.parent.isSpatial?"Define species and their spatial properties. Species have a single diffusion coefficient for the entire model, but can be limited to only diffuse into certain subdomains.":"Define species and their initial conditions. For concentration models this is a positive floating point value and for population models this is an integer.";var t="<div>"+e+"<table width='100%' data-hook='table'>     <thead> <th width='120px'>Name</th><th width='120px'>"+(this.collection.parent.isSpatial?"Diffusion coefficient":"Initial Condition")+"</th>"+(this.collection.parent.isSpatial?"<th width='120px'>Active in subdomains</th>":"")+"<th></th>     </thead>     <tbody data-hook='items'>     </tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>    [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>  </div> </div>";return n.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new s({template:t,collection:this.collection,viewModel:r,parent:this,limit:10}),this.queryByHook("collection")),this.addForm=new a({el:this.el.querySelector("[data-hook=addSpeciesForm]"),selectView:this.selectView},{collection:this.collection}),this}});t.exports=l},{"./paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","./specie":"/home/bbales2/stochssModel/app/static/modelEditor/forms/specie.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-form-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/ampersand-form-view.js","ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/specie.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("./modifying-input-view"),s=e("./modifying-number-input-view"),a=e("./subdomain"),l=e("./tests");t.exports=o.extend({removeSpecies:function(){this.model.collection.remove(this.model)},props:{valid:"boolean",message:"string"},derived:{invalid:{deps:["valid"],fn:function(){return!this.valid}}},events:{'click [data-hook="delete"]':"removeSpecies"},bindings:{"model.inUse":{type:"booleanAttribute",hook:"delete",name:"disabled"},invalid:{type:"booleanClass",name:"invalidRow",hook:"row"}},initialize:function(){o.prototype.initialize.apply(this,arguments),this.baseModel=this.model.collection.parent,this.updateValid()},updateValid:function(){var e=!0,t="";if(this._subviews)for(var i=0;i<this._subviews.length&&("undefined"!=typeof this._subviews[i].valid&&(e=e&&this._subviews[i].valid,t="Invalid species, please fix"),e);i++);this.valid=e,this.message=t},update:function(e){if("subdomains"==e.name){var t=e.value.model,n=e.value.checked;this.model.subdomains=n?i.union(this.model.subdomains,[t.name]):i.difference(this.model.subdomains,[t.name])}this.updateValid(),this.parent&&this.parent.update&&this.parent.update(),this.parent&&this.parent.parent&&this.parent.parent.update&&this.parent.parent.update()},updateSelected:function(){var e=this.baseModel.mesh.uniqueSubdomains.map(function(e){return e.name});this.model.subdomains=i.intersection(this.model.subdomains,e);for(var t=n(this.queryByHook("subdomains")).find("input"),o=0;o<t.length;o++)i.contains(this.model.subdomains,this.baseModel.mesh.uniqueSubdomains.models[o].name)&&n(t.get(o)).prop("checked",!0)},renderSubdomains:function(){this.subdomainsView&&this.subdomainsView.remove(),this.subdomainsView=this.renderCollection(this.baseModel.mesh.uniqueSubdomains,a,this.queryByHook("subdomains")),this.updateSelected()},render:function(){return this.template=this.baseModel.isSpatial?"<tr data-hook='row'><td data-hook='name'></td><td data-hook='diffusion'></td><td><center><div data-hook='subdomains'></div></center></td><td><button class='btn' data-hook='delete'>x</button></td></tr>":"<tr data-hook='row'><td data-hook='name'></td><td data-hook='initialCondition'></td><td><button class='btn' data-hook='delete'>x</button></td></tr>",o.prototype.render.apply(this,arguments),this.renderSubview(new r({label:"",name:"name",value:this.model.name,required:!1,placeholder:"Name",model:this.model,parent:this,tests:[].concat(l.naming(this.model.collection,this.model),l.naming(this.model.collection.parent.parameters,this.model,"between species and parameters"))}),this.el.querySelector("[data-hook='name']")),this.baseModel.isSpatial?(this.renderSubview(new s({label:"",name:"diffusion",value:this.model.diffusion,required:!1,placeholder:"Diffusion Constant",model:this.model,parent:this,tests:[].concat(l.isNumber(),l.positive())}),this.el.querySelector("[data-hook='diffusion']")),this.renderSubdomains(),this.listenToAndRun(this.baseModel,"change:mesh",i.bind(this.renderSubdomains,this))):this.renderSubview(new s({label:"",name:"initialCondition",value:this.model.initialCondition,required:!1,placeholder:"Initial Condition",model:this.model,parent:this,tests:[].concat(l.nonzero(),l.units(this.model.collection.parent))}),this.el.querySelector("[data-hook='initialCondition']")),this.updateValid(),this}})},{"./modifying-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-input-view.js","./modifying-number-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-number-input-view.js","./subdomain":"/home/bbales2/stochssModel/app/static/modelEditor/forms/subdomain.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/stoich-specie-collection.js":[function(e,t){var i=e("jquery"),n=e("ampersand-view"),o=e("ampersand-form-view"),r=(e("ampersand-input-view"),e("./stoich-specie")),s=e("ampersand-select-view"),a=(e("./tests"),o.extend({submitCallback:function(e){this.collection.addStoichSpecie(e.specie,1)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e,t){this.collection=t.collection,this.baseModel=this.collection.parent.collection.parent,this.fields=[new s({template:"<span><select></select></span>",label:"",name:"specie",unselectedText:"Add species",options:this.baseModel.species,required:!0,idAttribute:"cid",textAttribute:"name",yieldModel:!0})]},render:function(){o.prototype.render.apply(this,arguments),i(this.el).find("input").prop("autocomplete","off"),this.button=i('<button type="submit">Add</button>').appendTo(i(this.el))}})),l=n.extend({template:"<div><h4><span data-hook='label'></span></h4><table height='100%'><tr><td valign='top'><table data-hook='stoichSpecieTable'></table></td><tr/><tr><td valign='bottom'><div data-hook='addStoichSpecieDiv'><form data-hook='addStoichSpecieForm'></form></div></td></tr></table></div>",initialize:function(e,t){n.prototype.initialize.call(this,e,t),this.reaction=this.collection.parent,this.listenToAndRun(this.reaction,"change:type",_.bind(this.setReactionType,this))},setReactionType:function(){this.reactionType=this.reaction.type},props:{reactionType:"string",showCustomOverride:"boolean",label:"string"},derived:{showCustom:{deps:["reactionType"],fn:function(){return this.showCustomOverride||"custom"==this.reactionType||"massaction"==this.reactionType}}},bindings:{showCustom:{type:"toggle",hook:"addStoichSpecieDiv"},label:{type:"text",hook:"label"}},render:function(){return n.prototype.render.apply(this,arguments),this.renderCollection(this.collection,r,this.el.querySelector("[data-hook=stoichSpecieTable]"),{showCustomOverride:this.showCustomOverride}),this.addForm=new a({el:this.el.querySelector("[data-hook=addStoichSpecieForm]")},{collection:this.collection}),this}});t.exports=l},{"./stoich-specie":"/home/bbales2/stochssModel/app/static/modelEditor/forms/stoich-specie.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-form-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/ampersand-form-view.js","ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js","ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/stoich-specie.js":[function(e,t){{var i=e("underscore"),n=(e("jquery"),e("ampersand-view")),o=e("./modifying-select-view");e("./modifying-number-input-view"),e("./tests")}t.exports=n.extend({template:"<tr><td><button data-hook='plus'>+</button></td><td><div data-hook='stoichiometry'></div></td><td><button data-hook='minus'>-</button></td><td data-hook='specie'></td><td><button data-hook='delete'>x</button></td></tr>",update:function(e){this.model[e.name]=e.valid?e.value:null},initialize:function(){n.prototype.initialize.apply(this,arguments),this.showCustomOverride=this.parent.showCustomOverride,this.reaction=this.model.collection.parent,this.listenToAndRun(this.reaction,"change:type",i.bind(this.setReactionType,this))},setReactionType:function(){this.reactionType=this.reaction.type},props:{reactionType:"string",showCustomOverride:"boolean"},derived:{massAction:{deps:["reactionType"],fn:function(){return"custom"!=this.reactionType}},showCustom:{deps:["reactionType"],fn:function(){return this.showCustomOverride||"massaction"==this.reactionType||"custom"==this.reactionType}}},bindings:{"model.stoichiometry":{type:"text",hook:"stoichiometry"},showCustom:{type:"toggle",selector:"button"}},events:{"click [data-hook='delete']":"deleteModel","click [data-hook='plus']":"addOne","click [data-hook='minus']":"subtractOne"},deleteModel:function(){this.model.collection.remove(this.model)},addOne:function(){this.model.stoichiometry=this.model.stoichiometry+1},subtractOne:function(){this.model.stoichiometry>=2&&(this.model.stoichiometry=this.model.stoichiometry-1)},render:function(){return n.prototype.render.apply(this,arguments),this.baseModel=this.model.collection.parent.collection.parent,this.renderSubview(new o({template:'<span><select></select><span data-hook="message-container"></span>',label:"",name:"specie",value:this.model.specie,options:this.baseModel.species,unselectedText:"Pick species",required:!0,idAttribute:"cid",textAttribute:"name",yieldModel:!0}),this.el.querySelector("[data-hook='specie']")),this}})},{"./modifying-number-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-number-input-view.js","./modifying-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/modifying-select-view.js","./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/subdomain.js":[function(e,t){{var i=e("underscore"),n=(e("jquery"),e("ampersand-view")),o=e("ampersand-checkbox-view");
e("./tests")}t.exports=n.extend({template:"<span data-hook='checkbox'></span>",update:function(e){this.parent.parent.update({name:"subdomains",value:{model:this.model,checked:e.value}})},initialize:function(e){n.prototype.initialize.apply(this,arguments),this.specie=e.specie},render:function(){n.prototype.render.apply(this,arguments);var e=i.contains(this.parent.parent.model.subdomains,this.model.name);return this.renderSubview(new o({name:"checked",template:'<span><span data-hook="label"></span><input type="checkbox"><span data-hook="message-container"><span data-hook="message-text"></span></span></span>&nbsp;',label:this.model.name,value:e,required:!1,parent:this}),this.queryByHook("checkbox")),this}})},{"./tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-checkbox-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-checkbox-view/ampersand-checkbox-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js":[function(e,t){var i=e("underscore");t.exports={naming:function(e,t,n){return[function(e){return""!=e&&/^[0-9][a-zA-Z0-9_]*$/.test(e)?"Cannot start with number":void 0},function(e){return""==e||/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)?void 0:"Letters, numbers, underscores only. Start with letter/underscore"},function(o){return e&&!e.every(i.bind(function(e){return e.name!=o||e==t},this))?"Name must be unique"+(n?" "+n:""):void 0}]},isNumber:function(){return function(e){return null==e||void 0==typeof e||"string"==typeof e&&0==e.length?"Entry must be non-empty":0>e||e>0||0==e?void 0:"Entry must be a number"}},positive:function(){return function(e){return 0>e?"Number must be positive":void 0}},nonzero:function(){return function(e){return 0>e?"Number must be greater than 0":void 0}},units:function(e){return function(t){return e&&"population"==e.units&&t%1!=0?"Initial condition must be an integer":void 0}},integer:function(){return function(e){return e%1!=0?"Must be integer":void 0}}}},{underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/collection.js":[function(e,t){var i=e("ampersand-collection");t.exports=i.extend({remove:function(e){e.stopListening(),i.prototype.remove.apply(this,arguments)}})},{"ampersand-collection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/ampersand-collection.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/initial-condition-collection.js":[function(e,t){var i=e("./collection"),n=e("./initial-condition");t.exports=i.extend({model:n,addScatterInitialCondition:function(e,t,i){return this.add({specie:e,type:"scatter",subdomain:i,count:t,X:0,Y:0,Z:0})},addPlaceInitialCondition:function(e,t,i,n,o){var r=this.parent.mesh.uniqueSubdomains.at(0);return this.add({specie:e,type:"place",count:t,subdomain:r,X:i,Y:n,Z:o})},addDistributeUniformlyInitialCondition:function(e,t,i){return this.add({specie:e,type:"distribute",subdomain:i,count:t,X:0,Y:0,Z:0})}})},{"./collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/collection.js","./initial-condition":"/home/bbales2/stochssModel/app/static/modelEditor/models/initial-condition.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/initial-condition.js":[function(e,t){var i=(e("underscore"),e("ampersand-state"));t.exports=i.extend({props:{type:"string",specie:"object",count:"number",subdomain:"number",X:{type:"number","default":function(){return 0}},Y:{type:"number","default":function(){return 0}},Z:{type:"number","default":function(){return 0}}},derived:{valid:{deps:["subdomain"],fn:function(){this.baseModel=this.collection.parent;for(var e=0;e<this.baseModel.mesh.uniqueSubdomains.models.length;e++)if(this.subdomain==this.baseModel.mesh.uniqueSubdomains.models[e].name)return!0;return!1},cache:!1}}})},{"ampersand-state":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/ampersand-state.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/mesh-collection.js":[function(e,t){var i=e("ampersand-collection"),n=e("./mesh");t.exports=i.extend({model:n})},{"./mesh":"/home/bbales2/stochssModel/app/static/modelEditor/models/mesh.js","ampersand-collection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/ampersand-collection.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/mesh.js":[function(e,t){var i=e("underscore"),n=e("ampersand-model"),o=e("./subdomain-collection");t.exports=n.extend({props:{name:"string",description:"string",meshFileId:"number",threeJsMesh:"object",subdomains:"object",uniqueSubdomains:"object",undeletable:"boolean"},derived:{deletable:{deps:["undeletable"],fn:function(){return!this.undeletable}}},parse:function(e){this.uniqueSubdomains=new o,this.id=e.id;for(var t=0;t<e.uniqueSubdomains.length;t++)this.uniqueSubdomains.add({name:e.uniqueSubdomains[t]});return delete e.uniqueSubdomains,e},downloadMesh:function(e){$.ajax({type:"GET",url:"meshes/threeJsMesh/"+this.meshFileId,success:i.bind(i.partial(this.processMesh,e),this),dataType:"json"})},processMesh:function(e,t){if(this.threeJsMesh=t,0==this.subdomains.length)for(var i=0;i<this.threeJsMesh.vertices.length/3;i++)this.subdomains.push(1);e(this)}})},{"./subdomain-collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/subdomain-collection.js","ampersand-model":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/ampersand-model.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/model.js":[function(e,t){var i=e("underscore"),n=e("ampersand-model"),o=e("./specie-collection"),r=e("./reaction-collection"),s=e("./parameter-collection"),a=e("./initial-condition-collection"),l=n.extend({props:{name:"string",units:"string",type:"string",isSpatial:"boolean",species:"object",reactions:"object",parameters:"object",mesh:"object",initialConditions:"object",is_public:"boolean",saveState:"string",ownedByMe:"boolean"},triggerChange:function(){this.trigger("requestSave")},initialize:function(e){this.is_public=!1,this.parse(e),n.prototype.initialize.apply(this,arguments),this.listenTo(this.reactions,"add remove change:type",i.bind(this.computeType,this)),this.computeType(),this.listenTo(this.reactions,"add remove change",i.bind(this.triggerChange,this)),this.listenTo(this.species,"add remove change",i.bind(this.triggerChange,this)),this.listenTo(this.parameters,"add remove change",i.bind(this.triggerChange,this)),this.listenTo(this.initialConditions,"add remove change",i.bind(this.triggerChange,this)),this.on("change:name change:units change:type change:isSpatial change:mesh",i.bind(this.triggerChange,this))},setupMesh:function(e){if(this.meshId)for(var t=0;t<e.models.length;t++)this.meshId==e.models[t].id&&(this.mesh=e.models[t]);this.mesh||(this.meshId=e.models[0].id,this.mesh=e.models[0]);for(var t=0;t<this.species.models.length;t++)this.species.models[t].setUpValidation();for(var t=0;t<this.parameters.models.length;t++)this.parameters.models[t].setUpValidation();for(var i={},n={},t=0;t<this.species.models.length;t++)i[this.species.models[t].name]=this.species.models[t];for(var t=0;t<this.mesh.uniqueSubdomains.models.length;t++)n[this.mesh.uniqueSubdomains.models[t].name]=this.mesh.uniqueSubdomains.models[t];for(var t=0;t<this.unprocessedInitialConditions.length;t++){var o=this.unprocessedInitialConditions[t];this.initialConditions.add({type:o.type,count:o.count,specie:i[o.species],X:o.x,Y:o.y,Z:o.z,subdomain:o.subdomain})}delete this.unprocessedInitialConditions},computeType:function(){var e=!0,e=this.reactions.every(function(e){return"custom"!=e.type?!0:!1});this.type=e?"massaction":"custom"},saveModel:function(){return"saving"!=this.saveState&&(this.saveState="saving"),this.reactions.every(function(e){return e.valid})?void this.actuallySaveModel():void(this.saveState="Model not valid")},actuallySaveModel:i.debounce(function(){if(this.collection&&this.collection.url){if(!this.reactions.every(function(e){return e.valid})||!this.initialConditions.every(function(e){return e.valid}))return void(this.saveState="invalid");try{this.save(void 0,{success:i.bind(this.modelSaved,this),error:i.bind(this.modelSaveFailed,this)})}catch(e){this.modelSaveFailed()}}},500),modelSaved:function(){"saved"!=this.saveState&&(this.saveState="saved")},modelSaveFailed:function(){"failed"!=this.saveState&&(this.saveState="failed")},parse:function(e){var t={};if(e){this.id=e.id,this.is_public=e.is_public,this.ownedByMe=e.ownedByMe;var i=e.species,n=e.parameters,l=e.reactions;if(this.species&&this.species!=e.species||(this.species=new o,this.species.parent=this),this.parameters&&this.parameters!=e.parameters||(this.parameters=new s,this.parameters.parent=this),this.reactions&&this.reactions!=e.reactions||(this.reactions=new r,this.reactions.parent=this),this.initialConditions&&this.initialConditions!=e.initialConditions||(this.initialConditions=new a,this.initialConditions.parent=this),e.spatial&&(this.meshId=e.spatial.mesh_wrapper_id,this.unprocessedInitialConditions=e.spatial.initial_conditions),i&&0==this.species.length)for(var h=0;h<i.length;h++)t[i[h].name]=this.species.addSpecie(i[h].name,i[h].initialCondition,e.spatial.species_diffusion_coefficients[i[h].name],e.spatial.species_subdomain_assignments[i[h].name],!0);var d={};if(n&&0==this.parameters.length)for(var h=0;h<n.length;h++)d[n[h].name]=this.parameters.addParameter(n[h].name,String(n[h].value),!0);if(l&&0==this.reactions.length)for(var h=0;h<l.length;h++){var c=l[h],u=c.reactants.map(function(e){return[t[e.specie],e.stoichiometry]}),p=c.products.map(function(e){return[t[e.specie],e.stoichiometry]});"custom"==c.type?this.reactions.addCustomReaction(c.name,c.equation,u,p,e.spatial.reactions_subdomain_assignments[l[h].name]):this.reactions.addMassActionReaction(c.name,c.type,d[c.rate],u,p,e.spatial.reactions_subdomain_assignments[l[h].name])}else"undefined"==typeof this.reactions&&(this.reactions=new r,this.reactions.parent=this);return n&&delete e.parameters,i&&delete e.species,l&&delete e.reactions,e}},toJSON:function(){var e={name:this.name,units:this.units,type:this.type,isSpatial:this.isSpatial,is_public:this.is_public};this.id&&(e.id=this.id),e.species=this.species.map(function(e){return{name:e.name,initialCondition:e.initialCondition}}),e.parameters=this.parameters.map(function(e){return{name:e.name,value:e.value}}),e.reactions=[];for(var t=0;t<this.reactions.models.length;t++){var i=this.reactions.models[t],n={};n.name=i.name,n.reactants=i.reactants.map(function(e){return{specie:e.specie.name,stoichiometry:e.stoichiometry}}),n.products=i.products.map(function(e){return{specie:e.specie.name,stoichiometry:e.stoichiometry}}),n.type=i.type,"custom"==n.type?n.equation=i.equation:n.rate=i.rate.name,e.reactions.push(n)}e.spatial={},e.spatial.mesh_wrapper_id=this.mesh.id,e.spatial.subdomains=this.mesh.uniqueSubdomainList,e.spatial.species_diffusion_coefficients={},e.spatial.species_subdomain_assignments={};for(var t=0;t<this.species.models.length;t++)e.spatial.species_diffusion_coefficients[this.species.models[t].name]=this.species.models[t].diffusion,e.spatial.species_subdomain_assignments[this.species.models[t].name]=this.species.models[t].subdomains;e.spatial.reactions_subdomain_assignments={};for(var t=0;t<this.reactions.models.length;t++)e.spatial.reactions_subdomain_assignments[this.reactions.models[t].name]=this.reactions.models[t].subdomains;e.spatial.initial_conditions=[];for(var t=0;t<this.initialConditions.models.length;t++){var o=this.initialConditions.models[t],r={type:o.type,count:o.count,species:o.specie.name,x:o.X,y:o.Y,z:o.Z,subdomain:o.subdomain};e.spatial.initial_conditions.push(r)}return e}});l.buildFromJSON=function(e,t){return t},t.exports=l},{"./initial-condition-collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/initial-condition-collection.js","./parameter-collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/parameter-collection.js","./reaction-collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/reaction-collection.js","./specie-collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/specie-collection.js","ampersand-model":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/ampersand-model.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/parameter-collection.js":[function(e,t){var i=e("./collection"),n=e("./parameter");t.exports=i.extend({model:n,addParameter:function(e,t,i){var n=this.models.every(function(t){return t.name!=e});if(!n)return void 0;var o=this.add({name:e,value:t});return i||o.setUpValidation(),o}})},{"./collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/collection.js","./parameter":"/home/bbales2/stochssModel/app/static/modelEditor/models/parameter.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/parameter.js":[function(e,t){var i=e("underscore"),n=e("ampersand-model");t.exports=n.extend({props:{name:["string"],value:["string"],inUse:["boolean"]},initialize:function(){n.prototype.initialize.apply(this,arguments)},setUpValidation:function(){this.listenTo(this.collection,"reaction-rate-change",i.bind(this.updateInUse,this)),this.updateInUse()},remove:function(){this.stopListening(),n.prototype.remove.apply(this,arguments)},updateInUse:function(){var e=this,t=this.collection.parent;this.inUse=!t.reactions.every(function(t){return"custom"==t.type||t.rate!=e})}})},{"ampersand-model":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/ampersand-model.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/reaction-collection.js":[function(e,t){var i=e("underscore"),n=e("./collection"),o=e("./reaction");t.exports=n.extend({model:o,initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("add remove",i.bind(this.triggerChange,this))},triggerChange:function(){this.baseModel=this.parent,this.baseModel.parameters.trigger("reaction-rate-change"),this.baseModel.species.trigger("stoich-specie-change"),this.trigger("change")},addMassActionReaction:function(e,t,i,n,o,r){var s=this.models.every(function(t){return t.name!=e});if(!s)return void 0;var a=this.add({name:e,equation:"",type:t,rate:i,subdomains:r},{reactants:n,products:o});return a},addCustomReaction:function(e,t,i,n,o){var r=this.models.every(function(t){return t.name!=e});if(!r)return void 0;var s=this.add({name:e,equation:t,type:"custom",rate:void 0,subdomains:o},{reactants:i,products:n});return s}})},{"./collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/collection.js","./reaction":"/home/bbales2/stochssModel/app/static/modelEditor/models/reaction.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/reaction.js":[function(e,t){var i=e("underscore"),n=e("ampersand-state"),o=(e("./stoich-specie"),e("./stoich-specie-collection")),r=(e("./parameter"),n.extend({props:{name:"string",equation:{type:"string","default":function(){return""}},type:"string",rate:"object",subdomains:{type:"object","default":function(){return[]}}},derived:{valid:{deps:["type","rate","reactants","products"],fn:function(){if("custom"!=this.type&&!this.rate)return!1;var e,t;"creation"==this.type?(e=0,t=1):"destruction"==this.type&&(e=1,t=0),"change"==this.type&&(e=1,t=1),"merge"==this.type&&(e=2,t=1),"dimerization"==this.type&&(e=1,t=1),"split"==this.type&&(e=1,t=2),"four"==this.type&&(e=2,t=2),"massaction"==this.type&&(e=this.reactants.models.length,t=this.products.models.length);for(var i=0;e>i;i++){if(!this.reactants.at(i))return!1;if(!this.reactants.at(i).specie)return!1}for(var i=0;t>i;i++){if(!this.products.at(i))return!1;if(!this.products.at(i).specie)return!1}return!0}}},collections:{reactants:o,products:o},triggerReaction:function(){this.collection.parent.parameters.trigger("reaction-rate-change")},triggerChange:function(){this.trigger("change:reactants"),this.trigger("change:products"),this.collection.parent.species.trigger("stoich-specie-change"),this.trigger("change")},initialize:function(e,t){this.reactants=new o(void 0,{parent:this}),this.products=new o(void 0,{parent:this}),n.prototype.initialize.apply(this,arguments),this.on("change:rate",i.bind(this.triggerReaction,this));for(var r=0;r<t.reactants.length;r++)this.reactants.addStoichSpecie(t.reactants[r][0],t.reactants[r][1]);for(var r=0;r<t.products.length;r++)this.products.addStoichSpecie(t.products[r][0],t.products[r][1]);this.listenTo(this.reactants,"add remove change",this.triggerChange),this.listenTo(this.products,"add remove change",this.triggerChange)}}));t.exports=r},{"./parameter":"/home/bbales2/stochssModel/app/static/modelEditor/models/parameter.js","./stoich-specie":"/home/bbales2/stochssModel/app/static/modelEditor/models/stoich-specie.js","./stoich-specie-collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/stoich-specie-collection.js","ampersand-state":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/ampersand-state.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/specie-collection.js":[function(e,t){var i=e("./collection"),n=e("./specie");t.exports=i.extend({model:n,addSpecie:function(e,t,i,n,o){var r=this.models.every(function(t){return t.name!=e});if(!r)return void 0;var s=this.add({name:e,initialCondition:t,diffusion:i,subdomains:n});return o||s.setUpValidation(),s}})},{"./collection":"/home/bbales2/stochssModel/app/static/modelEditor/models/collection.js","./specie":"/home/bbales2/stochssModel/app/static/modelEditor/models/specie.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/specie.js":[function(e,t){var i=e("underscore"),n=e("ampersand-model");t.exports=n.extend({props:{name:["string"],initialCondition:["number"],diffusion:{type:"number","default":0},subdomains:{type:"object","default":function(){return[]}},inUse:["boolean"]},initialize:function(){n.prototype.initialize.apply(this,arguments)},setUpValidation:function(){this.listenTo(this.collection,"stoich-specie-change",i.bind(this.updateInUse,this)),this.updateInUse()},updateInUse:function(){var e=this,t=this.collection.parent,i=function(t){return t.specie!=e};this.inUse=!t.reactions.every(function(e){return e.reactants.every(i)&&e.products.every(i)})}})},{"ampersand-model":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/ampersand-model.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/stoich-specie-collection.js":[function(e,t){var i=e("underscore"),n=e("ampersand-collection"),o=e("./stoich-specie");t.exports=n.extend({model:o,initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("add remove",i.bind(this.triggerChange,this))},triggerChange:function(){this.baseModel=this.parent.collection.parent,this.baseModel.species.trigger("stoich-specie-change")},addStoichSpecie:function(e,t){var i=new o({specie:e,stoichiometry:t});i=this.add(i)}})},{"./stoich-specie":"/home/bbales2/stochssModel/app/static/modelEditor/models/stoich-specie.js","ampersand-collection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/ampersand-collection.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/stoich-specie.js":[function(e,t){var i=e("underscore"),n=e("ampersand-state"),o=(e("./specie"),n.extend({props:{stoichiometry:"number",specie:"object"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:specie",i.bind(function(e){e.specie&&e.specie.collection.trigger("stoich-specie-change")},this))}}));t.exports=o},{"./specie":"/home/bbales2/stochssModel/app/static/modelEditor/models/specie.js","ampersand-state":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/ampersand-state.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/subdomain-collection.js":[function(e,t){var i=e("ampersand-collection"),n=e("./subdomain");t.exports=i.extend({model:n})},{"./subdomain":"/home/bbales2/stochssModel/app/static/modelEditor/models/subdomain.js","ampersand-collection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/ampersand-collection.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/models/subdomain.js":[function(e,t){var i=(e("underscore"),e("ampersand-state"));t.exports=i.extend({props:{name:"number"}})},{"ampersand-state":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/ampersand-state.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/extend.js":[function(e,t){var i=e("amp-is-object");t.exports=function(e){if(!i(e))return e;for(var t,n,o=1,r=arguments.length;r>o;o++){t=arguments[o];for(n in t)e[n]=t[n]}return e}},{"amp-is-object":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js":[function(e,t){t.exports=function(e){var t=typeof e;return!!e&&("function"===t||"object"===t)}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-checkbox-view/ampersand-checkbox-view.js":[function(e,t){function i(e){if(!e||!e.name)throw new Error("must pass in a name");this.name=e.name,this.value=e.value===!0||!1,this.el=e.el,this.template=e.template||r,this.label=e.label||e.name,this.required="boolean"==typeof e.required?e.required:!1,this.validClass=e.validClass||"input-valid",this.invalidClass=e.invalidClass||"input-invalid",this.requiredMessage=e.requiredMessage||"This box must be checked.",this.parent=e.parent,this.render(),this.handleInputEvent=this.handleInputEvent.bind(this),this.input.addEventListener("change",this.handleInputEvent,!1),e.value&&this.setValue(!0),this.test()}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-checkbox-view"]=window.ampersand["ampersand-checkbox-view"]||[],window.ampersand["ampersand-checkbox-view"].push("2.0.2"));var n=e("domify"),o=e("ampersand-dom"),r=['<label class="checkbox">','<input type="checkbox"><span data-hook="label"></span>','<div data-hook="message-container" class="message message-below message-error">','<p data-hook="message-text"></p>',"</div>","</label>"].join("");i.prototype.remove=function(){this.input.removeEventListener("change",this.handleInputEvent,!1);var e=this.el.parentNode;e&&e.removeChild(this.el)},i.prototype.render=function(){if(!this.rendered){var e=n(this.template),t=this.el&&this.el.parentNode;t&&t.replaceChild(e,this.el),this.el=e,this.input=this.el.querySelector("input"),this.labelEl=this.el.querySelector("[data-hook~=label]"),this.messageContainer=this.el.querySelector("[data-hook~=message-container]"),this.messageEl=this.el.querySelector("[data-hook~=message-text]"),this.setMessage(this.message),this.input.checked=!!this.value,this.input.name=this.name,this.labelEl.textContent=this.label,this.rendered=!0}},i.prototype.handleInputEvent=function(){document.activeElement===this.input&&(this.directlyEdited=!0),this.value=this.input.checked,this.test(),this.parent&&this.parent.update(this)},i.prototype.setMessage=function(e){var t=this.input;this.message=e,e&&this.shouldValidate?(this.messageContainer.style.display="block",this.messageEl.textContent=e,o.addClass(t,this.invalidClass),o.removeClass(t,this.validClass)):(this.messageContainer.style.display="none",this.shouldValidate&&this.editedDirectly&&(o.addClass(t,this.validClass),o.removeClass(t,this.invalidClass)))},i.prototype.setValue=function(e){this.input.checked=!!e,this.handleInputEvent()},i.prototype.beforeSubmit=function(){this.shouldValidate=!0,this.handleInputEvent()},i.prototype.test=function(){var e=!this.required||this.value;return e&&(this.shouldValidate=!0),this.valid=e,this.setMessage(this.shouldValidate&&!e?this.requiredMessage:""),e},t.exports=i},{"ampersand-dom":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-dom/ampersand-dom.js",domify:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-checkbox-view/node_modules/domify/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-checkbox-view/node_modules/domify/index.js":[function(e,t){function i(e){if("string"!=typeof e)throw new TypeError("String expected");var t=/<([\w:]+)/.exec(e);if(!t)return document.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=t[1];if("body"==i){var o=document.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var r=n[i]||n._default,s=r[0],a=r[1],l=r[2],o=document.createElement("div");for(o.innerHTML=a+e+l;s--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var h=document.createDocumentFragment();o.firstChild;)h.appendChild(o.removeChild(o.firstChild));return h}t.exports=i;var n={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};n.td=n.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],n.option=n.optgroup=[1,'<select multiple="multiple">',"</select>"],n.thead=n.tbody=n.colgroup=n.caption=n.tfoot=[1,"<table>","</table>"],n.text=n.circle=n.ellipse=n.line=n.path=n.polygon=n.polyline=n.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/ampersand-collection.js":[function(e,t){function i(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var i=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=i||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s({silent:!0},t))}var n=e("backbone-events-standalone"),o=e("ampersand-class-extend"),r=e("is-array"),s=e("extend-object"),a=[].slice;s(i.prototype,n,{initialize:function(){},indexes:[],isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,s({merge:!1,add:!0,remove:!1},t))},parse:function(e){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize();var t={};return s(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){t=s({add:!0,remove:!0,merge:!0},t),t.parse&&(e=this.parse(e,t));var i=!r(e);e=i?e?[e]:[]:e.slice();var n,o,a,l,h,d,c,u=t.at,p=this.comparator&&null==u&&t.sort!==!1,m="string"==typeof this.comparator?this.comparator:null,f=[],g=[],v={},y=t.add,b=t.merge,w=t.remove,x=!p&&y&&w?[]:!1,_=this.model&&this.model.prototype||Object.prototype;for(d=0,c=e.length;c>d;d++){if(a=e[d]||{},n=this.isModel(a)?o=a:_.generateId?_.generateId(a):a[_.idAttribute||this.mainIndex],l=this.get(n))w&&(v[l.cid||l[this.mainIndex]]=!0),b&&(a=a===o?o.attributes:a,t.parse&&(a=l.parse(a,t)),l.set?(l.set(a,t),p&&!h&&l.hasChanged(m)&&(h=!0)):s(l,a)),e[d]=l;else if(y){if(o=e[d]=this._prepareModel(a,t),!o)continue;f.push(o),this._addReference(o,t)}o=l||o,o&&(x&&(o.isNew&&o.isNew()||!o[this.mainIndex]||!v[o.cid||o[this.mainIndex]])&&x.push(o),v[o[this.mainIndex]]=!0)}if(w){for(d=0,c=this.length;c>d;d++)o=this.models[d],v[o.cid||o[this.mainIndex]]||g.push(o);g.length&&this.remove(g,t)}if(f.length||x&&x.length)if(p&&(h=!0),null!=u)for(d=0,c=f.length;c>d;d++)this.models.splice(u+d,0,f[d]);else{var k=x||f;for(d=0,c=k.length;c>d;d++)this.models.push(k[d])}if(h&&this.sort({silent:!0}),!t.silent){for(d=0,c=f.length;c>d;d++)o=f[d],o.trigger?o.trigger("add",o,this,t):this.trigger("add",o,this,t);(h||x&&x.length)&&this.trigger("sort",this,t)}return i?e[0]:e},get:function(e,t){if(e){var i=this._indexes[t||this.mainIndex];return i[e]||i[e[this.mainIndex]]||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var i,n,o,s,l=!r(e);for(e=l?[e]:a.call(e),t||(t={}),i=0,n=e.length;n>i;i++)o=e[i]=this.get(e[i]),o&&(this._deIndex(o),s=this.models.indexOf(o),this.models.splice(s,1),t.silent||(t.index=s,o.trigger?o.trigger("remove",o,this,t):this.trigger("remove",o,this,t)),this._removeReference(o,t));return l?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,s({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),this.models.sort("string"==typeof this.comparator?function(e,i){return e.get?(e=e.get(t.comparator),i=i.get(t.comparator)):(e=e[t.comparator],i=i[t.comparator]),e>i||void 0===e?1:i>e||void 0===i?-1:0}:1===this.comparator.length?function(e,i){return e=t.comparator(e),i=t.comparator(i),e>i||void 0===e?1:i>e||void 0===i?-1:0}:this.comparator.bind(this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=this.indexes||[],t=0;e.push(this.mainIndex),e.push("cid");var i=e.length;for(this.models=[],this._indexes={};i>t;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;t=t?s({},t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_deIndex:function(e){for(var t in this._indexes)delete this._indexes[t][e[t]||e.get&&e.get(t)]},_index:function(e){for(var t in this._indexes){var i=e[t]||e.get&&e.get(t);i&&(this._indexes[t][i]=e)}},_addReference:function(e){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+this.mainIndex&&(this._deIndex(t),this._index(t)),this.trigger.apply(this,arguments))}}),Object.defineProperties(i.prototype,{length:{get:function(){return this.models.length}},isCollection:{value:!0}});var l=["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"];l.forEach(function(e){i.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),i.prototype.each=i.prototype.forEach,i.extend=o,t.exports=i},{"ampersand-class-extend":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js","backbone-events-standalone":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js","extend-object":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js","is-array":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/is-array/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js":[function(e,t){var i=e("extend-object"),n=function(e){var t,n=this,o=[].slice.call(arguments);
t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},i(t,n);var r=function(){this.constructor=t};return r.prototype=n.prototype,t.prototype=new r,e&&(o.unshift(t.prototype),i.apply(null,o)),t.__super__=n.prototype,t};t.exports=n},{"extend-object":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js":[function(e,t,i){!function(){function e(){return{keys:Object.keys,uniqueId:function(e){var t=++h+"";return e?e+t:t},has:function(e,t){return a.call(e,t)},each:function(e,t,i){if(null!=e)if(s&&e.forEach===s)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,o=e.length;o>n;n++)if(t.call(i,e[n],n,e)===r)return}else for(var a in e)if(this.has(e,a)&&t.call(i,e[a],a,e)===r)return},once:function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}}}}var n,o=this,r={},s=Array.prototype.forEach,a=Object.prototype.hasOwnProperty,l=Array.prototype.slice,h=0,d=e();n={on:function(e,t,i){if(!u(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var n=this,o=d.once(function(){n.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var n,o,r,s,a,l,h,c;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(s=e?[e]:d.keys(this._events),a=0,l=s.length;l>a;a++)if(e=s[a],r=this._events[e]){if(this._events[e]=n=[],t||i)for(h=0,c=r.length;c>h;h++)o=r[h],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&n.push(o);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=l.call(arguments,1);if(!u(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&p(i,t),n&&p(n,arguments),this},stopListening:function(e,t,i){var n=this._listeners;if(!n)return this;var o=!t&&!i;"object"==typeof t&&(i=this),e&&((n={})[e._listenerId]=e);for(var r in n)n[r].off(t,i,this),o&&delete this._listeners[r];return this}};var c=/\s+/,u=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(c.test(i)){for(var r=i.split(c),s=0,a=r.length;a>s;s++)e[t].apply(e,[r[s]].concat(n));return!1}return!0},p=function(e,t){var i,n=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t)}},m={listenTo:"on",listenToOnce:"once"};d.each(m,function(e,t){n[t]=function(t,i,n){var o=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=d.uniqueId("l"));return o[r]=t,"object"==typeof i&&(n=this),t[e](i,n,this),this}}),n.bind=n.on,n.unbind=n.off,n.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return d.each(t,function(t){e[t]=this[t]},this),e},"function"==typeof define?define(function(){return n}):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=n),i.BackboneEvents=n):o.BackboneEvents=n}(this)},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js":[function(e,t){t.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js":[function(e,t){var i=[],n=i.forEach,o=i.slice;t.exports=function(e){return n.call(o.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/is-array/index.js":[function(e,t){var i=Array.isArray,n=Object.prototype.toString;t.exports=i||function(e){return!!e&&"[object Array]"==n.call(e)}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-dom/ampersand-dom.js":[function(e,t){function i(e){return e||0===e?e:""}function n(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function o(e,t){var i=e[t];return t in e&&(i===!0||i===!1)}function r(e){return"true"===h.getAttribute(e,"data-anddom-hidden")}function s(e){h.setAttribute(e,"data-anddom-display",e.style.display)}function a(e){e.style.display=h.getAttribute(e,"data-anddom-display")||"",h.removeAttribute(e,"data-anddom-hidden")}function l(e){h.setAttribute(e,"data-anddom-hidden","true"),e.style.display="none"}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-dom"]=window.ampersand["ampersand-dom"]||[],window.ampersand["ampersand-dom"].push("1.2.7"));var h=t.exports={text:function(e,t){e.textContent=i(t)},addClass:function(e,t){t=i(t),t&&(Array.isArray(t)?t.forEach(function(t){h.addClass(e,t)}):e.classList?e.classList.add(t):n(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t))},removeClass:function(e,t){Array.isArray(t)?t.forEach(function(t){h.removeClass(e,t)}):e.classList?(t=i(t),t&&e.classList.remove(t)):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:n,switchClass:function(e,t,i){t&&this.removeClass(e,t),this.addClass(e,i)},addAttribute:function(e,t){e.setAttribute(t,""),o(e,t)&&(e[t]=!0)},removeAttribute:function(e,t){e.removeAttribute(t),o(e,t)&&(e[t]=!1)},setAttribute:function(e,t,n){e.setAttribute(t,i(n))},getAttribute:function(e,t){return e.getAttribute(t)},hide:function(e){r(e)||(s(e),l(e))},show:function(e){a(e)},html:function(e,t){e.innerHTML=t}}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/ampersand-events.js":[function(e,t){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-events"]=window.ampersand["ampersand-events"]||[],window.ampersand["ampersand-events"].push("1.0.1"));var i=e("amp-once"),n=e("amp-unique-id"),o=e("amp-keys"),r=e("amp-is-empty"),s=e("amp-each"),a=(e("amp-bind"),e("amp-extend")),l=Array.prototype.slice,h=/\s+/,d={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var o=this,r=i(function(){o.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,i){var n,r,s,a,l,h,d,u;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(a=e?[e]:o(this._events),l=0,h=a.length;h>l;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=n=[],t||i)for(d=0,u=s.length;u>d;d++)r=s[d],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&n.push(r);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=l.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&u(i,t),n&&u(n,arguments),this},stopListening:function(e,t,i){var n=this._listeningTo;if(!n)return this;var o=!t&&!i;i||"object"!=typeof t||(i=this),e&&((n={})[e._listenId]=e);for(var s in n)e=n[s],e.off(t,i,this),(o||r(e._events))&&delete this._listeningTo[s];return this},createEmitter:function(e){return a(e||{},d)}},c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),s=0,a=r.length;a>s;s++)e[t].apply(e,[r[s]].concat(n));return!1}return!0},u=function(e,t){var i,n=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};s(p,function(e,t){d[t]=function(t,i,o){var r=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=n("l"));return r[s]=t,o||"object"!=typeof i||(o=this),t[e](i,o,this),this}}),d.listenToAndRun=function(e,t,i){return d.listenTo.apply(this,arguments),i||"object"!=typeof t||(i=this),i.apply(this),this},t.exports=d},{"amp-bind":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-bind/bind.js","amp-each":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-each/each.js","amp-extend":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-extend/extend.js","amp-is-empty":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/is-empty.js","amp-keys":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/keys.js","amp-once":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-once/once.js","amp-unique-id":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-unique-id/unique-id.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-bind/bind.js":[function(e,t){var i=e("amp-is-function"),n=e("amp-is-object"),o=Function.prototype.bind,r=Array.prototype.slice,s=function(){};t.exports=function(e,t){var a,l;if(o&&e.bind===o)return o.apply(e,r.call(arguments,1));if(!i(e))throw new TypeError("Bind must be called on a function");return a=r.call(arguments,2),l=function(){if(!(this instanceof l))return e.apply(t,a.concat(r.call(arguments)));s.prototype=e.prototype;var i=new s;s.prototype=null;var o=e.apply(i,a.concat(r.call(arguments)));return n(o)?o:i}}},{"amp-is-function":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-bind/node_modules/amp-is-function/is-function.js","amp-is-object":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-bind/node_modules/amp-is-object/is-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-bind/node_modules/amp-is-function/is-function.js":[function(e,t){var i=Object.prototype.toString,n=function(e){return"[object Function]"===i.call(e)};"function"!=typeof/./&&(n=function(e){return"function"==typeof e||!1}),t.exports=n},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-bind/node_modules/amp-is-object/is-object.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-each/each.js":[function(e,t){var i=e("amp-keys"),n=e("amp-create-callback");t.exports=function(e,t,o){if(null==e)return e;t=n(t,o);var r,s=e.length;if(s===+s)for(r=0;s>r;r++)t(e[r],r,e);else{var a=i(e);for(r=0,s=a.length;s>r;r++)t(e[a[r]],a[r],e)}return e}},{"amp-create-callback":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-each/node_modules/amp-create-callback/create-callback.js","amp-keys":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/keys.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-each/node_modules/amp-create-callback/create-callback.js":[function(e,t){t.exports=function(e,t,i){if(void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,r){return e.call(t,i,n,o,r)}}return function(){return e.apply(t,arguments)}}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-extend/extend.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/extend.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/extend.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/extend.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-extend/node_modules/amp-is-object/is-object.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/is-empty.js":[function(e,t){var i=e("amp-is-array"),n=e("amp-is-string"),o=e("amp-is-arguments"),r=e("amp-is-number"),s=e("amp-is-nan"),a=e("amp-keys");t.exports=function(e){return null==e?!0:i(e)||n(e)||o(e)?0===e.length:r(e)?0===e||s(e):0!==a(e).length?!1:!0}},{"amp-is-arguments":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-arguments/is-arguments.js","amp-is-array":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-array/is-array.js","amp-is-nan":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-nan/is-nan.js","amp-is-number":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-number/is-number.js","amp-is-string":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-string/is-string.js","amp-keys":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/keys.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-arguments/is-arguments.js":[function(e,t){var i=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=function(e){return"[object Arguments]"===i.call(e)};o(arguments)||(o=function(e){return e&&n.call(e,"callee")}),t.exports=o},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-array/is-array.js":[function(e,t){var i=Object.prototype.toString,n=Array.isArray;t.exports=n||function(e){return"[object Array]"===i.call(e)}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-nan/is-nan.js":[function(e,t){var i=e("amp-is-number");t.exports=function(e){return i(e)&&e!==+e}},{"amp-is-number":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-number/is-number.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-number/is-number.js":[function(e,t){var i=Object.prototype.toString;t.exports=function(e){return"[object Number]"===i.call(e)}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-string/is-string.js":[function(e,t){var i=Object.prototype.toString;t.exports=function(e){return"[object String]"===i.call(e)}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/keys.js":[function(e,t){var i=e("amp-has"),n=e("amp-index-of"),o=e("amp-is-object"),r=Object.keys,s=!{toString:null}.propertyIsEnumerable("toString"),a=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];t.exports=function(e){if(!o(e))return[];if(r)return r(e);var t=[];for(var l in e)i(e,l)&&t.push(l);if(s)for(var h=a.length;h--;){var d=a[h];i(e,d)&&-1===n(t,d)&&t.push(d)}return t}},{"amp-has":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-has/has.js","amp-index-of":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-index-of/index-of.js","amp-is-object":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-is-object/is-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-has/has.js":[function(e,t){var i=Object.prototype.hasOwnProperty;t.exports=function(e,t){return null!=e&&i.call(e,t)}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-index-of/index-of.js":[function(e,t){var i=e("amp-is-number");t.exports=function(e,t,n){var o=0,r=e&&e.length;for(i(n)&&(o=0>n?Math.max(0,r+n):n);r>o;o++)if(e[o]===t)return o;return-1}},{"amp-is-number":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-index-of/node_modules/amp-is-number/is-number.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-index-of/node_modules/amp-is-number/is-number.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-number/is-number.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-number/is-number.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-is-empty/node_modules/amp-is-number/is-number.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-keys/node_modules/amp-is-object/is-object.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/node_modules/amp-is-object/is-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-once/node_modules/amp-limit-calls/limit-calls.js":[function(e,t){t.exports=function(e,t){var i;return function(){return t-->0?i=e.apply(this,arguments):e=null,i}}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-once/once.js":[function(e,t){var i=e("amp-limit-calls");t.exports=function(e){return i(e,1)}},{"amp-limit-calls":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-once/node_modules/amp-limit-calls/limit-calls.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/node_modules/amp-unique-id/unique-id.js":[function(e,t){(function(e){var i="undefined"!=typeof window?window:e;i.__ampIdCounter||(i.__ampIdCounter=0),t.exports=function(e){var t=++i.__ampIdCounter+"";return e?e+t:t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/ampersand-form-view.js":[function(e,t){function i(e){e=e||{},this.el=e.el,this.validCallback=e.validCallback||this.validCallback||function(){},this.submitCallback=e.submitCallback||this.submitCallback||function(){},e.data&&(this.data=e.data),e.model&&(this.model=e.model),e.fields&&(this.fields=e.model),this.clean=e.clean||function(e){return e},this.valid=!1,this.preventDefault=e.preventDefault===!1?!1:!0,this.autoAppend=e.autoAppend===!1?!1:!0,this._fieldViews={},this._fieldViewsArray=[],this.initialize&&this.initialize.apply(this,arguments),this.render(),setTimeout(function(){this.checkValid(!0)}.bind(this),0)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-form-view"]=window.ampersand["ampersand-form-view"]||[],window.ampersand["ampersand-form-view"].push("2.2.0"));var n=e("backbone-events-standalone"),o=e("extend-object"),r=function(e,t){return"function"==typeof e[t]?e[t]():e[t]};o(i.prototype,n,{data:null,model:null,fields:null,addField:function(e){this._fieldViews[e.name]=e,this._fieldViewsArray.push(e),this.fieldContainerEl&&(e.parent=this,e.render(),this.fieldContainerEl.appendChild(e.el))},removeField:function(e){var t=this.getField(e);t&&(t.remove(),delete this._fieldViews[e],this._fieldViewsArray.splice(this._fieldViewsArray.indexOf(t),1))},getField:function(e){return this._fieldViews[e]},setValid:function(e,t){var i=this.valid;this.valid=e,(i!==e||t)&&this.validCallback(e)},checkValid:function(e){var t=this._fieldViewsArray.every(function(e){return e.valid});return this.setValid(t,e),t},beforeSubmit:function(){this._fieldViewsArray.forEach(function(e){e.beforeSubmit&&e.beforeSubmit()})},update:function(e){this.trigger("change:"+e.name,e),e.valid?this.checkValid():this.setValid(!1)},remove:function(){this.el.removeEventListener("submit",this.handleSubmit,!1);var e=this.el.parentNode;e&&e.removeChild(this.el),this._fieldViewsArray.forEach(function(e){e.remove()})},handleSubmit:function(e){return this.beforeSubmit(),this.checkValid(),this.valid?this.preventDefault?(e.preventDefault(),this.submitCallback(this.getData()),!1):void 0:(e.preventDefault(),!1)},getData:function(){var e={};for(var t in this._fieldViews)e[t]=this._fieldViews[t].value;return this.clean(e)},render:function(){this.rendered||(this.el||(this.el=document.createElement("form")),this.autoAppend&&(this.fieldContainerEl=this.el.querySelector("[data-hook~=field-container]")||this.el),this.handleSubmit=this.handleSubmit.bind(this),this.el.addEventListener("submit",this.handleSubmit,!1),this.rendered=!0,(r(this,"fields")||[]).forEach(this.addField.bind(this)))}}),i.extend=function(e){var t=function(){i.apply(this,arguments)};return o(t.prototype,i.prototype),o(t.prototype,e),t},t.exports=i},{"backbone-events-standalone":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/node_modules/backbone-events-standalone/index.js","extend-object":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/node_modules/extend-object/extend-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/node_modules/backbone-events-standalone/backbone-events-standalone.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/node_modules/backbone-events-standalone/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/node_modules/extend-object/extend-object.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js":[function(e,t){var i=e("ampersand-view");t.exports=i.extend({template:["<label>",'<span data-hook="label"></span>','<input class="form-input">','<div data-hook="message-container" class="message message-below message-error">','<p data-hook="message-text"></p>',"</div>","</label>"].join(""),bindings:{name:{type:"attribute",selector:"input, textarea",name:"name"},label:[{hook:"label"},{type:"toggle",hook:"label"}],message:{type:"text",hook:"message-text"},showMessage:{type:"toggle",hook:"message-container"},placeholder:{type:"attribute",selector:"input, textarea",name:"placeholder"},validityClass:{type:"class",selector:"input, textarea"},rootElementClass:{type:"class",selector:""}},initialize:function(e){e||(e={}),this.tests=this.tests||e.tests||[],this.on("change:type",this.handleTypeChange,this),this.handleBlur=this.handleBlur.bind(this),this.handleInputChanged=this.handleInputChanged.bind(this),this.startingValue=this.value,this.on("change:valid change:value",this.reportToParent,this),e.template&&(this.template=e.template)},render:function(){this.renderWithTemplate(),this.input=this.query("input")||this.query("textarea"),this.handleTypeChange(),this.initInputBindings(),this.setValue(this.value)},props:{value:"any",startingValue:"any",name:"string",type:["string",!0,"text"],placeholder:["string",!0,""],label:["string",!0,""],required:["boolean",!0,!0],directlyEdited:["boolean",!0,!1],shouldValidate:["boolean",!0,!1],message:["string",!0,""],requiredMessage:["string",!0,"This field is required."],validClass:["string",!0,"input-valid"],invalidClass:["string",!0,"input-invalid"],rootElementClass:["string",!0,""]},derived:{valid:{deps:["value"],fn:function(){return!this.runTests()}},showMessage:{deps:["message","shouldValidate"],fn:function(){return this.shouldValidate&&this.message}},changed:{deps:["value","startingValue"],fn:function(){return this.value!==this.startingValue}},validityClass:{deps:["valid","validClass","invalidClass","shouldValidate","changed"],fn:function(){return this.shouldValidate&&this.changed?this.valid?this.validClass:this.invalidClass:""}}},setValue:function(e){this.value=e,this.input.value=e||0===e?this.value.toString():"",this.getErrorMessage(this.value)||(this.shouldValidate=!0)},getErrorMessage:function(){var e="";return this.required&&!this.value?this.requiredMessage:((this.tests||[]).some(function(t){return e=t.call(this,this.value)||""},this),e)},handleTypeChange:function(){if("textarea"===this.type&&"textarea"!==this.input.tagName.toLowerCase()){var e=this.input.parentNode,t=document.createElement("textarea");e.replaceChild(t,this.input),this.input=t,this._applyBindingsForKey("")}else this.input.type=this.type},handleInputChanged:function(){document.activeElement===this.input&&(this.directlyEdited=!0),this.value=this.clean(this.input.value)},clean:function(e){return"number"===this.type?Number(e):e.trim()},handleBlur:function(){this.value&&this.changed&&(this.shouldValidate=!0),this.runTests()},beforeSubmit:function(){this.shouldValidate=!0,this.runTests()},runTests:function(){var e=this.getErrorMessage();return!e&&this.value&&this.changed&&(this.shouldValidate=!0),this.message=e,e},initInputBindings:function(){this.input.addEventListener("blur",this.handleBlur,!1),this.input.addEventListener("input",this.handleInputChanged,!1)},remove:function(){this.input.removeEventListener("input",this.handleInputChanged,!1),this.input.removeEventListener("blur",this.handleBlur,!1),i.prototype.remove.apply(this,arguments)},reset:function(){this.setValue("")},reportToParent:function(){this.parent&&this.parent.update(this)}})},{"ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/ampersand-model.js":[function(e,t){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-model"]=window.ampersand["ampersand-model"]||[],window.ampersand["ampersand-model"].push("4.0.3"));var i=e("ampersand-state"),n=e("underscore"),o=e("ampersand-sync"),r=i.extend({save:function(e,t,i){{var o,r,s;this.attributes}if(null==e||"object"==typeof e?(o=e,i=t):(o={})[e]=t,i=n.extend({validate:!0},i),o&&!i.wait){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;void 0===i.parse&&(i.parse=!0);var l=this,h=i.success;return i.success=function(e){var t=l.parse(e,i);return i.wait&&(t=n.extend(o||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(h&&h(l,e,i),void l.trigger("sync",l,e,i))},a(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=o),i.wait&&(i.attrs=n.extend(l.serialize(),o)),s=this.sync(r,this,i)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},a(this,e),this.sync("read",this,e)},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&o(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;a(this,e);var r=this.sync("delete",this,e);return e.wait||o(),r},sync:function(){return o.apply(this,arguments)},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||s();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.getId())}}),s=function(){throw new Error('A "url" property or function must be specified')},a=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};t.exports=r},{"ampersand-state":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/ampersand-state.js","ampersand-sync":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/ampersand-sync.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/ampersand-sync.js":[function(e,t){var i=e("underscore"),n=e("xhr"),o=e("qs"),r=function(){throw new Error('A "url" property or function must be specified')};t.exports=function(e,t,a){var l=s[e],h={};i.defaults(a||(a={}),{emulateHTTP:!1,emulateJSON:!1});var d={type:l};a.url||(d.url=i.result(t,"url")||r()),null!=a.data||!t||"create"!==e&&"update"!==e&&"patch"!==e||(d.json=a.attrs||t.toJSON(a)),a.data&&"GET"===l&&(d.url+=i.contains(d.url,"?")?"&":"?",d.url+=o.stringify(a.data)),a.emulateJSON&&(h["Content-Type"]="application/x-www-form-urlencoded",d.body=d.json?{model:d.json}:{},delete d.json),!a.emulateHTTP||"PUT"!==l&&"DELETE"!==l&&"PATCH"!==l||(d.type="POST",a.emulateJSON&&(d.body._method=l),h["X-HTTP-Method-Override"]=l),a.emulateJSON&&(d.body=o.stringify(d.body));
var c=i.result(t,"ajaxConfig")||{};if(c.headers&&i.extend(h,c.headers),d.headers=h,c.useXDR&&(d.useXDR=!0),c.xhrFields){var u=c.beforeSend;d.beforeSend=function(e){for(var t in c.xhrFields)e[t]=c.xhrFields[t];return u?u.apply(this,arguments):void 0},d.xhrFields=c.xhrFields}d.method=d.type;var p=i.extend(d,a),m=a.xhr=n(p,function(e,t,i){if(e&&a.error)return a.error(t,"error",e.message);if(i&&"string"==typeof i)try{i=JSON.parse(i)}catch(n){}return a.success?a.success(i,"success",t):void 0});return t.trigger("request",t,m,a,p),m.ajaxSettings=p,m};var s={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"}},{qs:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/index.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js",xhr:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/index.js":[function(e,t){t.exports=e("./lib")},{"./lib":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/index.js":[function(e,t){var i=e("./stringify"),n=e("./parse");t.exports={stringify:i,parse:n}},{"./parse":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/parse.js","./stringify":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/stringify.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/parse.js":[function(e,t){var i=e("./utils"),n={delimiter:"&",depth:5,arrayLimit:20,parametersLimit:1e3};n.parseValues=function(e,t){t="string"==typeof t?t:n.delimiter;for(var o={},r=e.split(t,n.parametersLimit),s=0,a=r.length;a>s;++s){var l=r[s],h=-1===l.indexOf("]=")?l.indexOf("="):l.indexOf("]=")+1;if(-1===h)o[i.decode(l)]="";else{var d=i.decode(l.slice(0,h)),c=i.decode(l.slice(h+1));o[d]=o[d]?[].concat(o[d]).concat(c):c}}return o},n.parseObject=function(e,t){if(!e.length)return t;var i=e.shift(),o={};if("[]"===i)o=[],o=o.concat(n.parseObject(e,t));else{var r="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,s=parseInt(r,10);!isNaN(s)&&i!==r&&s<=n.arrayLimit?(o=[],o[s]=n.parseObject(e,t)):o[r]=n.parseObject(e,t)}return o},n.parseKeys=function(e,t,i){if(e){var o=/^([^\[\]]*)/,r=/(\[[^\[\]]*\])/g,s=o.exec(e);if(!Object.prototype.hasOwnProperty(s[1])){var a=[];s[1]&&a.push(s[1]);for(var l=0;null!==(s=r.exec(e))&&i>l;)++l,Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||a.push(s[1]);return s&&a.push("["+e.slice(s.index)+"]"),n.parseObject(a,t)}}},t.exports=function(e,t,o){if(""===e||null===e||"undefined"==typeof e)return{};"number"!=typeof t&&(o=t,t=n.depth);var r="string"==typeof e?n.parseValues(e,o):i.clone(e),s={};for(var a in r)if(r.hasOwnProperty(a)){var l=n.parseKeys(a,r[a],t);s=i.merge(s,l)}return i.compact(s)}},{"./utils":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/stringify.js":[function(e,t){(function(e){var i={delimiter:"&"};i.stringify=function(t,n){if(e.isBuffer(t)?t=t.toString():t instanceof Date?t=t.toISOString():null===t&&(t=""),"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return[encodeURIComponent(n)+"="+encodeURIComponent(t)];var o=[];for(var r in t)t.hasOwnProperty(r)&&(o=o.concat(i.stringify(t[r],n+"["+r+"]")));return o},t.exports=function(e,t){t="undefined"==typeof t?i.delimiter:t;var n=[];for(var o in e)e.hasOwnProperty(o)&&(n=n.concat(i.stringify(e[o],o)));return n.join(t)}}).call(this,e("buffer").Buffer)},{buffer:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/utils.js":[function(e,t,i){(function(e){i.arrayToObject=function(e){for(var t={},i=0,n=e.length;n>i;++i)"undefined"!=typeof e[i]&&(t[i]=e[i]);return t},i.clone=function(t){if("object"!=typeof t||null===t)return t;if(e.isBuffer(t))return t.toString();var n=Array.isArray(t)?[]:{};for(var o in t)t.hasOwnProperty(o)&&(n[o]=i.clone(t[o]));return n},i.merge=function(e,t){if(!t)return e;var n=i.clone(e);if(Array.isArray(t)){for(var o=0,r=t.length;r>o;++o)"undefined"!=typeof t[o]&&(n[o]="object"==typeof n[o]?i.merge(n[o],t[o]):t[o]);return n}Array.isArray(n)&&(n=i.arrayToObject(n));for(var s=Object.keys(t),a=0,l=s.length;l>a;++a){var h=s[a],d=t[h];n[h]=d&&"object"==typeof d?n[h]?i.merge(n[h],d):i.clone(d):d}return n},i.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},i.compact=function(e){if("object"!=typeof e||null===e)return e;var t={};for(var n in e)if(e.hasOwnProperty(n))if(Array.isArray(e[n])){t[n]=[];for(var o=0,r=e[n].length;r>o;o++)"undefined"!=typeof e[n][o]&&t[n].push(e[n][o])}else t[n]=i.compact(e[n]);return t}}).call(this,e("buffer").Buffer)},{buffer:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js":[function(e,t,i){(function(){var e=this,n=e._,o={},r=Array.prototype,s=Object.prototype,a=Function.prototype,l=r.push,h=r.slice,d=r.concat,c=s.toString,u=s.hasOwnProperty,p=r.forEach,m=r.map,f=r.reduce,g=r.reduceRight,v=r.filter,y=r.every,b=r.some,w=r.indexOf,x=r.lastIndexOf,_=Array.isArray,k=Object.keys,M=a.bind,E=function(e){return e instanceof E?e:this instanceof E?void(this._wrapped=e):new E(e)};"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=E),i._=E):e._=E,E.VERSION="1.6.0";var S=E.each=E.forEach=function(e,t,i){if(null==e)return e;if(p&&e.forEach===p)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,r=e.length;r>n;n++)if(t.call(i,e[n],n,e)===o)return}else for(var s=E.keys(e),n=0,r=s.length;r>n;n++)if(t.call(i,e[s[n]],s[n],e)===o)return;return e};E.map=E.collect=function(e,t,i){var n=[];return null==e?n:m&&e.map===m?e.map(t,i):(S(e,function(e,o,r){n.push(t.call(i,e,o,r))}),n)};var T="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return n&&(t=E.bind(t,n)),o?e.reduce(t,i):e.reduce(t);if(S(e,function(e,r,s){o?i=t.call(n,i,e,r,s):(i=e,o=!0)}),!o)throw new TypeError(T);return i},E.reduceRight=E.foldr=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return n&&(t=E.bind(t,n)),o?e.reduceRight(t,i):e.reduceRight(t);var r=e.length;if(r!==+r){var s=E.keys(e);r=s.length}if(S(e,function(a,l,h){l=s?s[--r]:--r,o?i=t.call(n,i,e[l],l,h):(i=e[l],o=!0)}),!o)throw new TypeError(T);return i},E.find=E.detect=function(e,t,i){var n;return C(e,function(e,o,r){return t.call(i,e,o,r)?(n=e,!0):void 0}),n},E.filter=E.select=function(e,t,i){var n=[];return null==e?n:v&&e.filter===v?e.filter(t,i):(S(e,function(e,o,r){t.call(i,e,o,r)&&n.push(e)}),n)},E.reject=function(e,t,i){return E.filter(e,function(e,n,o){return!t.call(i,e,n,o)},i)},E.every=E.all=function(e,t,i){t||(t=E.identity);var n=!0;return null==e?n:y&&e.every===y?e.every(t,i):(S(e,function(e,r,s){return(n=n&&t.call(i,e,r,s))?void 0:o}),!!n)};var C=E.some=E.any=function(e,t,i){t||(t=E.identity);var n=!1;return null==e?n:b&&e.some===b?e.some(t,i):(S(e,function(e,r,s){return n||(n=t.call(i,e,r,s))?o:void 0}),!!n)};E.contains=E.include=function(e,t){return null==e?!1:w&&e.indexOf===w?-1!=e.indexOf(t):C(e,function(e){return e===t})},E.invoke=function(e,t){var i=h.call(arguments,2),n=E.isFunction(t);return E.map(e,function(e){return(n?t:e[t]).apply(e,i)})},E.pluck=function(e,t){return E.map(e,E.property(t))},E.where=function(e,t){return E.filter(e,E.matches(t))},E.findWhere=function(e,t){return E.find(e,E.matches(t))},E.max=function(e,t,i){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var n=-1/0,o=-1/0;return S(e,function(e,r,s){var a=t?t.call(i,e,r,s):e;a>o&&(n=e,o=a)}),n},E.min=function(e,t,i){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var n=1/0,o=1/0;return S(e,function(e,r,s){var a=t?t.call(i,e,r,s):e;o>a&&(n=e,o=a)}),n},E.shuffle=function(e){var t,i=0,n=[];return S(e,function(e){t=E.random(i++),n[i-1]=n[t],n[t]=e}),n},E.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=E.values(e)),e[E.random(e.length-1)]):E.shuffle(e).slice(0,Math.max(0,t))};var A=function(e){return null==e?E.identity:E.isFunction(e)?e:E.property(e)};E.sortBy=function(e,t,i){return t=A(t),E.pluck(E.map(e,function(e,n,o){return{value:e,index:n,criteria:t.call(i,e,n,o)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var j=function(e){return function(t,i,n){var o={};return i=A(i),S(t,function(r,s){var a=i.call(n,r,s,t);e(o,a,r)}),o}};E.groupBy=j(function(e,t,i){E.has(e,t)?e[t].push(i):e[t]=[i]}),E.indexBy=j(function(e,t,i){e[t]=i}),E.countBy=j(function(e,t){E.has(e,t)?e[t]++:e[t]=1}),E.sortedIndex=function(e,t,i,n){i=A(i);for(var o=i.call(n,t),r=0,s=e.length;s>r;){var a=r+s>>>1;i.call(n,e[a])<o?r=a+1:s=a}return r},E.toArray=function(e){return e?E.isArray(e)?h.call(e):e.length===+e.length?E.map(e,E.identity):E.values(e):[]},E.size=function(e){return null==e?0:e.length===+e.length?e.length:E.keys(e).length},E.first=E.head=E.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:h.call(e,0,t)},E.initial=function(e,t,i){return h.call(e,0,e.length-(null==t||i?1:t))},E.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:h.call(e,Math.max(e.length-t,0))},E.rest=E.tail=E.drop=function(e,t,i){return h.call(e,null==t||i?1:t)},E.compact=function(e){return E.filter(e,E.identity)};var L=function(e,t,i){return t&&E.every(e,E.isArray)?d.apply(i,e):(S(e,function(e){E.isArray(e)||E.isArguments(e)?t?l.apply(i,e):L(e,t,i):i.push(e)}),i)};E.flatten=function(e,t){return L(e,t,[])},E.without=function(e){return E.difference(e,h.call(arguments,1))},E.partition=function(e,t){var i=[],n=[];return S(e,function(e){(t(e)?i:n).push(e)}),[i,n]},E.uniq=E.unique=function(e,t,i,n){E.isFunction(t)&&(n=i,i=t,t=!1);var o=i?E.map(e,i,n):e,r=[],s=[];return S(o,function(i,n){(t?n&&s[s.length-1]===i:E.contains(s,i))||(s.push(i),r.push(e[n]))}),r},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(e){var t=h.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.contains(t,e)})})},E.difference=function(e){var t=d.apply(r,h.call(arguments,1));return E.filter(e,function(e){return!E.contains(t,e)})},E.zip=function(){for(var e=E.max(E.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=E.pluck(arguments,""+i);return t},E.object=function(e,t){if(null==e)return{};for(var i={},n=0,o=e.length;o>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},E.indexOf=function(e,t,i){if(null==e)return-1;var n=0,o=e.length;if(i){if("number"!=typeof i)return n=E.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,o+i):i}if(w&&e.indexOf===w)return e.indexOf(t,i);for(;o>n;n++)if(e[n]===t)return n;return-1},E.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(x&&e.lastIndexOf===x)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var o=n?i:e.length;o--;)if(e[o]===t)return o;return-1},E.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=0,r=new Array(n);n>o;)r[o++]=e,e+=i;return r};var P=function(){};E.bind=function(e,t){var i,n;if(M&&e.bind===M)return M.apply(e,h.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return i=h.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(h.call(arguments)));P.prototype=e.prototype;var o=new P;P.prototype=null;var r=e.apply(o,i.concat(h.call(arguments)));return Object(r)===r?r:o}},E.partial=function(e){var t=h.call(arguments,1);return function(){for(var i=0,n=t.slice(),o=0,r=n.length;r>o;o++)n[o]===E&&(n[o]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},E.bindAll=function(e){var t=h.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return S(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var i={};return t||(t=E.identity),function(){var n=t.apply(this,arguments);return E.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},E.delay=function(e,t){var i=h.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(h.call(arguments,1)))},E.throttle=function(e,t,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:E.now(),s=null,r=e.apply(n,o),n=o=null};return function(){var h=E.now();a||i.leading!==!1||(a=h);var d=t-(h-a);return n=this,o=arguments,0>=d?(clearTimeout(s),s=null,a=h,r=e.apply(n,o),n=o=null):s||i.trailing===!1||(s=setTimeout(l,d)),r}},E.debounce=function(e,t,i){var n,o,r,s,a,l=function(){var h=E.now()-s;t>h?n=setTimeout(l,t-h):(n=null,i||(a=e.apply(r,o),r=o=null))};return function(){r=this,o=arguments,s=E.now();var h=i&&!n;return n||(n=setTimeout(l,t)),h&&(a=e.apply(r,o),r=o=null),a}},E.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},E.wrap=function(e,t){return E.partial(t,e)},E.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},E.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},E.keys=function(e){if(!E.isObject(e))return[];if(k)return k(e);var t=[];for(var i in e)E.has(e,i)&&t.push(i);return t},E.values=function(e){for(var t=E.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=e[t[o]];return n},E.pairs=function(e){for(var t=E.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=[t[o],e[t[o]]];return n},E.invert=function(e){for(var t={},i=E.keys(e),n=0,o=i.length;o>n;n++)t[e[i[n]]]=i[n];return t},E.functions=E.methods=function(e){var t=[];for(var i in e)E.isFunction(e[i])&&t.push(i);return t.sort()},E.extend=function(e){return S(h.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},E.pick=function(e){var t={},i=d.apply(r,h.call(arguments,1));return S(i,function(i){i in e&&(t[i]=e[i])}),t},E.omit=function(e){var t={},i=d.apply(r,h.call(arguments,1));for(var n in e)E.contains(i,n)||(t[n]=e[n]);return t},E.defaults=function(e){return S(h.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e};var R=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof E&&(e=e._wrapped),t instanceof E&&(t=t._wrapped);var o=c.call(e);if(o!=c.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=i.length;r--;)if(i[r]==e)return n[r]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),n.push(t);var l=0,h=!0;if("[object Array]"==o){if(l=e.length,h=l==t.length)for(;l--&&(h=R(e[l],t[l],i,n)););}else{for(var d in e)if(E.has(e,d)&&(l++,!(h=E.has(t,d)&&R(e[d],t[d],i,n))))break;if(h){for(d in t)if(E.has(t,d)&&!l--)break;h=!l}}return i.pop(),n.pop(),h};E.isEqual=function(e,t){return R(e,t,[],[])},E.isEmpty=function(e){if(null==e)return!0;if(E.isArray(e)||E.isString(e))return 0===e.length;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!(!e||1!==e.nodeType)},E.isArray=_||function(e){return"[object Array]"==c.call(e)},E.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){E["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),E.isArguments(arguments)||(E.isArguments=function(e){return!(!e||!E.has(e,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(e){return"function"==typeof e}),E.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},E.isNaN=function(e){return E.isNumber(e)&&e!=+e},E.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},E.isNull=function(e){return null===e},E.isUndefined=function(e){return void 0===e},E.has=function(e,t){return u.call(e,t)},E.noConflict=function(){return e._=n,this},E.identity=function(e){return e},E.constant=function(e){return function(){return e}},E.property=function(e){return function(t){return t[e]}},E.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},E.times=function(e,t,i){for(var n=Array(Math.max(0,e)),o=0;e>o;o++)n[o]=t.call(i,o);return n},E.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},E.now=Date.now||function(){return(new Date).getTime()};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=E.invert(D.escape);var F={escape:new RegExp("["+E.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(D.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(e){E[e]=function(t){return null==t?"":(""+t).replace(F[e],function(t){return D[e][t]})}}),E.result=function(e,t){if(null==e)return void 0;var i=e[t];return E.isFunction(i)?i.call(e):i},E.mixin=function(e){S(E.functions(e),function(t){var i=E[t]=e[t];E.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),O.call(this,i.apply(E,e))}})};var z=0;E.uniqueId=function(e){var t=++z+"";return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(e,t,i){var n;i=E.defaults({},i,E.templateSettings);var o=new RegExp([(i.escape||B).source,(i.interpolate||B).source,(i.evaluate||B).source].join("|")+"|$","g"),r=0,s="__p+='";e.replace(o,function(t,i,n,o,a){return s+=e.slice(r,a).replace(U,function(e){return"\\"+V[e]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+t.length,t}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(t)return n(t,E);var l=function(e){return n.call(this,e,E)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},E.chain=function(e){return E(e).chain()};var O=function(e){return this._chain?E(e).chain():e};E.mixin(E),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];E.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],O.call(this,i)}}),S(["concat","join","slice"],function(e){var t=r[e];E.prototype[e]=function(){return O.call(this,t.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return E})}).call(this)},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/index.js":[function(e,t){function i(e,t){function i(){4===f.readyState&&k()}function o(){var e=null;if(f.response?e=f.response:"text"!==f.responseType&&f.responseType||(e=f.responseText||f.responseXML),_)try{e=JSON.parse(e)}catch(t){}return e}function d(){return 1223===f.status?204:f.status}function c(e,t){var i=null;if(0===e||e>=400&&600>e){var n=("string"==typeof t?t:!1)||a[String(e).charAt(0)];i=new Error(n),i.statusCode=e}return i}function u(){var e=d(),i=o(),n=c(e,i),r={body:i,statusCode:e,statusText:f.statusText,raw:f};r.headers=f.getAllResponseHeaders?s(f.getAllResponseHeaders()):{},t(n,r,r.body)}function p(){var e=d(),i=c(e);f.status=f.statusCode=e,f.body=o(),f.headers=s(f.getAllResponseHeaders()),t(i,f,f.body)}function m(e){t(e,f)}"string"==typeof e&&(e={uri:e}),e=e||{},t=r(t);var f=e.xhr||null;f||(f=e.cors||e.useXDR?new h:new l);var g,v=f.url=e.uri||e.url,y=f.method=e.method||"GET",b=e.body||e.data,w=f.headers=e.headers||{},x=!!e.sync,_=!1,k=e.response?u:p;if("json"in e&&(_=!0,w.Accept="application/json","GET"!==y&&"HEAD"!==y&&(w["Content-Type"]="application/json",b=JSON.stringify(e.json))),f.onreadystatechange=i,f.onload=k,f.onerror=m,f.onprogress=function(){},f.ontimeout=n,f.open(y,v,!x),(e.withCredentials||e.cors&&e.withCredentials!==!1)&&(f.withCredentials=!0),x||(f.timeout="timeout"in e?e.timeout:5e3),f.setRequestHeader)for(g in w)w.hasOwnProperty(g)&&f.setRequestHeader(g,w[g]);else if(e.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(b),f}function n(){}var o=e("global/window"),r=e("once"),s=e("parse-headers"),a={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=o.XMLHttpRequest||n,h="withCredentials"in new l?l:o.XDomainRequest;t.exports=i},{"global/window":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/global/window.js",once:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/once/once.js","parse-headers":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/parse-headers.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/global/window.js":[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/once/once.js":[function(e,t){function i(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=i,i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0})})},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js":[function(e,t){function i(e,t,i){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this),"[object Array]"===a.call(e)?n(e,t,i):"string"==typeof e?o(e,t,i):r(e,t,i)}function n(e,t,i){for(var n=0,o=e.length;o>n;n++)l.call(e,n)&&t.call(i,e[n],n,e)}function o(e,t,i){for(var n=0,o=e.length;o>n;n++)t.call(i,e.charAt(n),n,e)}function r(e,t,i){for(var n in e)l.call(e,n)&&t.call(i,e[n],n,e)}var s=e("is-function");t.exports=i;var a=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js":[function(e,t){function i(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=i;var n=Object.prototype.toString},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js":[function(e,t,i){function n(e){return e.replace(/^\s*|\s*$/g,"")}i=t.exports=n,i.left=function(e){return e.replace(/^\s*/,"")},i.right=function(e){return e.replace(/\s*$/,"")}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/parse-headers.js":[function(e,t){var i=e("trim"),n=e("for-each"),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return n(i(e).split("\n"),function(e){var n=e.indexOf(":"),r=i(e.slice(0,n)).toLowerCase(),s=i(e.slice(n+1));"undefined"==typeof t[r]?t[r]=s:o(t[r])?t[r].push(s):t[r]=[t[r],s]}),t}},{"for-each":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js",trim:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/ampersand-rest-collection.js":[function(e,t){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-rest-collection"]=window.ampersand["ampersand-rest-collection"]||[],window.ampersand["ampersand-rest-collection"].push("2.0.4"));var i=e("ampersand-collection"),n=e("ampersand-collection-underscore-mixin"),o=e("ampersand-collection-rest-mixin");t.exports=i.extend(n,o)},{"ampersand-collection":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/ampersand-collection.js","ampersand-collection-rest-mixin":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/ampersand-collection-rest-mixin.js","ampersand-collection-underscore-mixin":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-underscore-mixin/ampersand-collection-underscore-mixin.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/ampersand-collection-rest-mixin.js":[function(e,t){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-collection-rest-mixin"]=window.ampersand["ampersand-collection-rest-mixin"]||[],window.ampersand["ampersand-collection-rest-mixin"].push("3.0.1"));var i=e("ampersand-sync"),n=e("extend-object"),o=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};t.exports={fetch:function(e){e=e?n({},e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},o(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n({},t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,o=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),o&&o(e,n,t)},e.save(null,t),e},sync:function(){return i.apply(this,arguments)},getOrFetch:function(e,t,i){function n(){var t=o.get(e);t?i&&i(null,t):i(new Error("not found"))}3!==arguments.length&&(i=t,t={});var o=this,r=this.get(e);return r?i(null,r):void(t.all?this.fetch({success:n,error:n}):this.fetchById(e,i))},fetchById:function(e,t){var i=this,n={};n[this.model.prototype.idAttribute]=e;var o=new this.model(n,{collection:this});o.fetch({success:function(){i.add(o),t&&t(null,o)},error:function(){delete o.collection,t&&t(Error("not found"))}})}}},{"ampersand-sync":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/ampersand-sync.js","extend-object":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/extend-object/extend-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/ampersand-sync.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/ampersand-sync.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/ampersand-sync.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/ampersand-sync.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/qs/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/qs/lib/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/qs/lib/parse.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/parse.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/parse.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/parse.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/qs/lib/stringify.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/stringify.js")
},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/stringify.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/stringify.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/qs/lib/utils.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/utils.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/utils.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/qs/lib/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/underscore/underscore.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/xhr/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/xhr/node_modules/global/window.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/global/window.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/global/window.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/global/window.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/xhr/node_modules/once/once.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/once/once.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/once/once.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/once/once.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/parse-headers.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/parse-headers.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/parse-headers.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/xhr/node_modules/parse-headers/parse-headers.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-rest-mixin/node_modules/extend-object/extend-object.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-underscore-mixin/ampersand-collection-underscore-mixin.js":[function(e,t){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-collection-underscore-mixin"]=window.ampersand["ampersand-collection-underscore-mixin"]||[],window.ampersand["ampersand-collection-underscore-mixin"].push("1.0.3"));var i=e("underscore"),n=[].slice,o={},r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];i.each(r,function(e){i[e]&&(o[e]=function(){var t=n.call(arguments);return t.unshift(this.models),i[e].apply(i,t)})});var s=["groupBy","countBy","sortBy","indexBy"];i.each(s,function(e){i[e]&&(o[e]=function(t,n){var o=i.isFunction(t)?t:function(e){return e.get?e.get(t):e[t]};return i[e](this.models,o,n)})}),o.where=function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){var i;for(var n in e)if(i=t.get?t.get(n):t[n],e[n]!==i)return!1;return!0})},o.findWhere=function(e){return this.where(e,!0)},o.pluck=function(e){return i.invoke(this.models,"get",e)},t.exports=o},{underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js":[function(e,t){function i(e){if(e=e||{},"string"!=typeof e.name)throw new Error("SelectView requires a name property.");if(this.name=e.name,!Array.isArray(e.options)&&!e.options.isCollection)throw new Error("SelectView requires select options.");this.options=e.options,this.options.isCollection&&(this.idAttribute=e.idAttribute||this.options.mainIndex||"id",this.textAttribute=e.textAttribute||"text"),this.el=e.el,this.value=null,this.label=e.label||this.name,this.parent=e.parent,this.template=e.template||l,this.unselectedText=e.unselectedText,this.yieldModel=e.yieldModel===!1?!1:!0,this.required=e.required||!1,this.validClass=e.validClass||"input-valid",this.invalidClass=e.invalidClass||"input-invalid",this.requiredMessage=e.requiredMessage||"Selection required",this.onChange=this.onChange.bind(this),this.render(),this.setValue(e.value)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-select-view"]=window.ampersand["ampersand-select-view"]||[],window.ampersand["ampersand-select-view"].push("2.3.0"));var n=e("domify"),o=e("ampersand-dom"),r=e("matches-selector"),s=e("ampersand-events"),a=e("amp-extend"),l=['<label class="select">','<span data-hook="label"></span>',"<select></select>",'<span data-hook="message-container" class="message message-below message-error">','<p data-hook="message-text"></p>',"</span>","</label>"].join("\n");a(i.prototype,s),i.prototype.render=function(){if(!this.rendered){this.el||(this.el=n(this.template));var e=this.el.querySelector("[data-hook~=label]");e&&(e.textContent=this.label),this.select=this.el.querySelector("select"),r(this.el,"select")&&(this.select=this.el),this.select&&this.select.setAttribute("name",this.name),this.bindDOMEvents(),this.renderOptions(),this.updateSelectedOption(),this.options.isCollection&&this.options.on("add remove reset",function(){this.renderOptions(),this.updateSelectedOption()}.bind(this)),this.rendered=!0}},i.prototype.onChange=function(){var e=this.select.options[this.select.selectedIndex].value;this.options.isCollection&&this.yieldModel&&(e=this.findModelForId(e)),this.setValue(e)},i.prototype.findModelForId=function(e){return this.options.filter(function(t){return t[this.idAttribute]?t[this.idAttribute]==e:!1}.bind(this))[0]},i.prototype.bindDOMEvents=function(){this.el.addEventListener("change",this.onChange,!1)},i.prototype.renderOptions=function(){this.select&&(this.select.innerHTML="",this.unselectedText&&this.select.appendChild(this.createOption(null,this.unselectedText)),this.options.forEach(function(e){var e;Array.isArray(e)?e=this.createOption(e[0],e[1]):(this.options.isCollection&&(this.idAttribute&&e[this.idAttribute]&&(value=e[this.idAttribute]),this.textAttribute&&e[this.textAttribute]&&(text=e[this.textAttribute])),e=this.createOption(value,text,e)),this.select.appendChild(e)}.bind(this)))},i.prototype.updateSelectedOption=function(){var e=this.value;if(this.select){if(!e)return void(this.select.selectedIndex=0);if(this.options.isCollection&&this.yieldModel&&(e=e&&e[this.idAttribute]),e)for(var t=this.select.options.length;t--;t)if(this.select.options[t].value===e.toString())return void(this.select.selectedIndex=t);this.select.selectedIndex=0}},i.prototype.remove=function(){this.el&&this.el.parentNode.removeChild(this.el),this.el.removeEventListener("change",this.onChange,!1)},i.prototype.setValue=function(e){if(e!==this.value){if(this.options.isCollection){var t;t=-1===this.options.indexOf(e)?this.findModelForId(e):e,e=this.yieldModel?t:t?t[this.idAttribute]:void 0}this.value=e,this.validate(),this.updateSelectedOption(),this.parent&&this.parent.update(this)}},i.prototype.validate=function(){return this.valid=this.options.some(function(e){return this.options.isCollection?this.yieldModel?this.options.indexOf(this.value)>-1:!!this.findModelForId(this.value):Array.isArray(e)&&2===e.length?e[0]===this.value:e===this.value}.bind(this)),!this.valid&&this.required?this.setMessage(this.requiredMessage):this.setMessage(),this.valid},i.prototype.setMessage=function(e){var t=this.el.querySelector("[data-hook~=message-container]"),i=this.el.querySelector("[data-hook~=message-text]");t&&i&&(e?(o.show(t),i.textContent=e,o.addClass(this.el,this.invalidClass),o.removeClass(this.el,this.validClass)):(o.hide(t),i.textContent="",o.addClass(this.el,this.validClass),o.removeClass(this.el,this.invalidClass)))},i.prototype.createOption=function(e,t,i){var n=document.createElement("option");return(null===e||void 0===e)&&(e=""),n.innerHTML=t,n.value=e,i&&this.listenTo(i,"change:"+this.textAttribute,_.bind(_.partial(function(e){n.innerHTML=e[this.textAttribute]},i,n),this)),n},t.exports=i},{"amp-extend":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/amp-extend/extend.js","ampersand-dom":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-dom/ampersand-dom.js","ampersand-events":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-events/ampersand-events.js",domify:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/domify/index.js","matches-selector":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/matches-selector/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/ampersand-state.js":[function(e,t){function i(e,t){t||(t={}),this.cid||(this.cid=s.uniqueId("state")),this._events={},this._values={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new l,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,s.extend({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),t.init!==!1&&this.initialize.apply(this,arguments)}function n(e,t,i,n){var o,r,a=e._definition[t]={};if(s.isString(i))o=e._ensureValidType(i),o&&(a.type=o);else{if(s.isArray(i)&&(r=i,i={type:r[0],required:r[1],"default":r[2]}),o=e._ensureValidType(i.type),o&&(a.type=o),i.required&&(a.required=!0),i["default"]&&"object"==typeof i["default"])throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");a["default"]=i["default"],a.allowNull=i.allowNull?i.allowNull:!1,i.setOnce&&(a.setOnce=!0),a.required&&s.isUndefined(a["default"])&&!a.setOnce&&(a["default"]=e._getDefaultForType(o)),a.test=i.test,a.values=i.values}return n&&(a.session=!0),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){var e=this._values[t],i=this._dataTypes[a.type];return"undefined"!=typeof e?(i&&i.get&&(e=i.get(e)),e):(e=s.result(a,"default"),this._values[t]=e,e)}}),a}function o(e,t,i){var n=e._derived[t]={fn:s.isFunction(i)?i:i.fn,cache:i.cache!==!1,depList:i.deps||[]};s.each(n.depList,function(i){e._deps[i]=s(e._deps[i]||[]).union([t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError('"'+t+"\" is a derived property, it can't be set directly.")}})}function r(e){var t,i=this,r=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},s.extend(t,i);var a=function(){this.constructor=t};a.prototype=i.prototype,t.prototype=new a,t.prototype._derived=s.extend({},i.prototype._derived),t.prototype._deps=s.extend({},i.prototype._deps),t.prototype._definition=s.extend({},i.prototype._definition),t.prototype._collections=s.extend({},i.prototype._collections),t.prototype._children=s.extend({},i.prototype._children),t.prototype._dataTypes=s.extend({},i.prototype._dataTypes||c),e&&r.forEach(function(e){var i=["dataTypes","props","session","derived","collections","children"];e.dataTypes&&s.each(e.dataTypes,function(e,i){t.prototype._dataTypes[i]=e}),e.props&&s.each(e.props,function(e,i){n(t.prototype,i,e)}),e.session&&s.each(e.session,function(e,i){n(t.prototype,i,e,!0)}),e.derived&&s.each(e.derived,function(e,i){o(t.prototype,i,e)}),e.collections&&s.each(e.collections,function(e,i){t.prototype._collections[i]=e}),e.children&&s.each(e.children,function(e,i){t.prototype._children[i]=e}),s.extend(t.prototype,s.omit(e,i))});Object.prototype.toString;return t.__super__=i.prototype,t}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-state"]=window.ampersand["ampersand-state"]||[],window.ampersand["ampersand-state"].push("4.4.4"));var s=e("underscore"),a=e("backbone-events-standalone"),l=e("key-tree-store"),h=e("array-next"),d=/^change:/;s.extend(i.prototype,a,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return s.escape(this.get(e))},isValid:function(e){return this._validate({},s.extend(e||{},{validate:!0}))},parse:function(e){return e},serialize:function(){var e=this.getAttributes({props:!0},!0);return s.each(this._children,function(t,i){e[i]=this[i].serialize()},this),s.each(this._collections,function(t,i){e[i]=this[i].serialize()},this),e},set:function(e,t,i){var n,o,r,a,l,h,d,c,u,p,m,f,g,v,y,b,w=this,x=this.extraProperties;if(s.isObject(e)||null===e?(u=e,i=t):(u={},u[e]=t),i=i||{},!this._validate(u,i))return!1;f=i.unset,m=i.silent,v=i.initial,o=[],n=this._changing,this._changing=!0,n||(this._previousAttributes=this.attributes,this._changed={});for(c in u){if(a=u[c],r=typeof a,g=this._values[c],l=this._definition[c],!l){if(this._children[c]||this._collections[c]){this[c].set(a,i);continue}if("ignore"===x)continue;if("reject"===x)throw new TypeError('No "'+c+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===x)l=this._createPropertyDefinition(c,"any");else if(x)throw new TypeError('Invalid value for extraProperties: "'+x+'"')}if(b=this._getCompareForType(l.type),p=this._dataTypes[l.type],p&&p.set&&(h=p.set(a),a=h.val,r=h.type),l.test&&(d=l.test.call(this,a,r)))throw new TypeError("Property '"+c+"' failed validation with error: "+d);if(s.isUndefined(a)&&l.required)throw new TypeError("Required property '"+c+"' must be of type "+l.type+". Tried to set "+a);if(s.isNull(a)&&l.required&&!l.allowNull)throw new TypeError("Property '"+c+"' must be of type "+l.type+" (cannot be null). Tried to set "+a);if(l.type&&"any"!==l.type&&l.type!==r&&!s.isNull(a)&&!s.isUndefined(a))throw new TypeError("Property '"+c+"' must be of type "+l.type+". Tried to set "+a);if(l.values&&!s.contains(l.values,a))throw new TypeError("Property '"+c+"' must be one of values: "+l.values.join(", ")+". Tried to set "+a);if(y=!b(g,a,c),l.setOnce&&void 0!==g&&y&&!v)throw new TypeError("Property '"+c+"' can only be set once.");y?(o.push({prev:g,val:a,key:c}),w._changed[c]=a):delete w._changed[c]}if(s.each(o,function(e){w._previousAttributes[e.key]=e.prev,f?delete w._values[e.key]:w._values[e.key]=e.val}),!m&&o.length&&(w._pending=!0),m||s.each(o,function(e){w.trigger("change:"+e.key,w,e.val,i)}),n)return this;if(!m)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t=this._definition[e];if("boolean"===t.type)this[e]=!this[e];else{if(!t||!t.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=h(t.values,this[e])}return this},previousAttributes:function(){return s.clone(this._previousAttributes)},hasChanged:function(e){return null==e?!s.isEmpty(this._changed):s.has(this._changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this._changed):!1;var t,i,n,o=!1,r=this._changing?this._previousAttributes:this.attributes;for(var a in e)i=this._definition[a],i&&(n=this._getCompareForType(i.type),n(r[a],t=e[a])||((o||(o={}))[a]=t));return o},toJSON:function(){return this.serialize()},unset:function(e,t){{var i,n=this._definition[e];n.type}return n.required?(i=s.result(n,"default"),this.set(e,i,t)):this.set(e,i,s.extend({},t,{unset:!0}))},clear:function(e){var t=this;return s.each(s.keys(this.attributes),function(i){t.unset(i,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t["default"]},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?s.bind(t.compare,this):s.isEqual},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=s.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,s.extend(t||{},{validationError:i})),!1):!0},_createPropertyDefinition:function(e,t,i){return n(this,e,t,i)},_ensureValidType:function(e){return s.contains(["string","number","boolean","array","object","date","any"].concat(s.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e||(e={}),s.defaults(e,{session:!1,props:!1,derived:!1});var i,n,o,r={};for(n in this._definition)o=this._definition[n],(e.session&&o.session||e.props&&!o.session)&&(i=t?this._values[n]:this[n],"undefined"==typeof i&&(i=s.result(o,"default")),"undefined"!=typeof i&&(r[n]=i));if(e.derived)for(n in this._derived)r[n]=this[n];return r},_initDerived:function(){var e=this;s.each(this._derived,function(t,i){var n=e._derived[i];n.deps=n.depList;var o=function(t){t=t||{};var o=n.fn.call(e);e._cache[i]===o&&n.cache||(n.cache&&(e._previousAttributes[i]=e._cache[i]),e._cache[i]=o,e.trigger("change:"+i,e,e._cache[i]))};n.deps.forEach(function(t){e._keyTree.add(t,o)})}),this.on("all",function(t){d.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?((t||!this._cache.hasOwnProperty(e))&&(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this[e]=new this._collections[e](null,{parent:this})},_initChildren:function(){var e;if(this._children)for(e in this._children)this[e]=new this._children[e]({},{parent:this}),this.listenTo(this[e],"all",this._getEventBubblingHandler(e))},_getEventBubblingHandler:function(e){return s.bind(function(t,i,n){d.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],i,n):"change"===t&&this.trigger("change",this)},this)},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&"undefined"==typeof e[t])return!1;return!0}}),Object.defineProperties(i.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var c={string:{"default":function(){return""}},date:{set:function(e){var t;if(s.isDate(e))t="date",e=e.valueOf();else try{var i=new Date(e).valueOf();if(isNaN(i)&&(i=new Date(parseInt(e,10)).valueOf(),isNaN(i)))throw TypeError;e=i,t="date"}catch(n){t=typeof e}return{val:e,type:t}},get:function(e){return new Date(e)},"default":function(){return new Date}},array:{set:function(e){return{val:e,type:s.isArray(e)?"array":typeof e}},"default":function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&s.isUndefined(e)&&(e=null,t="object"),{val:e,type:t}},"default":function(){return{}}},state:{set:function(e){var t=e instanceof i||e&&e.isState;return t?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t,i){var n=e===t;return n||(e&&this.stopListening(e),null!=t&&this.listenTo(t,"all",this._getEventBubblingHandler(i))),n}}};i.extend=r,t.exports=i},{"array-next":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/node_modules/array-next/array-next.js","backbone-events-standalone":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/node_modules/backbone-events-standalone/index.js","key-tree-store":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/node_modules/key-tree-store/key-tree-store.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/node_modules/array-next/array-next.js":[function(e,t){t.exports=function(e,t){var i=e.length,n=e.indexOf(t)+1;return n>i-1&&(n=0),e[n]}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/node_modules/backbone-events-standalone/backbone-events-standalone.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/node_modules/backbone-events-standalone/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/node_modules/key-tree-store/key-tree-store.js":[function(e,t){function i(){this.storage={}}i.prototype.add=function(e,t){var i=this.storage[e]||(this.storage[e]=[]);i.push(t)},i.prototype.remove=function(e){var t,i;for(t in this.storage)i=this.storage[t],i.some(function(t,n){return t===e?(i.splice(n,1),!0):void 0})},i.prototype.get=function(e){var t,i=[];for(t in this.storage)(e===t||0===t.indexOf(e+"."))&&(i=i.concat(this.storage[t]));return i},t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/ampersand-subcollection.js":[function(e,t){function i(e,t){this.collection=e,this.models=[],this.configure(t||{},!0),this.listenTo(this.collection,"all",this._onCollectionEvent)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-subcollection"]=window.ampersand["ampersand-subcollection"]||[],window.ampersand["ampersand-subcollection"].push("2.0.1"));var n=e("underscore"),o=e("backbone-events-standalone"),r=e("ampersand-class-extend"),s=e("ampersand-collection-underscore-mixin"),a=Array.prototype.slice;n.extend(i.prototype,o,s,{addFilter:function(e){this.swapFilters([e],[])},removeFilter:function(e){this.swapFilters([],[e])},clearFilters:function(){this._resetFilters(),this._runFilters()},swapFilters:function(e,t){var i=this;t?n.isArray(t)||(t=[t]):t=this._filters,e?n.isArray(e)||(e=[e]):e=[],t.forEach(function(e){i._removeFilter(e)}),e.forEach(function(e){i._addFilter(e)}),this._runFilters()},configure:function(e,t){t&&this._resetFilters(t),this._parseSpec(e),this._runFilters()},at:function(e){return this.models[e]},get:function(e,t){var i=this.collection.get(e,t);return i&&this.contains(i)?i:void 0},_removeFilter:function(e){var t=this._filters.indexOf(e);-1!==t&&this._filters.splice(t,1)},reset:function(){this.configure({},!0)},_resetFilters:function(e){this._filters=[],this._watched=[],this.limit=void 0,this.offset=void 0,e&&(this.comparator=void 0)},_addFilter:function(e){this._filters.push(e)},_watch:function(e){this._watched=n.union(this._watched,n.isArray(e)?e:[e])},_unwatch:function(e){this._watched=n.difference(this._watched,n.isArray(e)?e:[e])},_parseSpec:function(e){e.watched&&this._watch(e.watched),e.comparator&&(this.comparator=e.comparator),e.where&&(n.each(e.where,function(e,t){this._addFilter(function(i){return(i.get?i.get(t):i[t])===e})},this),this._watch(n.keys(e.where))),e.hasOwnProperty("limit")&&(this.limit=e.limit),e.hasOwnProperty("offset")&&(this.offset=e.offset),e.filter&&this._addFilter(e.filter),e.filters&&e.filters.forEach(this._addFilter,this)},_runFilters:function(){var e,t,i,o=a.call(this.models),r=a.call(this.collection.models),s=this.offset||0;e=this._filters.length?n.reduce(this._filters,function(e,t){return e.filter(t)},r):a.call(r),this.comparator&&(e=n.sortBy(e,this.comparator)),(this.limit||this.offset)&&(this.filtered=e,e=e.slice(s,this.limit+s)),t=n.difference(e,o),i=n.difference(o,e),this.models=e,n.each(i,function(e){this.trigger("remove",e,this)},this),n.each(t,function(e){this.trigger("add",e,this)},this),n.isEqual(o,e)||this.trigger("sort",this)},_onCollectionEvent:function(e,t){var i=e.split(":")[1];(i===this.comparator||n.contains(this._watched,i)||n.contains(["add","remove","reset","sync"],e))&&this._runFilters(),!n.contains(["add","remove"],e)&&this.contains(t)&&this.trigger.apply(this,arguments)}}),Object.defineProperty(i.prototype,"length",{get:function(){return this.models.length}}),Object.defineProperty(i.prototype,"isCollection",{get:function(){return!0}}),i.extend=r,t.exports=i},{"ampersand-class-extend":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/ampersand-class-extend/ampersand-class-extend.js","ampersand-collection-underscore-mixin":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/ampersand-collection-underscore-mixin/ampersand-collection-underscore-mixin.js","backbone-events-standalone":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/backbone-events-standalone/index.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/ampersand-class-extend/ampersand-class-extend.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/ampersand-class-extend/node_modules/extend-object/extend-object.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js")
},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/ampersand-collection-underscore-mixin/ampersand-collection-underscore-mixin.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-underscore-mixin/ampersand-collection-underscore-mixin.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-underscore-mixin/ampersand-collection-underscore-mixin.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-rest-collection/node_modules/ampersand-collection-underscore-mixin/ampersand-collection-underscore-mixin.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/backbone-events-standalone/backbone-events-standalone.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/backbone-events-standalone.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-subcollection/node_modules/backbone-events-standalone/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js":[function(e,t){function i(e){this.cid=s.uniqueId("view"),e||(e={});var t=e.parent;delete e.parent,c.call(this,e,{init:!1,parent:t}),this.on("change:el",this._handleElementChange,this),this._parsedBindings=h(this.bindings,this),this._initializeBindings(),e.el&&!this.autoRender&&this._handleElementChange(),this._initializeSubviews(),this.template=e.template||this.template,this.initialize.apply(this,arguments),this.set(s.pick(e,u)),this.autoRender&&this.template&&this.render()}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-view"]=window.ampersand["ampersand-view"]||[],window.ampersand["ampersand-view"].push("7.2.0"));var n=e("ampersand-state"),o=e("ampersand-collection-view"),r=e("domify"),s=e("underscore"),a=e("events-mixin"),l=e("matches-selector"),h=e("ampersand-dom-bindings"),d=e("get-object-path"),c=n.extend({dataTypes:{element:{set:function(e){return{val:e,type:e instanceof Element?"element":typeof e}},compare:function(e,t){return e===t}},collection:{set:function(e){return{val:e,type:e&&e.isCollection?"collection":typeof e}},compare:function(e,t){return e===t}}},props:{model:"state",el:"element",collection:"collection"},derived:{rendered:{deps:["el"],fn:function(){return!!this.el}},hasData:{deps:["model"],fn:function(){return!!this.model}}}}),u=["model","collection","el"];i.prototype=Object.create(c.prototype),s.extend(i.prototype,{query:function(e){return e?"string"==typeof e?l(this.el,e)?this.el:this.el.querySelector(e)||void 0:e:this.el},queryAll:function(e){var t=[];return this.el?""===e?[this.el]:(l(this.el,e)&&t.push(this.el),t.concat(Array.prototype.slice.call(this.el.querySelectorAll(e)))):t},queryByHook:function(e){return this.query('[data-hook~="'+e+'"]')},initialize:function(){},render:function(){return this.renderWithTemplate(this),this},remove:function(){var e=this._parsedBindings;return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this._subviews&&s.chain(this._subviews).flatten().invoke("remove"),this.stopListening(),s.each(e,function(t,i){s.each(t,function(t,n){delete e[i][n]}),delete e[i]}),this.trigger("remove",this),this},_handleElementChange:function(){return this.eventManager&&this.eventManager.unbind(),this.eventManager=a(this.el,this),this.delegateEvents(),this._applyBindingsForKey(),this},delegateEvents:function(e){if(!e&&!(e=s.result(this,"events")))return this;this.undelegateEvents();for(var t in e)this.eventManager.bind(t,e[t]);return this},undelegateEvents:function(){return this.eventManager.unbind(),this},registerSubview:function(e){return this._subviews||(this._subviews=[]),this._subviews.push(e),e.el&&(e.parent=this),e},renderSubview:function(e,t){return"string"==typeof t&&(t=this.query(t)),this.registerSubview(e),e.render(),(t||this.el).appendChild(e.el),e},_applyBindingsForKey:function(e){if(this.el){var t,i=this._parsedBindings.getGrouped(e);for(t in i)i[t].forEach(function(e){e(this.el,d(this,t),s.last(t.split(".")))},this)}},_initializeBindings:function(){this.bindings&&this.on("all",function(e){"change:"===e.slice(0,7)&&this._applyBindingsForKey(e.split(":")[1])},this)},_initializeSubviews:function(){if(this.subviews)for(var e in this.subviews)this._parseSubview(this.subviews[e],e)},_parseSubview:function(e,t){function i(){var e,n;this.el&&(e=this.query(o.selector))&&(!o.waitFor||d(this,o.waitFor))&&(n=this[t]=o.prepareView.call(this,e),n.render(),this.registerSubview(n),this.off("change",i))}var n=this,o={selector:e.container||'[data-hook="'+e.hook+'"]',waitFor:e.waitFor||"",prepareView:e.prepareView||function(t){return new e.constructor({el:t,parent:n})}};this.on("change",i,this)},renderWithTemplate:function(e,t){var i=t||this.template;if(!i)throw new Error("Template string or function needed.");var n=s.isString(i)?i:i.call(this,e||this);s.isString(n)&&(n=r(n));var o=this.el&&this.el.parentNode;if(o&&o.replaceChild(n,this.el),"#document-fragment"===n.nodeName)throw new Error("Views can only have one root element.");return this.el=n,this},cacheElements:function(e){for(var t in e)this[t]=this.query(e[t])},listenToAndRun:function(e,t,i){var n=s.bind(i,this);this.listenTo(e,t,n),n()},animateRemove:function(){this.remove()},renderCollection:function(e,t,i,n){var r="string"==typeof i?this.query(i):i,a=s.extend({collection:e,el:r||this.el,view:t,parent:this,viewOptions:{parent:this}},n),l=new o(a);return l.render(),this.registerSubview(l)}}),i.extend=c.extend,t.exports=i},{"ampersand-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/ampersand-collection-view.js","ampersand-dom-bindings":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-dom-bindings/ampersand-dom-bindings.js","ampersand-state":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-state/ampersand-state.js",domify:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/domify/index.js","events-mixin":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/index.js","get-object-path":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/get-object-path/index.js","matches-selector":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/matches-selector/index.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/ampersand-collection-view.js":[function(e,t){function i(e){if(!e)throw new ReferenceError("Collection view missing required parameters: collection, el");if(!e.collection)throw new ReferenceError("Collection view requires a collection");if(!e.el&&!this.insertSelf)throw new ReferenceError("Collection view requires an el");n.extend(this,n.pick(e,s)),this.views=[],this.listenTo(this.collection,"add",this._addViewForModel),this.listenTo(this.collection,"remove",this._removeViewForModel),this.listenTo(this.collection,"sort",this._rerenderAll),this.listenTo(this.collection,"refresh reset",this._reset)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-collection-view"]=window.ampersand["ampersand-collection-view"]||[],window.ampersand["ampersand-collection-view"].push("1.2.0"));var n=e("underscore"),o=e("backbone-events-standalone"),r=e("ampersand-class-extend"),s=["collection","el","viewOptions","view","emptyView","filter","reverse","parent"];n.extend(i.prototype,o,{render:function(){return this._renderAll(),this},remove:function(){n.invoke(this.views,"remove"),this.stopListening()},_getViewByModel:function(e){return n.find(this.views,function(t){return e===t.model})},_createViewForModel:function(e,t){var i=new this.view(n({model:e,collection:this.collection}).extend(this.viewOptions));return this.views.push(i),i.parent=this,i.renderedByParentView=!0,i.render(t),i},_getOrCreateByModel:function(e,t){return this._getViewByModel(e)||this._createViewForModel(e,t)},_addViewForModel:function(e,t,i){var n=this.filter?this.filter(e):!0;if(n){this.renderedEmptyView&&this.renderedEmptyView.remove();var o=this._getOrCreateByModel(e,{containerEl:this.el});i&&i.rerender?this._insertView(o):this._insertViewAtIndex(o)}},_insertViewAtIndex:function(e){if(!e.insertSelf){var t,i,n=this.collection.indexOf(e.model);t=this.collection.at(this.reverse?n-1:n+1),i=this._getViewByModel(t),i?this.el.insertBefore(e.el,i&&i.el):this.el.appendChild(e.el)}},_insertView:function(e){e.insertSelf||(this.reverse&&this.el.firstChild?this.el.insertBefore(e.el,this.el.firstChild):this.el.appendChild(e.el))},_removeViewForModel:function(e){var t=this._getViewByModel(e);if(t){var i=this.views.indexOf(t);-1!==i&&(t=this.views.splice(i,1)[0],this._removeView(t),0===this.views.length&&this._renderEmptyView())}},_removeView:function(e){e.animateRemove?e.animateRemove():e.remove()},_renderAll:function(){this.collection.each(this._addViewForModel,this),0===this.views.length&&this._renderEmptyView()},_rerenderAll:function(e,t){t=t||{},this.collection.each(function(e){this._addViewForModel(e,this,n.extend(t,{rerender:!0}))},this)},_renderEmptyView:function(){if(this.emptyView){var e=this.renderedEmptyView=new this.emptyView;this.el.appendChild(e.render().el)}},_reset:function(){var e=this.collection.map(this._getOrCreateByModel,this),t=n.difference(this.views,e);t.forEach(this._removeView,this),this.views=e,this._rerenderAll(),0===this.views.length&&this._renderEmptyView()}}),i.extend=r,t.exports=i},{"ampersand-class-extend":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/node_modules/ampersand-class-extend/ampersand-class-extend.js","backbone-events-standalone":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/node_modules/backbone-events-standalone/index.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/node_modules/ampersand-class-extend/ampersand-class-extend.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/ampersand-class-extend/ampersand-class-extend.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/node_modules/ampersand-class-extend/node_modules/extend-object/extend-object.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/extend-object/extend-object.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/node_modules/backbone-events-standalone/backbone-events-standalone.js":[function(e,t,i){!function(){function e(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,i=[];for(t in e)e.hasOwnProperty(t)&&(i[i.length]=t);return i},uniqueId:function(e){var t=++h+"";return e?e+t:t},has:function(e,t){return a.call(e,t)},each:function(e,t,i){if(null!=e)if(s&&e.forEach===s)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,o=e.length;o>n;n++)if(t.call(i,e[n],n,e)===r)return}else for(var a in e)if(this.has(e,a)&&t.call(i,e[a],a,e)===r)return},once:function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}}}}var n,o=this,r={},s=Array.prototype.forEach,a=Object.prototype.hasOwnProperty,l=Array.prototype.slice,h=0,d=e();n={on:function(e,t,i){if(!u(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var n=this,o=d.once(function(){n.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var n,o,r,s,a,l,h,c;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(s=e?[e]:d.keys(this._events),a=0,l=s.length;l>a;a++)if(e=s[a],r=this._events[e]){if(this._events[e]=n=[],t||i)for(h=0,c=r.length;c>h;h++)o=r[h],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&n.push(o);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=l.call(arguments,1);if(!u(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&p(i,t),n&&p(n,arguments),this},stopListening:function(e,t,i){var n=this._listeners;if(!n)return this;var o=!t&&!i;"object"==typeof t&&(i=this),e&&((n={})[e._listenerId]=e);for(var r in n)n[r].off(t,i,this),o&&delete this._listeners[r];return this}};var c=/\s+/,u=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(c.test(i)){for(var r=i.split(c),s=0,a=r.length;a>s;s++)e[t].apply(e,[r[s]].concat(n));return!1}return!0},p=function(e,t){var i,n=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t)}},m={listenTo:"on",listenToOnce:"once"};d.each(m,function(e,t){n[t]=function(t,i,n){var o=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=d.uniqueId("l"));return o[r]=t,"object"==typeof i&&(n=this),t[e](i,n,this),this}}),n.bind=n.on,n.unbind=n.off,n.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return d.each(t,function(t){e[t]=this[t]},this),e},"function"==typeof define?define(function(){return n}):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=n),i.BackboneEvents=n):o.BackboneEvents=n}(this)},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-collection-view/node_modules/backbone-events-standalone/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/backbone-events-standalone/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-dom-bindings/ampersand-dom-bindings.js":[function(e,t){function i(e,t){if(""===t)return[e];var i=[];return a(e,t)&&i.push(e),i.concat(l.call(e.querySelectorAll(t)))}function n(e){return Array.isArray(e)?e:[e]}function o(e,t){var o,r=e.type||"text",a="function"==typeof r,l=function(){return"string"==typeof e.selector?e.selector:e.hook?'[data-hook~="'+e.hook+'"]':""}(),h=e.yes,d=e.no,c=!(!h&&!d);if(a)return function(e,n){i(e,l).forEach(function(e){r.call(t,e,n,o)}),o=n};if("text"===r)return function(e,t){i(e,l).forEach(function(e){s.text(e,t)})};if("class"===r)return function(e,t){i(e,l).forEach(function(e){s.switchClass(e,o,t)}),o=t};if("attribute"===r){if(!e.name)throw Error('attribute bindings must have a "name"');return function(t,r){var a=n(e.name);i(t,l).forEach(function(e){a.forEach(function(t){s.setAttribute(e,t,r)})}),o=r}}if("value"===r)return function(e,t){i(e,l).forEach(function(e){t||0===t||(t=""),document.activeElement!==e&&(e.value=t)}),o=t};if("booleanClass"===r)return c?(h=n(h||""),d=n(d||""),function(e,t){var n=t?d:h,o=t?h:d;i(e,l).forEach(function(e){n.forEach(function(t){s.removeClass(e,t)}),o.forEach(function(t){s.addClass(e,t)})})}):function(t,o,r){var a=n(e.name||r);i(t,l).forEach(function(e){a.forEach(function(t){s[o?"addClass":"removeClass"](e,t)})})};if("booleanAttribute"===r)return function(t,o,r){var a=n(e.name||r);i(t,l).forEach(function(e){a.forEach(function(t){s[o?"addAttribute":"removeAttribute"](e,t)})})};if("toggle"===r)return c?function(e,t){i(e,h).forEach(function(e){s[t?"show":"hide"](e)}),i(e,d).forEach(function(e){s[t?"hide":"show"](e)})}:function(e,t){i(e,l).forEach(function(e){s[t?"show":"hide"](e)})};if("switch"===r){if(!e.cases)throw Error('switch bindings must have "cases"');return function(t,n){for(var o in e.cases)i(t,e.cases[o]).forEach(function(e){s[n===o?"show":"hide"](e)})}}if("innerHTML"===r)return function(e,t){i(e,l).forEach(function(e){s.html(e,t)})};if("switchClass"===r){if(!e.cases)throw Error('switchClass bindings must have "cases"');return function(t,o,r){var a=n(e.name||r);for(var l in e.cases)i(t,e.cases[l]).forEach(function(e){a.forEach(function(t){s[o===l?"addClass":"removeClass"](e,t)})})}}throw new Error("no such binding type: "+r)}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-dom-bindings"]=window.ampersand["ampersand-dom-bindings"]||[],window.ampersand["ampersand-dom-bindings"].push("3.3.3"));var r=e("key-tree-store"),s=e("ampersand-dom"),a=e("matches-selector");t.exports=function(e,t){var i,n,s=new r;for(i in e)n=e[i],"string"==typeof n?s.add(i,o({type:"text",selector:n})):n.forEach?n.forEach(function(e){s.add(i,o(e,t))}):s.add(i,o(n,t));return s};var l=Array.prototype.slice},{"ampersand-dom":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-dom/ampersand-dom.js","key-tree-store":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-dom-bindings/node_modules/key-tree-store/key-tree-store.js","matches-selector":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/matches-selector/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/ampersand-dom-bindings/node_modules/key-tree-store/key-tree-store.js":[function(e,t){function i(){this.storage={}}var n=Array.prototype.slice;i.prototype.add=function(e,t){var i=this.storage[e]||(this.storage[e]=[]);i.push(t)},i.prototype.remove=function(e){var t,i;for(t in this.storage)i=this.storage[t],i.some(function(t,n){return t===e?(i.splice(n,1),!0):void 0})},i.prototype.get=function(e){var t,i=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+".")||(i=i.concat(this.storage[t]));return i},i.prototype.getGrouped=function(e){var t,i={};for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+".")||(i[t]=n.call(this.storage[t]));return i},i.prototype.getAll=function(e){var t,i={};for(t in this.storage)(e===t||0===t.indexOf(e+"."))&&(i[t]=n.call(this.storage[t]));return i},i.prototype.run=function(e,t){var i=n.call(arguments,2);this.get(e).forEach(function(e){e.apply(t||this,i)})},t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/index.js":[function(e,t){function i(e,t){if(!(this instanceof i))return new i(e,t);if(!e)throw new Error("element required");if(!t)throw new Error("object required");this.el=e,this.obj=t,this._events={}}function n(e){var t=e.split(/ +/);return{name:t.shift(),selector:t.join(" ")}}var o=e("component-event"),r=e("delegate-events"),s=["focus","blur"];t.exports=i,i.prototype.sub=function(e,t,i){this._events[e]=this._events[e]||{},this._events[e][t]=i},i.prototype.bind=function(e,t){function i(){var e=[].slice.call(arguments).concat(d);l[t].apply(l,e)}var s=n(e),a=this.el,l=this.obj,h=s.name,t=t||"on"+h,d=[].slice.call(arguments,2);return s.selector?i=r.bind(a,s.selector,h,i):o.bind(a,h,i),this.sub(h,t,i),i},i.prototype.unbind=function(e,t){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(e);var i=this._events[e],n=-1!==s.indexOf(e);if(i){var r=i[t];r&&o.unbind(this.el,e,r,n)}},i.prototype.unbindAll=function(){for(var e in this._events)this.unbindAllOf(e)},i.prototype.unbindAllOf=function(e){var t=this._events[e];if(t)for(var i in t)this.unbind(e,i)}},{"component-event":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/component-event/index.js","delegate-events":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/delegate-events/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/component-event/index.js":[function(e,t,i){var n=window.addEventListener?"addEventListener":"attachEvent",o=window.removeEventListener?"removeEventListener":"detachEvent",r="addEventListener"!==n?"on":"";i.bind=function(e,t,i,o){return e[n](r+t,i,o||!1),i},i.unbind=function(e,t,i,n){return e[o](r+t,i,n||!1),i}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/delegate-events/index.js":[function(e,t,i){var n=e("closest"),o=e("event"),r=["focus","blur"];i.bind=function(e,t,i,s,a){return-1!==r.indexOf(i)&&(a=!0),o.bind(e,i,function(i){var o=i.target||i.srcElement;i.delegateTarget=n(o,t,!0,e),i.delegateTarget&&s.call(e,i)},a)},i.unbind=function(e,t,i,n){-1!==r.indexOf(t)&&(n=!0),o.unbind(e,t,i,n)}},{closest:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/delegate-events/node_modules/closest/index.js",event:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/component-event/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/delegate-events/node_modules/closest/index.js":[function(e,t){var i=e("matches-selector");t.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(i(o,t))return o;o=o.parentNode}}},{"matches-selector":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/delegate-events/node_modules/closest/node_modules/matches-selector/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/events-mixin/node_modules/delegate-events/node_modules/closest/node_modules/matches-selector/index.js":[function(e,t){function i(e,t){if(o)return o.call(e,t);for(var i=e.parentNode.querySelectorAll(t),n=0;n<i.length;++n)if(i[n]==e)return!0;return!1}var n=Element.prototype,o=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/get-object-path/index.js":[function(e,t){function i(e,t){if(-1==t.indexOf(".")&&-1==t.indexOf("["))return e[t];for(var i,n=t.split(/\.|\[|\]/g),o=-1,r=n.length;++o<r;)if(0==o&&(i=e),n[o]){if(void 0==i)break;i=i[n[o]]}return i}t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/matches-selector/index.js":[function(e,t){"use strict";function i(e,t){if(o)return o.call(e,t);for(var i=e.parentNode.querySelectorAll(t),n=0;n<i.length;n++)if(i[n]==e)return!0;return!1}var n=Element.prototype,o=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/underscore/underscore.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-model/node_modules/ampersand-sync/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/andlog/andlog.js":[function(e,t,i){!function(){var e="undefined"==typeof window,n=!e&&window.localStorage,o={};if(e)return void(t.exports=console);var r=n.andlogKey||"debug";if(n&&n[r]&&window.console)o=window.console;else for(var s="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a=s.length,l=function(){};a--;)o[s[a]]=l;"undefined"!=typeof i?t.exports=o:window.console=o}()},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/blueimp-file-upload/js/jquery.fileupload.js":[function(e,t,i){!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):"object"==typeof i?t(e("jquery"),e("./vendor/jquery.ui.widget")):t(window.jQuery)}(function(e){"use strict";function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var o=n.dataTransfer;o&&-1!==e.inArray("Files",o.types)&&this._trigger(t,e.Event(t,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(o.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,o=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&o-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=o,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(o,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,o=t.files[0],r=t.multipart||!e.support.xhrFileUpload,s="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r&&!t.blob&&this._isInstanceOf("File",o)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"'),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:s,value:t.blob}):e.each(t.files,function(n,o){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||s,value:o})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(s,t.blob,o.name):e.each(t.files,function(o,r){(n._isInstanceOf("File",r)||n._isInstanceOf("Blob",r))&&i.append("array"===e.type(t.paramName)&&t.paramName[o]||s,r,r.uploadName||r.name)
})),t.data=i):(t.contentType=o.type||"application/octet-stream",t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)n.push(i),o-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var o=e.Deferred(),r=o.promise();return i=i||this.options.context||r,t===!0?o.resolveWith(i,n):t===!1&&o.rejectWith(i,n),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,i){var n=this,o=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,r){return(t||r)&&(i._processQueue=this._processQueue=(this._processQueue||o([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():o(arguments)}).pipe(t,r)),this._processQueue||o([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,o,r=this,s=t.files[0],a=s.size,l=t.uploadedBytes,h=t.maxChunkSize||a,d=this._blobSlice,c=e.Deferred(),u=c.promise();return this._isXHRUpload(t)&&d&&(l||a>h)&&!t.data?i?!0:l>=a?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(o=function(){var i=e.extend({},t),u=i._progress.loaded;i.blob=d.call(s,l,l+h,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,r._initXHRData(i),r._initProgressListener(i),n=(r._trigger("chunksend",null,i)!==!1&&e.ajax(i)||r._getXHRPromise(!1,i.context)).done(function(n,s,h){l=r._getUploadedBytes(h)||l+i.chunkSize,u+i.chunkSize-i._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=h,r._trigger("chunkdone",null,i),r._trigger("chunkalways",null,i),a>l?o():c.resolveWith(i.context,[n,s,h])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,r._trigger("chunkfail",null,i),r._trigger("chunkalways",null,i),c.rejectWith(i.context,[e,t,n])})},this._enhancePromise(u),u.abort=function(){return n.abort()},o(),u):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,o){var r=o._progress.total,s=o._response;o._progress.loaded<r&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),s.result=o.result=t,s.textStatus=o.textStatus=i,s.jqXHR=o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(e,t,i,n){var o=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),o.jqXHR=n.jqXHR=e,o.textStatus=n.textStatus=t,o.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,o,r,s,a=this,l=a._getAJAXSettings(i),h=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||a._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),s=r.pipe(h)):(this._sequence=this._sequence.pipe(h,h),s=this._sequence),s.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(r&&r.rejectWith(l.context,o),h())},this._enhancePromise(s)):h()},_onAdd:function(t,i){var n,o,r,s,a=this,l=!0,h=e.extend({},this.options,i),d=i.files,c=d.length,u=h.limitMultiFileUploads,p=h.limitMultiFileUploadSize,m=h.limitMultiFileUploadSizeOverhead,f=0,g=this._getParamName(h),v=0;if(!p||c&&void 0!==d[0].size||(p=void 0),(h.singleFileUploads||u||p)&&this._isXHRUpload(h))if(h.singleFileUploads||p||!u)if(!h.singleFileUploads&&p)for(r=[],n=[],s=0;c>s;s+=1)f+=d[s].size+m,(s+1===c||f+d[s+1].size+m>p||u&&s+1-v>=u)&&(r.push(d.slice(v,s+1)),o=g.slice(v,s+1),o.length||(o=g),n.push(o),v=s+1,f=0);else n=g;else for(r=[],n=[],s=0;c>s;s+=u)r.push(d.slice(s,s+u)),o=g.slice(s,s+u),o.length||(o=g),n.push(o);else r=[d],n=[g];return i.originalFiles=d,e.each(r||d,function(o,s){var h=e.extend({},i);return h.files=r?s:[s],h.paramName=n[o],a._initResponseObject(h),a._initProgressObject(h),a._addConvenienceMethods(t,h),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),h)}),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,o=this,r=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])},a=function(e){o._handleFileTreeEntries(e,i+t.name+"/").done(function(e){r.resolve(e)}).fail(s)},l=function(){n.readEntries(function(e){e.length?(h=h.concat(e),l()):a(h)},s)},h=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,r.resolve(t._file)):t.file(function(e){e.relativePath=i,r.resolve(e)},s):t.isDirectory?(n=t.createReader(),l()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,o=t.prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(o){n.files=o,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",e.Event("change",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)!==!1&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,o={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){o.files=n,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),o)!==!1&&i._onAdd(t,o)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=e(this.element[0].cloneNode(!1)),o=n.data();n.remove(),e.each(o,function(e,o){var r="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n.attr(r)&&(t._isRegExpOption(e,o)&&(o=t._getRegExp(o)),i[e]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,o=this,r=e.Deferred(),s=r.promise();return s.abort=function(){return n=!0,i?i.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){if(!n){if(!e.length)return void r.reject();t.files=e,i=o._onSend(null,t),i.then(function(e,t,i){r.resolve(e,t,i)},function(e,t,i){r.reject(e,t,i)})}}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})},{"./vendor/jquery.ui.widget":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js":[function(e,t,i){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof i?e("jquery"):jQuery)}(function(e){var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{n=e._data(o,"events"),n&&n.remove&&e(o).triggerHandler("remove")}catch(s){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,s,a,l={},h=t.split(".")[0];return t=t.split(".")[1],o=h+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[h]=e[h]||{},r=e[h][t],s=e[h][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:h,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),s=0,a=r.length;a>s;s++)for(n in r[s])o=r[s][n],r[s].hasOwnProperty(n)&&void 0!==o&&(t[n]=e.isPlainObject(o)?e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=i.call(arguments,1),l=this;return r=!s&&a.length?e.widget.extend.apply(null,[r].concat(a)):r,this.each(s?function(){var i,n=e.data(this,o);return"instance"===r?(l=n,!1):n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(i=n[r].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}:function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+r.eventNamespace,d=l[2];d?o.delegate(d,h,a):i.bind(h,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}});e.widget})},{jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/clientconfig/clientconfig.js":[function(e,t){var i=e("cookie-getter"),n=i("config")||{};Object.freeze&&Object.freeze(n),document.cookie="config=;expires=Thu, 01 Jan 1970 00:00:00 GMT",t.exports=n},{"cookie-getter":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/clientconfig/node_modules/cookie-getter/cookie-getter.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/clientconfig/node_modules/cookie-getter/cookie-getter.js":[function(e,t){t.exports=function(e){var t,i=document.cookie,n=i.indexOf(e+"="),o=i.indexOf(";",n);return~n?(t=decodeURIComponent(i.substring(n,~o?o:void 0).split("=")[1]),"{"===t.charAt(0)?JSON.parse(t):t):null}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/domify/index.js":[function(e,t){function i(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var i=/<([\w:]+)/.exec(e);if(!i)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var n=i[1];if("body"==n){var o=t.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var s=r[n]||r._default,a=s[0],l=s[1],h=s[2],o=t.createElement("div");for(o.innerHTML=l+e+h;a--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var d=t.createDocumentFragment();o.firstChild;)d.appendChild(o.removeChild(o.firstChild));return d}t.exports=i;var n=document.createElement("div");n.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var o=!n.getElementsByTagName("link").length;n=void 0;var r={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};r.td=r.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],r.option=r.optgroup=[1,'<select multiple="multiple">',"</select>"],r.thead=r.tbody=r.colgroup=r.caption=r.tfoot=[1,"<table>","</table>"],r.text=r.circle=r.ellipse=r.line=r.path=r.polygon=r.polyline=r.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/domready/ready.js":[function(e,t){!function(e,i){"undefined"!=typeof t?t.exports=i():"function"==typeof define&&"object"==typeof define.amd?define(i):this[e]=i()}("domready",function(){var e,t=[],i=document,n=i.documentElement.doScroll,o="DOMContentLoaded",r=(n?/^loaded|^c/:/^loaded|^i|^c/).test(i.readyState);return r||i.addEventListener(o,e=function(){for(i.removeEventListener(o,e),r=1;e=t.shift();)e()}),function(e){r?e():t.push(e)}})},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js":[function(e,t){!function(e,i){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=J.type(e);return"function"===i||J.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(J.isFunction(t))return J.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return J.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(at.test(t))return J.filter(t,e,i);t=J.filter(t,e)}return J.grep(e,function(e){return W.call(t,e)>=0!==i})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t=mt[e]={};return J.each(e.match(pt)||[],function(e,i){t[i]=!0}),t}function s(){Q.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),J.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+a.uid++}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(wt,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:bt.test(i)?J.parseJSON(i):i}catch(o){}yt.set(e,t,i)}else i=void 0;return i}function h(){return!0}function d(){return!1}function c(){try{return Q.activeElement}catch(e){}}function u(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function m(e){var t=zt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function f(e,t){for(var i=0,n=e.length;n>i;i++)vt.set(e[i],"globalEval",!t||vt.get(t[i],"globalEval"))}function g(e,t){var i,n,o,r,s,a,l,h;if(1===t.nodeType){if(vt.hasData(e)&&(r=vt.access(e),s=vt.set(t,r),h=r.events)){delete s.handle,s.events={};for(o in h)for(i=0,n=h[o].length;n>i;i++)J.event.add(t,o,h[o][i])}yt.hasData(e)&&(a=yt.access(e),l=J.extend({},a),yt.set(t,l))}}function v(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&J.nodeName(e,t)?J.merge([e],i):i}function y(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Mt.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function b(t,i){var n,o=J(i.createElement(t)).appendTo(i.body),r=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(o[0]))?n.display:J.css(o[0],"display");return o.detach(),r}function w(e){var t=Q,i=Ot[e];return i||(i=b(e,t),"none"!==i&&i||(Ut=(Ut||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ut[0].contentDocument,t.write(),t.close(),i=b(e,t),Ut.detach()),Ot[e]=i),i}function x(e,t,i){var n,o,r,s,a=e.style;return i=i||Ht(e),i&&(s=i.getPropertyValue(t)||i[t]),i&&(""!==s||J.contains(e.ownerDocument,e)||(s=J.style(e,t)),It.test(s)&&Nt.test(t)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,o=Kt.length;o--;)if(t=Kt[o]+i,t in e)return t;return n}function M(e,t,i){var n=Gt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function E(e,t,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=J.css(e,i+_t[r],!0,o)),n?("content"===i&&(s-=J.css(e,"padding"+_t[r],!0,o)),"margin"!==i&&(s-=J.css(e,"border"+_t[r]+"Width",!0,o))):(s+=J.css(e,"padding"+_t[r],!0,o),"padding"!==i&&(s+=J.css(e,"border"+_t[r]+"Width",!0,o)));return s}function S(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=Ht(e),s="border-box"===J.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=x(e,t,r),(0>o||null==o)&&(o=e.style[t]),It.test(o))return o;n=s&&(Z.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+E(e,t,i||(s?"border":"content"),n,r)+"px"}function T(e,t){for(var i,n,o,r=[],s=0,a=e.length;a>s;s++)n=e[s],n.style&&(r[s]=vt.get(n,"olddisplay"),i=n.style.display,t?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&kt(n)&&(r[s]=vt.access(n,"olddisplay",w(n.nodeName)))):(o=kt(n),"none"===i&&o||vt.set(n,"olddisplay",o?i:J.css(n,"display"))));for(s=0;a>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[s]||"":"none"));return e}function C(e,t,i,n,o){return new C.prototype.init(e,t,i,n,o)}function A(){return setTimeout(function(){Zt=void 0}),Zt=J.now()}function j(e,t){var i,n=0,o={height:e};for(t=t?1:0;4>n;n+=2-t)i=_t[n],o["margin"+i]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function L(e,t,i){for(var n,o=(ii[t]||[]).concat(ii["*"]),r=0,s=o.length;s>r;r++)if(n=o[r].call(i,t,e))return n}function P(e,t,i){var n,o,r,s,a,l,h,d,c=this,u={},p=e.style,m=e.nodeType&&kt(e),f=vt.get(e,"fxshow");i.queue||(a=J._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,J.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],h=J.css(e,"display"),d="none"===h?vt.get(e,"olddisplay")||w(e.nodeName):h,"inline"===d&&"none"===J.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(o=t[n],$t.exec(o)){if(delete t[n],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!f||void 0===f[n])continue;m=!0}u[n]=f&&f[n]||J.style(e,n)}else h=void 0;if(J.isEmptyObject(u))"inline"===("none"===h?w(e.nodeName):h)&&(p.display=h);else{f?"hidden"in f&&(m=f.hidden):f=vt.access(e,"fxshow",{}),r&&(f.hidden=!m),m?J(e).show():c.done(function(){J(e).hide()}),c.done(function(){var t;vt.remove(e,"fxshow");for(t in u)J.style(e,t,u[t])});for(n in u)s=L(m?f[n]:0,n,c),n in f||(f[n]=s.start,m&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function R(e,t){var i,n,o,r,s;for(i in e)if(n=J.camelCase(i),o=t[n],r=e[i],J.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),s=J.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}function D(e,t,i){var n,o,r=0,s=ti.length,a=J.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Zt||A(),i=Math.max(0,h.startTime+h.duration-t),n=i/h.duration||0,r=1-n,s=0,l=h.tweens.length;l>s;s++)h.tweens[s].run(r);return a.notifyWith(e,[h,r,i]),1>r&&l?i:(a.resolveWith(e,[h]),!1)},h=a.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Zt||A(),duration:i.duration,tweens:[],createTween:function(t,i){var n=J.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(n),n},stop:function(t){var i=0,n=t?h.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)h.tweens[i].run(1);return t?a.resolveWith(e,[h,t]):a.rejectWith(e,[h,t]),this}}),d=h.props;for(R(d,h.opts.specialEasing);s>r;r++)if(n=ti[r].call(h,e,d,h.opts))return n;return J.map(d,L,h),J.isFunction(h.opts.start)&&h.opts.start.call(e,h),J.fx.timer(J.extend(l,{elem:e,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function F(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(pt)||[];if(J.isFunction(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function z(e,t,i,n){function o(a){var l;return r[a]=!0,J.each(e[a]||[],function(e,a){var h=a(t,i,n);return"string"!=typeof h||s||r[h]?s?!(l=h):void 0:(t.dataTypes.unshift(h),o(h),!1)}),l}var r={},s=e===bi;return o(t.dataTypes[0])||!r["*"]&&o("*")}function B(e,t){var i,n,o=J.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&J.extend(!0,e,n),e}function V(e,t,i){for(var n,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function U(e,t,i,n){var o,r,s,a,l,h={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)h[s.toLowerCase()]=e.converters[s];for(r=d.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=h[l+" "+r]||h["* "+r],!s)for(o in h)if(a=o.split(" "),a[1]===r&&(s=h[l+" "+a[0]]||h["* "+a[0]])){s===!0?s=h[o]:h[o]!==!0&&(r=a[0],d.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function O(e,t,i,n){var o;if(J.isArray(t))J.each(t,function(t,o){i||Mi.test(e)?n(e,o):O(e+"["+("object"==typeof o?t:"")+"]",o,i,n)});else if(i||"object"!==J.type(t))n(e,t);else for(o in t)O(e+"["+o+"]",t[o],i,n)}function N(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView
}var I=[],H=I.slice,q=I.concat,G=I.push,W=I.indexOf,X={},Y=X.toString,K=X.hasOwnProperty,Z={},Q=e.document,$="2.1.3",J=function(e,t){return new J.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,it=/-([\da-z])/gi,nt=function(e,t){return t.toUpperCase()};J.fn=J.prototype={jquery:$,constructor:J,selector:"",length:0,toArray:function(){return H.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:H.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(H.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:I.sort,splice:I.splice},J.extend=J.fn.extend=function(){var e,t,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[a]||{},a++),"object"==typeof s||J.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)i=s[t],n=e[t],s!==n&&(h&&n&&(J.isPlainObject(n)||(o=J.isArray(n)))?(o?(o=!1,r=i&&J.isArray(i)?i:[]):r=i&&J.isPlainObject(i)?i:{},s[t]=J.extend(h,r,n)):void 0!==n&&(s[t]=n));return s},J.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==J.type(e)||e.nodeType||J.isWindow(e)?!1:e.constructor&&!K.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?X[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=J.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(it,nt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o,r=0,s=e.length,a=i(e);if(n){if(a)for(;s>r&&(o=t.apply(e[r],n),o!==!1);r++);else for(r in e)if(o=t.apply(e[r],n),o===!1)break}else if(a)for(;s>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);else for(r in e)if(o=t.call(e[r],r,e[r]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?J.merge(n,"string"==typeof e?[e]:e):G.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:W.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;i>n;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n,o=[],r=0,s=e.length,a=!i;s>r;r++)n=!t(e[r],r),n!==a&&o.push(e[r]);return o},map:function(e,t,n){var o,r=0,s=e.length,a=i(e),l=[];if(a)for(;s>r;r++)o=t(e[r],r,n),null!=o&&l.push(o);else for(r in e)o=t(e[r],r,n),null!=o&&l.push(o);return q.apply([],l)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(i=e[t],t=e,e=i),J.isFunction(e)?(n=H.call(arguments,2),o=function(){return e.apply(t||this,n.concat(H.call(arguments)))},o.guid=e.guid=e.guid||J.guid++,o):void 0},now:Date.now,support:Z}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()});var ot=function(e){function t(e,t,i,n){var o,r,s,a,l,h,c,p,m,f;if((t?t.ownerDocument||t:O)!==P&&L(t),t=t||P,i=i||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return i;if(!n&&D){if(11!==a&&(o=yt.exec(e)))if(s=o[1]){if(9===a){if(r=t.getElementById(s),!r||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&V(t,r)&&r.id===s)return i.push(r),i}else{if(o[2])return $.apply(i,t.getElementsByTagName(e)),i;if((s=o[3])&&x.getElementsByClassName)return $.apply(i,t.getElementsByClassName(s)),i}if(x.qsa&&(!F||!F.test(e))){if(p=c=U,m=t,f=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(h=E(e),(c=t.getAttribute("id"))?p=c.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=h.length;l--;)h[l]=p+u(h[l]);m=bt.test(e)&&d(t.parentNode)||t,f=h.join(",")}if(f)try{return $.apply(i,m.querySelectorAll(f)),i}catch(g){}finally{c||t.removeAttribute("id")}}}return T(e.replace(lt,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>_.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[U]=!0,e}function o(e){var t=P.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),n=e.length;n--;)_.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function h(e){return n(function(t){return t=+t,n(function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function c(){}function u(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,o=i&&"parentNode"===n,r=I++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,r)}:function(t,i,s){var a,l,h=[N,r];if(s){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||o){if(l=t[U]||(t[U]={}),(a=l[n])&&a[0]===N&&a[1]===r)return h[2]=a[2];if(l[n]=h,h[2]=e(t,i,s))return!0}}}function m(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function f(e,i,n){for(var o=0,r=i.length;r>o;o++)t(e,i[o],n);return n}function g(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,h=null!=t;l>a;a++)(r=e[a])&&(!i||i(r,n,o))&&(s.push(r),h&&t.push(a));return s}function v(e,t,i,o,r,s){return o&&!o[U]&&(o=v(o)),r&&!r[U]&&(r=v(r,s)),n(function(n,s,a,l){var h,d,c,u=[],p=[],m=s.length,v=n||f(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?v:g(v,u,e,a,l),b=i?r||(n?e:m||o)?[]:s:y;if(i&&i(y,b,a,l),o)for(h=g(b,p),o(h,[],a,l),d=h.length;d--;)(c=h[d])&&(b[p[d]]=!(y[p[d]]=c));if(n){if(r||e){if(r){for(h=[],d=b.length;d--;)(c=b[d])&&h.push(y[d]=c);r(null,b=[],h,l)}for(d=b.length;d--;)(c=b[d])&&(h=r?et(n,c):u[d])>-1&&(n[h]=!(s[h]=c))}}else b=g(b===s?b.splice(m,b.length):b),r?r(null,s,b,l):$.apply(s,b)})}function y(e){for(var t,i,n,o=e.length,r=_.relative[e[0].type],s=r||_.relative[" "],a=r?1:0,l=p(function(e){return e===t},s,!0),h=p(function(e){return et(t,e)>-1},s,!0),d=[function(e,i,n){var o=!r&&(n||i!==C)||((t=i).nodeType?l(e,i,n):h(e,i,n));return t=null,o}];o>a;a++)if(i=_.relative[e[a].type])d=[p(m(d),i)];else{if(i=_.filter[e[a].type].apply(null,e[a].matches),i[U]){for(n=++a;o>n&&!_.relative[e[n].type];n++);return v(a>1&&m(d),a>1&&u(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&y(e.slice(a,n)),o>n&&y(e=e.slice(n)),o>n&&u(e))}d.push(i)}return m(d)}function b(e,i){var o=i.length>0,r=e.length>0,s=function(n,s,a,l,h){var d,c,u,p=0,m="0",f=n&&[],v=[],y=C,b=n||r&&_.find.TAG("*",h),w=N+=null==y?1:Math.random()||.1,x=b.length;for(h&&(C=s!==P&&s);m!==x&&null!=(d=b[m]);m++){if(r&&d){for(c=0;u=e[c++];)if(u(d,s,a)){l.push(d);break}h&&(N=w)}o&&((d=!u&&d)&&p--,n&&f.push(d))}if(p+=m,o&&m!==p){for(c=0;u=i[c++];)u(f,v,s,a);if(n){if(p>0)for(;m--;)f[m]||v[m]||(v[m]=Z.call(l));v=g(v)}$.apply(l,v),h&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(l)}return h&&(N=w,C=y),f};return o?n(s):s}var w,x,_,k,M,E,S,T,C,A,j,L,P,R,D,F,z,B,V,U="sizzle"+1*new Date,O=e.document,N=0,I=0,H=i(),q=i(),G=i(),W=function(e,t){return e===t&&(j=!0),0},X=1<<31,Y={}.hasOwnProperty,K=[],Z=K.pop,Q=K.push,$=K.push,J=K.slice,et=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=nt.replace("w","w#"),rt="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",st=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(it+"+","g"),lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ht=new RegExp("^"+it+"*,"+it+"*"),dt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ut=new RegExp(st),pt=new RegExp("^"+ot+"$"),mt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),_t=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},kt=function(){L()};try{$.apply(K=J.call(O.childNodes),O.childNodes),K[O.childNodes.length].nodeType}catch(Mt){$={apply:K.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}x=t.support={},M=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:O;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,R=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",kt,!1):i.attachEvent&&i.attachEvent("onunload",kt)),D=!M(n),x.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=o(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(n.getElementsByClassName),x.getById=o(function(e){return R.appendChild(e).id=U,!n.getElementsByName||!n.getElementsByName(U).length}),x.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(e){var t=e.replace(xt,_t);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(xt,_t);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),_.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},_.find.CLASS=x.getElementsByClassName&&function(e,t){return D?t.getElementsByClassName(e):void 0},z=[],F=[],(x.qsa=vt.test(n.querySelectorAll))&&(o(function(e){R.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+it+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+U+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||F.push(".#.+[+~]")}),o(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(x.matchesSelector=vt.test(B=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&o(function(e){x.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),z.push("!=",st)}),F=F.length&&new RegExp(F.join("|")),z=z.length&&new RegExp(z.join("|")),t=vt.test(R.compareDocumentPosition),V=t||vt.test(R.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return j=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===O&&V(O,e)?-1:t===n||t.ownerDocument===O&&V(O,t)?1:A?et(A,e)-et(A,t):0:4&i?-1:1)}:function(e,t){if(e===t)return j=!0,0;var i,o=0,r=e.parentNode,a=t.parentNode,l=[e],h=[t];if(!r||!a)return e===n?-1:t===n?1:r?-1:a?1:A?et(A,e)-et(A,t):0;if(r===a)return s(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?s(l[o],h[o]):l[o]===O?-1:h[o]===O?1:0},n):P},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==P&&L(e),i=i.replace(ct,"='$1']"),!(!x.matchesSelector||!D||z&&z.test(i)||F&&F.test(i)))try{var n=B.call(e,i);if(n||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return t(i,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&L(e),V(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&L(e);var i=_.attrHandle[t.toLowerCase()],n=i&&Y.call(_.attrHandle,t.toLowerCase())?i(e,t,!D):void 0;return void 0!==n?n:x.attributes||!D?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,o=0;if(j=!x.detectDuplicates,A=!x.sortStable&&e.slice(0),e.sort(W),j){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return A=null,e},k=t.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},_=t.selectors={cacheLength:50,createPseudo:n,match:mt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,_t),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,_t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return mt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ut.test(i)&&(t=E(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,_t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(o){var r=t.attr(o,e);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r.replace(at," ")+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var h,d,c,u,p,m,f=r!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;f;){for(c=t;c=c[f];)if(a?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;m=f="only"===e&&!m&&"nextSibling"}return!0}if(m=[s?g.firstChild:g.lastChild],s&&y){for(d=g[U]||(g[U]={}),h=d[e]||[],p=h[0]===N&&h[1],u=h[0]===N&&h[2],c=p&&g.childNodes[p];c=++p&&c&&c[f]||(u=p=0)||m.pop();)if(1===c.nodeType&&++u&&c===t){d[e]=[N,p,u];break}}else if(y&&(h=(t[U]||(t[U]={}))[e])&&h[0]===N)u=h[1];else for(;(c=++p&&c&&c[f]||(u=p=0)||m.pop())&&((a?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++u||(y&&((c[U]||(c[U]={}))[e]=[N,u]),c!==t)););return u-=o,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(e,i){var o,r=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[U]?r(i):r.length>1?(o=[e,e,"",i],_.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,o=r(e,i),s=o.length;s--;)n=et(e,o[s]),e[n]=!(t[n]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:n(function(e){var t=[],i=[],o=S(e.replace(lt,"$1"));return o[U]?n(function(e,t,i,n){for(var r,s=o(e,null,n,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,n,r){return t[0]=e,o(t,null,r,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(xt,_t),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xt,_t).toLowerCase(),function(t){var i;do if(i=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return ft.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:h(function(){return[0]}),last:h(function(e,t){return[t-1]}),eq:h(function(e,t,i){return[0>i?i+t:i]}),even:h(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:h(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:h(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:h(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=l(w);return c.prototype=_.filters=_.pseudos,_.setFilters=new c,E=t.tokenize=function(e,i){var n,o,r,s,a,l,h,d=q[e+" "];if(d)return i?0:d.slice(0);for(a=e,l=[],h=_.preFilter;a;){(!n||(o=ht.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=dt.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(lt," ")}),a=a.slice(n.length));for(s in _.filter)!(o=mt[s].exec(a))||h[s]&&!(o=h[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):q(e,l).slice(0)},S=t.compile=function(e,t){var i,n=[],o=[],r=G[e+" "];if(!r){for(t||(t=E(e)),i=t.length;i--;)r=y(t[i]),r[U]?n.push(r):o.push(r);r=G(e,b(o,n)),r.selector=e}return r},T=t.select=function(e,t,i,n){var o,r,s,a,l,h="function"==typeof e&&e,c=!n&&E(e=h.selector||e);if(i=i||[],1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&x.getById&&9===t.nodeType&&D&&_.relative[r[1].type]){if(t=(_.find.ID(s.matches[0].replace(xt,_t),t)||[])[0],!t)return i;h&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=mt.needsContext.test(e)?0:r.length;o--&&(s=r[o],!_.relative[a=s.type]);)if((l=_.find[a])&&(n=l(s.matches[0].replace(xt,_t),bt.test(r[0].type)&&d(t.parentNode)||t))){if(r.splice(o,1),e=n.length&&u(r),!e)return $.apply(i,n),i;break}}return(h||S(e,c))(n,t,!D,i,bt.test(e)&&d(t.parentNode)||t),i},x.sortStable=U.split("").sort(W).join("")===U,x.detectDuplicates=!!j,L(),x.sortDetached=o(function(e){return 1&e.compareDocumentPosition(P.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(tt,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);J.find=ot,J.expr=ot.selectors,J.expr[":"]=J.expr.pseudos,J.unique=ot.uniqueSort,J.text=ot.getText,J.isXMLDoc=ot.isXML,J.contains=ot.contains;var rt=J.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;J.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?J.find.matchesSelector(n,e)?[n]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,i=this.length,n=[],o=this;if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;i>t;t++)if(J.contains(o[t],this))return!0}));for(t=0;i>t;t++)J.find(e,o[t],n);return n=this.pushStack(i>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&rt.test(e)?J(e):e||[],!1).length}});var lt,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,dt=J.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ht.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),st.test(i[1])&&J.isPlainObject(t))for(i in t)J.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=Q.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))};dt.prototype=J.fn,lt=J(Q);var ct=/^(?:parents|prev(?:Until|All))/,ut={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&J(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),J.fn.extend({has:function(e){var t=J(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,o=this.length,r=[],s=rt.test(e)||"string"!=typeof e?J(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&J.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?J.unique(r):r)},index:function(e){return e?"string"==typeof e?W.call(J(e),this[0]):W.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,i){return J.dir(e,"parentNode",i)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,i){return J.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return J.dir(e,"previousSibling",i)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(i,n){var o=J.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=J.filter(n,o)),this.length>1&&(ut[e]||J.unique(o),ct.test(e)&&o.reverse()),this.pushStack(o)}});var pt=/\S+/g,mt={};J.Callbacks=function(e){e="string"==typeof e?mt[e]||r(e):J.extend({},e);var t,i,n,o,s,a,l=[],h=!e.once&&[],d=function(r){for(t=e.memory&&r,i=!0,a=o||0,o=0,s=l.length,n=!0;l&&s>a;a++)if(l[a].apply(r[0],r[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,l&&(h?h.length&&d(h.shift()):t?l=[]:c.disable())},c={add:function(){if(l){var i=l.length;!function r(t){J.each(t,function(t,i){var n=J.type(i);"function"===n?e.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==n&&r(i)})}(arguments),n?s=l.length:t&&(o=i,d(t))}return this},remove:function(){return l&&J.each(arguments,function(e,t){for(var i;(i=J.inArray(t,l,i))>-1;)l.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(e){return e?J.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=h=t=void 0,this},disabled:function(){return!l},lock:function(){return h=void 0,t||c.disable(),this},locked:function(){return!h},fireWith:function(e,t){return!l||i&&!h||(t=t||[],t=[e,t.slice?t.slice():t],n?h.push(t):d(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(i){J.each(t,function(t,r){var s=J.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,n):n}},o={};return n.pipe=n.then,J.each(t,function(e,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?n:this,arguments),this},o[r[0]+"With"]=s.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,r=H.call(arguments),s=r.length,a=1!==s||e&&J.isFunction(e.promise)?s:0,l=1===a?e:J.Deferred(),h=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?H.call(arguments):o,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);s>o;o++)r[o]&&J.isFunction(r[o].promise)?r[o].promise().done(h(o,n,r)).fail(l.reject).progress(h(o,i,t)):--a;return a||l.resolveWith(n,r),l.promise()}});var ft;J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(e===!0?--J.readyWait:J.isReady)||(J.isReady=!0,e!==!0&&--J.readyWait>0||(ft.resolveWith(Q,[J]),J.fn.triggerHandler&&(J(Q).triggerHandler("ready"),J(Q).off("ready"))))}}),J.ready.promise=function(t){return ft||(ft=J.Deferred(),"complete"===Q.readyState?setTimeout(J.ready):(Q.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),ft.promise(t)},J.ready.promise();var gt=J.access=function(e,t,i,n,o,r,s){var a=0,l=e.length,h=null==i;if("object"===J.type(i)){o=!0;for(a in i)J.access(e,t,a,i[a],!0,r,s)}else if(void 0!==n&&(o=!0,J.isFunction(n)||(s=!0),h&&(s?(t.call(e,n),t=null):(h=t,t=function(e,t,i){return h.call(J(e),i)})),t))for(;l>a;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return o?e:h?t.call(e):l?t(e[0],i):r};J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=J.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=a.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,J.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,o=this.key(e),r=this.cache[o];if("string"==typeof t)r[t]=i;else if(J.isEmptyObject(r))J.extend(this.cache[o],t);else for(n in t)r[n]=t[n];return r},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,J.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,o,r=this.key(e),s=this.cache[r];if(void 0===t)this.cache[r]={};else{J.isArray(t)?n=t.concat(t.map(J.camelCase)):(o=J.camelCase(t),t in s?n=[t,o]:(n=o,n=n in s?[n]:n.match(pt)||[])),i=n.length;for(;i--;)delete s[n[i]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var vt=new a,yt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;J.extend({hasData:function(e){return yt.hasData(e)||vt.hasData(e)},data:function(e,t,i){return yt.access(e,t,i)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,i){return vt.access(e,t,i)},_removeData:function(e,t){vt.remove(e,t)}}),J.fn.extend({data:function(e,t){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=yt.get(r),1===r.nodeType&&!vt.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=J.camelCase(n.slice(5)),l(r,n,o[n])));vt.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){yt.set(this,e)}):gt(this,function(t){var i,n=J.camelCase(e);if(r&&void 0===t){if(i=yt.get(r,e),void 0!==i)return i;if(i=yt.get(r,n),void 0!==i)return i;if(i=l(r,n,void 0),void 0!==i)return i}else this.each(function(){var i=yt.get(this,n);yt.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),J.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=vt.get(e,t),i&&(!n||J.isArray(i)?n=vt.access(e,t,J.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=J.queue(e,t),n=i.length,o=i.shift(),r=J._queueHooks(e,t),s=function(){J.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";
return vt.get(e,i)||vt.access(e,i,{empty:J.Callbacks("once memory").add(function(){vt.remove(e,[t+"queue",i])})})}}),J.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?J.queue(this[0],e):void 0===t?this:this.each(function(){var i=J.queue(this,e,t);J._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=J.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=vt.get(r[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(t)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_t=["Top","Right","Bottom","Left"],kt=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},Mt=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),i=Q.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),Z.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Et="undefined";Z.focusinBubbles="onfocusin"in e;var St=/^key/,Tt=/^(?:mouse|pointer|contextmenu)|click/,Ct=/^(?:focusinfocus|focusoutblur)$/,At=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,h,d,c,u,p,m,f,g=vt.get(e);if(g)for(i.handler&&(r=i,i=r.handler,o=r.selector),i.guid||(i.guid=J.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return typeof J!==Et&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pt)||[""],h=t.length;h--;)a=At.exec(t[h])||[],p=f=a[1],m=(a[2]||"").split(".").sort(),p&&(c=J.event.special[p]||{},p=(o?c.delegateType:c.bindType)||p,c=J.event.special[p]||{},d=J.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&J.expr.match.needsContext.test(o),namespace:m.join(".")},r),(u=l[p])||(u=l[p]=[],u.delegateCount=0,c.setup&&c.setup.call(e,n,m,s)!==!1||e.addEventListener&&e.addEventListener(p,s,!1)),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,d):u.push(d),J.event.global[p]=!0)},remove:function(e,t,i,n,o){var r,s,a,l,h,d,c,u,p,m,f,g=vt.hasData(e)&&vt.get(e);if(g&&(l=g.events)){for(t=(t||"").match(pt)||[""],h=t.length;h--;)if(a=At.exec(t[h])||[],p=f=a[1],m=(a[2]||"").split(".").sort(),p){for(c=J.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,u=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=u.length;r--;)d=u[r],!o&&f!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(r,1),d.selector&&u.delegateCount--,c.remove&&c.remove.call(e,d));s&&!u.length&&(c.teardown&&c.teardown.call(e,m,g.handle)!==!1||J.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)J.event.remove(e,p+t[h],i,n,!0);J.isEmptyObject(l)&&(delete g.handle,vt.remove(e,"events"))}},trigger:function(t,i,n,o){var r,s,a,l,h,d,c,u=[n||Q],p=K.call(t,"type")?t.type:t,m=K.call(t,"namespace")?t.namespace.split("."):[];if(s=a=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!Ct.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),h=p.indexOf(":")<0&&"on"+p,t=t[J.expando]?t:new J.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:J.makeArray(i,[t]),c=J.event.special[p]||{},o||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!o&&!c.noBubble&&!J.isWindow(n)){for(l=c.delegateType||p,Ct.test(l+p)||(s=s.parentNode);s;s=s.parentNode)u.push(s),a=s;a===(n.ownerDocument||Q)&&u.push(a.defaultView||a.parentWindow||e)}for(r=0;(s=u[r++])&&!t.isPropagationStopped();)t.type=r>1?l:c.bindType||p,d=(vt.get(s,"events")||{})[t.type]&&vt.get(s,"handle"),d&&d.apply(s,i),d=h&&s[h],d&&d.apply&&J.acceptData(s)&&(t.result=d.apply(s,i),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||c._default&&c._default.apply(u.pop(),i)!==!1||!J.acceptData(n)||h&&J.isFunction(n[p])&&!J.isWindow(n)&&(a=n[h],a&&(n[h]=null),J.event.triggered=p,n[p](),J.event.triggered=void 0,a&&(n[h]=a)),t.result}},dispatch:function(e){e=J.event.fix(e);var t,i,n,o,r,s=[],a=H.call(arguments),l=(vt.get(this,"events")||{})[e.type]||[],h=J.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,e)!==!1){for(s=J.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((J.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(n=[],i=0;a>i;i++)r=t[i],o=r.selector+" ",void 0===n[o]&&(n[o]=r.needsContext?J(o,this).index(l)>=0:J.find(o,this,null,[l]).length),n[o]&&n.push(r);n.length&&s.push({elem:l,handlers:n})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,o,r=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||Q,n=i.documentElement,o=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,i,n,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Tt.test(o)?this.mouseHooks:St.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new J.Event(r),t=n.length;t--;)i=n[t],e[i]=r[i];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var o=J.extend(new J.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?J.event.trigger(o,null,t):J.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},J.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:d):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==n&&!J.contains(n,o))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),Z.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=vt.access(n,t);o||n.addEventListener(e,i,!0),vt.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=vt.access(n,t)-1;o?vt.access(n,t,o):(n.removeEventListener(e,i,!0),vt.remove(n,t))}}}),J.fn.extend({on:function(e,t,i,n,o){var r,s;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(s in e)this.on(s,t,i,e[s],o);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=d;else if(!n)return this;return 1===o&&(r=n,n=function(e){return J().off(e),r.apply(this,arguments)},n.guid=r.guid||(r.guid=J.guid++)),this.each(function(){J.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,J(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=d),this.each(function(){J.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?J.event.trigger(e,t,i,!0):void 0}});var jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Lt=/<([\w:]+)/,Pt=/<|&#?\w+;/,Rt=/<(?:script|style|link)/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ft=/^$|\/(?:java|ecma)script/i,zt=/^true\/(.*)/,Bt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Vt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Vt.optgroup=Vt.option,Vt.tbody=Vt.tfoot=Vt.colgroup=Vt.caption=Vt.thead,Vt.th=Vt.td,J.extend({clone:function(e,t,i){var n,o,r,s,a=e.cloneNode(!0),l=J.contains(e.ownerDocument,e);if(!(Z.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(s=v(a),r=v(e),n=0,o=r.length;o>n;n++)y(r[n],s[n]);if(t)if(i)for(r=r||v(e),s=s||v(a),n=0,o=r.length;o>n;n++)g(r[n],s[n]);else g(e,a);return s=v(a,"script"),s.length>0&&f(s,!l&&v(e,"script")),a},buildFragment:function(e,t,i,n){for(var o,r,s,a,l,h,d=t.createDocumentFragment(),c=[],u=0,p=e.length;p>u;u++)if(o=e[u],o||0===o)if("object"===J.type(o))J.merge(c,o.nodeType?[o]:o);else if(Pt.test(o)){for(r=r||d.appendChild(t.createElement("div")),s=(Lt.exec(o)||["",""])[1].toLowerCase(),a=Vt[s]||Vt._default,r.innerHTML=a[1]+o.replace(jt,"<$1></$2>")+a[2],h=a[0];h--;)r=r.lastChild;J.merge(c,r.childNodes),r=d.firstChild,r.textContent=""}else c.push(t.createTextNode(o));for(d.textContent="",u=0;o=c[u++];)if((!n||-1===J.inArray(o,n))&&(l=J.contains(o.ownerDocument,o),r=v(d.appendChild(o),"script"),l&&f(r),i))for(h=0;o=r[h++];)Ft.test(o.type||"")&&i.push(o);return d},cleanData:function(e){for(var t,i,n,o,r=J.event.special,s=0;void 0!==(i=e[s]);s++){if(J.acceptData(i)&&(o=i[vt.expando],o&&(t=vt.cache[o]))){if(t.events)for(n in t.events)r[n]?J.event.remove(i,n):J.removeEvent(i,n,t.handle);vt.cache[o]&&delete vt.cache[o]}delete yt.cache[i[yt.expando]]}}}),J.fn.extend({text:function(e){return gt(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=u(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=u(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?J.filter(e,this):this,o=0;null!=(i=n[o]);o++)t||1!==i.nodeType||J.cleanData(v(i)),i.parentNode&&(t&&J.contains(i.ownerDocument,i)&&f(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return gt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Rt.test(e)&&!Vt[(Lt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(jt,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(J.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=q.apply([],e);var i,n,o,r,s,a,l=0,h=this.length,d=this,c=h-1,u=e[0],f=J.isFunction(u);if(f||h>1&&"string"==typeof u&&!Z.checkClone&&Dt.test(u))return this.each(function(i){var n=d.eq(i);f&&(e[0]=u.call(this,i,n.html())),n.domManip(e,t)});if(h&&(i=J.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(o=J.map(v(i,"script"),p),r=o.length;h>l;l++)s=i,l!==c&&(s=J.clone(s,!0,!0),r&&J.merge(o,v(s,"script"))),t.call(this[l],s,l);if(r)for(a=o[o.length-1].ownerDocument,J.map(o,m),l=0;r>l;l++)s=o[l],Ft.test(s.type||"")&&!vt.access(s,"globalEval")&&J.contains(a,s)&&(s.src?J._evalUrl&&J._evalUrl(s.src):J.globalEval(s.textContent.replace(Bt,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var i,n=[],o=J(e),r=o.length-1,s=0;r>=s;s++)i=s===r?this:this.clone(!0),J(o[s])[t](i),G.apply(n,i.get());return this.pushStack(n)}});var Ut,Ot={},Nt=/^margin/,It=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Ht=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",o.appendChild(r);var t=e.getComputedStyle(s,null);i="1%"!==t.top,n="4px"===t.width,o.removeChild(r)}var i,n,o=Q.documentElement,r=Q.createElement("div"),s=Q.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(s),e.getComputedStyle&&J.extend(Z,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,i=s.appendChild(Q.createElement("div"));return i.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",s.style.width="1px",o.appendChild(r),t=!parseFloat(e.getComputedStyle(i,null).marginRight),o.removeChild(r),s.removeChild(i),t}}))}(),J.swap=function(e,t,i,n){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=i.apply(e,n||[]);for(r in t)e.style[r]=s[r];return o};var qt=/^(none|table(?!-c[ea]).+)/,Gt=new RegExp("^("+xt+")(.*)$","i"),Wt=new RegExp("^([+-])=("+xt+")","i"),Xt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=x(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=J.camelCase(t),l=e.style;return t=J.cssProps[a]||(J.cssProps[a]=k(l,a)),s=J.cssHooks[t]||J.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(o=s.get(e,!1,n))?o:l[t]:(r=typeof i,"string"===r&&(o=Wt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(J.css(e,t)),r="number"),null!=i&&i===i&&("number"!==r||J.cssNumber[a]||(i+="px"),Z.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l[t]=i)),void 0)}},css:function(e,t,i,n){var o,r,s,a=J.camelCase(t);return t=J.cssProps[a]||(J.cssProps[a]=k(e.style,a)),s=J.cssHooks[t]||J.cssHooks[a],s&&"get"in s&&(o=s.get(e,!0,i)),void 0===o&&(o=x(e,t,n)),"normal"===o&&t in Yt&&(o=Yt[t]),""===i||i?(r=parseFloat(o),i===!0||J.isNumeric(r)?r||0:o):o}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,i,n){return i?qt.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,Xt,function(){return S(e,t,n)}):S(e,t,n):void 0},set:function(e,i,n){var o=n&&Ht(e);return M(e,i,n?E(e,t,n,"border-box"===J.css(e,"boxSizing",!1,o),o):0)}}}),J.cssHooks.marginRight=_(Z.reliableMarginRight,function(e,t){return t?J.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];4>n;n++)o[e+_t[n]+t]=r[n]||r[n-2]||r[0];return o}},Nt.test(e)||(J.cssHooks[e+t].set=M)}),J.fn.extend({css:function(e,t){return gt(this,function(e,t,i){var n,o,r={},s=0;if(J.isArray(t)){for(n=Ht(e),o=t.length;o>s;s++)r[t[s]]=J.css(e,t[s],!1,n);return r}return void 0!==i?J.style(e,t,i):J.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){kt(this)?J(this).show():J(this).hide()})}}),J.Tween=C,C.prototype={constructor:C,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(J.cssNumber[i]?"":"px")},cur:function(){var e=C.propHooks[this.prop];return e&&e.get?e.get(this):C.propHooks._default.get(this)},run:function(e){var t,i=C.propHooks[this.prop];return this.pos=t=this.options.duration?J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=C.prototype.init,J.fx.step={};var Zt,Qt,$t=/^(?:toggle|show|hide)$/,Jt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[P],ii={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),o=Jt.exec(t),r=o&&o[3]||(J.cssNumber[e]?"":"px"),s=(J.cssNumber[e]||"px"!==r&&+n)&&Jt.exec(J.css(i.elem,e)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+n||1;do a=a||".5",s/=a,J.style(i.elem,e,s+r);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(s=i.start=+s||+n||0,i.unit=r,i.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),i}]};J.Animation=J.extend(D,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;o>n;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},prefilter:function(e,t){t?ti.unshift(e):ti.push(e)}}),J.speed=function(e,t,i){var n=e&&"object"==typeof e?J.extend({},e):{complete:i||!i&&t||J.isFunction(e)&&e,duration:e,easing:i&&t||t&&!J.isFunction(t)&&t};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(e,t,i,n){return this.filter(kt).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=J.isEmptyObject(e),r=J.speed(t,i,n),s=function(){var t=D(this,J.extend({},e),r);(o||vt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=J.timers,s=vt.get(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&ei.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));(t||!i)&&J.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=vt.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=J.timers,s=n?n.length:0;for(i.finish=!0,J.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),J.each(["toggle","show","hide"],function(e,t){var i=J.fn[t];J.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(j(t,!0),e,n,o)}}),J.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),J.timers=[],J.fx.tick=function(){var e,t=0,i=J.timers;for(Zt=J.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||J.fx.stop(),Zt=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Qt||(Qt=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Qt),Qt=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),i=t.appendChild(Q.createElement("option"));e.type="checkbox",Z.checkOn=""!==e.value,Z.optSelected=i.selected,t.disabled=!0,Z.optDisabled=!i.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",Z.radioValue="t"===e.value}();var ni,oi,ri=J.expr.attrHandle;J.fn.extend({attr:function(e,t){return gt(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===Et?J.prop(e,t,i):(1===r&&J.isXMLDoc(e)||(t=t.toLowerCase(),n=J.attrHooks[t]||(J.expr.match.bool.test(t)?oi:ni)),void 0===i?n&&"get"in n&&null!==(o=n.get(e,t))?o:(o=J.find.attr(e,t),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(e,i,t))?o:(e.setAttribute(t,i+""),i):void J.removeAttr(e,t))},removeAttr:function(e,t){var i,n,o=0,r=t&&t.match(pt);if(r&&1===e.nodeType)for(;i=r[o++];)n=J.propFix[i]||i,J.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!Z.radioValue&&"radio"===t&&J.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),oi={set:function(e,t,i){return t===!1?J.removeAttr(e,i):e.setAttribute(i,i),i}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ri[t]||J.find.attr;ri[t]=function(e,t,n){var o,r;return n||(r=ri[t],ri[t]=o,o=null!=i(e,t,n)?t.toLowerCase():null,ri[t]=r),o}});var si=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(e,t){return gt(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,o,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return r=1!==s||!J.isXMLDoc(e),r&&(t=J.propFix[t]||t,o=J.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||si.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Z.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var ai=/[\t\r\n\f]/g;J.fn.extend({addClass:function(e){var t,i,n,o,r,s,a="string"==typeof e&&e,l=0,h=this.length;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];h>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):" ")){for(r=0;o=t[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=J.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,o,r,s,a=0===arguments.length||"string"==typeof e&&e,l=0,h=this.length;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];h>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):"")){for(r=0;o=t[r++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");s=e?J.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(J.isFunction(e)?function(i){J(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,o=J(this),r=e.match(pt)||[];t=r[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(i===Et||"boolean"===i)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ai," ").indexOf(t)>=0)return!0;return!1}});var li=/\r/g;J.fn.extend({val:function(e){var t,i,n,o=this[0];{if(arguments.length)return n=J.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=n?e.call(this,i,J(this).val()):e,null==o?o="":"number"==typeof o?o+="":J.isArray(o)&&(o=J.map(o,function(e){return null==e?"":e+""})),t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=J.valHooks[o.type]||J.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(li,""):null==i?"":i)}}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value");return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,s=r?null:[],a=r?o+1:n.length,l=0>o?a:r?o:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==o||(Z.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&J.nodeName(i.parentNode,"optgroup"))){if(t=J(i).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,r=J.makeArray(t),s=o.length;s--;)n=o[s],(n.selected=J.inArray(n.value,r)>=0)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}},Z.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var hi=J.now(),di=/\?/;J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+e),t};var ci=/#.*$/,ui=/([?&])_=[^&]*/,pi=/^(.*?):[ \t]*([^\r\n]*)$/gm,mi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fi=/^(?:GET|HEAD)$/,gi=/^\/\//,vi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yi={},bi={},wi="*/".concat("*"),xi=e.location.href,_i=vi.exec(xi.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xi,type:"GET",isLocal:mi.test(_i[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,J.ajaxSettings),t):B(J.ajaxSettings,e)},ajaxPrefilter:F(yi),ajaxTransport:F(bi),ajax:function(e,t){function i(e,t,i,s){var l,d,v,y,w,_=t;2!==b&&(b=2,a&&clearTimeout(a),n=void 0,r=s||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(y=V(c,x,i)),y=U(c,y,x,l),l?(c.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(J.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(J.etag[o]=w)),204===e||"HEAD"===c.type?_="nocontent":304===e?_="notmodified":(_=y.state,d=y.data,v=y.error,l=!v)):(v=_,(e||!_)&&(_="error",0>e&&(e=0))),x.status=e,x.statusText=(t||_)+"",l?m.resolveWith(u,[d,_,x]):m.rejectWith(u,[x,_,v]),x.statusCode(g),g=void 0,h&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?d:v]),f.fireWith(u,[x,_]),h&&(p.trigger("ajaxComplete",[x,c]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,r,s,a,l,h,d,c=J.ajaxSetup({},t),u=c.context||c,p=c.context&&(u.nodeType||u.jquery)?J(u):J.event,m=J.Deferred(),f=J.Callbacks("once memory"),g=c.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;
if(2===b){if(!s)for(s={};t=pi.exec(r);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=y[i]=y[i]||e,v[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return n&&n.abort(t),i(0,t),this}};if(m.promise(x).complete=f.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||xi)+"").replace(ci,"").replace(gi,_i[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=J.trim(c.dataType||"*").toLowerCase().match(pt)||[""],null==c.crossDomain&&(l=vi.exec(c.url.toLowerCase()),c.crossDomain=!(!l||l[1]===_i[1]&&l[2]===_i[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(_i[3]||("http:"===_i[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=J.param(c.data,c.traditional)),z(yi,c,t,x),2===b)return x;h=J.event&&c.global,h&&0===J.active++&&J.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!fi.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(di.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=ui.test(o)?o.replace(ui,"$1_="+hi++):o+(di.test(o)?"&":"?")+"_="+hi++)),c.ifModified&&(J.lastModified[o]&&x.setRequestHeader("If-Modified-Since",J.lastModified[o]),J.etag[o]&&x.setRequestHeader("If-None-Match",J.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+wi+"; q=0.01":""):c.accepts["*"]);for(d in c.headers)x.setRequestHeader(d,c.headers[d]);if(c.beforeSend&&(c.beforeSend.call(u,x,c)===!1||2===b))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](c[d]);if(n=z(bi,c,t,x)){x.readyState=1,h&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,n.send(v,i)}catch(_){if(!(2>b))throw _;i(-1,_)}}else i(-1,"No Transport");return x},getJSON:function(e,t,i){return J.get(e,t,i,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,i,n,o){return J.isFunction(i)&&(o=o||n,n=i,i=void 0),J.ajax({url:e,type:t,dataType:o,data:i,success:n})}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(e){var t;return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(J.isFunction(e)?function(t){J(this).wrapInner(e.call(this,t))}:function(){var t=J(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(i){J(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)};var ki=/%20/g,Mi=/\[\]$/,Ei=/\r?\n/g,Si=/^(?:submit|button|image|reset|file)$/i,Ti=/^(?:input|select|textarea|keygen)/i;J.param=function(e,t){var i,n=[],o=function(e,t){t=J.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){o(this.name,this.value)});else for(i in e)O(i,e[i],t,o);return n.join("&").replace(ki,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements");return e?J.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!J(this).is(":disabled")&&Ti.test(this.nodeName)&&!Si.test(e)&&(this.checked||!Mt.test(e))}).map(function(e,t){var i=J(this).val();return null==i?null:J.isArray(i)?J.map(i,function(e){return{name:t.name,value:e.replace(Ei,"\r\n")}}):{name:t.name,value:i.replace(Ei,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ci=0,Ai={},ji={0:200,1223:204},Li=J.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Ai)Ai[e]()}),Z.cors=!!Li&&"withCredentials"in Li,Z.ajax=Li=!!Li,J.ajaxTransport(function(e){var t;return Z.cors||Li&&!e.crossDomain?{send:function(i,n){var o,r=e.xhr(),s=++Ci;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)r[o]=e.xhrFields[o];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)r.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(delete Ai[s],t=r.onload=r.onerror=null,"abort"===e?r.abort():"error"===e?n(r.status,r.statusText):n(ji[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:void 0,r.getAllResponseHeaders()))}},r.onload=t(),r.onerror=t("error"),t=Ai[s]=t("abort");try{r.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,o){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Pi=[],Ri=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pi.pop()||J.expando+"_"+hi++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,i,n){var o,r,s,a=t.jsonp!==!1&&(Ri.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ri.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ri,"$1"+o):t.jsonp!==!1&&(t.url+=(di.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||J.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},n.always(function(){e[o]=r,t[o]&&(t.jsonpCallback=i.jsonpCallback,Pi.push(o)),s&&J.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),J.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=st.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=J.buildFragment([e],t,o),o&&o.length&&J(o).remove(),J.merge([],n.childNodes))};var Di=J.fn.load;J.fn.load=function(e,t,i){if("string"!=typeof e&&Di)return Di.apply(this,arguments);var n,o,r,s=this,a=e.indexOf(" ");return a>=0&&(n=J.trim(e.slice(a)),e=e.slice(0,a)),J.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&J.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,s.html(n?J("<div>").append(J.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,r||[e.responseText,t,e])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length};var Fi=e.document.documentElement;J.offset={setOffset:function(e,t,i){var n,o,r,s,a,l,h,d=J.css(e,"position"),c=J(e),u={};"static"===d&&(e.style.position="relative"),a=c.offset(),r=J.css(e,"top"),l=J.css(e,"left"),h=("absolute"===d||"fixed"===d)&&(r+l).indexOf("auto")>-1,h?(n=c.position(),s=n.top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),J.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(u.top=t.top-a.top+s),null!=t.left&&(u.left=t.left-a.left+o),"using"in t?t.using.call(e,u):c.css(u)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)});var t,i,n=this[0],o={top:0,left:0},r=n&&n.ownerDocument;if(r)return t=r.documentElement,J.contains(t,n)?(typeof n.getBoundingClientRect!==Et&&(o=n.getBoundingClientRect()),i=N(r),{top:o.top+i.pageYOffset-t.clientTop,left:o.left+i.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===J.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(n=e.offset()),n.top+=J.css(e[0],"borderTopWidth",!0),n.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-J.css(i,"marginTop",!0),left:t.left-n.left-J.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Fi;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent;return e||Fi})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i;J.fn[t]=function(o){return gt(this,function(t,o,r){var s=N(t);return void 0===r?s?s[i]:t[o]:void(s?s.scrollTo(n?e.pageXOffset:r,n?r:e.pageYOffset):t[o]=r)},t,o,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=_(Z.pixelPosition,function(e,i){return i?(i=x(e,t),It.test(i)?J(e).position()[t]+"px":i):void 0})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){J.fn[n]=function(n,o){var r=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||o===!0?"margin":"border");return gt(this,function(t,i,n){var o;return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?J.css(t,i,s):J.style(t,i,n,s)},t,r?n:void 0,r,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var zi=e.jQuery,Bi=e.$;return J.noConflict=function(t){return e.$===J&&(e.$=Bi),t&&e.jQuery===J&&(e.jQuery=zi),J},typeof t===Et&&(e.jQuery=e.$=J),J})},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/katex.js":[function(e,t){var i=e("./src/ParseError"),n=e("./src/buildTree"),o=e("./src/parseTree"),r=e("./src/utils"),s=function(e,t){r.clearNode(t);var i=o(e),s=n(i).toNode();t.appendChild(s)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),s=function(){throw new i("KaTeX doesn't work in quirks mode.")});var a=function(e){var t=o(e);return n(t).toMarkup()};t.exports={render:s,renderToString:a,ParseError:i}},{"./src/ParseError":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/ParseError.js","./src/buildTree":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/buildTree.js","./src/parseTree":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/parseTree.js","./src/utils":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Lexer.js":[function(e,t){function i(e){this._input=e}function n(e,t,i){this.text=e,this.data=t,this.position=i}var o=e("./ParseError"),r=[/^[/|@.""`0-9a-zA-Z]/,/^[*+-]/,/^[=<>:]/,/^[,;]/,/^['\^_{}]/,/^[(\[]/,/^[)\]?!]/,/^~/],s=[/^[a-zA-Z0-9`!@*()-=+\[\]'";:?\/.,]/,/^[{}]/,/^~/],a=/^\s*/,l=/^( +|\\  +)/,h=/^\\(?:[a-zA-Z]+|.)/;i.prototype._innerLex=function(e,t,i){var r,s=this._input.slice(e);if(i)r=s.match(a)[0],e+=r.length,s=s.slice(r.length);else if(r=s.match(l),null!==r)return new n(" ",null,e+r[0].length);if(0===s.length)return new n("EOF",null,e);var d;if(d=s.match(h))return new n(d[0],null,e+d[0].length);for(var c=0;c<t.length;c++){var u=t[c];if(d=s.match(u))return new n(d[0],null,e+d[0].length)}throw new o("Unexpected character: '"+s[0]+"'",this,e)};var d=/^(#[a-z0-9]+|[a-z]+)/i;i.prototype._innerLexColor=function(e){var t=this._input.slice(e),i=t.match(a)[0];e+=i.length,t=t.slice(i.length);var r;if(r=t.match(d))return new n(r[0],null,e+r[0].length);throw new o("Invalid color",this,e)};var c=/^(-?)\s*(\d+(?:\.\d*)?|\.\d+)\s*([a-z]{2})/;i.prototype._innerLexSize=function(e){var t=this._input.slice(e),i=t.match(a)[0];e+=i.length,t=t.slice(i.length);var r;if(r=t.match(c)){var s=r[3];if("em"!==s&&"ex"!==s)throw new o("Invalid unit: '"+s+"'",this,e);return new n(r[0],{number:+(r[1]+r[2]),unit:s},e+r[0].length)}throw new o("Invalid size",this,e)},i.prototype._innerLexWhitespace=function(e){var t=this._input.slice(e),i=t.match(a)[0];return e+=i.length,new n(i,null,e)},i.prototype.lex=function(e,t){return"math"===t?this._innerLex(e,r,!0):"text"===t?this._innerLex(e,s,!1):"color"===t?this._innerLexColor(e):"size"===t?this._innerLexSize(e):"whitespace"===t?this._innerLexWhitespace(e):void 0},t.exports=i},{"./ParseError":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/ParseError.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Options.js":[function(e,t){function i(e,t,i,n,o){this.style=e,this.color=i,this.size=t,void 0===n&&(n=e),this.parentStyle=n,void 0===o&&(o=t),this.parentSize=o}i.prototype.withStyle=function(e){return new i(e,this.size,this.color,this.style,this.size)},i.prototype.withSize=function(e){return new i(this.style,e,this.color,this.style,this.size)},i.prototype.withColor=function(e){return new i(this.style,this.size,e,this.style,this.size)},i.prototype.reset=function(){return new i(this.style,this.size,this.color,this.style,this.size)};var n={"katex-blue":"#6495ed","katex-orange":"#ffa500","katex-pink":"#ff00af","katex-red":"#df0030","katex-green":"#28ae7b","katex-gray":"gray","katex-purple":"#9d38bd"};i.prototype.getColor=function(){return n[this.color]||this.color},t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/ParseError.js":[function(e,t){function i(e,t,n){var o="KaTeX parse error: "+e;if(void 0!==t&&void 0!==n){o+=" at position "+n+": ";var r=t._input;r=r.slice(0,n)+"̲"+r.slice(n);var s=Math.max(0,n-15),a=n+15;o+=r.slice(s,a)}var l=new Error(o);return l.name="ParseError",l.__proto__=i.prototype,l.position=n,l}i.prototype.__proto__=Error.prototype,t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Parser.js":[function(e,t){function i(e){this.lexer=new a(e)}function n(e,t,i){this.type=e,this.value=t,this.mode=i}function o(e,t){this.result=e,this.position=t}function r(e,t,i,n,o,r){this.result=e,this.isFunction=t,this.allowedInText=i,this.numArgs=n,this.numOptionalArgs=o,this.argTypes=r}var s=e("./functions"),a=e("./Lexer"),l=e("./symbols"),h=e("./utils"),d=e("./ParseError");i.prototype.expect=function(e,t){if(e.text!==t)throw new d("Expected '"+t+"', got '"+e.text+"'",this.lexer,e.position)},i.prototype.parse=function(){var e=this.parseInput(0,"math");return e.result},i.prototype.parseInput=function(e,t){var i=this.parseExpression(e,t,!1,null),n=this.lexer.lex(i.position,t);return this.expect(n,"EOF"),i},i.prototype.parseExpression=function(e,t,i,n){for(var r=[];;){var s=this.lexer.lex(e,t);if(null!=n&&s.text===n)break;var a=this.parseAtom(e,t);if(!a)break;if(i&&"infix"===a.result.type)break;r.push(a.result),e=a.position}return new o(this.handleInfixNodes(r,t),e)},i.prototype.handleInfixNodes=function(e,t){for(var i,o,r=-1,a=0;a<e.length;a++){var l=e[a];if("infix"===l.type){if(-1!==r)throw new d("only one infix operator per group",this.lexer,-1);r=a,o=l.value.replaceWith,i=s.funcs[o]}}if(-1!==r){var h,c,u=e.slice(0,r),p=e.slice(r+1);h=1===u.length&&"ordgroup"===u[0].type?u[0]:new n("ordgroup",u,t),c=1===p.length&&"ordgroup"===p[0].type?p[0]:new n("ordgroup",p,t);var m=i.handler(o,h,c);return[new n(m.type,m,t)]}return e};var c=1;i.prototype.handleSupSubscript=function(e,t,i,n){var o=this.parseGroup(e,t);if(o){if(o.numArgs>0){var r=s.getGreediness(o.result.result);if(r>c)return this.parseFunction(e,t);throw new d("Got function '"+o.result.result+"' with no arguments as "+n,this.lexer,e)}return o.result}throw new d("Expected group after '"+i+"'",this.lexer,e)},i.prototype.parseAtom=function(e,t){var i=this.parseImplicitGroup(e,t);if("text"===t)return i;var r;i?r=i.position:(r=e,i=void 0);for(var s,a,l;;){var h=this.lexer.lex(r,t);if("^"===h.text){if(s)throw new d("Double superscript",this.lexer,r);l=this.handleSupSubscript(h.position,t,h.text,"superscript"),r=l.position,s=l.result}else if("_"===h.text){if(a)throw new d("Double subscript",this.lexer,r);l=this.handleSupSubscript(h.position,t,h.text,"subscript"),r=l.position,a=l.result}else{if("'"!==h.text)break;var c=new n("textord","\\prime",t),u=[c];for(r=h.position;"'"===(h=this.lexer.lex(r,t)).text;)u.push(c),r=h.position;s=new n("ordgroup",u,t)}}return s||a?new o(new n("supsub",{base:i&&i.result,sup:s,sub:a},t),r):i};var u=["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],p=["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"];i.prototype.parseImplicitGroup=function(e,t){var i=this.parseSymbol(e,t);if(!i||!i.result)return this.parseFunction(e,t);var r,s=i.result.result;if("\\left"===s){var a=this.parseFunction(e,t);r=this.parseExpression(a.position,t,!1,"}");var l=this.parseSymbol(r.position,t);if(l&&"\\right"===l.result.result){var c=this.parseFunction(r.position,t);return new o(new n("leftright",{body:r.result,left:a.result.value.value,right:c.result.value.value},t),c.position)}throw new d("Missing \\right",this.lexer,r.position)}return"\\right"===s?null:h.contains(u,s)?(r=this.parseExpression(i.result.position,t,!1,"}"),new o(new n("sizing",{size:"size"+(h.indexOf(u,s)+1),value:r.result},t),r.position)):h.contains(p,s)?(r=this.parseExpression(i.result.position,t,!0,"}"),new o(new n("styling",{style:s.slice(1,s.length-5),value:r.result},t),r.position)):this.parseFunction(e,t)},i.prototype.parseFunction=function(e,t){var i=this.parseGroup(e,t);if(i){if(i.isFunction){var r=i.result.result;if("text"===t&&!i.allowedInText)throw new d("Can't use function '"+r+"' in text mode",this.lexer,i.position);var a,l=i.result.position,h=i.numArgs+i.numOptionalArgs;if(h>0){for(var c=s.getGreediness(r),u=[r],p=[l],m=0;h>m;m++){var f,g=i.argTypes&&i.argTypes[m];if(m<i.numOptionalArgs){if(f=g?this.parseSpecialGroup(l,g,t,!0):this.parseOptionalGroup(l,t),!f){u.push(null),p.push(l);continue}}else if(f=g?this.parseSpecialGroup(l,g,t):this.parseGroup(l,t),!f)throw new d("Expected group after '"+i.result.result+"'",this.lexer,l);var v;if(f.numArgs>0){var y=s.getGreediness(f.result.result);if(!(y>c))throw new d("Got function '"+f.result.result+"' as argument to function '"+i.result.result+"'",this.lexer,f.result.position-1);v=this.parseFunction(l,t)}else v=f.result;u.push(v.result),p.push(v.position),l=v.position}u.push(p),a=s.funcs[r].handler.apply(this,u)}else a=s.funcs[r].handler.apply(this,[r]);return new o(new n(a.type,a,t),l)}return i.result}return null},i.prototype.parseSpecialGroup=function(e,t,i,s){if("color"===t||"size"===t){var a=this.lexer.lex(e,i);if(s&&"["!==a.text)return null;this.expect(a,s?"[":"{");var l,h=this.lexer.lex(a.position,t);l="color"===t?h.text:h.data;var d=this.lexer.lex(h.position,i);return this.expect(d,s?"]":"}"),new r(new o(new n(t,l,i),d.position),!1)}if("text"===t){var c=this.lexer.lex(e,"whitespace");e=c.position}return s?this.parseOptionalGroup(e,t):this.parseGroup(e,t)},i.prototype.parseGroup=function(e,t){var i=this.lexer.lex(e,t);if("{"===i.text){var s=this.parseExpression(i.position,t,!1,"}"),a=this.lexer.lex(s.position,t);return this.expect(a,"}"),new r(new o(new n("ordgroup",s.result,t),a.position),!1)}return this.parseSymbol(e,t)},i.prototype.parseOptionalGroup=function(e,t){var i=this.lexer.lex(e,t);if("["===i.text){var s=this.parseExpression(i.position,t,!1,"]"),a=this.lexer.lex(s.position,t);return this.expect(a,"]"),new r(new o(new n("ordgroup",s.result,t),a.position),!1)}return null},i.prototype.parseSymbol=function(e,t){var i=this.lexer.lex(e,t);if(s.funcs[i.text]){var a=s.funcs[i.text],h=a.argTypes;if(h){h=h.slice();for(var d=0;d<h.length;d++)"original"===h[d]&&(h[d]=t)}return new r(new o(i.text,i.position),!0,a.allowedInText,a.numArgs,a.numOptionalArgs,h)}return l[t][i.text]?new r(new o(new n(l[t][i.text].group,i.text,t),i.position),!1):null},t.exports=i},{"./Lexer":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Lexer.js","./ParseError":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/ParseError.js","./functions":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/functions.js","./symbols":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/symbols.js","./utils":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Style.js":[function(e,t){function i(e,t,i,n){this.id=e,this.size=t,this.cramped=n,this.sizeMultiplier=i}i.prototype.sup=function(){return p[m[this.id]]},i.prototype.sub=function(){return p[f[this.id]]},i.prototype.fracNum=function(){return p[g[this.id]]},i.prototype.fracDen=function(){return p[v[this.id]]},i.prototype.cramp=function(){return p[y[this.id]]},i.prototype.cls=function(){return c[this.size]+(this.cramped?" cramped":" uncramped")},i.prototype.reset=function(){return u[this.size]};var n=0,o=1,r=2,s=3,a=4,l=5,h=6,d=7,c=["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"],u=["reset-textstyle","reset-textstyle","reset-scriptstyle","reset-scriptscriptstyle"],p=[new i(n,0,1,!1),new i(o,0,1,!0),new i(r,1,1,!1),new i(s,1,1,!0),new i(a,2,.7,!1),new i(l,2,.7,!0),new i(h,3,.5,!1),new i(d,3,.5,!0)],m=[a,l,a,l,h,d,h,d],f=[l,l,l,l,d,d,d,d],g=[r,s,a,l,h,d,h,d],v=[s,s,l,l,d,d,d,d],y=[o,o,s,s,l,l,d,d];t.exports={DISPLAY:p[n],TEXT:p[r],SCRIPT:p[a],SCRIPTSCRIPT:p[h]}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/buildCommon.js":[function(e,t){var i=e("./domTree"),n=e("./fontMetrics"),o=e("./symbols"),r=function(e,t,r,s,a){o[r][e]&&o[r][e].replace&&(e=o[r][e].replace);var l,h=n.getCharacterMetrics(e,t);return h?l=new i.symbolNode(e,h.height,h.depth,h.italic,h.skew,a):("undefined"!=typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"'"),l=new i.symbolNode(e,0,0,0,0,a)),s&&(l.style.color=s),l},s=function(e,t,i,n){return r(e,"Math-Italic",t,i,n.concat(["mathit"]))},a=function(e,t,i,n){return"main"===o[t][e].font?r(e,"Main-Regular",t,i,n):r(e,"AMS-Regular",t,i,n.concat(["amsrm"]))},l=function(e){var t=0,i=0,n=0;if(e.children)for(var o=0;o<e.children.length;o++)e.children[o].height>t&&(t=e.children[o].height),e.children[o].depth>i&&(i=e.children[o].depth),e.children[o].maxFontSize>n&&(n=e.children[o].maxFontSize);e.height=t,e.depth=i,e.maxFontSize=n},h=function(e,t,n){var o=new i.span(e,t);return l(o),n&&(o.style.color=n),o},d=function(e){var t=new i.documentFragment(e);return l(t),t},c=function(e,t){var n=h([],[new i.symbolNode("​")]);n.style.fontSize=t/e.style.sizeMultiplier+"em";var o=h(["fontsize-ensurer","reset-"+e.size,"size5"],[n]);return o},u=function(e,t,n,o){var r,s,a;if("individualShift"===t){var l=e;for(e=[l[0]],r=-l[0].shift-l[0].elem.depth,s=r,a=1;a<l.length;a++){var d=-l[a].shift-s-l[a].elem.depth,u=d-(l[a-1].elem.height+l[a-1].elem.depth);s+=d,e.push({type:"kern",size:u}),e.push(l[a])}}else if("top"===t){var p=n;for(a=0;a<e.length;a++)p-="kern"===e[a].type?e[a].size:e[a].elem.height+e[a].elem.depth;r=p}else r="bottom"===t?-n:"shift"===t?-e[0].elem.depth-n:"firstBaseline"===t?-e[0].elem.depth:0;var m=0;for(a=0;a<e.length;a++)"elem"===e[a].type&&(m=Math.max(m,e[a].elem.maxFontSize));var f=c(o,m),g=[];for(s=r,a=0;a<e.length;a++)if("kern"===e[a].type)s+=e[a].size;else{var v=e[a].elem,y=-v.depth-s;s+=v.height+v.depth;var b=h([],[f,v]);b.height-=y,b.depth+=y,b.style.top=y+"em",g.push(b)}var w=h(["baseline-fix"],[f,new i.symbolNode("​")]);g.push(w);var x=h(["vlist"],g);return x.height=Math.max(s,x.height),x.depth=Math.max(-r,x.depth),x};t.exports={makeSymbol:r,mathit:s,mathrm:a,makeSpan:h,makeFragment:d,makeVList:u}},{"./domTree":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/domTree.js","./fontMetrics":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/fontMetrics.js","./symbols":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/symbols.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/buildTree.js":[function(e,t){var i=e("./Options"),n=e("./ParseError"),o=e("./Style"),r=e("./buildCommon"),s=e("./delimiter"),a=e("./domTree"),l=e("./fontMetrics"),h=e("./utils"),d=r.makeSpan,c=function(e,t,i){for(var n=[],o=0;o<e.length;o++){var r=e[o];n.push(b(r,t,i)),i=r}return n},u={mathord:"mord",textord:"mord",bin:"mbin",rel:"mrel",text:"mord",open:"mopen",close:"mclose",inner:"minner",frac:"minner",spacing:"mord",punct:"mpunct",ordgroup:"mord",op:"mop",katex:"mord",overline:"mord",rule:"mord",leftright:"minner",sqrt:"mord",accent:"mord"},p=function(e){return null==e?u.mathord:"supsub"===e.type?p(e.value.base):"llap"===e.type||"rlap"===e.type?p(e.value):"color"===e.type?p(e.value.value):"sizing"===e.type?p(e.value.value):"styling"===e.type?p(e.value.value):"delimsizing"===e.type?u[e.value.delimType]:u[e.type]},m=function(e,t){return e?"op"===e.type?e.value.limits&&t.style.size===o.DISPLAY.size:"accent"===e.type?g(e.value.base):null:!1},f=function(e){return e?"ordgroup"===e.type?1===e.value.length?f(e.value[0]):e:"color"===e.type&&1===e.value.value.length?f(e.value.value[0]):e:!1},g=function(e){var t=f(e);return"mathord"===t.type||"textord"===t.type||"bin"===t.type||"rel"===t.type||"inner"===t.type||"open"===t.type||"close"===t.type||"punct"===t.type},v={mathord:function(e,t){return r.mathit(e.value,e.mode,t.getColor(),["mord"])},textord:function(e,t){return r.mathrm(e.value,e.mode,t.getColor(),["mord"])},bin:function(e,t,i){for(var n="mbin",o=i;o&&"color"==o.type;){var s=o.value.value;o=s[s.length-1]}return(!i||h.contains(["mbin","mopen","mrel","mop","mpunct"],p(o)))&&(e.type="textord",n="mord"),r.mathrm(e.value,e.mode,t.getColor(),[n])},rel:function(e,t){return r.mathrm(e.value,e.mode,t.getColor(),["mrel"])},open:function(e,t){return r.mathrm(e.value,e.mode,t.getColor(),["mopen"])},close:function(e,t){return r.mathrm(e.value,e.mode,t.getColor(),["mclose"])},inner:function(e,t){return r.mathrm(e.value,e.mode,t.getColor(),["minner"])},punct:function(e,t){return r.mathrm(e.value,e.mode,t.getColor(),["mpunct"])},ordgroup:function(e,t){return d(["mord",t.style.cls()],c(e.value,t.reset()))},text:function(e,t){return d(["text","mord",t.style.cls()],c(e.value.body,t.reset()))},color:function(e,t,i){var n=c(e.value.value,t.withColor(e.value.color),i);return new r.makeFragment(n)},supsub:function(e,t,i){if(m(e.value.base,t))return v[e.value.base.type](e,t,i);var n,s,h,c,u=b(e.value.base,t.reset());e.value.sup&&(h=b(e.value.sup,t.withStyle(t.style.sup())),n=d([t.style.reset(),t.style.sup().cls()],[h])),e.value.sub&&(c=b(e.value.sub,t.withStyle(t.style.sub())),s=d([t.style.reset(),t.style.sub().cls()],[c]));var f,y;g(e.value.base)?(f=0,y=0):(f=u.height-l.metrics.supDrop,y=u.depth+l.metrics.subDrop);var w;w=t.style===o.DISPLAY?l.metrics.sup1:t.style.cramped?l.metrics.sup3:l.metrics.sup2;var x,_=o.TEXT.sizeMultiplier*t.style.sizeMultiplier,k=.5/l.metrics.ptPerEm/_+"em";if(e.value.sup)if(e.value.sub){f=Math.max(f,w,h.depth+.25*l.metrics.xHeight),y=Math.max(y,l.metrics.sub2);var M=l.metrics.defaultRuleThickness;if(f-h.depth-(c.height-y)<4*M){y=4*M-(f-h.depth)+c.height;var E=.8*l.metrics.xHeight-(f-h.depth);E>0&&(f+=E,y-=E)}x=r.makeVList([{type:"elem",elem:s,shift:y},{type:"elem",elem:n,shift:-f}],"individualShift",null,t),u instanceof a.symbolNode&&(x.children[0].style.marginLeft=-u.italic+"em"),x.children[0].style.marginRight=k,x.children[1].style.marginRight=k}else f=Math.max(f,w,h.depth+.25*l.metrics.xHeight),x=r.makeVList([{type:"elem",elem:n}],"shift",-f,t),x.children[0].style.marginRight=k;else y=Math.max(y,l.metrics.sub1,c.height-.8*l.metrics.xHeight),x=r.makeVList([{type:"elem",elem:s}],"shift",y,t),x.children[0].style.marginRight=k,u instanceof a.symbolNode&&(x.children[0].style.marginLeft=-u.italic+"em");return d([p(e.value.base)],[u,x])},genfrac:function(e,t){var i=t.style;"display"===e.value.size?i=o.DISPLAY:"text"===e.value.size&&(i=o.TEXT);var n,a=i.fracNum(),h=i.fracDen(),c=b(e.value.numer,t.withStyle(a)),u=d([i.reset(),a.cls()],[c]),p=b(e.value.denom,t.withStyle(h)),m=d([i.reset(),h.cls()],[p]);n=e.value.hasBarLine?l.metrics.defaultRuleThickness/t.style.sizeMultiplier:0;var f,g,v;i.size===o.DISPLAY.size?(f=l.metrics.num1,g=n>0?3*n:7*l.metrics.defaultRuleThickness,v=l.metrics.denom1):(n>0?(f=l.metrics.num2,g=n):(f=l.metrics.num3,g=3*l.metrics.defaultRuleThickness),v=l.metrics.denom2);var y;if(0===n){var w=f-c.depth-(p.height-v);g>w&&(f+=.5*(g-w),v+=.5*(g-w)),y=r.makeVList([{type:"elem",elem:m,shift:v},{type:"elem",elem:u,shift:-f}],"individualShift",null,t)}else{var x=l.metrics.axisHeight;f-c.depth-(x+.5*n)<g&&(f+=g-(f-c.depth-(x+.5*n))),x-.5*n-(p.height-v)<g&&(v+=g-(x-.5*n-(p.height-v)));var _=d([t.style.reset(),o.TEXT.cls(),"frac-line"]);_.height=n;var k=-(x-.5*n);y=r.makeVList([{type:"elem",elem:m,shift:v},{type:"elem",elem:_,shift:k},{type:"elem",elem:u,shift:-f}],"individualShift",null,t)}y.height*=i.sizeMultiplier/t.style.sizeMultiplier,y.depth*=i.sizeMultiplier/t.style.sizeMultiplier;var M,E=[d(["mfrac"],[y])];return M=i.size===o.DISPLAY.size?l.metrics.delim1:l.metrics.getDelim2(i),null!=e.value.leftDelim&&E.unshift(s.customSizedDelim(e.value.leftDelim,M,!0,t.withStyle(i),e.mode)),null!=e.value.rightDelim&&E.push(s.customSizedDelim(e.value.rightDelim,M,!0,t.withStyle(i),e.mode)),d(["minner",t.style.reset(),i.cls()],E,t.getColor())},spacing:function(e){if("\\ "===e.value||"\\space"===e.value||" "===e.value||"~"===e.value)return d(["mord","mspace"],[r.mathrm(e.value,e.mode)]);var t={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"};return d(["mord","mspace",t[e.value]])},llap:function(e,t){var i=d(["inner"],[b(e.value.body,t.reset())]),n=d(["fix"],[]);return d(["llap",t.style.cls()],[i,n])},rlap:function(e,t){var i=d(["inner"],[b(e.value.body,t.reset())]),n=d(["fix"],[]);return d(["rlap",t.style.cls()],[i,n])},op:function(e,t){var i,n,s=!1;"supsub"===e.type&&(i=e.value.sup,n=e.value.sub,e=e.value.base,s=!0);var a=["\\smallint"],c=!1;t.style.size===o.DISPLAY.size&&e.value.symbol&&!h.contains(a,e.value.body)&&(c=!0);var u,p=0,m=0;if(e.value.symbol){var f=c?"Size2-Regular":"Size1-Regular";u=r.makeSymbol(e.value.body,f,"math",t.getColor(),["op-symbol",c?"large-op":"small-op","mop"]),p=(u.height-u.depth)/2-l.metrics.axisHeight*t.style.sizeMultiplier,m=u.italic}else{for(var g=[],v=1;v<e.value.body.length;v++)g.push(r.mathrm(e.value.body[v],e.mode));u=d(["mop"],g,t.getColor())}if(s){u=d([],[u]);var y,w,x,_;if(i){var k=b(i,t.withStyle(t.style.sup()));y=d([t.style.reset(),t.style.sup().cls()],[k]),w=Math.max(l.metrics.bigOpSpacing1,l.metrics.bigOpSpacing3-k.depth)}if(n){var M=b(n,t.withStyle(t.style.sub()));x=d([t.style.reset(),t.style.sub().cls()],[M]),_=Math.max(l.metrics.bigOpSpacing2,l.metrics.bigOpSpacing4-M.height)
}var E,S,T;if(i)if(n){if(!i&&!n)return u;T=l.metrics.bigOpSpacing5+x.height+x.depth+_+u.depth+p,E=r.makeVList([{type:"kern",size:l.metrics.bigOpSpacing5},{type:"elem",elem:x},{type:"kern",size:_},{type:"elem",elem:u},{type:"kern",size:w},{type:"elem",elem:y},{type:"kern",size:l.metrics.bigOpSpacing5}],"bottom",T,t),E.children[0].style.marginLeft=-m+"em",E.children[2].style.marginLeft=m+"em"}else T=u.depth+p,E=r.makeVList([{type:"elem",elem:u},{type:"kern",size:w},{type:"elem",elem:y},{type:"kern",size:l.metrics.bigOpSpacing5}],"bottom",T,t),E.children[1].style.marginLeft=m+"em";else S=u.height-p,E=r.makeVList([{type:"kern",size:l.metrics.bigOpSpacing5},{type:"elem",elem:x},{type:"kern",size:_},{type:"elem",elem:u}],"top",S,t),E.children[0].style.marginLeft=-m+"em";return d(["mop","op-limits"],[E])}return e.value.symbol&&(u.style.top=p+"em"),u},katex:function(e,t){var i=d(["k"],[r.mathrm("K",e.mode)]),n=d(["a"],[r.mathrm("A",e.mode)]);n.height=.75*(n.height+.2),n.depth=.75*(n.height-.2);var o=d(["t"],[r.mathrm("T",e.mode)]),s=d(["e"],[r.mathrm("E",e.mode)]);s.height=s.height-.2155,s.depth=s.depth+.2155;var a=d(["x"],[r.mathrm("X",e.mode)]);return d(["katex-logo"],[i,n,o,s,a],t.getColor())},overline:function(e,t){var i=b(e.value.body,t.withStyle(t.style.cramp())),n=l.metrics.defaultRuleThickness/t.style.sizeMultiplier,s=d([t.style.reset(),o.TEXT.cls(),"overline-line"]);s.height=n,s.maxFontSize=1;var a=r.makeVList([{type:"elem",elem:i},{type:"kern",size:3*n},{type:"elem",elem:s},{type:"kern",size:n}],"firstBaseline",null,t);return d(["overline","mord"],[a],t.getColor())},sqrt:function(e,t){var i=b(e.value.body,t.withStyle(t.style.cramp())),n=l.metrics.defaultRuleThickness/t.style.sizeMultiplier,a=d([t.style.reset(),o.TEXT.cls(),"sqrt-line"],[],t.getColor());a.height=n,a.maxFontSize=1;var h=n;t.style.id<o.TEXT.id&&(h=l.metrics.xHeight);var c=n+h/4,u=(i.height+i.depth)*t.style.sizeMultiplier,p=u+c+n,m=d(["sqrt-sign"],[s.customSizedDelim("\\surd",p,!1,t,e.mode)],t.getColor()),f=m.height+m.depth-n;f>i.height+i.depth+c&&(c=(c+f-i.height-i.depth)/2);var g=-(i.height+c+n)+m.height;m.style.top=g+"em",m.height-=g,m.depth+=g;var v;return v=0===i.height&&0===i.depth?d():r.makeVList([{type:"elem",elem:i},{type:"kern",size:c},{type:"elem",elem:a},{type:"kern",size:n}],"firstBaseline",null,t),d(["sqrt","mord"],[m,v])},sizing:function(e,t,i){var n=c(e.value.value,t.withSize(e.value.size),i),o=d(["mord"],[d(["sizing","reset-"+t.size,e.value.size,t.style.cls()],n)]),r=y[e.value.size];return o.maxFontSize=r*t.style.sizeMultiplier,o},styling:function(e,t,i){var n={display:o.DISPLAY,text:o.TEXT,script:o.SCRIPT,scriptscript:o.SCRIPTSCRIPT},r=n[e.value.style],s=c(e.value.value,t.withStyle(r),i);return d([t.style.reset(),r.cls()],s)},delimsizing:function(e,t){var i=e.value.value;return"."===i?d([u[e.value.delimType]]):d([u[e.value.delimType]],[s.sizedDelim(i,e.value.size,t,e.mode)])},leftright:function(e,t){for(var i=c(e.value.body,t.reset()),n=0,o=0,r=0;r<i.length;r++)n=Math.max(i[r].height,n),o=Math.max(i[r].depth,o);n*=t.style.sizeMultiplier,o*=t.style.sizeMultiplier;var a;a="."===e.value.left?d(["nulldelimiter"]):s.leftRightDelim(e.value.left,n,o,t,e.mode),i.unshift(a);var l;return l="."===e.value.right?d(["nulldelimiter"]):s.leftRightDelim(e.value.right,n,o,t,e.mode),i.push(l),d(["minner",t.style.cls()],i,t.getColor())},rule:function(e,t){var i=d(["mord","rule"],[],t.getColor()),n=0;e.value.shift&&(n=e.value.shift.number,"ex"===e.value.shift.unit&&(n*=l.metrics.xHeight));var o=e.value.width.number;"ex"===e.value.width.unit&&(o*=l.metrics.xHeight);var r=e.value.height.number;return"ex"===e.value.height.unit&&(r*=l.metrics.xHeight),n/=t.style.sizeMultiplier,o/=t.style.sizeMultiplier,r/=t.style.sizeMultiplier,i.style.borderRightWidth=o+"em",i.style.borderTopWidth=r+"em",i.style.bottom=n+"em",i.width=o,i.height=r+n,i.depth=-n,i},accent:function(e,t,i){var n,o=e.value.base;if("supsub"===e.type){var s=e;e=s.value.base,o=e.value.base,s.value.base=o,n=b(s,t.reset(),i)}var a,h=b(o,t.withStyle(t.style.cramp()));if(g(o)){var c=f(o),u=b(c,t.withStyle(t.style.cramp()));a=u.skew}else a=0;var p=Math.min(h.height,l.metrics.xHeight),m=r.makeSymbol(e.value.accent,"Main-Regular","math",t.getColor());m.italic=0;var v="\\vec"===e.value.accent?"accent-vec":null,y=d(["accent-body",v],[d([],[m])]);y=r.makeVList([{type:"elem",elem:h},{type:"kern",size:-p},{type:"elem",elem:y}],"firstBaseline",null,t),y.children[1].style.marginLeft=2*a+"em";var w=d(["mord","accent"],[y]);return n?(n.children[0]=w,n.height=Math.max(w.height,n.height),n.classes[0]="mord",n):w}},y={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49},b=function(e,t,i){if(!e)return d();if(v[e.type]){var o,r=v[e.type](e,t,i);return t.style!==t.parentStyle&&(o=t.style.sizeMultiplier/t.parentStyle.sizeMultiplier,r.height*=o,r.depth*=o),t.size!==t.parentSize&&(o=y[t.size]/y[t.parentSize],r.height*=o,r.depth*=o),r}throw new n("Got group of unknown type: '"+e.type+"'")},w=function(e){var t=new i(o.TEXT,"size5",""),n=c(e,t),r=d(["base",t.style.cls()],n),s=d(["strut"]),a=d(["strut","bottom"]);s.style.height=r.height+"em",a.style.height=r.height+r.depth+"em",a.style.verticalAlign=-r.depth+"em";var l=d(["katex"],[d(["katex-inner"],[s,a,r])]);return l};t.exports=w},{"./Options":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Options.js","./ParseError":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/ParseError.js","./Style":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Style.js","./buildCommon":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/buildCommon.js","./delimiter":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/delimiter.js","./domTree":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/domTree.js","./fontMetrics":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/fontMetrics.js","./utils":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/delimiter.js":[function(e,t){var i=e("./ParseError"),n=e("./Style"),o=e("./buildCommon"),r=e("./fontMetrics"),s=e("./symbols"),a=e("./utils"),l=o.makeSpan,h=function(e,t){return s.math[e]&&s.math[e].replace?r.getCharacterMetrics(s.math[e].replace,t):r.getCharacterMetrics(e,t)},d=function(e,t,i){return o.makeSymbol(e,"Size"+t+"-Regular",i)},c=function(e,t,i){var n=l(["style-wrap",i.style.reset(),t.cls()],[e]),o=t.sizeMultiplier/i.style.sizeMultiplier;return n.height*=o,n.depth*=o,n.maxFontSize=t.sizeMultiplier,n},u=function(e,t,i,n,s){var a=o.makeSymbol(e,"Main-Regular",s),l=c(a,t,n);if(i){var h=(1-n.style.sizeMultiplier/t.sizeMultiplier)*r.metrics.axisHeight;l.style.top=h+"em",l.height-=h,l.depth+=h}return l},p=function(e,t,i,o,s){var a=d(e,t,s),h=c(l(["delimsizing","size"+t],[a],o.getColor()),n.TEXT,o);if(i){var u=(1-o.style.sizeMultiplier)*r.metrics.axisHeight;h.style.top=u+"em",h.height-=u,h.depth+=u}return h},m=function(e,t,i){var n;"Size1-Regular"===t?n="delim-size1":"Size4-Regular"===t&&(n="delim-size4");var r=l(["delimsizinginner",n],[l([],[o.makeSymbol(e,t,i)])]);return{type:"elem",elem:r}},f=function(e,t,i,s,a){var d,u,p,f;d=p=f=e,u=null;var g="Size1-Regular";"\\uparrow"===e?p=f="⏐":"\\Uparrow"===e?p=f="‖":"\\downarrow"===e?d=p="⏐":"\\Downarrow"===e?d=p="‖":"\\updownarrow"===e?(d="\\uparrow",p="⏐",f="\\downarrow"):"\\Updownarrow"===e?(d="\\Uparrow",p="‖",f="\\Downarrow"):"["===e||"\\lbrack"===e?(d="⎡",p="⎢",f="⎣",g="Size4-Regular"):"]"===e||"\\rbrack"===e?(d="⎤",p="⎥",f="⎦",g="Size4-Regular"):"\\lfloor"===e?(p=d="⎢",f="⎣",g="Size4-Regular"):"\\lceil"===e?(d="⎡",p=f="⎢",g="Size4-Regular"):"\\rfloor"===e?(p=d="⎥",f="⎦",g="Size4-Regular"):"\\rceil"===e?(d="⎤",p=f="⎥",g="Size4-Regular"):"("===e?(d="⎛",p="⎜",f="⎝",g="Size4-Regular"):")"===e?(d="⎞",p="⎟",f="⎠",g="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(d="⎧",u="⎨",f="⎩",p="⎪",g="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(d="⎫",u="⎬",f="⎭",p="⎪",g="Size4-Regular"):"\\surd"===e&&(d="",f="⎷",p="",g="Size4-Regular");var v,y,b=h(d,g),w=b.height+b.depth,x=h(p,g),_=x.height+x.depth,k=h(f,g),M=k.height+k.depth;null!==u&&(v=h(u,g),y=v.height+v.depth);var E=w+M;for(null!==u&&(E+=y);t>E;)E+=_,null!==u&&(E+=_);var S=r.metrics.axisHeight;i&&(S*=s.style.sizeMultiplier);var T=E/2-S,C=[];C.push(m(f,g,a));var A;if(null===u){var j=E-w-M,L=Math.ceil(j/_);for(A=0;L>A;A++)C.push(m(p,g,a))}else{var P=E/2-w-y/2,R=Math.ceil(P/_),D=E/2-w-y/2,F=Math.ceil(D/_);for(A=0;R>A;A++)C.push(m(p,g,a));for(C.push(m(u,g,a)),A=0;F>A;A++)C.push(m(p,g,a))}C.push(m(d,g,a));var z=o.makeVList(C,"bottom",T,s);return c(l(["delimsizing","mult"],[z],s.getColor()),n.TEXT,s)},g=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],v=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert"],y=["<",">","\\langle","\\rangle","/","\\backslash"],b=[0,1.2,1.8,2.4,3],w=function(e,t,n,o){if("<"===e?e="\\langle":">"===e&&(e="\\rangle"),a.contains(g,e)||a.contains(y,e))return p(e,t,!1,n,o);if(a.contains(v,e))return f(e,b[t],!1,n,o);throw new i("Illegal delimiter: '"+e+"'")},x=[{type:"small",style:n.SCRIPTSCRIPT},{type:"small",style:n.SCRIPT},{type:"small",style:n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],_=[{type:"small",style:n.SCRIPTSCRIPT},{type:"small",style:n.SCRIPT},{type:"small",style:n.TEXT},{type:"stack"}],k=[{type:"small",style:n.SCRIPTSCRIPT},{type:"small",style:n.SCRIPT},{type:"small",style:n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],M=function(e){return"small"===e.type?"Main-Regular":"large"===e.type?"Size"+e.size+"-Regular":"stack"===e.type?"Size4-Regular":void 0},E=function(e,t,i,n){for(var o=Math.min(2,3-n.style.size),r=o;r<i.length&&"stack"!==i[r].type;r++){var s=h(e,M(i[r])),a=s.height+s.depth;if("small"===i[r].type&&(a*=i[r].style.sizeMultiplier),a>t)return i[r]}return i[i.length-1]},S=function(e,t,i,n,o){"<"===e?e="\\langle":">"===e&&(e="\\rangle");var r;r=a.contains(y,e)?x:a.contains(g,e)?k:_;var s=E(e,t,r,n);return"small"===s.type?u(e,s.style,i,n,o):"large"===s.type?p(e,s.size,i,n,o):"stack"===s.type?f(e,t,i,n,o):void 0},T=function(e,t,i,n,o){var s=r.metrics.axisHeight*n.style.sizeMultiplier,a=901,l=5/r.metrics.ptPerEm,h=Math.max(t-s,i+s),d=Math.max(h/500*a,2*h-l);return S(e,d,!0,n,o)};t.exports={sizedDelim:w,customSizedDelim:S,leftRightDelim:T}},{"./ParseError":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/ParseError.js","./Style":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Style.js","./buildCommon":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/buildCommon.js","./fontMetrics":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/fontMetrics.js","./symbols":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/symbols.js","./utils":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/domTree.js":[function(e,t){function i(e,t,i,n,o,r){this.classes=e||[],this.children=t||[],this.height=i||0,this.depth=n||0,this.maxFontSize=o||0,this.style=r||{}}function n(e,t,i,n){this.children=e||[],this.height=t||0,this.depth=i||0,this.maxFontSize=n||0}function o(e,t,i,n,o,r,s){this.value=e||"",this.height=t||0,this.depth=i||0,this.italic=n||0,this.skew=o||0,this.classes=r||[],this.style=s||{},this.maxFontSize=0}var r=e("./utils"),s=function(e){e=e.slice();for(var t=e.length-1;t>=0;t--)e[t]||e.splice(t,1);return e.join(" ")};i.prototype.toNode=function(){var e=document.createElement("span");e.className=s(this.classes);for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);for(var i=0;i<this.children.length;i++)e.appendChild(this.children[i].toNode());return e},i.prototype.toMarkup=function(){var e="<span";this.classes.length&&(e+=' class="',e+=r.escape(s(this.classes)),e+='"');var t="";for(var i in this.style)this.style.hasOwnProperty(i)&&(t+=r.hyphenate(i)+":"+this.style[i]+";");t&&(e+=' style="'+r.escape(t)+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</span>"},n.prototype.toNode=function(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e},n.prototype.toMarkup=function(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e},o.prototype.toNode=function(){var e=document.createTextNode(this.value),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=this.italic+"em"),this.classes.length>0&&(t=t||document.createElement("span"),t.className=s(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(t=t||document.createElement("span"),t.style[i]=this.style[i]);return t?(t.appendChild(e),t):e},o.prototype.toMarkup=function(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=r.escape(s(this.classes)),t+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=r.hyphenate(n)+":"+this.style[n]+";");i&&(e=!0,t+=' style="'+r.escape(i)+'"');var o=r.escape(this.value);return e?(t+=">",t+=o,t+="</span>"):o},t.exports={span:i,documentFragment:n,symbolNode:o}},{"./utils":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/fontMetrics.js":[function(e,t){var i=e("./Style"),n=.431,o=1,r=.677,s=.394,a=.444,l=.686,h=.345,d=.413,c=.363,u=.289,p=.15,m=.247,f=.386,g=.05,v=2.39,y=1.01,b=.81,w=.71,x=.25,_=.04,k=.111,M=.166,E=.2,S=.6,T=.1,C=10,A={xHeight:n,quad:o,num1:r,num2:s,num3:a,denom1:l,denom2:h,sup1:d,sup2:c,sup3:u,sub1:p,sub2:m,supDrop:f,subDrop:g,axisHeight:x,defaultRuleThickness:_,bigOpSpacing1:k,bigOpSpacing2:M,bigOpSpacing3:E,bigOpSpacing4:S,bigOpSpacing5:T,ptPerEm:C,delim1:v,getDelim2:function(e){if(e.size===i.TEXT.size)return y;if(e.size===i.SCRIPT.size)return b;if(e.size===i.SCRIPTSCRIPT.size)return w;throw new Error("Unexpected style size: "+e.size)}},j={"AMS-Regular":{10003:{depth:0,height:.69224,italic:0,skew:0},10016:{depth:0,height:.69224,italic:0,skew:0},1008:{depth:0,height:.43056,italic:.04028,skew:0},107:{depth:0,height:.68889,italic:0,skew:0},10731:{depth:.11111,height:.69224,italic:0,skew:0},10846:{depth:.19444,height:.75583,italic:0,skew:0},10877:{depth:.13667,height:.63667,italic:0,skew:0},10878:{depth:.13667,height:.63667,italic:0,skew:0},10885:{depth:.25583,height:.75583,italic:0,skew:0},10886:{depth:.25583,height:.75583,italic:0,skew:0},10887:{depth:.13597,height:.63597,italic:0,skew:0},10888:{depth:.13597,height:.63597,italic:0,skew:0},10889:{depth:.26167,height:.75726,italic:0,skew:0},10890:{depth:.26167,height:.75726,italic:0,skew:0},10891:{depth:.48256,height:.98256,italic:0,skew:0},10892:{depth:.48256,height:.98256,italic:0,skew:0},10901:{depth:.13667,height:.63667,italic:0,skew:0},10902:{depth:.13667,height:.63667,italic:0,skew:0},10933:{depth:.25142,height:.75726,italic:0,skew:0},10934:{depth:.25142,height:.75726,italic:0,skew:0},10935:{depth:.26167,height:.75726,italic:0,skew:0},10936:{depth:.26167,height:.75726,italic:0,skew:0},10937:{depth:.26167,height:.75726,italic:0,skew:0},10938:{depth:.26167,height:.75726,italic:0,skew:0},10949:{depth:.25583,height:.75583,italic:0,skew:0},10950:{depth:.25583,height:.75583,italic:0,skew:0},10955:{depth:.28481,height:.79383,italic:0,skew:0},10956:{depth:.28481,height:.79383,italic:0,skew:0},165:{depth:0,height:.675,italic:.025,skew:0},174:{depth:.15559,height:.69224,italic:0,skew:0},240:{depth:0,height:.68889,italic:0,skew:0},295:{depth:0,height:.68889,italic:0,skew:0},57350:{depth:.08167,height:.58167,italic:0,skew:0},57351:{depth:.08167,height:.58167,italic:0,skew:0},57352:{depth:.08167,height:.58167,italic:0,skew:0},57353:{depth:0,height:.43056,italic:.04028,skew:0},57356:{depth:.25142,height:.75726,italic:0,skew:0},57357:{depth:.25142,height:.75726,italic:0,skew:0},57358:{depth:.41951,height:.91951,italic:0,skew:0},57359:{depth:.30274,height:.79383,italic:0,skew:0},57360:{depth:.30274,height:.79383,italic:0,skew:0},57361:{depth:.41951,height:.91951,italic:0,skew:0},57366:{depth:.25142,height:.75726,italic:0,skew:0},57367:{depth:.25142,height:.75726,italic:0,skew:0},57368:{depth:.25142,height:.75726,italic:0,skew:0},57369:{depth:.25142,height:.75726,italic:0,skew:0},57370:{depth:.13597,height:.63597,italic:0,skew:0},57371:{depth:.13597,height:.63597,italic:0,skew:0},65:{depth:0,height:.68889,italic:0,skew:0},66:{depth:0,height:.68889,italic:0,skew:0},67:{depth:0,height:.68889,italic:0,skew:0},68:{depth:0,height:.68889,italic:0,skew:0},69:{depth:0,height:.68889,italic:0,skew:0},70:{depth:0,height:.68889,italic:0,skew:0},71:{depth:0,height:.68889,italic:0,skew:0},710:{depth:0,height:.825,italic:0,skew:0},72:{depth:0,height:.68889,italic:0,skew:0},73:{depth:0,height:.68889,italic:0,skew:0},732:{depth:0,height:.9,italic:0,skew:0},74:{depth:.16667,height:.68889,italic:0,skew:0},75:{depth:0,height:.68889,italic:0,skew:0},76:{depth:0,height:.68889,italic:0,skew:0},77:{depth:0,height:.68889,italic:0,skew:0},770:{depth:0,height:.825,italic:0,skew:0},771:{depth:0,height:.9,italic:0,skew:0},78:{depth:0,height:.68889,italic:0,skew:0},79:{depth:.16667,height:.68889,italic:0,skew:0},80:{depth:0,height:.68889,italic:0,skew:0},81:{depth:.16667,height:.68889,italic:0,skew:0},82:{depth:0,height:.68889,italic:0,skew:0},8245:{depth:0,height:.54986,italic:0,skew:0},83:{depth:0,height:.68889,italic:0,skew:0},84:{depth:0,height:.68889,italic:0,skew:0},8463:{depth:0,height:.68889,italic:0,skew:0},8487:{depth:0,height:.68889,italic:0,skew:0},8498:{depth:0,height:.68889,italic:0,skew:0},85:{depth:0,height:.68889,italic:0,skew:0},8502:{depth:0,height:.68889,italic:0,skew:0},8503:{depth:0,height:.68889,italic:0,skew:0},8504:{depth:0,height:.68889,italic:0,skew:0},8513:{depth:0,height:.68889,italic:0,skew:0},8592:{depth:-.03598,height:.46402,italic:0,skew:0},8594:{depth:-.03598,height:.46402,italic:0,skew:0},86:{depth:0,height:.68889,italic:0,skew:0},8602:{depth:-.13313,height:.36687,italic:0,skew:0},8603:{depth:-.13313,height:.36687,italic:0,skew:0},8606:{depth:.01354,height:.52239,italic:0,skew:0},8608:{depth:.01354,height:.52239,italic:0,skew:0},8610:{depth:.01354,height:.52239,italic:0,skew:0},8611:{depth:.01354,height:.52239,italic:0,skew:0},8619:{depth:0,height:.54986,italic:0,skew:0},8620:{depth:0,height:.54986,italic:0,skew:0},8621:{depth:-.13313,height:.37788,italic:0,skew:0},8622:{depth:-.13313,height:.36687,italic:0,skew:0},8624:{depth:0,height:.69224,italic:0,skew:0},8625:{depth:0,height:.69224,italic:0,skew:0},8630:{depth:0,height:.43056,italic:0,skew:0},8631:{depth:0,height:.43056,italic:0,skew:0},8634:{depth:.08198,height:.58198,italic:0,skew:0},8635:{depth:.08198,height:.58198,italic:0,skew:0},8638:{depth:.19444,height:.69224,italic:0,skew:0},8639:{depth:.19444,height:.69224,italic:0,skew:0},8642:{depth:.19444,height:.69224,italic:0,skew:0},8643:{depth:.19444,height:.69224,italic:0,skew:0},8644:{depth:.1808,height:.675,italic:0,skew:0},8646:{depth:.1808,height:.675,italic:0,skew:0},8647:{depth:.1808,height:.675,italic:0,skew:0},8648:{depth:.19444,height:.69224,italic:0,skew:0},8649:{depth:.1808,height:.675,italic:0,skew:0},8650:{depth:.19444,height:.69224,italic:0,skew:0},8651:{depth:.01354,height:.52239,italic:0,skew:0},8652:{depth:.01354,height:.52239,italic:0,skew:0},8653:{depth:-.13313,height:.36687,italic:0,skew:0},8654:{depth:-.13313,height:.36687,italic:0,skew:0},8655:{depth:-.13313,height:.36687,italic:0,skew:0},8666:{depth:.13667,height:.63667,italic:0,skew:0},8667:{depth:.13667,height:.63667,italic:0,skew:0},8669:{depth:-.13313,height:.37788,italic:0,skew:0},87:{depth:0,height:.68889,italic:0,skew:0},8705:{depth:0,height:.825,italic:0,skew:0},8708:{depth:0,height:.68889,italic:0,skew:0},8709:{depth:.08167,height:.58167,italic:0,skew:0},8717:{depth:0,height:.43056,italic:0,skew:0},8722:{depth:-.03598,height:.46402,italic:0,skew:0},8724:{depth:.08198,height:.69224,italic:0,skew:0},8726:{depth:.08167,height:.58167,italic:0,skew:0},8733:{depth:0,height:.69224,italic:0,skew:0},8736:{depth:0,height:.69224,italic:0,skew:0},8737:{depth:0,height:.69224,italic:0,skew:0},8738:{depth:.03517,height:.52239,italic:0,skew:0},8739:{depth:.08167,height:.58167,italic:0,skew:0},8740:{depth:.25142,height:.74111,italic:0,skew:0},8741:{depth:.08167,height:.58167,italic:0,skew:0},8742:{depth:.25142,height:.74111,italic:0,skew:0},8756:{depth:0,height:.69224,italic:0,skew:0},8757:{depth:0,height:.69224,italic:0,skew:0},8764:{depth:-.13313,height:.36687,italic:0,skew:0},8765:{depth:-.13313,height:.37788,italic:0,skew:0},8769:{depth:-.13313,height:.36687,italic:0,skew:0},8770:{depth:-.03625,height:.46375,italic:0,skew:0},8774:{depth:.30274,height:.79383,italic:0,skew:0},8776:{depth:-.01688,height:.48312,italic:0,skew:0},8778:{depth:.08167,height:.58167,italic:0,skew:0},8782:{depth:.06062,height:.54986,italic:0,skew:0},8783:{depth:.06062,height:.54986,italic:0,skew:0},8785:{depth:.08198,height:.58198,italic:0,skew:0},8786:{depth:.08198,height:.58198,italic:0,skew:0},8787:{depth:.08198,height:.58198,italic:0,skew:0},8790:{depth:0,height:.69224,italic:0,skew:0},8791:{depth:.22958,height:.72958,italic:0,skew:0},8796:{depth:.08198,height:.91667,italic:0,skew:0},88:{depth:0,height:.68889,italic:0,skew:0},8806:{depth:.25583,height:.75583,italic:0,skew:0},8807:{depth:.25583,height:.75583,italic:0,skew:0},8808:{depth:.25142,height:.75726,italic:0,skew:0},8809:{depth:.25142,height:.75726,italic:0,skew:0},8812:{depth:.25583,height:.75583,italic:0,skew:0},8814:{depth:.20576,height:.70576,italic:0,skew:0},8815:{depth:.20576,height:.70576,italic:0,skew:0},8816:{depth:.30274,height:.79383,italic:0,skew:0},8817:{depth:.30274,height:.79383,italic:0,skew:0},8818:{depth:.22958,height:.72958,italic:0,skew:0},8819:{depth:.22958,height:.72958,italic:0,skew:0},8822:{depth:.1808,height:.675,italic:0,skew:0},8823:{depth:.1808,height:.675,italic:0,skew:0},8828:{depth:.13667,height:.63667,italic:0,skew:0},8829:{depth:.13667,height:.63667,italic:0,skew:0},8830:{depth:.22958,height:.72958,italic:0,skew:0},8831:{depth:.22958,height:.72958,italic:0,skew:0},8832:{depth:.20576,height:.70576,italic:0,skew:0},8833:{depth:.20576,height:.70576,italic:0,skew:0},8840:{depth:.30274,height:.79383,italic:0,skew:0},8841:{depth:.30274,height:.79383,italic:0,skew:0},8842:{depth:.13597,height:.63597,italic:0,skew:0},8843:{depth:.13597,height:.63597,italic:0,skew:0},8847:{depth:.03517,height:.54986,italic:0,skew:0},8848:{depth:.03517,height:.54986,italic:0,skew:0},8858:{depth:.08198,height:.58198,italic:0,skew:0},8859:{depth:.08198,height:.58198,italic:0,skew:0},8861:{depth:.08198,height:.58198,italic:0,skew:0},8862:{depth:0,height:.675,italic:0,skew:0},8863:{depth:0,height:.675,italic:0,skew:0},8864:{depth:0,height:.675,italic:0,skew:0},8865:{depth:0,height:.675,italic:0,skew:0},8872:{depth:0,height:.69224,italic:0,skew:0},8873:{depth:0,height:.69224,italic:0,skew:0},8874:{depth:0,height:.69224,italic:0,skew:0},8876:{depth:0,height:.68889,italic:0,skew:0},8877:{depth:0,height:.68889,italic:0,skew:0},8878:{depth:0,height:.68889,italic:0,skew:0},8879:{depth:0,height:.68889,italic:0,skew:0},8882:{depth:.03517,height:.54986,italic:0,skew:0},8883:{depth:.03517,height:.54986,italic:0,skew:0},8884:{depth:.13667,height:.63667,italic:0,skew:0},8885:{depth:.13667,height:.63667,italic:0,skew:0},8888:{depth:0,height:.54986,italic:0,skew:0},8890:{depth:.19444,height:.43056,italic:0,skew:0},8891:{depth:.19444,height:.69224,italic:0,skew:0},8892:{depth:.19444,height:.69224,italic:0,skew:0},89:{depth:0,height:.68889,italic:0,skew:0},8901:{depth:0,height:.54986,italic:0,skew:0},8903:{depth:.08167,height:.58167,italic:0,skew:0},8905:{depth:.08167,height:.58167,italic:0,skew:0},8906:{depth:.08167,height:.58167,italic:0,skew:0},8907:{depth:0,height:.69224,italic:0,skew:0},8908:{depth:0,height:.69224,italic:0,skew:0},8909:{depth:-.03598,height:.46402,italic:0,skew:0},8910:{depth:0,height:.54986,italic:0,skew:0},8911:{depth:0,height:.54986,italic:0,skew:0},8912:{depth:.03517,height:.54986,italic:0,skew:0},8913:{depth:.03517,height:.54986,italic:0,skew:0},8914:{depth:0,height:.54986,italic:0,skew:0},8915:{depth:0,height:.54986,italic:0,skew:0},8916:{depth:0,height:.69224,italic:0,skew:0},8918:{depth:.0391,height:.5391,italic:0,skew:0},8919:{depth:.0391,height:.5391,italic:0,skew:0},8920:{depth:.03517,height:.54986,italic:0,skew:0},8921:{depth:.03517,height:.54986,italic:0,skew:0},8922:{depth:.38569,height:.88569,italic:0,skew:0},8923:{depth:.38569,height:.88569,italic:0,skew:0},8926:{depth:.13667,height:.63667,italic:0,skew:0},8927:{depth:.13667,height:.63667,italic:0,skew:0},8928:{depth:.30274,height:.79383,italic:0,skew:0},8929:{depth:.30274,height:.79383,italic:0,skew:0},8934:{depth:.23222,height:.74111,italic:0,skew:0},8935:{depth:.23222,height:.74111,italic:0,skew:0},8936:{depth:.23222,height:.74111,italic:0,skew:0},8937:{depth:.23222,height:.74111,italic:0,skew:0},8938:{depth:.20576,height:.70576,italic:0,skew:0},8939:{depth:.20576,height:.70576,italic:0,skew:0},8940:{depth:.30274,height:.79383,italic:0,skew:0},8941:{depth:.30274,height:.79383,italic:0,skew:0},8994:{depth:.19444,height:.69224,italic:0,skew:0},8995:{depth:.19444,height:.69224,italic:0,skew:0},90:{depth:0,height:.68889,italic:0,skew:0},9416:{depth:.15559,height:.69224,italic:0,skew:0},9484:{depth:0,height:.69224,italic:0,skew:0},9488:{depth:0,height:.69224,italic:0,skew:0},9492:{depth:0,height:.37788,italic:0,skew:0},9496:{depth:0,height:.37788,italic:0,skew:0},9585:{depth:.19444,height:.68889,italic:0,skew:0},9586:{depth:.19444,height:.74111,italic:0,skew:0},9632:{depth:0,height:.675,italic:0,skew:0},9633:{depth:0,height:.675,italic:0,skew:0},9650:{depth:0,height:.54986,italic:0,skew:0},9651:{depth:0,height:.54986,italic:0,skew:0},9654:{depth:.03517,height:.54986,italic:0,skew:0},9660:{depth:0,height:.54986,italic:0,skew:0},9661:{depth:0,height:.54986,italic:0,skew:0},9664:{depth:.03517,height:.54986,italic:0,skew:0},9674:{depth:.11111,height:.69224,italic:0,skew:0},9733:{depth:.19444,height:.69224,italic:0,skew:0},989:{depth:.08167,height:.58167,italic:0,skew:0}},"Main-Bold":{100:{depth:0,height:.69444,italic:0,skew:0},101:{depth:0,height:.44444,italic:0,skew:0},102:{depth:0,height:.69444,italic:.10903,skew:0},10216:{depth:.25,height:.75,italic:0,skew:0},10217:{depth:.25,height:.75,italic:0,skew:0},103:{depth:.19444,height:.44444,italic:.01597,skew:0},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.69444,italic:0,skew:0},106:{depth:.19444,height:.69444,italic:0,skew:0},107:{depth:0,height:.69444,italic:0,skew:0},108:{depth:0,height:.69444,italic:0,skew:0},10815:{depth:0,height:.68611,italic:0,skew:0},109:{depth:0,height:.44444,italic:0,skew:0},10927:{depth:.19667,height:.69667,italic:0,skew:0},10928:{depth:.19667,height:.69667,italic:0,skew:0},110:{depth:0,height:.44444,italic:0,skew:0},111:{depth:0,height:.44444,italic:0,skew:0},112:{depth:.19444,height:.44444,italic:0,skew:0},113:{depth:.19444,height:.44444,italic:0,skew:0},114:{depth:0,height:.44444,italic:0,skew:0},115:{depth:0,height:.44444,italic:0,skew:0},116:{depth:0,height:.63492,italic:0,skew:0},117:{depth:0,height:.44444,italic:0,skew:0},118:{depth:0,height:.44444,italic:.01597,skew:0},119:{depth:0,height:.44444,italic:.01597,skew:0},120:{depth:0,height:.44444,italic:0,skew:0},121:{depth:.19444,height:.44444,italic:.01597,skew:0},122:{depth:0,height:.44444,italic:0,skew:0},123:{depth:.25,height:.75,italic:0,skew:0},124:{depth:.25,height:.75,italic:0,skew:0},125:{depth:.25,height:.75,italic:0,skew:0},126:{depth:.35,height:.34444,italic:0,skew:0},168:{depth:0,height:.69444,italic:0,skew:0},172:{depth:0,height:.44444,italic:0,skew:0},175:{depth:0,height:.59611,italic:0,skew:0},176:{depth:0,height:.69444,italic:0,skew:0},177:{depth:.13333,height:.63333,italic:0,skew:0},180:{depth:0,height:.69444,italic:0,skew:0},215:{depth:.13333,height:.63333,italic:0,skew:0},247:{depth:.13333,height:.63333,italic:0,skew:0},305:{depth:0,height:.44444,italic:0,skew:0},33:{depth:0,height:.69444,italic:0,skew:0},34:{depth:0,height:.69444,italic:0,skew:0},35:{depth:.19444,height:.69444,italic:0,skew:0},36:{depth:.05556,height:.75,italic:0,skew:0},37:{depth:.05556,height:.75,italic:0,skew:0},38:{depth:0,height:.69444,italic:0,skew:0},39:{depth:0,height:.69444,italic:0,skew:0},40:{depth:.25,height:.75,italic:0,skew:0},41:{depth:.25,height:.75,italic:0,skew:0},42:{depth:0,height:.75,italic:0,skew:0},43:{depth:.13333,height:.63333,italic:0,skew:0},44:{depth:.19444,height:.15556,italic:0,skew:0},45:{depth:0,height:.44444,italic:0,skew:0},46:{depth:0,height:.15556,italic:0,skew:0},47:{depth:.25,height:.75,italic:0,skew:0},48:{depth:0,height:.64444,italic:0,skew:0},49:{depth:0,height:.64444,italic:0,skew:0},50:{depth:0,height:.64444,italic:0,skew:0},51:{depth:0,height:.64444,italic:0,skew:0},52:{depth:0,height:.64444,italic:0,skew:0},53:{depth:0,height:.64444,italic:0,skew:0},54:{depth:0,height:.64444,italic:0,skew:0},55:{depth:0,height:.64444,italic:0,skew:0},56:{depth:0,height:.64444,italic:0,skew:0},567:{depth:.19444,height:.44444,italic:0,skew:0},57:{depth:0,height:.64444,italic:0,skew:0},58:{depth:0,height:.44444,italic:0,skew:0},59:{depth:.19444,height:.44444,italic:0,skew:0},60:{depth:.08556,height:.58556,italic:0,skew:0},61:{depth:-.10889,height:.39111,italic:0,skew:0},62:{depth:.08556,height:.58556,italic:0,skew:0},63:{depth:0,height:.69444,italic:0,skew:0},64:{depth:0,height:.69444,italic:0,skew:0},65:{depth:0,height:.68611,italic:0,skew:0},66:{depth:0,height:.68611,italic:0,skew:0},67:{depth:0,height:.68611,italic:0,skew:0},68:{depth:0,height:.68611,italic:0,skew:0},69:{depth:0,height:.68611,italic:0,skew:0},70:{depth:0,height:.68611,italic:0,skew:0},71:{depth:0,height:.68611,italic:0,skew:0},710:{depth:0,height:.69444,italic:0,skew:0},711:{depth:0,height:.63194,italic:0,skew:0},713:{depth:0,height:.59611,italic:0,skew:0},714:{depth:0,height:.69444,italic:0,skew:0},715:{depth:0,height:.69444,italic:0,skew:0},72:{depth:0,height:.68611,italic:0,skew:0},728:{depth:0,height:.69444,italic:0,skew:0},729:{depth:0,height:.69444,italic:0,skew:0},73:{depth:0,height:.68611,italic:0,skew:0},730:{depth:0,height:.69444,italic:0,skew:0},732:{depth:0,height:.69444,italic:0,skew:0},74:{depth:0,height:.68611,italic:0,skew:0},75:{depth:0,height:.68611,italic:0,skew:0},76:{depth:0,height:.68611,italic:0,skew:0},768:{depth:0,height:.69444,italic:0,skew:0},769:{depth:0,height:.69444,italic:0,skew:0},77:{depth:0,height:.68611,italic:0,skew:0},770:{depth:0,height:.69444,italic:0,skew:0},771:{depth:0,height:.69444,italic:0,skew:0},772:{depth:0,height:.59611,italic:0,skew:0},774:{depth:0,height:.69444,italic:0,skew:0},775:{depth:0,height:.69444,italic:0,skew:0},776:{depth:0,height:.69444,italic:0,skew:0},778:{depth:0,height:.69444,italic:0,skew:0},779:{depth:0,height:.69444,italic:0,skew:0},78:{depth:0,height:.68611,italic:0,skew:0},780:{depth:0,height:.63194,italic:0,skew:0},79:{depth:0,height:.68611,italic:0,skew:0},80:{depth:0,height:.68611,italic:0,skew:0},81:{depth:.19444,height:.68611,italic:0,skew:0},82:{depth:0,height:.68611,italic:0,skew:0},8211:{depth:0,height:.44444,italic:.03194,skew:0},8212:{depth:0,height:.44444,italic:.03194,skew:0},8216:{depth:0,height:.69444,italic:0,skew:0},8217:{depth:0,height:.69444,italic:0,skew:0},8220:{depth:0,height:.69444,italic:0,skew:0},8221:{depth:0,height:.69444,italic:0,skew:0},8224:{depth:.19444,height:.69444,italic:0,skew:0},8225:{depth:.19444,height:.69444,italic:0,skew:0},824:{depth:.19444,height:.69444,italic:0,skew:0},8242:{depth:0,height:.55556,italic:0,skew:0},83:{depth:0,height:.68611,italic:0,skew:0},84:{depth:0,height:.68611,italic:0,skew:0},8407:{depth:0,height:.72444,italic:.15486,skew:0},8463:{depth:0,height:.69444,italic:0,skew:0},8465:{depth:0,height:.69444,italic:0,skew:0},8467:{depth:0,height:.69444,italic:0,skew:0},8472:{depth:.19444,height:.44444,italic:0,skew:0},8476:{depth:0,height:.69444,italic:0,skew:0},85:{depth:0,height:.68611,italic:0,skew:0},8501:{depth:0,height:.69444,italic:0,skew:0},8592:{depth:-.10889,height:.39111,italic:0,skew:0},8593:{depth:.19444,height:.69444,italic:0,skew:0},8594:{depth:-.10889,height:.39111,italic:0,skew:0},8595:{depth:.19444,height:.69444,italic:0,skew:0},8596:{depth:-.10889,height:.39111,italic:0,skew:0},8597:{depth:.25,height:.75,italic:0,skew:0},8598:{depth:.19444,height:.69444,italic:0,skew:0},8599:{depth:.19444,height:.69444,italic:0,skew:0},86:{depth:0,height:.68611,italic:.01597,skew:0},8600:{depth:.19444,height:.69444,italic:0,skew:0},8601:{depth:.19444,height:.69444,italic:0,skew:0},8636:{depth:-.10889,height:.39111,italic:0,skew:0},8637:{depth:-.10889,height:.39111,italic:0,skew:0},8640:{depth:-.10889,height:.39111,italic:0,skew:0},8641:{depth:-.10889,height:.39111,italic:0,skew:0},8656:{depth:-.10889,height:.39111,italic:0,skew:0},8657:{depth:.19444,height:.69444,italic:0,skew:0},8658:{depth:-.10889,height:.39111,italic:0,skew:0},8659:{depth:.19444,height:.69444,italic:0,skew:0},8660:{depth:-.10889,height:.39111,italic:0,skew:0},8661:{depth:.25,height:.75,italic:0,skew:0},87:{depth:0,height:.68611,italic:.01597,skew:0},8704:{depth:0,height:.69444,italic:0,skew:0},8706:{depth:0,height:.69444,italic:.06389,skew:0},8707:{depth:0,height:.69444,italic:0,skew:0},8709:{depth:.05556,height:.75,italic:0,skew:0},8711:{depth:0,height:.68611,italic:0,skew:0},8712:{depth:.08556,height:.58556,italic:0,skew:0},8715:{depth:.08556,height:.58556,italic:0,skew:0},8722:{depth:.13333,height:.63333,italic:0,skew:0},8723:{depth:.13333,height:.63333,italic:0,skew:0},8725:{depth:.25,height:.75,italic:0,skew:0},8726:{depth:.25,height:.75,italic:0,skew:0},8727:{depth:-.02778,height:.47222,italic:0,skew:0},8728:{depth:-.02639,height:.47361,italic:0,skew:0},8729:{depth:-.02639,height:.47361,italic:0,skew:0},8730:{depth:.18,height:.82,italic:0,skew:0},8733:{depth:0,height:.44444,italic:0,skew:0},8734:{depth:0,height:.44444,italic:0,skew:0},8736:{depth:0,height:.69224,italic:0,skew:0},8739:{depth:.25,height:.75,italic:0,skew:0},8741:{depth:.25,height:.75,italic:0,skew:0},8743:{depth:0,height:.55556,italic:0,skew:0},8744:{depth:0,height:.55556,italic:0,skew:0},8745:{depth:0,height:.55556,italic:0,skew:0},8746:{depth:0,height:.55556,italic:0,skew:0},8747:{depth:.19444,height:.69444,italic:.12778,skew:0},8764:{depth:-.10889,height:.39111,italic:0,skew:0},8768:{depth:.19444,height:.69444,italic:0,skew:0},8771:{depth:.00222,height:.50222,italic:0,skew:0},8776:{depth:.02444,height:.52444,italic:0,skew:0},8781:{depth:.00222,height:.50222,italic:0,skew:0},88:{depth:0,height:.68611,italic:0,skew:0},8801:{depth:.00222,height:.50222,italic:0,skew:0},8804:{depth:.19667,height:.69667,italic:0,skew:0},8805:{depth:.19667,height:.69667,italic:0,skew:0},8810:{depth:.08556,height:.58556,italic:0,skew:0},8811:{depth:.08556,height:.58556,italic:0,skew:0},8826:{depth:.08556,height:.58556,italic:0,skew:0},8827:{depth:.08556,height:.58556,italic:0,skew:0},8834:{depth:.08556,height:.58556,italic:0,skew:0},8835:{depth:.08556,height:.58556,italic:0,skew:0},8838:{depth:.19667,height:.69667,italic:0,skew:0},8839:{depth:.19667,height:.69667,italic:0,skew:0},8846:{depth:0,height:.55556,italic:0,skew:0},8849:{depth:.19667,height:.69667,italic:0,skew:0},8850:{depth:.19667,height:.69667,italic:0,skew:0},8851:{depth:0,height:.55556,italic:0,skew:0},8852:{depth:0,height:.55556,italic:0,skew:0},8853:{depth:.13333,height:.63333,italic:0,skew:0},8854:{depth:.13333,height:.63333,italic:0,skew:0},8855:{depth:.13333,height:.63333,italic:0,skew:0},8856:{depth:.13333,height:.63333,italic:0,skew:0},8857:{depth:.13333,height:.63333,italic:0,skew:0},8866:{depth:0,height:.69444,italic:0,skew:0},8867:{depth:0,height:.69444,italic:0,skew:0},8868:{depth:0,height:.69444,italic:0,skew:0},8869:{depth:0,height:.69444,italic:0,skew:0},89:{depth:0,height:.68611,italic:.02875,skew:0},8900:{depth:-.02639,height:.47361,italic:0,skew:0},8901:{depth:-.02639,height:.47361,italic:0,skew:0},8902:{depth:-.02778,height:.47222,italic:0,skew:0},8968:{depth:.25,height:.75,italic:0,skew:0},8969:{depth:.25,height:.75,italic:0,skew:0},8970:{depth:.25,height:.75,italic:0,skew:0},8971:{depth:.25,height:.75,italic:0,skew:0},8994:{depth:-.13889,height:.36111,italic:0,skew:0},8995:{depth:-.13889,height:.36111,italic:0,skew:0},90:{depth:0,height:.68611,italic:0,skew:0},91:{depth:.25,height:.75,italic:0,skew:0},915:{depth:0,height:.68611,italic:0,skew:0},916:{depth:0,height:.68611,italic:0,skew:0},92:{depth:.25,height:.75,italic:0,skew:0},920:{depth:0,height:.68611,italic:0,skew:0},923:{depth:0,height:.68611,italic:0,skew:0},926:{depth:0,height:.68611,italic:0,skew:0},928:{depth:0,height:.68611,italic:0,skew:0},93:{depth:.25,height:.75,italic:0,skew:0},931:{depth:0,height:.68611,italic:0,skew:0},933:{depth:0,height:.68611,italic:0,skew:0},934:{depth:0,height:.68611,italic:0,skew:0},936:{depth:0,height:.68611,italic:0,skew:0},937:{depth:0,height:.68611,italic:0,skew:0},94:{depth:0,height:.69444,italic:0,skew:0},95:{depth:.31,height:.13444,italic:.03194,skew:0},96:{depth:0,height:.69444,italic:0,skew:0},9651:{depth:.19444,height:.69444,italic:0,skew:0},9657:{depth:-.02778,height:.47222,italic:0,skew:0},9661:{depth:.19444,height:.69444,italic:0,skew:0},9667:{depth:-.02778,height:.47222,italic:0,skew:0},97:{depth:0,height:.44444,italic:0,skew:0},9711:{depth:.19444,height:.69444,italic:0,skew:0},98:{depth:0,height:.69444,italic:0,skew:0},9824:{depth:.12963,height:.69444,italic:0,skew:0},9825:{depth:.12963,height:.69444,italic:0,skew:0},9826:{depth:.12963,height:.69444,italic:0,skew:0},9827:{depth:.12963,height:.69444,italic:0,skew:0},9837:{depth:0,height:.75,italic:0,skew:0},9838:{depth:.19444,height:.69444,italic:0,skew:0},9839:{depth:.19444,height:.69444,italic:0,skew:0},99:{depth:0,height:.44444,italic:0,skew:0}},"Main-Italic":{100:{depth:0,height:.69444,italic:.10333,skew:0},101:{depth:0,height:.43056,italic:.07514,skew:0},102:{depth:.19444,height:.69444,italic:.21194,skew:0},103:{depth:.19444,height:.43056,italic:.08847,skew:0},104:{depth:0,height:.69444,italic:.07671,skew:0},105:{depth:0,height:.65536,italic:.1019,skew:0},106:{depth:.19444,height:.65536,italic:.14467,skew:0},107:{depth:0,height:.69444,italic:.10764,skew:0},108:{depth:0,height:.69444,italic:.10333,skew:0},109:{depth:0,height:.43056,italic:.07671,skew:0},110:{depth:0,height:.43056,italic:.07671,skew:0},111:{depth:0,height:.43056,italic:.06312,skew:0},112:{depth:.19444,height:.43056,italic:.06312,skew:0},113:{depth:.19444,height:.43056,italic:.08847,skew:0},114:{depth:0,height:.43056,italic:.10764,skew:0},115:{depth:0,height:.43056,italic:.08208,skew:0},116:{depth:0,height:.61508,italic:.09486,skew:0},117:{depth:0,height:.43056,italic:.07671,skew:0},118:{depth:0,height:.43056,italic:.10764,skew:0},119:{depth:0,height:.43056,italic:.10764,skew:0},120:{depth:0,height:.43056,italic:.12042,skew:0},121:{depth:.19444,height:.43056,italic:.08847,skew:0},122:{depth:0,height:.43056,italic:.12292,skew:0},126:{depth:.35,height:.31786,italic:.11585,skew:0},163:{depth:0,height:.69444,italic:0,skew:0},305:{depth:0,height:.43056,italic:.07671,skew:0},33:{depth:0,height:.69444,italic:.12417,skew:0},34:{depth:0,height:.69444,italic:.06961,skew:0},35:{depth:.19444,height:.69444,italic:.06616,skew:0},37:{depth:.05556,height:.75,italic:.13639,skew:0},38:{depth:0,height:.69444,italic:.09694,skew:0},39:{depth:0,height:.69444,italic:.12417,skew:0},40:{depth:.25,height:.75,italic:.16194,skew:0},41:{depth:.25,height:.75,italic:.03694,skew:0},42:{depth:0,height:.75,italic:.14917,skew:0},43:{depth:.05667,height:.56167,italic:.03694,skew:0},44:{depth:.19444,height:.10556,italic:0,skew:0},45:{depth:0,height:.43056,italic:.02826,skew:0},46:{depth:0,height:.10556,italic:0,skew:0},47:{depth:.25,height:.75,italic:.16194,skew:0},48:{depth:0,height:.64444,italic:.13556,skew:0},49:{depth:0,height:.64444,italic:.13556,skew:0},50:{depth:0,height:.64444,italic:.13556,skew:0},51:{depth:0,height:.64444,italic:.13556,skew:0},52:{depth:.19444,height:.64444,italic:.13556,skew:0},53:{depth:0,height:.64444,italic:.13556,skew:0},54:{depth:0,height:.64444,italic:.13556,skew:0},55:{depth:.19444,height:.64444,italic:.13556,skew:0},56:{depth:0,height:.64444,italic:.13556,skew:0},567:{depth:.19444,height:.43056,italic:.03736,skew:0},57:{depth:0,height:.64444,italic:.13556,skew:0},58:{depth:0,height:.43056,italic:.0582,skew:0},59:{depth:.19444,height:.43056,italic:.0582,skew:0},61:{depth:-.13313,height:.36687,italic:.06616,skew:0},63:{depth:0,height:.69444,italic:.1225,skew:0},64:{depth:0,height:.69444,italic:.09597,skew:0},65:{depth:0,height:.68333,italic:0,skew:0},66:{depth:0,height:.68333,italic:.10257,skew:0},67:{depth:0,height:.68333,italic:.14528,skew:0},68:{depth:0,height:.68333,italic:.09403,skew:0},69:{depth:0,height:.68333,italic:.12028,skew:0},70:{depth:0,height:.68333,italic:.13305,skew:0},71:{depth:0,height:.68333,italic:.08722,skew:0},72:{depth:0,height:.68333,italic:.16389,skew:0},73:{depth:0,height:.68333,italic:.15806,skew:0},74:{depth:0,height:.68333,italic:.14028,skew:0},75:{depth:0,height:.68333,italic:.14528,skew:0},76:{depth:0,height:.68333,italic:0,skew:0},768:{depth:0,height:.69444,italic:0,skew:0},769:{depth:0,height:.69444,italic:.09694,skew:0},77:{depth:0,height:.68333,italic:.16389,skew:0},770:{depth:0,height:.69444,italic:.06646,skew:0},771:{depth:0,height:.66786,italic:.11585,skew:0},772:{depth:0,height:.56167,italic:.10333,skew:0},774:{depth:0,height:.69444,italic:.10806,skew:0},775:{depth:0,height:.66786,italic:.11752,skew:0},776:{depth:0,height:.66786,italic:.10474,skew:0},778:{depth:0,height:.69444,italic:0,skew:0},779:{depth:0,height:.69444,italic:.1225,skew:0},78:{depth:0,height:.68333,italic:.16389,skew:0},780:{depth:0,height:.62847,italic:.08295,skew:0},79:{depth:0,height:.68333,italic:.09403,skew:0},80:{depth:0,height:.68333,italic:.10257,skew:0},81:{depth:.19444,height:.68333,italic:.09403,skew:0},82:{depth:0,height:.68333,italic:.03868,skew:0},8211:{depth:0,height:.43056,italic:.09208,skew:0},8212:{depth:0,height:.43056,italic:.09208,skew:0},8216:{depth:0,height:.69444,italic:.12417,skew:0},8217:{depth:0,height:.69444,italic:.12417,skew:0},8220:{depth:0,height:.69444,italic:.1685,skew:0},8221:{depth:0,height:.69444,italic:.06961,skew:0},83:{depth:0,height:.68333,italic:.11972,skew:0},84:{depth:0,height:.68333,italic:.13305,skew:0},8463:{depth:0,height:.68889,italic:0,skew:0},85:{depth:0,height:.68333,italic:.16389,skew:0},86:{depth:0,height:.68333,italic:.18361,skew:0},87:{depth:0,height:.68333,italic:.18361,skew:0},88:{depth:0,height:.68333,italic:.15806,skew:0},89:{depth:0,height:.68333,italic:.19383,skew:0},90:{depth:0,height:.68333,italic:.14528,skew:0},91:{depth:.25,height:.75,italic:.1875,skew:0},915:{depth:0,height:.68333,italic:.13305,skew:0},916:{depth:0,height:.68333,italic:0,skew:0},920:{depth:0,height:.68333,italic:.09403,skew:0},923:{depth:0,height:.68333,italic:0,skew:0},926:{depth:0,height:.68333,italic:.15294,skew:0},928:{depth:0,height:.68333,italic:.16389,skew:0},93:{depth:.25,height:.75,italic:.10528,skew:0},931:{depth:0,height:.68333,italic:.12028,skew:0},933:{depth:0,height:.68333,italic:.11111,skew:0},934:{depth:0,height:.68333,italic:.05986,skew:0},936:{depth:0,height:.68333,italic:.11111,skew:0},937:{depth:0,height:.68333,italic:.10257,skew:0},94:{depth:0,height:.69444,italic:.06646,skew:0},95:{depth:.31,height:.12056,italic:.09208,skew:0},97:{depth:0,height:.43056,italic:.07671,skew:0},98:{depth:0,height:.69444,italic:.06312,skew:0},99:{depth:0,height:.43056,italic:.05653,skew:0}},"Main-Regular":{32:{depth:-0,height:0,italic:0,skew:0},160:{depth:-0,height:0,italic:0,skew:0},8230:{depth:-0,height:.12,italic:0,skew:0},8773:{depth:-.022,height:.589,italic:0,skew:0},8800:{depth:.215,height:.716,italic:0,skew:0},8942:{depth:.03,height:.9,italic:0,skew:0},8943:{depth:-.19,height:.31,italic:0,skew:0},8945:{depth:-.1,height:.82,italic:0,skew:0},100:{depth:0,height:.69444,italic:0,skew:0},101:{depth:0,height:.43056,italic:0,skew:0},102:{depth:0,height:.69444,italic:.07778,skew:0},10216:{depth:.25,height:.75,italic:0,skew:0},10217:{depth:.25,height:.75,italic:0,skew:0},103:{depth:.19444,height:.43056,italic:.01389,skew:0},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.66786,italic:0,skew:0},106:{depth:.19444,height:.66786,italic:0,skew:0},107:{depth:0,height:.69444,italic:0,skew:0},108:{depth:0,height:.69444,italic:0,skew:0},10815:{depth:0,height:.68333,italic:0,skew:0},109:{depth:0,height:.43056,italic:0,skew:0},10927:{depth:.13597,height:.63597,italic:0,skew:0},10928:{depth:.13597,height:.63597,italic:0,skew:0},110:{depth:0,height:.43056,italic:0,skew:0},111:{depth:0,height:.43056,italic:0,skew:0},112:{depth:.19444,height:.43056,italic:0,skew:0},113:{depth:.19444,height:.43056,italic:0,skew:0},114:{depth:0,height:.43056,italic:0,skew:0},115:{depth:0,height:.43056,italic:0,skew:0},116:{depth:0,height:.61508,italic:0,skew:0},117:{depth:0,height:.43056,italic:0,skew:0},118:{depth:0,height:.43056,italic:.01389,skew:0},119:{depth:0,height:.43056,italic:.01389,skew:0},120:{depth:0,height:.43056,italic:0,skew:0},121:{depth:.19444,height:.43056,italic:.01389,skew:0},122:{depth:0,height:.43056,italic:0,skew:0},123:{depth:.25,height:.75,italic:0,skew:0},124:{depth:.25,height:.75,italic:0,skew:0},125:{depth:.25,height:.75,italic:0,skew:0},126:{depth:.35,height:.31786,italic:0,skew:0},168:{depth:0,height:.66786,italic:0,skew:0},172:{depth:0,height:.43056,italic:0,skew:0},175:{depth:0,height:.56778,italic:0,skew:0},176:{depth:0,height:.69444,italic:0,skew:0},177:{depth:.08333,height:.58333,italic:0,skew:0},180:{depth:0,height:.69444,italic:0,skew:0},215:{depth:.08333,height:.58333,italic:0,skew:0},247:{depth:.08333,height:.58333,italic:0,skew:0},305:{depth:0,height:.43056,italic:0,skew:0},33:{depth:0,height:.69444,italic:0,skew:0},34:{depth:0,height:.69444,italic:0,skew:0},35:{depth:.19444,height:.69444,italic:0,skew:0},36:{depth:.05556,height:.75,italic:0,skew:0},37:{depth:.05556,height:.75,italic:0,skew:0},38:{depth:0,height:.69444,italic:0,skew:0},39:{depth:0,height:.69444,italic:0,skew:0},40:{depth:.25,height:.75,italic:0,skew:0},41:{depth:.25,height:.75,italic:0,skew:0},42:{depth:0,height:.75,italic:0,skew:0},43:{depth:.08333,height:.58333,italic:0,skew:0},44:{depth:.19444,height:.10556,italic:0,skew:0},45:{depth:0,height:.43056,italic:0,skew:0},46:{depth:0,height:.10556,italic:0,skew:0},47:{depth:.25,height:.75,italic:0,skew:0},48:{depth:0,height:.64444,italic:0,skew:0},49:{depth:0,height:.64444,italic:0,skew:0},50:{depth:0,height:.64444,italic:0,skew:0},51:{depth:0,height:.64444,italic:0,skew:0},52:{depth:0,height:.64444,italic:0,skew:0},53:{depth:0,height:.64444,italic:0,skew:0},54:{depth:0,height:.64444,italic:0,skew:0},55:{depth:0,height:.64444,italic:0,skew:0},56:{depth:0,height:.64444,italic:0,skew:0},567:{depth:.19444,height:.43056,italic:0,skew:0},57:{depth:0,height:.64444,italic:0,skew:0},58:{depth:0,height:.43056,italic:0,skew:0},59:{depth:.19444,height:.43056,italic:0,skew:0},60:{depth:.0391,height:.5391,italic:0,skew:0},61:{depth:-.13313,height:.36687,italic:0,skew:0},62:{depth:.0391,height:.5391,italic:0,skew:0},63:{depth:0,height:.69444,italic:0,skew:0},64:{depth:0,height:.69444,italic:0,skew:0},65:{depth:0,height:.68333,italic:0,skew:0},66:{depth:0,height:.68333,italic:0,skew:0},67:{depth:0,height:.68333,italic:0,skew:0},68:{depth:0,height:.68333,italic:0,skew:0},69:{depth:0,height:.68333,italic:0,skew:0},70:{depth:0,height:.68333,italic:0,skew:0},71:{depth:0,height:.68333,italic:0,skew:0},710:{depth:0,height:.69444,italic:0,skew:0},711:{depth:0,height:.62847,italic:0,skew:0},713:{depth:0,height:.56778,italic:0,skew:0},714:{depth:0,height:.69444,italic:0,skew:0},715:{depth:0,height:.69444,italic:0,skew:0},72:{depth:0,height:.68333,italic:0,skew:0},728:{depth:0,height:.69444,italic:0,skew:0},729:{depth:0,height:.66786,italic:0,skew:0},73:{depth:0,height:.68333,italic:0,skew:0},730:{depth:0,height:.69444,italic:0,skew:0},732:{depth:0,height:.66786,italic:0,skew:0},74:{depth:0,height:.68333,italic:0,skew:0},75:{depth:0,height:.68333,italic:0,skew:0},76:{depth:0,height:.68333,italic:0,skew:0},768:{depth:0,height:.69444,italic:0,skew:0},769:{depth:0,height:.69444,italic:0,skew:0},77:{depth:0,height:.68333,italic:0,skew:0},770:{depth:0,height:.69444,italic:0,skew:0},771:{depth:0,height:.66786,italic:0,skew:0},772:{depth:0,height:.56778,italic:0,skew:0},774:{depth:0,height:.69444,italic:0,skew:0},775:{depth:0,height:.66786,italic:0,skew:0},776:{depth:0,height:.66786,italic:0,skew:0},778:{depth:0,height:.69444,italic:0,skew:0},779:{depth:0,height:.69444,italic:0,skew:0},78:{depth:0,height:.68333,italic:0,skew:0},780:{depth:0,height:.62847,italic:0,skew:0},79:{depth:0,height:.68333,italic:0,skew:0},80:{depth:0,height:.68333,italic:0,skew:0},81:{depth:.19444,height:.68333,italic:0,skew:0},82:{depth:0,height:.68333,italic:0,skew:0},8211:{depth:0,height:.43056,italic:.02778,skew:0},8212:{depth:0,height:.43056,italic:.02778,skew:0},8216:{depth:0,height:.69444,italic:0,skew:0},8217:{depth:0,height:.69444,italic:0,skew:0},8220:{depth:0,height:.69444,italic:0,skew:0},8221:{depth:0,height:.69444,italic:0,skew:0},8224:{depth:.19444,height:.69444,italic:0,skew:0},8225:{depth:.19444,height:.69444,italic:0,skew:0},824:{depth:.19444,height:.69444,italic:0,skew:0},8242:{depth:0,height:.55556,italic:0,skew:0},83:{depth:0,height:.68333,italic:0,skew:0},84:{depth:0,height:.68333,italic:0,skew:0},8407:{depth:0,height:.71444,italic:.15382,skew:0},8463:{depth:0,height:.68889,italic:0,skew:0},8465:{depth:0,height:.69444,italic:0,skew:0},8467:{depth:0,height:.69444,italic:0,skew:.11111},8472:{depth:.19444,height:.43056,italic:0,skew:.11111},8476:{depth:0,height:.69444,italic:0,skew:0},85:{depth:0,height:.68333,italic:0,skew:0},8501:{depth:0,height:.69444,italic:0,skew:0},8592:{depth:-.13313,height:.36687,italic:0,skew:0},8593:{depth:.19444,height:.69444,italic:0,skew:0},8594:{depth:-.13313,height:.36687,italic:0,skew:0},8595:{depth:.19444,height:.69444,italic:0,skew:0},8596:{depth:-.13313,height:.36687,italic:0,skew:0},8597:{depth:.25,height:.75,italic:0,skew:0},8598:{depth:.19444,height:.69444,italic:0,skew:0},8599:{depth:.19444,height:.69444,italic:0,skew:0},86:{depth:0,height:.68333,italic:.01389,skew:0},8600:{depth:.19444,height:.69444,italic:0,skew:0},8601:{depth:.19444,height:.69444,italic:0,skew:0},8636:{depth:-.13313,height:.36687,italic:0,skew:0},8637:{depth:-.13313,height:.36687,italic:0,skew:0},8640:{depth:-.13313,height:.36687,italic:0,skew:0},8641:{depth:-.13313,height:.36687,italic:0,skew:0},8656:{depth:-.13313,height:.36687,italic:0,skew:0},8657:{depth:.19444,height:.69444,italic:0,skew:0},8658:{depth:-.13313,height:.36687,italic:0,skew:0},8659:{depth:.19444,height:.69444,italic:0,skew:0},8660:{depth:-.13313,height:.36687,italic:0,skew:0},8661:{depth:.25,height:.75,italic:0,skew:0},87:{depth:0,height:.68333,italic:.01389,skew:0},8704:{depth:0,height:.69444,italic:0,skew:0},8706:{depth:0,height:.69444,italic:.05556,skew:.08334},8707:{depth:0,height:.69444,italic:0,skew:0},8709:{depth:.05556,height:.75,italic:0,skew:0},8711:{depth:0,height:.68333,italic:0,skew:0},8712:{depth:.0391,height:.5391,italic:0,skew:0},8715:{depth:.0391,height:.5391,italic:0,skew:0},8722:{depth:.08333,height:.58333,italic:0,skew:0},8723:{depth:.08333,height:.58333,italic:0,skew:0},8725:{depth:.25,height:.75,italic:0,skew:0},8726:{depth:.25,height:.75,italic:0,skew:0},8727:{depth:-.03472,height:.46528,italic:0,skew:0},8728:{depth:-.05555,height:.44445,italic:0,skew:0},8729:{depth:-.05555,height:.44445,italic:0,skew:0},8730:{depth:.2,height:.8,italic:0,skew:0},8733:{depth:0,height:.43056,italic:0,skew:0},8734:{depth:0,height:.43056,italic:0,skew:0},8736:{depth:0,height:.69224,italic:0,skew:0},8739:{depth:.25,height:.75,italic:0,skew:0},8741:{depth:.25,height:.75,italic:0,skew:0},8743:{depth:0,height:.55556,italic:0,skew:0},8744:{depth:0,height:.55556,italic:0,skew:0},8745:{depth:0,height:.55556,italic:0,skew:0},8746:{depth:0,height:.55556,italic:0,skew:0},8747:{depth:.19444,height:.69444,italic:.11111,skew:0},8764:{depth:-.13313,height:.36687,italic:0,skew:0},8768:{depth:.19444,height:.69444,italic:0,skew:0},8771:{depth:-.03625,height:.46375,italic:0,skew:0},8776:{depth:-.01688,height:.48312,italic:0,skew:0},8781:{depth:-.03625,height:.46375,italic:0,skew:0},88:{depth:0,height:.68333,italic:0,skew:0},8801:{depth:-.03625,height:.46375,italic:0,skew:0},8804:{depth:.13597,height:.63597,italic:0,skew:0},8805:{depth:.13597,height:.63597,italic:0,skew:0},8810:{depth:.0391,height:.5391,italic:0,skew:0},8811:{depth:.0391,height:.5391,italic:0,skew:0},8826:{depth:.0391,height:.5391,italic:0,skew:0},8827:{depth:.0391,height:.5391,italic:0,skew:0},8834:{depth:.0391,height:.5391,italic:0,skew:0},8835:{depth:.0391,height:.5391,italic:0,skew:0},8838:{depth:.13597,height:.63597,italic:0,skew:0},8839:{depth:.13597,height:.63597,italic:0,skew:0},8846:{depth:0,height:.55556,italic:0,skew:0},8849:{depth:.13597,height:.63597,italic:0,skew:0},8850:{depth:.13597,height:.63597,italic:0,skew:0},8851:{depth:0,height:.55556,italic:0,skew:0},8852:{depth:0,height:.55556,italic:0,skew:0},8853:{depth:.08333,height:.58333,italic:0,skew:0},8854:{depth:.08333,height:.58333,italic:0,skew:0},8855:{depth:.08333,height:.58333,italic:0,skew:0},8856:{depth:.08333,height:.58333,italic:0,skew:0},8857:{depth:.08333,height:.58333,italic:0,skew:0},8866:{depth:0,height:.69444,italic:0,skew:0},8867:{depth:0,height:.69444,italic:0,skew:0},8868:{depth:0,height:.69444,italic:0,skew:0},8869:{depth:0,height:.69444,italic:0,skew:0},89:{depth:0,height:.68333,italic:.025,skew:0},8900:{depth:-.05555,height:.44445,italic:0,skew:0},8901:{depth:-.05555,height:.44445,italic:0,skew:0},8902:{depth:-.03472,height:.46528,italic:0,skew:0},8968:{depth:.25,height:.75,italic:0,skew:0},8969:{depth:.25,height:.75,italic:0,skew:0},8970:{depth:.25,height:.75,italic:0,skew:0},8971:{depth:.25,height:.75,italic:0,skew:0},8994:{depth:-.14236,height:.35764,italic:0,skew:0},8995:{depth:-.14236,height:.35764,italic:0,skew:0},90:{depth:0,height:.68333,italic:0,skew:0},91:{depth:.25,height:.75,italic:0,skew:0},915:{depth:0,height:.68333,italic:0,skew:0},916:{depth:0,height:.68333,italic:0,skew:0},92:{depth:.25,height:.75,italic:0,skew:0},920:{depth:0,height:.68333,italic:0,skew:0},923:{depth:0,height:.68333,italic:0,skew:0},926:{depth:0,height:.68333,italic:0,skew:0},928:{depth:0,height:.68333,italic:0,skew:0},93:{depth:.25,height:.75,italic:0,skew:0},931:{depth:0,height:.68333,italic:0,skew:0},933:{depth:0,height:.68333,italic:0,skew:0},934:{depth:0,height:.68333,italic:0,skew:0},936:{depth:0,height:.68333,italic:0,skew:0},937:{depth:0,height:.68333,italic:0,skew:0},94:{depth:0,height:.69444,italic:0,skew:0},95:{depth:.31,height:.12056,italic:.02778,skew:0},96:{depth:0,height:.69444,italic:0,skew:0},9651:{depth:.19444,height:.69444,italic:0,skew:0},9657:{depth:-.03472,height:.46528,italic:0,skew:0},9661:{depth:.19444,height:.69444,italic:0,skew:0},9667:{depth:-.03472,height:.46528,italic:0,skew:0},97:{depth:0,height:.43056,italic:0,skew:0},9711:{depth:.19444,height:.69444,italic:0,skew:0},98:{depth:0,height:.69444,italic:0,skew:0},9824:{depth:.12963,height:.69444,italic:0,skew:0},9825:{depth:.12963,height:.69444,italic:0,skew:0},9826:{depth:.12963,height:.69444,italic:0,skew:0},9827:{depth:.12963,height:.69444,italic:0,skew:0},9837:{depth:0,height:.75,italic:0,skew:0},9838:{depth:.19444,height:.69444,italic:0,skew:0},9839:{depth:.19444,height:.69444,italic:0,skew:0},99:{depth:0,height:.43056,italic:0,skew:0}},"Math-BoldItalic":{100:{depth:0,height:.69444,italic:0,skew:0},1009:{depth:.19444,height:.44444,italic:0,skew:0},101:{depth:0,height:.44444,italic:0,skew:0},1013:{depth:0,height:.44444,italic:0,skew:0},102:{depth:.19444,height:.69444,italic:.11042,skew:0},103:{depth:.19444,height:.44444,italic:.03704,skew:0},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.69326,italic:0,skew:0},106:{depth:.19444,height:.69326,italic:.0622,skew:0},107:{depth:0,height:.69444,italic:.01852,skew:0},108:{depth:0,height:.69444,italic:.0088,skew:0},109:{depth:0,height:.44444,italic:0,skew:0},110:{depth:0,height:.44444,italic:0,skew:0},111:{depth:0,height:.44444,italic:0,skew:0},112:{depth:.19444,height:.44444,italic:0,skew:0},113:{depth:.19444,height:.44444,italic:.03704,skew:0},114:{depth:0,height:.44444,italic:.03194,skew:0},115:{depth:0,height:.44444,italic:0,skew:0},116:{depth:0,height:.63492,italic:0,skew:0},117:{depth:0,height:.44444,italic:0,skew:0},118:{depth:0,height:.44444,italic:.03704,skew:0},119:{depth:0,height:.44444,italic:.02778,skew:0},120:{depth:0,height:.44444,italic:0,skew:0},121:{depth:.19444,height:.44444,italic:.03704,skew:0},122:{depth:0,height:.44444,italic:.04213,skew:0},47:{depth:.19444,height:.69444,italic:0,skew:0},65:{depth:0,height:.68611,italic:0,skew:0},66:{depth:0,height:.68611,italic:.04835,skew:0},67:{depth:0,height:.68611,italic:.06979,skew:0},68:{depth:0,height:.68611,italic:.03194,skew:0},69:{depth:0,height:.68611,italic:.05451,skew:0},70:{depth:0,height:.68611,italic:.15972,skew:0},71:{depth:0,height:.68611,italic:0,skew:0},72:{depth:0,height:.68611,italic:.08229,skew:0},73:{depth:0,height:.68611,italic:.07778,skew:0},74:{depth:0,height:.68611,italic:.10069,skew:0},75:{depth:0,height:.68611,italic:.06979,skew:0},76:{depth:0,height:.68611,italic:0,skew:0},77:{depth:0,height:.68611,italic:.11424,skew:0},78:{depth:0,height:.68611,italic:.11424,skew:0},79:{depth:0,height:.68611,italic:.03194,skew:0},80:{depth:0,height:.68611,italic:.15972,skew:0},81:{depth:.19444,height:.68611,italic:0,skew:0},82:{depth:0,height:.68611,italic:.00421,skew:0},83:{depth:0,height:.68611,italic:.05382,skew:0},84:{depth:0,height:.68611,italic:.15972,skew:0},85:{depth:0,height:.68611,italic:.11424,skew:0},86:{depth:0,height:.68611,italic:.25555,skew:0},87:{depth:0,height:.68611,italic:.15972,skew:0},88:{depth:0,height:.68611,italic:.07778,skew:0},89:{depth:0,height:.68611,italic:.25555,skew:0},90:{depth:0,height:.68611,italic:.06979,skew:0},915:{depth:0,height:.68611,italic:.15972,skew:0},916:{depth:0,height:.68611,italic:0,skew:0},920:{depth:0,height:.68611,italic:.03194,skew:0},923:{depth:0,height:.68611,italic:0,skew:0},926:{depth:0,height:.68611,italic:.07458,skew:0},928:{depth:0,height:.68611,italic:.08229,skew:0},931:{depth:0,height:.68611,italic:.05451,skew:0},933:{depth:0,height:.68611,italic:.15972,skew:0},934:{depth:0,height:.68611,italic:0,skew:0},936:{depth:0,height:.68611,italic:.11653,skew:0},937:{depth:0,height:.68611,italic:.04835,skew:0},945:{depth:0,height:.44444,italic:0,skew:0},946:{depth:.19444,height:.69444,italic:.03403,skew:0},947:{depth:.19444,height:.44444,italic:.06389,skew:0},948:{depth:0,height:.69444,italic:.03819,skew:0},949:{depth:0,height:.44444,italic:0,skew:0},950:{depth:.19444,height:.69444,italic:.06215,skew:0},951:{depth:.19444,height:.44444,italic:.03704,skew:0},952:{depth:0,height:.69444,italic:.03194,skew:0},953:{depth:0,height:.44444,italic:0,skew:0},954:{depth:0,height:.44444,italic:0,skew:0},955:{depth:0,height:.69444,italic:0,skew:0},956:{depth:.19444,height:.44444,italic:0,skew:0},957:{depth:0,height:.44444,italic:.06898,skew:0},958:{depth:.19444,height:.69444,italic:.03021,skew:0},959:{depth:0,height:.44444,italic:0,skew:0},960:{depth:0,height:.44444,italic:.03704,skew:0},961:{depth:.19444,height:.44444,italic:0,skew:0},962:{depth:.09722,height:.44444,italic:.07917,skew:0},963:{depth:0,height:.44444,italic:.03704,skew:0},964:{depth:0,height:.44444,italic:.13472,skew:0},965:{depth:0,height:.44444,italic:.03704,skew:0},966:{depth:.19444,height:.44444,italic:0,skew:0},967:{depth:.19444,height:.44444,italic:0,skew:0},968:{depth:.19444,height:.69444,italic:.03704,skew:0},969:{depth:0,height:.44444,italic:.03704,skew:0},97:{depth:0,height:.44444,italic:0,skew:0},977:{depth:0,height:.69444,italic:0,skew:0},98:{depth:0,height:.69444,italic:0,skew:0},981:{depth:.19444,height:.69444,italic:0,skew:0},982:{depth:0,height:.44444,italic:.03194,skew:0},99:{depth:0,height:.44444,italic:0,skew:0}},"Math-Italic":{100:{depth:0,height:.69444,italic:0,skew:.16667},1009:{depth:.19444,height:.43056,italic:0,skew:.08334},101:{depth:0,height:.43056,italic:0,skew:.05556},1013:{depth:0,height:.43056,italic:0,skew:.05556},102:{depth:.19444,height:.69444,italic:.10764,skew:.16667},103:{depth:.19444,height:.43056,italic:.03588,skew:.02778},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.65952,italic:0,skew:0},106:{depth:.19444,height:.65952,italic:.05724,skew:0},107:{depth:0,height:.69444,italic:.03148,skew:0},108:{depth:0,height:.69444,italic:.01968,skew:.08334},109:{depth:0,height:.43056,italic:0,skew:0},110:{depth:0,height:.43056,italic:0,skew:0},111:{depth:0,height:.43056,italic:0,skew:.05556},112:{depth:.19444,height:.43056,italic:0,skew:.08334},113:{depth:.19444,height:.43056,italic:.03588,skew:.08334},114:{depth:0,height:.43056,italic:.02778,skew:.05556},115:{depth:0,height:.43056,italic:0,skew:.05556},116:{depth:0,height:.61508,italic:0,skew:.08334},117:{depth:0,height:.43056,italic:0,skew:.02778},118:{depth:0,height:.43056,italic:.03588,skew:.02778},119:{depth:0,height:.43056,italic:.02691,skew:.08334},120:{depth:0,height:.43056,italic:0,skew:.02778},121:{depth:.19444,height:.43056,italic:.03588,skew:.05556},122:{depth:0,height:.43056,italic:.04398,skew:.05556},47:{depth:.19444,height:.69444,italic:0,skew:0},65:{depth:0,height:.68333,italic:0,skew:.13889},66:{depth:0,height:.68333,italic:.05017,skew:.08334},67:{depth:0,height:.68333,italic:.07153,skew:.08334},68:{depth:0,height:.68333,italic:.02778,skew:.05556},69:{depth:0,height:.68333,italic:.05764,skew:.08334},70:{depth:0,height:.68333,italic:.13889,skew:.08334},71:{depth:0,height:.68333,italic:0,skew:.08334},72:{depth:0,height:.68333,italic:.08125,skew:.05556},73:{depth:0,height:.68333,italic:.07847,skew:.11111},74:{depth:0,height:.68333,italic:.09618,skew:.16667},75:{depth:0,height:.68333,italic:.07153,skew:.05556},76:{depth:0,height:.68333,italic:0,skew:.02778},77:{depth:0,height:.68333,italic:.10903,skew:.08334},78:{depth:0,height:.68333,italic:.10903,skew:.08334},79:{depth:0,height:.68333,italic:.02778,skew:.08334},80:{depth:0,height:.68333,italic:.13889,skew:.08334},81:{depth:.19444,height:.68333,italic:0,skew:.08334},82:{depth:0,height:.68333,italic:.00773,skew:.08334},83:{depth:0,height:.68333,italic:.05764,skew:.08334},84:{depth:0,height:.68333,italic:.13889,skew:.08334},85:{depth:0,height:.68333,italic:.10903,skew:.02778},86:{depth:0,height:.68333,italic:.22222,skew:0},87:{depth:0,height:.68333,italic:.13889,skew:0},88:{depth:0,height:.68333,italic:.07847,skew:.08334},89:{depth:0,height:.68333,italic:.22222,skew:0},90:{depth:0,height:.68333,italic:.07153,skew:.08334},915:{depth:0,height:.68333,italic:.13889,skew:.08334},916:{depth:0,height:.68333,italic:0,skew:.16667},920:{depth:0,height:.68333,italic:.02778,skew:.08334},923:{depth:0,height:.68333,italic:0,skew:.16667},926:{depth:0,height:.68333,italic:.07569,skew:.08334},928:{depth:0,height:.68333,italic:.08125,skew:.05556},931:{depth:0,height:.68333,italic:.05764,skew:.08334},933:{depth:0,height:.68333,italic:.13889,skew:.05556},934:{depth:0,height:.68333,italic:0,skew:.08334},936:{depth:0,height:.68333,italic:.11,skew:.05556},937:{depth:0,height:.68333,italic:.05017,skew:.08334},945:{depth:0,height:.43056,italic:.0037,skew:.02778},946:{depth:.19444,height:.69444,italic:.05278,skew:.08334},947:{depth:.19444,height:.43056,italic:.05556,skew:0},948:{depth:0,height:.69444,italic:.03785,skew:.05556},949:{depth:0,height:.43056,italic:0,skew:.08334},950:{depth:.19444,height:.69444,italic:.07378,skew:.08334},951:{depth:.19444,height:.43056,italic:.03588,skew:.05556},952:{depth:0,height:.69444,italic:.02778,skew:.08334},953:{depth:0,height:.43056,italic:0,skew:.05556},954:{depth:0,height:.43056,italic:0,skew:0},955:{depth:0,height:.69444,italic:0,skew:0},956:{depth:.19444,height:.43056,italic:0,skew:.02778},957:{depth:0,height:.43056,italic:.06366,skew:.02778},958:{depth:.19444,height:.69444,italic:.04601,skew:.11111},959:{depth:0,height:.43056,italic:0,skew:.05556},960:{depth:0,height:.43056,italic:.03588,skew:0},961:{depth:.19444,height:.43056,italic:0,skew:.08334},962:{depth:.09722,height:.43056,italic:.07986,skew:.08334},963:{depth:0,height:.43056,italic:.03588,skew:0},964:{depth:0,height:.43056,italic:.1132,skew:.02778},965:{depth:0,height:.43056,italic:.03588,skew:.02778},966:{depth:.19444,height:.43056,italic:0,skew:.08334},967:{depth:.19444,height:.43056,italic:0,skew:.05556},968:{depth:.19444,height:.69444,italic:.03588,skew:.11111},969:{depth:0,height:.43056,italic:.03588,skew:0},97:{depth:0,height:.43056,italic:0,skew:0},977:{depth:0,height:.69444,italic:0,skew:.08334},98:{depth:0,height:.69444,italic:0,skew:0},981:{depth:.19444,height:.69444,italic:0,skew:.08334},982:{depth:0,height:.43056,italic:.02778,skew:0},99:{depth:0,height:.43056,italic:0,skew:.05556}},"Math-Regular":{100:{depth:0,height:.69444,italic:0,skew:.16667},1009:{depth:.19444,height:.43056,italic:0,skew:.08334},101:{depth:0,height:.43056,italic:0,skew:.05556},1013:{depth:0,height:.43056,italic:0,skew:.05556},102:{depth:.19444,height:.69444,italic:.10764,skew:.16667},103:{depth:.19444,height:.43056,italic:.03588,skew:.02778},104:{depth:0,height:.69444,italic:0,skew:0},105:{depth:0,height:.65952,italic:0,skew:0},106:{depth:.19444,height:.65952,italic:.05724,skew:0},107:{depth:0,height:.69444,italic:.03148,skew:0},108:{depth:0,height:.69444,italic:.01968,skew:.08334},109:{depth:0,height:.43056,italic:0,skew:0},110:{depth:0,height:.43056,italic:0,skew:0},111:{depth:0,height:.43056,italic:0,skew:.05556},112:{depth:.19444,height:.43056,italic:0,skew:.08334},113:{depth:.19444,height:.43056,italic:.03588,skew:.08334},114:{depth:0,height:.43056,italic:.02778,skew:.05556},115:{depth:0,height:.43056,italic:0,skew:.05556},116:{depth:0,height:.61508,italic:0,skew:.08334},117:{depth:0,height:.43056,italic:0,skew:.02778},118:{depth:0,height:.43056,italic:.03588,skew:.02778},119:{depth:0,height:.43056,italic:.02691,skew:.08334},120:{depth:0,height:.43056,italic:0,skew:.02778},121:{depth:.19444,height:.43056,italic:.03588,skew:.05556},122:{depth:0,height:.43056,italic:.04398,skew:.05556},65:{depth:0,height:.68333,italic:0,skew:.13889},66:{depth:0,height:.68333,italic:.05017,skew:.08334},67:{depth:0,height:.68333,italic:.07153,skew:.08334},68:{depth:0,height:.68333,italic:.02778,skew:.05556},69:{depth:0,height:.68333,italic:.05764,skew:.08334},70:{depth:0,height:.68333,italic:.13889,skew:.08334},71:{depth:0,height:.68333,italic:0,skew:.08334},72:{depth:0,height:.68333,italic:.08125,skew:.05556},73:{depth:0,height:.68333,italic:.07847,skew:.11111},74:{depth:0,height:.68333,italic:.09618,skew:.16667},75:{depth:0,height:.68333,italic:.07153,skew:.05556},76:{depth:0,height:.68333,italic:0,skew:.02778},77:{depth:0,height:.68333,italic:.10903,skew:.08334},78:{depth:0,height:.68333,italic:.10903,skew:.08334},79:{depth:0,height:.68333,italic:.02778,skew:.08334},80:{depth:0,height:.68333,italic:.13889,skew:.08334},81:{depth:.19444,height:.68333,italic:0,skew:.08334},82:{depth:0,height:.68333,italic:.00773,skew:.08334},83:{depth:0,height:.68333,italic:.05764,skew:.08334},84:{depth:0,height:.68333,italic:.13889,skew:.08334},85:{depth:0,height:.68333,italic:.10903,skew:.02778},86:{depth:0,height:.68333,italic:.22222,skew:0},87:{depth:0,height:.68333,italic:.13889,skew:0},88:{depth:0,height:.68333,italic:.07847,skew:.08334},89:{depth:0,height:.68333,italic:.22222,skew:0},90:{depth:0,height:.68333,italic:.07153,skew:.08334},915:{depth:0,height:.68333,italic:.13889,skew:.08334},916:{depth:0,height:.68333,italic:0,skew:.16667},920:{depth:0,height:.68333,italic:.02778,skew:.08334},923:{depth:0,height:.68333,italic:0,skew:.16667},926:{depth:0,height:.68333,italic:.07569,skew:.08334},928:{depth:0,height:.68333,italic:.08125,skew:.05556},931:{depth:0,height:.68333,italic:.05764,skew:.08334},933:{depth:0,height:.68333,italic:.13889,skew:.05556},934:{depth:0,height:.68333,italic:0,skew:.08334},936:{depth:0,height:.68333,italic:.11,skew:.05556},937:{depth:0,height:.68333,italic:.05017,skew:.08334},945:{depth:0,height:.43056,italic:.0037,skew:.02778},946:{depth:.19444,height:.69444,italic:.05278,skew:.08334},947:{depth:.19444,height:.43056,italic:.05556,skew:0},948:{depth:0,height:.69444,italic:.03785,skew:.05556},949:{depth:0,height:.43056,italic:0,skew:.08334},950:{depth:.19444,height:.69444,italic:.07378,skew:.08334},951:{depth:.19444,height:.43056,italic:.03588,skew:.05556},952:{depth:0,height:.69444,italic:.02778,skew:.08334},953:{depth:0,height:.43056,italic:0,skew:.05556},954:{depth:0,height:.43056,italic:0,skew:0},955:{depth:0,height:.69444,italic:0,skew:0},956:{depth:.19444,height:.43056,italic:0,skew:.02778},957:{depth:0,height:.43056,italic:.06366,skew:.02778},958:{depth:.19444,height:.69444,italic:.04601,skew:.11111},959:{depth:0,height:.43056,italic:0,skew:.05556},960:{depth:0,height:.43056,italic:.03588,skew:0},961:{depth:.19444,height:.43056,italic:0,skew:.08334},962:{depth:.09722,height:.43056,italic:.07986,skew:.08334},963:{depth:0,height:.43056,italic:.03588,skew:0},964:{depth:0,height:.43056,italic:.1132,skew:.02778},965:{depth:0,height:.43056,italic:.03588,skew:.02778},966:{depth:.19444,height:.43056,italic:0,skew:.08334},967:{depth:.19444,height:.43056,italic:0,skew:.05556},968:{depth:.19444,height:.69444,italic:.03588,skew:.11111},969:{depth:0,height:.43056,italic:.03588,skew:0},97:{depth:0,height:.43056,italic:0,skew:0},977:{depth:0,height:.69444,italic:0,skew:.08334},98:{depth:0,height:.69444,italic:0,skew:0},981:{depth:.19444,height:.69444,italic:0,skew:.08334},982:{depth:0,height:.43056,italic:.02778,skew:0},99:{depth:0,height:.43056,italic:0,skew:.05556}},"Size1-Regular":{8748:{depth:.306,height:.805,italic:.19445,skew:0},8749:{depth:.306,height:.805,italic:.19445,skew:0},10216:{depth:.35001,height:.85,italic:0,skew:0},10217:{depth:.35001,height:.85,italic:0,skew:0},10752:{depth:.25001,height:.75,italic:0,skew:0},10753:{depth:.25001,height:.75,italic:0,skew:0},10754:{depth:.25001,height:.75,italic:0,skew:0},10756:{depth:.25001,height:.75,italic:0,skew:0},10758:{depth:.25001,height:.75,italic:0,skew:0},123:{depth:.35001,height:.85,italic:0,skew:0},125:{depth:.35001,height:.85,italic:0,skew:0},40:{depth:.35001,height:.85,italic:0,skew:0},41:{depth:.35001,height:.85,italic:0,skew:0},47:{depth:.35001,height:.85,italic:0,skew:0},710:{depth:0,height:.72222,italic:0,skew:0},732:{depth:0,height:.72222,italic:0,skew:0},770:{depth:0,height:.72222,italic:0,skew:0},771:{depth:0,height:.72222,italic:0,skew:0},8214:{depth:-99e-5,height:.601,italic:0,skew:0},8593:{depth:1e-5,height:.6,italic:0,skew:0},8595:{depth:1e-5,height:.6,italic:0,skew:0},8657:{depth:1e-5,height:.6,italic:0,skew:0},8659:{depth:1e-5,height:.6,italic:0,skew:0},8719:{depth:.25001,height:.75,italic:0,skew:0},8720:{depth:.25001,height:.75,italic:0,skew:0},8721:{depth:.25001,height:.75,italic:0,skew:0},8730:{depth:.35001,height:.85,italic:0,skew:0},8739:{depth:-.00599,height:.606,italic:0,skew:0},8741:{depth:-.00599,height:.606,italic:0,skew:0},8747:{depth:.30612,height:.805,italic:.19445,skew:0},8750:{depth:.30612,height:.805,italic:.19445,skew:0},8896:{depth:.25001,height:.75,italic:0,skew:0},8897:{depth:.25001,height:.75,italic:0,skew:0},8898:{depth:.25001,height:.75,italic:0,skew:0},8899:{depth:.25001,height:.75,italic:0,skew:0},8968:{depth:.35001,height:.85,italic:0,skew:0},8969:{depth:.35001,height:.85,italic:0,skew:0},8970:{depth:.35001,height:.85,italic:0,skew:0},8971:{depth:.35001,height:.85,italic:0,skew:0},91:{depth:.35001,height:.85,italic:0,skew:0},9168:{depth:-99e-5,height:.601,italic:0,skew:0},92:{depth:.35001,height:.85,italic:0,skew:0},93:{depth:.35001,height:.85,italic:0,skew:0}},"Size2-Regular":{8748:{depth:.862,height:1.36,italic:.44445,skew:0},8749:{depth:.862,height:1.36,italic:.44445,skew:0},10216:{depth:.65002,height:1.15,italic:0,skew:0},10217:{depth:.65002,height:1.15,italic:0,skew:0},10752:{depth:.55001,height:1.05,italic:0,skew:0},10753:{depth:.55001,height:1.05,italic:0,skew:0},10754:{depth:.55001,height:1.05,italic:0,skew:0},10756:{depth:.55001,height:1.05,italic:0,skew:0},10758:{depth:.55001,height:1.05,italic:0,skew:0},123:{depth:.65002,height:1.15,italic:0,skew:0},125:{depth:.65002,height:1.15,italic:0,skew:0},40:{depth:.65002,height:1.15,italic:0,skew:0},41:{depth:.65002,height:1.15,italic:0,skew:0},47:{depth:.65002,height:1.15,italic:0,skew:0},710:{depth:0,height:.75,italic:0,skew:0},732:{depth:0,height:.75,italic:0,skew:0},770:{depth:0,height:.75,italic:0,skew:0},771:{depth:0,height:.75,italic:0,skew:0},8719:{depth:.55001,height:1.05,italic:0,skew:0},8720:{depth:.55001,height:1.05,italic:0,skew:0},8721:{depth:.55001,height:1.05,italic:0,skew:0},8730:{depth:.65002,height:1.15,italic:0,skew:0},8747:{depth:.86225,height:1.36,italic:.44445,skew:0},8750:{depth:.86225,height:1.36,italic:.44445,skew:0},8896:{depth:.55001,height:1.05,italic:0,skew:0},8897:{depth:.55001,height:1.05,italic:0,skew:0},8898:{depth:.55001,height:1.05,italic:0,skew:0},8899:{depth:.55001,height:1.05,italic:0,skew:0},8968:{depth:.65002,height:1.15,italic:0,skew:0},8969:{depth:.65002,height:1.15,italic:0,skew:0},8970:{depth:.65002,height:1.15,italic:0,skew:0},8971:{depth:.65002,height:1.15,italic:0,skew:0},91:{depth:.65002,height:1.15,italic:0,skew:0},92:{depth:.65002,height:1.15,italic:0,skew:0},93:{depth:.65002,height:1.15,italic:0,skew:0}},"Size3-Regular":{10216:{depth:.95003,height:1.45,italic:0,skew:0},10217:{depth:.95003,height:1.45,italic:0,skew:0},123:{depth:.95003,height:1.45,italic:0,skew:0},125:{depth:.95003,height:1.45,italic:0,skew:0},40:{depth:.95003,height:1.45,italic:0,skew:0},41:{depth:.95003,height:1.45,italic:0,skew:0},47:{depth:.95003,height:1.45,italic:0,skew:0},710:{depth:0,height:.75,italic:0,skew:0},732:{depth:0,height:.75,italic:0,skew:0},770:{depth:0,height:.75,italic:0,skew:0},771:{depth:0,height:.75,italic:0,skew:0},8730:{depth:.95003,height:1.45,italic:0,skew:0},8968:{depth:.95003,height:1.45,italic:0,skew:0},8969:{depth:.95003,height:1.45,italic:0,skew:0},8970:{depth:.95003,height:1.45,italic:0,skew:0},8971:{depth:.95003,height:1.45,italic:0,skew:0},91:{depth:.95003,height:1.45,italic:0,skew:0},92:{depth:.95003,height:1.45,italic:0,skew:0},93:{depth:.95003,height:1.45,italic:0,skew:0}},"Size4-Regular":{10216:{depth:1.25003,height:1.75,italic:0,skew:0},10217:{depth:1.25003,height:1.75,italic:0,skew:0},123:{depth:1.25003,height:1.75,italic:0,skew:0},125:{depth:1.25003,height:1.75,italic:0,skew:0},40:{depth:1.25003,height:1.75,italic:0,skew:0},41:{depth:1.25003,height:1.75,italic:0,skew:0},47:{depth:1.25003,height:1.75,italic:0,skew:0},57344:{depth:-.00499,height:.605,italic:0,skew:0},57345:{depth:-.00499,height:.605,italic:0,skew:0},57680:{depth:0,height:.12,italic:0,skew:0},57681:{depth:0,height:.12,italic:0,skew:0},57682:{depth:0,height:.12,italic:0,skew:0},57683:{depth:0,height:.12,italic:0,skew:0},710:{depth:0,height:.825,italic:0,skew:0},732:{depth:0,height:.825,italic:0,skew:0},770:{depth:0,height:.825,italic:0,skew:0},771:{depth:0,height:.825,italic:0,skew:0},8730:{depth:1.25003,height:1.75,italic:0,skew:0},8968:{depth:1.25003,height:1.75,italic:0,skew:0},8969:{depth:1.25003,height:1.75,italic:0,skew:0},8970:{depth:1.25003,height:1.75,italic:0,skew:0},8971:{depth:1.25003,height:1.75,italic:0,skew:0},91:{depth:1.25003,height:1.75,italic:0,skew:0},9115:{depth:.64502,height:1.155,italic:0,skew:0},9116:{depth:1e-5,height:.6,italic:0,skew:0},9117:{depth:.64502,height:1.155,italic:0,skew:0},9118:{depth:.64502,height:1.155,italic:0,skew:0},9119:{depth:1e-5,height:.6,italic:0,skew:0},9120:{depth:.64502,height:1.155,italic:0,skew:0},9121:{depth:.64502,height:1.155,italic:0,skew:0},9122:{depth:-99e-5,height:.601,italic:0,skew:0},9123:{depth:.64502,height:1.155,italic:0,skew:0},9124:{depth:.64502,height:1.155,italic:0,skew:0},9125:{depth:-99e-5,height:.601,italic:0,skew:0},9126:{depth:.64502,height:1.155,italic:0,skew:0},9127:{depth:1e-5,height:.9,italic:0,skew:0},9128:{depth:.65002,height:1.15,italic:0,skew:0},9129:{depth:.90001,height:0,italic:0,skew:0},9130:{depth:0,height:.3,italic:0,skew:0},9131:{depth:1e-5,height:.9,italic:0,skew:0},9132:{depth:.65002,height:1.15,italic:0,skew:0},9133:{depth:.90001,height:0,italic:0,skew:0},9143:{depth:.88502,height:.915,italic:0,skew:0},92:{depth:1.25003,height:1.75,italic:0,skew:0},93:{depth:1.25003,height:1.75,italic:0,skew:0}}},L=function(e,t){return j[t][e.charCodeAt(0)]
};t.exports={metrics:A,getCharacterMetrics:L}},{"./Style":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Style.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/functions.js":[function(e,t){for(var i=e("./utils"),n=e("./ParseError"),o={"\\sqrt":{numArgs:1,numOptionalArgs:1,handler:function(e,t,i,o){if(null!=t)throw new n("Optional arguments to \\sqrt aren't supported yet",this.lexer,o[1]-1);return{type:"sqrt",body:i}}},"\\text":{numArgs:1,argTypes:["text"],greediness:2,handler:function(e,t){var i;return i="ordgroup"===t.type?t.value:[t],{type:"text",body:i}}},"\\color":{numArgs:2,allowedInText:!0,argTypes:["color","original"],handler:function(e,t,i){var n;return n="ordgroup"===i.type?i.value:[i],{type:"color",color:t.value,value:n}}},"\\overline":{numArgs:1,handler:function(e,t){return{type:"overline",body:t}}},"\\rule":{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"],handler:function(e,t,i,n){return{type:"rule",shift:t&&t.value,width:i.value,height:n.value}}},"\\KaTeX":{numArgs:0,handler:function(){return{type:"katex"}}}},r={"\\bigl":{type:"open",size:1},"\\Bigl":{type:"open",size:2},"\\biggl":{type:"open",size:3},"\\Biggl":{type:"open",size:4},"\\bigr":{type:"close",size:1},"\\Bigr":{type:"close",size:2},"\\biggr":{type:"close",size:3},"\\Biggr":{type:"close",size:4},"\\bigm":{type:"rel",size:1},"\\Bigm":{type:"rel",size:2},"\\biggm":{type:"rel",size:3},"\\Biggm":{type:"rel",size:4},"\\big":{type:"textord",size:1},"\\Big":{type:"textord",size:2},"\\bigg":{type:"textord",size:3},"\\Bigg":{type:"textord",size:4}},s=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","<",">","\\langle","\\rangle","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],a=[{funcs:["\\blue","\\orange","\\pink","\\red","\\green","\\gray","\\purple"],data:{numArgs:1,allowedInText:!0,handler:function(e,t){var i;return i="ordgroup"===t.type?t.value:[t],{type:"color",color:"katex-"+e.slice(1),value:i}}}},{funcs:["\\arcsin","\\arccos","\\arctan","\\arg","\\cos","\\cosh","\\cot","\\coth","\\csc","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\tan","\\tanh"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!1,symbol:!1,body:e}}}},{funcs:["\\det","\\gcd","\\inf","\\lim","\\liminf","\\limsup","\\max","\\min","\\Pr","\\sup"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!0,symbol:!1,body:e}}}},{funcs:["\\int","\\iint","\\iiint","\\oint"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!1,symbol:!0,body:e}}}},{funcs:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint"],data:{numArgs:0,handler:function(e){return{type:"op",limits:!0,symbol:!0,body:e}}}},{funcs:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom"],data:{numArgs:2,greediness:2,handler:function(e,t,i){var n,o=null,r=null,s="auto";switch(e){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,o="(",r=")";break;default:throw new Error("Unrecognized genfrac command")}switch(e){case"\\dfrac":case"\\dbinom":s="display";break;case"\\tfrac":case"\\tbinom":s="text"}return{type:"genfrac",numer:t,denom:i,hasBarLine:n,leftDelim:o,rightDelim:r,size:s}}}},{funcs:["\\llap","\\rlap"],data:{numArgs:1,allowedInText:!0,handler:function(e,t){return{type:e.slice(1),body:t}}}},{funcs:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg","\\left","\\right"],data:{numArgs:1,handler:function(e,t,o){if(!i.contains(s,t.value))throw new n("Invalid delimiter: '"+t.value+"' after '"+e+"'",this.lexer,o[1]);return"\\left"===e||"\\right"===e?{type:"leftright",value:t.value}:{type:"delimsizing",size:r[e].size,delimType:r[e].type,value:t.value}}}},{funcs:["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],data:{numArgs:0}},{funcs:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],data:{numArgs:0}},{funcs:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot"],data:{numArgs:1,handler:function(e,t){return{type:"accent",accent:e,base:t}}}},{funcs:["\\over","\\choose"],data:{numArgs:0,handler:function(e){var t;switch(e){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",replaceWith:t}}}}],l=function(e,t){for(var i=0;i<e.length;i++)o[e[i]]=t},h=0;h<a.length;h++)l(a[h].funcs,a[h].data);var d=function(e){return void 0===o[e].greediness?1:o[e].greediness};for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];o[c]={numArgs:u.numArgs,argTypes:u.argTypes,greediness:void 0===u.greediness?1:u.greediness,allowedInText:u.allowedInText?u.allowedInText:!1,numOptionalArgs:void 0===u.numOptionalArgs?0:u.numOptionalArgs,handler:u.handler}}t.exports={funcs:o,getGreediness:d}},{"./ParseError":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/ParseError.js","./utils":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/utils.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/parseTree.js":[function(e,t){var i=e("./Parser"),n=function(e){var t=new i(e);return t.parse()};t.exports=n},{"./Parser":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/Parser.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/symbols.js":[function(e,t){for(var i={math:{"`":{font:"main",group:"textord",replace:"‘"},"\\$":{font:"main",group:"textord",replace:"$"},"\\%":{font:"main",group:"textord",replace:"%"},"\\_":{font:"main",group:"textord",replace:"_"},"\\angle":{font:"main",group:"textord",replace:"∠"},"\\infty":{font:"main",group:"textord",replace:"∞"},"\\prime":{font:"main",group:"textord",replace:"′"},"\\triangle":{font:"main",group:"textord",replace:"△"},"\\Gamma":{font:"main",group:"textord",replace:"Γ"},"\\Delta":{font:"main",group:"textord",replace:"Δ"},"\\Theta":{font:"main",group:"textord",replace:"Θ"},"\\Lambda":{font:"main",group:"textord",replace:"Λ"},"\\Xi":{font:"main",group:"textord",replace:"Ξ"},"\\Pi":{font:"main",group:"textord",replace:"Π"},"\\Sigma":{font:"main",group:"textord",replace:"Σ"},"\\Upsilon":{font:"main",group:"textord",replace:"Υ"},"\\Phi":{font:"main",group:"textord",replace:"Φ"},"\\Psi":{font:"main",group:"textord",replace:"Ψ"},"\\Omega":{font:"main",group:"textord",replace:"Ω"},"\\neg":{font:"main",group:"textord",replace:"¬"},"\\lnot":{font:"main",group:"textord",replace:"¬"},"\\top":{font:"main",group:"textord",replace:"⊤"},"\\bot":{font:"main",group:"textord",replace:"⊥"},"\\emptyset":{font:"main",group:"textord",replace:"∅"},"\\varnothing":{font:"ams",group:"textord",replace:"∅"},"\\alpha":{font:"main",group:"mathord",replace:"α"},"\\beta":{font:"main",group:"mathord",replace:"β"},"\\gamma":{font:"main",group:"mathord",replace:"γ"},"\\delta":{font:"main",group:"mathord",replace:"δ"},"\\epsilon":{font:"main",group:"mathord",replace:"ϵ"},"\\zeta":{font:"main",group:"mathord",replace:"ζ"},"\\eta":{font:"main",group:"mathord",replace:"η"},"\\theta":{font:"main",group:"mathord",replace:"θ"},"\\iota":{font:"main",group:"mathord",replace:"ι"},"\\kappa":{font:"main",group:"mathord",replace:"κ"},"\\lambda":{font:"main",group:"mathord",replace:"λ"},"\\mu":{font:"main",group:"mathord",replace:"μ"},"\\nu":{font:"main",group:"mathord",replace:"ν"},"\\xi":{font:"main",group:"mathord",replace:"ξ"},"\\omicron":{font:"main",group:"mathord",replace:"o"},"\\pi":{font:"main",group:"mathord",replace:"π"},"\\rho":{font:"main",group:"mathord",replace:"ρ"},"\\sigma":{font:"main",group:"mathord",replace:"σ"},"\\tau":{font:"main",group:"mathord",replace:"τ"},"\\upsilon":{font:"main",group:"mathord",replace:"υ"},"\\phi":{font:"main",group:"mathord",replace:"ϕ"},"\\chi":{font:"main",group:"mathord",replace:"χ"},"\\psi":{font:"main",group:"mathord",replace:"ψ"},"\\omega":{font:"main",group:"mathord",replace:"ω"},"\\varepsilon":{font:"main",group:"mathord",replace:"ε"},"\\vartheta":{font:"main",group:"mathord",replace:"ϑ"},"\\varpi":{font:"main",group:"mathord",replace:"ϖ"},"\\varrho":{font:"main",group:"mathord",replace:"ϱ"},"\\varsigma":{font:"main",group:"mathord",replace:"ς"},"\\varphi":{font:"main",group:"mathord",replace:"φ"},"*":{font:"main",group:"bin",replace:"∗"},"+":{font:"main",group:"bin"},"-":{font:"main",group:"bin",replace:"−"},"\\cdot":{font:"main",group:"bin",replace:"⋅"},"\\circ":{font:"main",group:"bin",replace:"∘"},"\\div":{font:"main",group:"bin",replace:"÷"},"\\pm":{font:"main",group:"bin",replace:"±"},"\\times":{font:"main",group:"bin",replace:"×"},"\\cap":{font:"main",group:"bin",replace:"∩"},"\\cup":{font:"main",group:"bin",replace:"∪"},"\\setminus":{font:"main",group:"bin",replace:"∖"},"\\land":{font:"main",group:"bin",replace:"∧"},"\\lor":{font:"main",group:"bin",replace:"∨"},"\\wedge":{font:"main",group:"bin",replace:"∧"},"\\vee":{font:"main",group:"bin",replace:"∨"},"\\surd":{font:"main",group:"textord",replace:"√"},"(":{font:"main",group:"open"},"[":{font:"main",group:"open"},"\\langle":{font:"main",group:"open",replace:"⟨"},"\\lvert":{font:"main",group:"open",replace:"∣"},")":{font:"main",group:"close"},"]":{font:"main",group:"close"},"?":{font:"main",group:"close"},"!":{font:"main",group:"close"},"\\rangle":{font:"main",group:"close",replace:"⟩"},"\\rvert":{font:"main",group:"close",replace:"∣"},"=":{font:"main",group:"rel"},"<":{font:"main",group:"rel"},">":{font:"main",group:"rel"},":":{font:"main",group:"rel"},"\\approx":{font:"main",group:"rel",replace:"≈"},"\\cong":{font:"main",group:"rel",replace:"≅"},"\\ge":{font:"main",group:"rel",replace:"≥"},"\\geq":{font:"main",group:"rel",replace:"≥"},"\\gets":{font:"main",group:"rel",replace:"←"},"\\in":{font:"main",group:"rel",replace:"∈"},"\\notin":{font:"main",group:"rel",replace:"∉"},"\\subset":{font:"main",group:"rel",replace:"⊂"},"\\supset":{font:"main",group:"rel",replace:"⊃"},"\\subseteq":{font:"main",group:"rel",replace:"⊆"},"\\supseteq":{font:"main",group:"rel",replace:"⊇"},"\\nsubseteq":{font:"ams",group:"rel",replace:"⊈"},"\\nsupseteq":{font:"ams",group:"rel",replace:"⊉"},"\\models":{font:"main",group:"rel",replace:"⊨"},"\\leftarrow":{font:"main",group:"rel",replace:"←"},"\\le":{font:"main",group:"rel",replace:"≤"},"\\leq":{font:"main",group:"rel",replace:"≤"},"\\ne":{font:"main",group:"rel",replace:"≠"},"\\neq":{font:"main",group:"rel",replace:"≠"},"\\rightarrow":{font:"main",group:"rel",replace:"→"},"\\to":{font:"main",group:"rel",replace:"→"},"\\ngeq":{font:"ams",group:"rel",replace:"≱"},"\\nleq":{font:"ams",group:"rel",replace:"≰"},"\\!":{font:"main",group:"spacing"},"\\ ":{font:"main",group:"spacing",replace:" "},"~":{font:"main",group:"spacing",replace:" "},"\\,":{font:"main",group:"spacing"},"\\:":{font:"main",group:"spacing"},"\\;":{font:"main",group:"spacing"},"\\enspace":{font:"main",group:"spacing"},"\\qquad":{font:"main",group:"spacing"},"\\quad":{font:"main",group:"spacing"},"\\space":{font:"main",group:"spacing",replace:" "},",":{font:"main",group:"punct"},";":{font:"main",group:"punct"},"\\colon":{font:"main",group:"punct",replace:":"},"\\barwedge":{font:"ams",group:"textord",replace:"⊼"},"\\veebar":{font:"ams",group:"textord",replace:"⊻"},"\\odot":{font:"main",group:"textord",replace:"⊙"},"\\oplus":{font:"main",group:"textord",replace:"⊕"},"\\otimes":{font:"main",group:"textord",replace:"⊗"},"\\partial":{font:"main",group:"textord",replace:"∂"},"\\oslash":{font:"main",group:"textord",replace:"⊘"},"\\circledcirc":{font:"ams",group:"textord",replace:"⊚"},"\\boxdot":{font:"ams",group:"textord",replace:"⊡"},"\\bigtriangleup":{font:"main",group:"textord",replace:"△"},"\\bigtriangledown":{font:"main",group:"textord",replace:"▽"},"\\dagger":{font:"main",group:"textord",replace:"†"},"\\diamond":{font:"main",group:"textord",replace:"⋄"},"\\star":{font:"main",group:"textord",replace:"⋆"},"\\triangleleft":{font:"main",group:"textord",replace:"◃"},"\\triangleright":{font:"main",group:"textord",replace:"▹"},"\\{":{font:"main",group:"open",replace:"{"},"\\}":{font:"main",group:"close",replace:"}"},"\\lbrace":{font:"main",group:"open",replace:"{"},"\\rbrace":{font:"main",group:"close",replace:"}"},"\\lbrack":{font:"main",group:"open",replace:"["},"\\rbrack":{font:"main",group:"close",replace:"]"},"\\lfloor":{font:"main",group:"open",replace:"⌊"},"\\rfloor":{font:"main",group:"close",replace:"⌋"},"\\lceil":{font:"main",group:"open",replace:"⌈"},"\\rceil":{font:"main",group:"close",replace:"⌉"},"\\backslash":{font:"main",group:"textord",replace:"\\"},"|":{font:"main",group:"textord",replace:"∣"},"\\vert":{font:"main",group:"textord",replace:"∣"},"\\|":{font:"main",group:"textord",replace:"∥"},"\\Vert":{font:"main",group:"textord",replace:"∥"},"\\uparrow":{font:"main",group:"textord",replace:"↑"},"\\Uparrow":{font:"main",group:"textord",replace:"⇑"},"\\downarrow":{font:"main",group:"textord",replace:"↓"},"\\Downarrow":{font:"main",group:"textord",replace:"⇓"},"\\updownarrow":{font:"main",group:"textord",replace:"↕"},"\\Updownarrow":{font:"main",group:"textord",replace:"⇕"},"\\coprod":{font:"math",group:"op",replace:"∐"},"\\bigvee":{font:"math",group:"op",replace:"⋁"},"\\bigwedge":{font:"math",group:"op",replace:"⋀"},"\\biguplus":{font:"math",group:"op",replace:"⨄"},"\\bigcap":{font:"math",group:"op",replace:"⋂"},"\\bigcup":{font:"math",group:"op",replace:"⋃"},"\\int":{font:"math",group:"op",replace:"∫"},"\\intop":{font:"math",group:"op",replace:"∫"},"\\iint":{font:"math",group:"op",replace:"∬"},"\\iiint":{font:"math",group:"op",replace:"∭"},"\\prod":{font:"math",group:"op",replace:"∏"},"\\sum":{font:"math",group:"op",replace:"∑"},"\\bigotimes":{font:"math",group:"op",replace:"⨂"},"\\bigoplus":{font:"math",group:"op",replace:"⨁"},"\\bigodot":{font:"math",group:"op",replace:"⨀"},"\\oint":{font:"math",group:"op",replace:"∮"},"\\bigsqcup":{font:"math",group:"op",replace:"⨆"},"\\smallint":{font:"math",group:"op",replace:"∫"},"\\ldots":{font:"main",group:"punct",replace:"…"},"\\cdots":{font:"main",group:"inner",replace:"⋯"},"\\ddots":{font:"main",group:"inner",replace:"⋱"},"\\vdots":{font:"main",group:"textord",replace:"⋮"},"\\acute":{font:"main",group:"accent",replace:"´"},"\\grave":{font:"main",group:"accent",replace:"`"},"\\ddot":{font:"main",group:"accent",replace:"¨"},"\\tilde":{font:"main",group:"accent",replace:"~"},"\\bar":{font:"main",group:"accent",replace:"¯"},"\\breve":{font:"main",group:"accent",replace:"˘"},"\\check":{font:"main",group:"accent",replace:"ˇ"},"\\hat":{font:"main",group:"accent",replace:"^"},"\\vec":{font:"main",group:"accent",replace:"⃗"},"\\dot":{font:"main",group:"accent",replace:"˙"}},text:{"\\ ":{font:"main",group:"spacing",replace:" "}," ":{font:"main",group:"spacing",replace:" "},"~":{font:"main",group:"spacing",replace:" "}}},n='0123456789/@."',o=0;o<n.length;o++){var r=n.charAt(o);i.math[r]={font:"main",group:"textord"}}for(var s="0123456789`!@*()-=+[]'\";:?/.,",o=0;o<s.length;o++){var r=s.charAt(o);i.text[r]={font:"main",group:"textord"}}for(var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o=0;o<a.length;o++){var r=a.charAt(o);i.math[r]={font:"main",group:"mathord"},i.text[r]={font:"main",group:"textord"}}t.exports=i},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/katex/src/utils.js":[function(e,t){function i(e){return c[e]}function n(e){return(""+e).replace(u,i)}function o(e){r(e,"")}var r,s=Array.prototype.indexOf,a=function(e,t){if(null==e)return-1;if(s&&e.indexOf===s)return e.indexOf(t);for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},l=function(e,t){return-1!==a(e,t)},h=/([A-Z])/g,d=function(e){return e.replace(h,"-$1").toLowerCase()},c={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},u=/[&><"']/g;if("undefined"!=typeof document){var p=document.createElement("span");r="textContent"in p?function(e,t){e.textContent=t}:function(e,t){e.innerText=t}}t.exports={contains:l,escape:n,hyphenate:d,indexOf:a,setTextContent:r,clearNode:o}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/matches-selector/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/matches-selector/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/matches-selector/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/node_modules/matches-selector/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/three-orbit-controls/index.js":[function(e,t){t.exports=function(e){function t(t,n){function o(){return 2*Math.PI/60/60*g.autoRotateSpeed}function r(){return Math.pow(.95,g.zoomSpeed)}function s(e){if(g.enabled!==!1){if(e.preventDefault(),e.button===g.mouseButtons.ORBIT){if(g.noRotate===!0)return;z=F.ROTATE,y.set(e.clientX,e.clientY)}else if(e.button===g.mouseButtons.ZOOM){if(g.noZoom===!0)return;z=F.DOLLY,S.set(e.clientX,e.clientY)}else if(e.button===g.mouseButtons.PAN){if(g.noPan===!0)return;z=F.PAN,x.set(e.clientX,e.clientY)}z!==F.NONE&&(document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",l,!1),g.dispatchEvent(O))}}function a(e){if(g.enabled!==!1){e.preventDefault();var t=g.domElement===document?g.domElement.body:g.domElement;if(z===F.ROTATE){if(g.noRotate===!0)return;b.set(e.clientX,e.clientY),w.subVectors(b,y),g.rotateLeft(2*Math.PI*w.x/t.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*w.y/t.clientHeight*g.rotateSpeed),y.copy(b)}else if(z===F.DOLLY){if(g.noZoom===!0)return;T.set(e.clientX,e.clientY),C.subVectors(T,S),C.y>0?g.dollyIn():g.dollyOut(),S.copy(T)}else if(z===F.PAN){if(g.noPan===!0)return;_.set(e.clientX,e.clientY),k.subVectors(_,x),g.pan(k.x,k.y),x.copy(_)}z!==F.NONE&&g.update()}}function l(){g.enabled!==!1&&(document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",l,!1),g.dispatchEvent(N),z=F.NONE)}function h(e){if(g.enabled!==!1&&g.noZoom!==!0&&z===F.NONE){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?g.dollyOut():g.dollyIn(),g.update(),g.dispatchEvent(O),g.dispatchEvent(N)}}function d(e){if(g.enabled!==!1&&g.noKeys!==!0&&g.noPan!==!0)switch(e.keyCode){case g.keys.UP:g.pan(0,g.keyPanSpeed),g.update();break;case g.keys.BOTTOM:g.pan(0,-g.keyPanSpeed),g.update();break;case g.keys.LEFT:g.pan(g.keyPanSpeed,0),g.update();break;case g.keys.RIGHT:g.pan(-g.keyPanSpeed,0),g.update()}}function c(e){if(g.enabled!==!1){switch(e.touches.length){case 1:if(g.noRotate===!0)return;z=F.TOUCH_ROTATE,y.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(g.noZoom===!0)return;z=F.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);S.set(0,n);break;case 3:if(g.noPan===!0)return;z=F.TOUCH_PAN,x.set(e.touches[0].pageX,e.touches[0].pageY);break;default:z=F.NONE}z!==F.NONE&&g.dispatchEvent(O)}}function u(e){if(g.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=g.domElement===document?g.domElement.body:g.domElement;switch(e.touches.length){case 1:if(g.noRotate===!0)return;if(z!==F.TOUCH_ROTATE)return;b.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(b,y),g.rotateLeft(2*Math.PI*w.x/t.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*w.y/t.clientHeight*g.rotateSpeed),y.copy(b),g.update();break;case 2:if(g.noZoom===!0)return;if(z!==F.TOUCH_DOLLY)return;var i=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(i*i+n*n);T.set(0,o),C.subVectors(T,S),C.y>0?g.dollyOut():g.dollyIn(),S.copy(T),g.update();break;case 3:if(g.noPan===!0)return;if(z!==F.TOUCH_PAN)return;_.set(e.touches[0].pageX,e.touches[0].pageY),k.subVectors(_,x),g.pan(k.x,k.y),x.copy(_),g.update();break;default:z=F.NONE}}}function p(){g.enabled!==!1&&(g.dispatchEvent(N),z=F.NONE)}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:i.LEFT,ZOOM:i.MIDDLE,PAN:i.RIGHT};var m,f,g=this,v=1e-6,y=new e.Vector2,b=new e.Vector2,w=new e.Vector2,x=new e.Vector2,_=new e.Vector2,k=new e.Vector2,M=new e.Vector3,E=new e.Vector3,S=new e.Vector2,T=new e.Vector2,C=new e.Vector2,A=0,j=0,L=1,P=new e.Vector3,R=new e.Vector3,D=new e.Quaternion,F={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},z=F.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone();var B=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),V=B.clone().inverse(),U={type:"change"},O={type:"start"},N={type:"end"};this.rotateLeft=function(e){void 0===e&&(e=o()),j-=e},this.rotateUp=function(e){void 0===e&&(e=o()),A-=e},this.panLeft=function(e){var t=this.object.matrix.elements;M.set(t[0],t[1],t[2]),M.multiplyScalar(-e),P.add(M)},this.panUp=function(e){var t=this.object.matrix.elements;M.set(t[4],t[5],t[6]),M.multiplyScalar(e),P.add(M)},this.pan=function(e,t){var i=g.domElement===document?g.domElement.body:g.domElement;if(void 0!==g.object.fov){var n=g.object.position,o=n.clone().sub(g.target),r=o.length();r*=Math.tan(g.object.fov/2*Math.PI/180),g.panLeft(2*e*r/i.clientHeight),g.panUp(2*t*r/i.clientHeight)}else void 0!==g.object.top?(g.panLeft(e*(g.object.right-g.object.left)/i.clientWidth),g.panUp(t*(g.object.top-g.object.bottom)/i.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=r()),L/=e},this.dollyOut=function(e){void 0===e&&(e=r()),L*=e},this.update=function(){var e=this.object.position;E.copy(e).sub(this.target),E.applyQuaternion(B),m=Math.atan2(E.x,E.z),f=Math.atan2(Math.sqrt(E.x*E.x+E.z*E.z),E.y),this.autoRotate&&this.rotateLeft(o()),m+=j,f+=A,m=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,m)),f=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,f)),f=Math.max(v,Math.min(Math.PI-v,f));var t=E.length()*L;t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(P),E.x=t*Math.sin(f)*Math.sin(m),E.y=t*Math.cos(f),E.z=t*Math.sin(f)*Math.cos(m),E.applyQuaternion(V),e.copy(this.target).add(E),this.object.lookAt(this.target),j=0,A=0,L=1,P.set(0,0,0),(R.distanceToSquared(this.object.position)>v||8*(1-D.dot(this.object.quaternion))>v)&&(this.dispatchEvent(U),R.copy(this.object.position),D.copy(this.object.quaternion))},this.reset=function(){z=F.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.getPolarAngle=function(){return f},this.getAzimuthalAngle=function(){return m},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",s,!1),this.domElement.addEventListener("mousewheel",h,!1),this.domElement.addEventListener("DOMMouseScroll",h,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",p,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",d,!1),this.update()}var i=e.MOUSE;return i||(i={LEFT:0,MIDDLE:1,RIGHT:2}),t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,t}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/three/three.js":[function(e,t,i){var n=n||{},o={REVISION:"69"};"object"==typeof t&&(t.exports=o),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:0}),o.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},o.CullFaceNone=0,o.CullFaceBack=1,o.CullFaceFront=2,o.CullFaceFrontBack=3,o.FrontFaceDirectionCW=0,o.FrontFaceDirectionCCW=1,o.BasicShadowMap=0,o.PCFShadowMap=1,o.PCFSoftShadowMap=2,o.FrontSide=0,o.BackSide=1,o.DoubleSide=2,o.NoShading=0,o.FlatShading=1,o.SmoothShading=2,o.NoColors=0,o.FaceColors=1,o.VertexColors=2,o.NoBlending=0,o.NormalBlending=1,o.AdditiveBlending=2,o.SubtractiveBlending=3,o.MultiplyBlending=4,o.CustomBlending=5,o.AddEquation=100,o.SubtractEquation=101,o.ReverseSubtractEquation=102,o.MinEquation=103,o.MaxEquation=104,o.ZeroFactor=200,o.OneFactor=201,o.SrcColorFactor=202,o.OneMinusSrcColorFactor=203,o.SrcAlphaFactor=204,o.OneMinusSrcAlphaFactor=205,o.DstAlphaFactor=206,o.OneMinusDstAlphaFactor=207,o.DstColorFactor=208,o.OneMinusDstColorFactor=209,o.SrcAlphaSaturateFactor=210,o.MultiplyOperation=0,o.MixOperation=1,o.AddOperation=2,o.UVMapping=function(){},o.CubeReflectionMapping=function(){},o.CubeRefractionMapping=function(){},o.SphericalReflectionMapping=function(){},o.SphericalRefractionMapping=function(){},o.RepeatWrapping=1e3,o.ClampToEdgeWrapping=1001,o.MirroredRepeatWrapping=1002,o.NearestFilter=1003,o.NearestMipMapNearestFilter=1004,o.NearestMipMapLinearFilter=1005,o.LinearFilter=1006,o.LinearMipMapNearestFilter=1007,o.LinearMipMapLinearFilter=1008,o.UnsignedByteType=1009,o.ByteType=1010,o.ShortType=1011,o.UnsignedShortType=1012,o.IntType=1013,o.UnsignedIntType=1014,o.FloatType=1015,o.UnsignedShort4444Type=1016,o.UnsignedShort5551Type=1017,o.UnsignedShort565Type=1018,o.AlphaFormat=1019,o.RGBFormat=1020,o.RGBAFormat=1021,o.LuminanceFormat=1022,o.LuminanceAlphaFormat=1023,o.RGB_S3TC_DXT1_Format=2001,o.RGBA_S3TC_DXT1_Format=2002,o.RGBA_S3TC_DXT3_Format=2003,o.RGBA_S3TC_DXT5_Format=2004,o.RGB_PVRTC_4BPPV1_Format=2100,o.RGB_PVRTC_2BPPV1_Format=2101,o.RGBA_PVRTC_4BPPV1_Format=2102,o.RGBA_PVRTC_2BPPV1_Format=2103,o.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},o.Color.prototype={constructor:o.Color,r:1,g:1,b:1,set:function(e){return e instanceof o.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(e,t,i){if(0===t)this.r=this.g=this.b=i;else{var n=function(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e},o=.5>=i?i*(1+t):i+t-i*t,r=2*i-o;this.r=n(r,o,e+1/3),this.g=n(r,o,e),this.b=n(r,o,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}return/^(\w+)$/i.test(e)?(this.setHex(o.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,i,n=e||{h:0,s:0,l:0},o=this.r,r=this.g,s=this.b,a=Math.max(o,r,s),l=Math.min(o,r,s),h=(l+a)/2;if(l===a)t=0,i=0;else{var d=a-l;switch(i=.5>=h?d/(a+l):d/(2-a-l),a){case o:t=(r-s)/d+(s>r?6:0);break;case r:t=(s-o)/d+2;break;case s:t=(o-r)/d+4}t/=6}return n.h=t,n.s=i,n.l=h,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new o.Color).setRGB(this.r,this.g,this.b)}},o.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},o.Quaternion=function(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==n?n:1
},o.Quaternion.prototype={constructor:o.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof o.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(e._x/2),n=Math.cos(e._y/2),r=Math.cos(e._z/2),s=Math.sin(e._x/2),a=Math.sin(e._y/2),l=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=s*n*r+i*a*l,this._y=i*a*r-s*n*l,this._z=i*n*l+s*a*r,this._w=i*n*r-s*a*l):"YXZ"===e.order?(this._x=s*n*r+i*a*l,this._y=i*a*r-s*n*l,this._z=i*n*l-s*a*r,this._w=i*n*r+s*a*l):"ZXY"===e.order?(this._x=s*n*r-i*a*l,this._y=i*a*r+s*n*l,this._z=i*n*l+s*a*r,this._w=i*n*r-s*a*l):"ZYX"===e.order?(this._x=s*n*r-i*a*l,this._y=i*a*r+s*n*l,this._z=i*n*l-s*a*r,this._w=i*n*r+s*a*l):"YZX"===e.order?(this._x=s*n*r+i*a*l,this._y=i*a*r+s*n*l,this._z=i*n*l-s*a*r,this._w=i*n*r-s*a*l):"XZY"===e.order&&(this._x=s*n*r-i*a*l,this._y=i*a*r-s*n*l,this._z=i*n*l+s*a*r,this._w=i*n*r+s*a*l),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,n=i[0],o=i[4],r=i[8],s=i[1],a=i[5],l=i[9],h=i[2],d=i[6],c=i[10],u=n+a+c;return u>0?(t=.5/Math.sqrt(u+1),this._w=.25/t,this._x=(d-l)*t,this._y=(r-h)*t,this._z=(s-o)*t):n>a&&n>c?(t=2*Math.sqrt(1+n-a-c),this._w=(d-l)/t,this._x=.25*t,this._y=(o+s)/t,this._z=(r+h)/t):a>c?(t=2*Math.sqrt(1+a-n-c),this._w=(r-h)/t,this._x=(o+s)/t,this._y=.25*t,this._z=(l+d)/t):(t=2*Math.sqrt(1+c-n-a),this._w=(s-o)/t,this._x=(r+h)/t,this._y=(l+d)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,i=1e-6;return function(n,r){return void 0===e&&(e=new o.Vector3),t=n.dot(r)+1,i>t?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,o=e._z,r=e._w,s=t._x,a=t._y,l=t._z,h=t._w;return this._x=i*h+r*s+n*l-o*a,this._y=n*h+r*a+o*s-i*l,this._z=o*h+r*l+i*a-n*s,this._w=r*h-i*s-n*a-o*l,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,o=this._z,r=this._w,s=r*e._w+i*e._x+n*e._y+o*e._z;if(0>s?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=r,this._x=i,this._y=n,this._z=o,this;var a=Math.acos(s),l=Math.sqrt(1-s*s);if(Math.abs(l)<.001)return this._w=.5*(r+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(o+this._z),this;var h=Math.sin((1-t)*a)/l,d=Math.sin(t*a)/l;return this._w=r*h+this._w*d,this._x=i*h+this._x*d,this._y=n*h+this._y*d,this._z=o*h+this._z*d,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new o.Quaternion(this._x,this._y,this._z,this._w)}},o.Quaternion.slerp=function(e,t,i,n){return i.copy(e).slerp(t,n)},o.Vector2=function(e,t){this.x=e||0,this.y=t||0},o.Vector2.prototype={constructor:o.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(i,n){return void 0===e&&(e=new o.Vector2,t=new o.Vector2),e.set(i,i),t.set(n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},clone:function(){return new o.Vector2(this.x,this.y)}},o.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},o.Vector3.prototype={constructor:o.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return t instanceof o.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new o.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,i){return void 0===e&&(e=new o.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,i)),this}}(),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*n,this.y=o[1]*t+o[4]*i+o[7]*n,this.z=o[2]*t+o[5]*i+o[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n+o[12],this.y=o[1]*t+o[5]*i+o[9]*n+o[13],this.z=o[2]*t+o[6]*i+o[10]*n+o[14],this},applyProjection:function(e){var t=this.x,i=this.y,n=this.z,o=e.elements,r=1/(o[3]*t+o[7]*i+o[11]*n+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*n+o[12])*r,this.y=(o[1]*t+o[5]*i+o[9]*n+o[13])*r,this.z=(o[2]*t+o[6]*i+o[10]*n+o[14])*r,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,o=e.x,r=e.y,s=e.z,a=e.w,l=a*t+r*n-s*i,h=a*i+s*t-o*n,d=a*n+o*i-r*t,c=-o*t-r*i-s*n;return this.x=l*a+c*-o+h*-s-d*-r,this.y=h*a+c*-r+d*-o-l*-s,this.z=d*a+c*-s+l*-r-h*-o,this},project:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,n=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n,this.y=o[1]*t+o[5]*i+o[9]*n,this.z=o[2]*t+o[6]*i+o[10]*n,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(i,n){return void 0===e&&(e=new o.Vector3,t=new o.Vector3),e.set(i,i,i),t.set(n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var i=this.x,n=this.y,o=this.z;return this.x=n*e.z-o*e.y,this.y=o*e.x-i*e.z,this.z=i*e.y-n*e.x,this},crossVectors:function(e,t){var i=e.x,n=e.y,o=e.z,r=t.x,s=t.y,a=t.z;return this.x=n*a-o*s,this.y=o*r-i*a,this.z=i*s-n*r,this},projectOnVector:function(){var e,t;return function(i){return void 0===e&&(e=new o.Vector3),e.copy(i).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new o.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new o.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(o.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n},setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),i=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),n=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=i,this.z=n,this},setFromMatrixColumn:function(e,t){var i=4*e,n=t.elements;return this.x=n[i],this.y=n[i+1],this.z=n[i+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},clone:function(){return new o.Vector3(this.x,this.y,this.z)}},o.Vector4=function(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1},o.Vector4.prototype={constructor:o.Vector4,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,o=this.w,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n+r[12]*o,this.y=r[1]*t+r[5]*i+r[9]*n+r[13]*o,this.z=r[2]*t+r[6]*i+r[10]*n+r[14]*o,this.w=r[3]*t+r[7]*i+r[11]*n+r[15]*o,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,n,o,r=.01,s=.1,a=e.elements,l=a[0],h=a[4],d=a[8],c=a[1],u=a[5],p=a[9],m=a[2],f=a[6],g=a[10];if(Math.abs(h-c)<r&&Math.abs(d-m)<r&&Math.abs(p-f)<r){if(Math.abs(h+c)<s&&Math.abs(d+m)<s&&Math.abs(p+f)<s&&Math.abs(l+u+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,y=(u+1)/2,b=(g+1)/2,w=(h+c)/4,x=(d+m)/4,_=(p+f)/4;return v>y&&v>b?r>v?(i=0,n=.707106781,o=.707106781):(i=Math.sqrt(v),n=w/i,o=x/i):y>b?r>y?(i=.707106781,n=0,o=.707106781):(n=Math.sqrt(y),i=w/n,o=_/n):r>b?(i=.707106781,n=.707106781,o=0):(o=Math.sqrt(b),i=x/o,n=_/o),this.set(i,n,o,t),this}var k=Math.sqrt((f-p)*(f-p)+(d-m)*(d-m)+(c-h)*(c-h));return Math.abs(k)<.001&&(k=1),this.x=(f-p)/k,this.y=(d-m)/k,this.z=(c-h)/k,this.w=Math.acos((l+u+g-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(i,n){return void 0===e&&(e=new o.Vector4,t=new o.Vector4),e.set(i,i,i,i),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},clone:function(){return new o.Vector4(this.x,this.y,this.z,this.w)}},o.Euler=function(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||o.Euler.DefaultOrder},o.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],o.Euler.DefaultOrder="XYZ",o.Euler.prototype={constructor:o.Euler,_x:0,_y:0,_z:0,_order:o.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var i=o.Math.clamp,n=e.elements,r=n[0],s=n[4],a=n[8],l=n[1],h=n[5],d=n[9],c=n[2],u=n[6],p=n[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,h),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-c,r),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(l,r))):"ZYX"===t?(this._y=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(u,p),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-s,h))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===t?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(u,h),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-d,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,this.onChangeCallback(),this},setFromQuaternion:function(e,t,i){var n=o.Math.clamp,r=e.x*e.x,s=e.y*e.y,a=e.z*e.z,l=e.w*e.w;return t=t||this._order,"XYZ"===t?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),l-r-s+a),this._y=Math.asin(n(2*(e.x*e.z+e.y*e.w),-1,1)),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),l+r-s-a)):"YXZ"===t?(this._x=Math.asin(n(2*(e.x*e.w-e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),l-r-s+a),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),l-r+s-a)):"ZXY"===t?(this._x=Math.asin(n(2*(e.x*e.w+e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),l-r-s+a),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),l-r+s-a)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),l-r-s+a),this._y=Math.asin(n(2*(e.y*e.w-e.x*e.z),-1,1)),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),l+r-s-a)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),l-r+s-a),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),l+r-s-a),this._z=Math.asin(n(2*(e.x*e.y+e.z*e.w),-1,1))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),l-r+s-a),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),l+r-s-a),this._z=Math.asin(n(2*(e.z*e.w-e.x*e.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+t),this._order=t,i!==!1&&this.onChangeCallback(),this},reorder:function(){var e=new o.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new o.Euler(this._x,this._y,this._z,this._order)}},o.Line3=function(e,t){this.start=void 0!==e?e:new o.Vector3,this.end=void 0!==t?t:new o.Vector3},o.Line3.prototype={constructor:o.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new o.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new o.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new o.Vector3;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new o.Vector3,t=new o.Vector3;return function(i,n){e.subVectors(i,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),s=t.dot(e),a=s/r;return n&&(a=o.Math.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,i){var n=this.closestPointToPointParameter(e,t),r=i||new o.Vector3;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new o.Line3).copy(this)}},o.Box2=function(e,t){this.min=void 0!==e?e:new o.Vector2(1/0,1/0),this.max=void 0!==t?t:new o.Vector2(-1/0,-1/0)},o.Box2.prototype={constructor:o.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new o.Vector2;return function(t,i){var n=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new o.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new o.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var i=t||new o.Vector2;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var i=t||new o.Vector2;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o.Vector2;return function(t){var i=e.copy(t).clamp(this.min,this.max);return i.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new o.Box2).copy(this)}},o.Box3=function(e,t){this.min=void 0!==e?e:new o.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new o.Vector3(-1/0,-1/0,-1/0)},o.Box3.prototype={constructor:o.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new o.Vector3;return function(t,i){var n=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new o.Vector3;return function(t){var i=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var n=t.geometry;if(void 0!==n)if(n instanceof o.Geometry)for(var r=n.vertices,s=0,a=r.length;a>s;s++)e.copy(r[s]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e);else if(n instanceof o.BufferGeometry&&void 0!==n.attributes.position)for(var l=n.attributes.position.array,s=0,a=l.length;a>s;s+=3)e.set(l[s],l[s+1],l[s+2]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new o.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new o.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var i=t||new o.Vector3;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var i=t||new o.Vector3;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o.Vector3;return function(t){var i=e.copy(t).clamp(this.min,this.max);return i.sub(t).length()}}(),getBoundingSphere:function(){var e=new o.Vector3;return function(t){var i=t||new o.Sphere;return i.center=this.center(),i.radius=.5*this.size(e).length(),i}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this
}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new o.Box3).copy(this)}},o.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},o.Matrix3.prototype={constructor:o.Matrix3,set:function(e,t,i,n,o,r,s,a,l){var h=this.elements;return h[0]=e,h[3]=t,h[6]=i,h[1]=n,h[4]=o,h[7]=r,h[2]=s,h[5]=a,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new o.Vector3;return function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);for(var o=0,r=i;n>o;o+=3,r+=3)e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.applyMatrix3(this),t[r]=e.x,t[r+1]=e.y,t[r+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],o=e[3],r=e[4],s=e[5],a=e[6],l=e[7],h=e[8];return t*r*h-t*s*l-i*o*h+i*s*a+n*o*l-n*r*a},getInverse:function(e,t){var i=e.elements,n=this.elements;n[0]=i[10]*i[5]-i[6]*i[9],n[1]=-i[10]*i[1]+i[2]*i[9],n[2]=i[6]*i[1]-i[2]*i[5],n[3]=-i[10]*i[4]+i[6]*i[8],n[4]=i[10]*i[0]-i[2]*i[8],n[5]=-i[6]*i[0]+i[2]*i[4],n[6]=i[9]*i[4]-i[5]*i[8],n[7]=-i[9]*i[0]+i[1]*i[8],n[8]=i[5]*i[0]-i[1]*i[4];var o=i[0]*n[0]+i[1]*n[3]+i[2]*n[6];if(0===o){var r="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(r);return console.warn(r),this.identity(),this}return this.multiplyScalar(1/o),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new o.Matrix3).fromArray(this.elements)}},o.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},o.Matrix4.prototype={constructor:o.Matrix4,set:function(e,t,i,n,o,r,s,a,l,h,d,c,u,p,m,f){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=o,g[5]=r,g[9]=s,g[13]=a,g[2]=l,g[6]=h,g[10]=d,g[14]=c,g[3]=u,g[7]=p,g[11]=m,g[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractRotation:function(){var e=new o.Vector3;return function(t){var i=this.elements,n=t.elements,o=1/e.set(n[0],n[1],n[2]).length(),r=1/e.set(n[4],n[5],n[6]).length(),s=1/e.set(n[8],n[9],n[10]).length();return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i[4]=n[4]*r,i[5]=n[5]*r,i[6]=n[6]*r,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,this}}(),makeRotationFromEuler:function(e){e instanceof o.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,n=e.y,r=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(n),h=Math.sin(n),d=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var u=s*d,p=s*c,m=a*d,f=a*c;t[0]=l*d,t[4]=-l*c,t[8]=h,t[1]=p+m*h,t[5]=u-f*h,t[9]=-a*l,t[2]=f-u*h,t[6]=m+p*h,t[10]=s*l}else if("YXZ"===e.order){var g=l*d,v=l*c,y=h*d,b=h*c;t[0]=g+b*a,t[4]=y*a-v,t[8]=s*h,t[1]=s*c,t[5]=s*d,t[9]=-a,t[2]=v*a-y,t[6]=b+g*a,t[10]=s*l}else if("ZXY"===e.order){var g=l*d,v=l*c,y=h*d,b=h*c;t[0]=g-b*a,t[4]=-s*c,t[8]=y+v*a,t[1]=v+y*a,t[5]=s*d,t[9]=b-g*a,t[2]=-s*h,t[6]=a,t[10]=s*l}else if("ZYX"===e.order){var u=s*d,p=s*c,m=a*d,f=a*c;t[0]=l*d,t[4]=m*h-p,t[8]=u*h+f,t[1]=l*c,t[5]=f*h+u,t[9]=p*h-m,t[2]=-h,t[6]=a*l,t[10]=s*l}else if("YZX"===e.order){var w=s*l,x=s*h,_=a*l,k=a*h;t[0]=l*d,t[4]=k-w*c,t[8]=_*c+x,t[1]=c,t[5]=s*d,t[9]=-a*d,t[2]=-h*d,t[6]=x*c+_,t[10]=w-k*c}else if("XZY"===e.order){var w=s*l,x=s*h,_=a*l,k=a*h;t[0]=l*d,t[4]=-c,t[8]=h*d,t[1]=w*c+k,t[5]=s*d,t[9]=x*c-_,t[2]=_*c-x,t[6]=a*d,t[10]=k*c+w}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,i=e.x,n=e.y,o=e.z,r=e.w,s=i+i,a=n+n,l=o+o,h=i*s,d=i*a,c=i*l,u=n*a,p=n*l,m=o*l,f=r*s,g=r*a,v=r*l;return t[0]=1-(u+m),t[4]=d-v,t[8]=c+g,t[1]=d+v,t[5]=1-(h+m),t[9]=p-f,t[2]=c-g,t[6]=p+f,t[10]=1-(h+u),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new o.Vector3,t=new o.Vector3,i=new o.Vector3;return function(n,o,r){var s=this.elements;return i.subVectors(n,o).normalize(),0===i.length()&&(i.z=1),e.crossVectors(r,i).normalize(),0===e.length()&&(i.x+=1e-4,e.crossVectors(r,i).normalize()),t.crossVectors(i,e),s[0]=e.x,s[4]=t.x,s[8]=i.x,s[1]=e.y,s[5]=t.y,s[9]=i.y,s[2]=e.z,s[6]=t.z,s[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements,o=this.elements,r=i[0],s=i[4],a=i[8],l=i[12],h=i[1],d=i[5],c=i[9],u=i[13],p=i[2],m=i[6],f=i[10],g=i[14],v=i[3],y=i[7],b=i[11],w=i[15],x=n[0],_=n[4],k=n[8],M=n[12],E=n[1],S=n[5],T=n[9],C=n[13],A=n[2],j=n[6],L=n[10],P=n[14],R=n[3],D=n[7],F=n[11],z=n[15];return o[0]=r*x+s*E+a*A+l*R,o[4]=r*_+s*S+a*j+l*D,o[8]=r*k+s*T+a*L+l*F,o[12]=r*M+s*C+a*P+l*z,o[1]=h*x+d*E+c*A+u*R,o[5]=h*_+d*S+c*j+u*D,o[9]=h*k+d*T+c*L+u*F,o[13]=h*M+d*C+c*P+u*z,o[2]=p*x+m*E+f*A+g*R,o[6]=p*_+m*S+f*j+g*D,o[10]=p*k+m*T+f*L+g*F,o[14]=p*M+m*C+f*P+g*z,o[3]=v*x+y*E+b*A+w*R,o[7]=v*_+y*S+b*j+w*D,o[11]=v*k+y*T+b*L+w*F,o[15]=v*M+y*C+b*P+w*z,this},multiplyToArray:function(e,t,i){var n=this.elements;return this.multiplyMatrices(e,t),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new o.Vector3;return function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);for(var o=0,r=i;n>o;o+=3,r+=3)e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.applyMatrix4(this),t[r]=e.x,t[r+1]=e.y,t[r+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],o=e[12],r=e[1],s=e[5],a=e[9],l=e[13],h=e[2],d=e[6],c=e[10],u=e[14],p=e[3],m=e[7],f=e[11],g=e[15];return p*(+o*a*d-n*l*d-o*s*c+i*l*c+n*s*u-i*a*u)+m*(+t*a*u-t*l*c+o*r*c-n*r*u+n*l*h-o*a*h)+f*(+t*l*d-t*s*u-o*r*d+i*r*u+o*s*h-i*l*h)+g*(-n*s*h-t*a*d+t*s*c+n*r*d-i*r*c+i*a*h)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e},getPosition:function(){var e=new o.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,n=e.elements,o=n[0],r=n[4],s=n[8],a=n[12],l=n[1],h=n[5],d=n[9],c=n[13],u=n[2],p=n[6],m=n[10],f=n[14],g=n[3],v=n[7],y=n[11],b=n[15];i[0]=d*f*v-c*m*v+c*p*y-h*f*y-d*p*b+h*m*b,i[4]=a*m*v-s*f*v-a*p*y+r*f*y+s*p*b-r*m*b,i[8]=s*c*v-a*d*v+a*h*y-r*c*y-s*h*b+r*d*b,i[12]=a*d*p-s*c*p-a*h*m+r*c*m+s*h*f-r*d*f,i[1]=c*m*g-d*f*g-c*u*y+l*f*y+d*u*b-l*m*b,i[5]=s*f*g-a*m*g+a*u*y-o*f*y-s*u*b+o*m*b,i[9]=a*d*g-s*c*g-a*l*y+o*c*y+s*l*b-o*d*b,i[13]=s*c*u-a*d*u+a*l*m-o*c*m-s*l*f+o*d*f,i[2]=h*f*g-c*p*g+c*u*v-l*f*v-h*u*b+l*p*b,i[6]=a*p*g-r*f*g-a*u*v+o*f*v+r*u*b-o*p*b,i[10]=r*c*g-a*h*g+a*l*v-o*c*v-r*l*b+o*h*b,i[14]=a*h*u-r*c*u-a*l*p+o*c*p+r*l*f-o*h*f,i[3]=d*p*g-h*m*g-d*u*v+l*m*v+h*u*y-l*p*y,i[7]=r*m*g-s*p*g+s*u*v-o*m*v-r*u*y+o*p*y,i[11]=s*h*g-r*d*g-s*l*v+o*d*v+r*l*y-o*h*y,i[15]=r*d*u-s*h*u+s*l*p-o*d*p-r*l*m+o*h*m;var w=o*i[0]+l*i[4]+u*i[8]+g*i[12];if(0==w){var x="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(x);return console.warn(x),this.identity(),this}return this.multiplyScalar(1/w),this},translate:function(){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,i=e.x,n=e.y,o=e.z;return t[0]*=i,t[4]*=n,t[8]*=o,t[1]*=i,t[5]*=n,t[9]*=o,t[2]*=i,t[6]*=n,t[10]*=o,t[3]*=i,t[7]*=n,t[11]*=o,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(i,n)))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),n=Math.sin(t),o=1-i,r=e.x,s=e.y,a=e.z,l=o*r,h=o*s;return this.set(l*r+i,l*s-n*a,l*a+n*s,0,l*s+n*a,h*s+i,h*a-n*r,0,l*a-n*s,h*a+n*r,o*a*a+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var e=new o.Vector3,t=new o.Matrix4;return function(i,n,o){var r=this.elements,s=e.set(r[0],r[1],r[2]).length(),a=e.set(r[4],r[5],r[6]).length(),l=e.set(r[8],r[9],r[10]).length(),h=this.determinant();0>h&&(s=-s),i.x=r[12],i.y=r[13],i.z=r[14],t.elements.set(this.elements);var d=1/s,c=1/a,u=1/l;return t.elements[0]*=d,t.elements[1]*=d,t.elements[2]*=d,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=u,t.elements[9]*=u,t.elements[10]*=u,n.setFromRotationMatrix(t),o.x=s,o.y=a,o.z=l,this}}(),makeFrustum:function(e,t,i,n,o,r){var s=this.elements,a=2*o/(t-e),l=2*o/(n-i),h=(t+e)/(t-e),d=(n+i)/(n-i),c=-(r+o)/(r-o),u=-2*r*o/(r-o);return s[0]=a,s[4]=0,s[8]=h,s[12]=0,s[1]=0,s[5]=l,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=c,s[14]=u,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makePerspective:function(e,t,i,n){var r=i*Math.tan(o.Math.degToRad(.5*e)),s=-r,a=s*t,l=r*t;return this.makeFrustum(a,l,s,r,i,n)},makeOrthographic:function(e,t,i,n,o,r){var s=this.elements,a=t-e,l=i-n,h=r-o,d=(t+e)/a,c=(i+n)/l,u=(r+o)/h;return s[0]=2/a,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2/l,s[9]=0,s[13]=-c,s[2]=0,s[6]=0,s[10]=-2/h,s[14]=-u,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new o.Matrix4).fromArray(this.elements)}},o.Ray=function(e,t){this.origin=void 0!==e?e:new o.Vector3,this.direction=void 0!==t?t:new o.Vector3},o.Ray.prototype={constructor:o.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var i=t||new o.Vector3;return i.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new o.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var i=t||new o.Vector3;i.subVectors(e,this.origin);var n=i.dot(this.direction);return 0>n?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(){var e=new o.Vector3;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,i,n){var o,r,s,a,l=e.clone().add(t).multiplyScalar(.5),h=t.clone().sub(e).normalize(),d=.5*e.distanceTo(t),c=this.origin.clone().sub(l),u=-this.direction.dot(h),p=c.dot(this.direction),m=-c.dot(h),f=c.lengthSq(),g=Math.abs(1-u*u);if(g>=0)if(o=u*m-p,r=u*p-m,a=d*g,o>=0)if(r>=-a)if(a>=r){var v=1/g;o*=v,r*=v,s=o*(o+u*r+2*p)+r*(u*o+r+2*m)+f}else r=d,o=Math.max(0,-(u*r+p)),s=-o*o+r*(r+2*m)+f;else r=-d,o=Math.max(0,-(u*r+p)),s=-o*o+r*(r+2*m)+f;else-a>=r?(o=Math.max(0,-(-u*d+p)),r=o>0?-d:Math.min(Math.max(-d,-m),d),s=-o*o+r*(r+2*m)+f):a>=r?(o=0,r=Math.min(Math.max(-d,-m),d),s=r*(r+2*m)+f):(o=Math.max(0,-(u*d+p)),r=o>0?d:Math.min(Math.max(-d,-m),d),s=-o*o+r*(r+2*m)+f);else r=u>0?-d:d,o=Math.max(0,-(u*r+p)),s=-o*o+r*(r+2*m)+f;return i&&i.copy(this.direction.clone().multiplyScalar(o).add(this.origin)),n&&n.copy(h.clone().multiplyScalar(r).add(l)),s},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new o.Vector3;return function(t,i){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),o=e.dot(e)-n*n,r=t.radius*t.radius;if(o>r)return null;var s=Math.sqrt(r-o),a=n-s,l=n+s;return 0>a&&0>l?null:0>a?this.at(l,i):this.at(a,i)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var i=e.normal.dot(this.direction);return 0>i*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},isIntersectionBox:function(){var e=new o.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var i,n,o,r,s,a,l=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,c=this.origin;return l>=0?(i=(e.min.x-c.x)*l,n=(e.max.x-c.x)*l):(i=(e.max.x-c.x)*l,n=(e.min.x-c.x)*l),h>=0?(o=(e.min.y-c.y)*h,r=(e.max.y-c.y)*h):(o=(e.max.y-c.y)*h,r=(e.min.y-c.y)*h),i>r||o>n?null:((o>i||i!==i)&&(i=o),(n>r||n!==n)&&(n=r),d>=0?(s=(e.min.z-c.z)*d,a=(e.max.z-c.z)*d):(s=(e.max.z-c.z)*d,a=(e.min.z-c.z)*d),i>a||s>n?null:((s>i||i!==i)&&(i=s),(n>a||n!==n)&&(n=a),0>n?null:this.at(i>=0?i:n,t)))},intersectTriangle:function(){var e=new o.Vector3,t=new o.Vector3,i=new o.Vector3,n=new o.Vector3;return function(o,r,s,a,l){t.subVectors(r,o),i.subVectors(s,o),n.crossVectors(t,i);var h,d=this.direction.dot(n);if(d>0){if(a)return null;h=1}else{if(!(0>d))return null;h=-1,d=-d}e.subVectors(this.origin,o);var c=h*this.direction.dot(i.crossVectors(e,i));if(0>c)return null;var u=h*this.direction.dot(t.cross(e));if(0>u)return null;if(c+u>d)return null;var p=-h*e.dot(n);return 0>p?null:this.at(p/d,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new o.Ray).copy(this)}},o.Sphere=function(e,t){this.center=void 0!==e?e:new o.Vector3,this.radius=void 0!==t?t:0},o.Sphere.prototype={constructor:o.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new o.Box3;return function(t,i){var n=this.center;void 0!==i?n.copy(i):e.setFromPoints(t).center(n);for(var o=0,r=0,s=t.length;s>r;r++)o=Math.max(o,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(o),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),n=t||new o.Vector3;return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new o.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new o.Sphere).copy(this)}},o.Frustum=function(e,t,i,n,r,s){this.planes=[void 0!==e?e:new o.Plane,void 0!==t?t:new o.Plane,void 0!==i?i:new o.Plane,void 0!==n?n:new o.Plane,void 0!==r?r:new o.Plane,void 0!==s?s:new o.Plane]},o.Frustum.prototype={constructor:o.Frustum,set:function(e,t,i,n,o,r){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(o),s[5].copy(r),this},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,n=i[0],o=i[1],r=i[2],s=i[3],a=i[4],l=i[5],h=i[6],d=i[7],c=i[8],u=i[9],p=i[10],m=i[11],f=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(s-n,d-a,m-c,y-f).normalize(),t[1].setComponents(s+n,d+a,m+c,y+f).normalize(),t[2].setComponents(s+o,d+l,m+u,y+g).normalize(),t[3].setComponents(s-o,d-l,m-u,y-g).normalize(),t[4].setComponents(s-r,d-h,m-p,y-v).normalize(),t[5].setComponents(s+r,d+h,m+p,y+v).normalize(),this},intersectsObject:function(){var e=new o.Sphere;return function(t){var i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,n=-e.radius,o=0;6>o;o++){var r=t[o].distanceToPoint(i);if(n>r)return!1}return!0},intersectsBox:function(){var e=new o.Vector3,t=new o.Vector3;return function(i){for(var n=this.planes,o=0;6>o;o++){var r=n[o];e.x=r.normal.x>0?i.min.x:i.max.x,t.x=r.normal.x>0?i.max.x:i.min.x,e.y=r.normal.y>0?i.min.y:i.max.y,t.y=r.normal.y>0?i.max.y:i.min.y,e.z=r.normal.z>0?i.min.z:i.max.z,t.z=r.normal.z>0?i.max.z:i.min.z;var s=r.distanceToPoint(e),a=r.distanceToPoint(t);if(0>s&&0>a)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new o.Frustum).copy(this)}},o.Plane=function(e,t){this.normal=void 0!==e?e:new o.Vector3(1,0,0),this.constant=void 0!==t?t:0},o.Plane.prototype={constructor:o.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new o.Vector3,t=new o.Vector3;return function(i,n,o){var r=e.subVectors(o,n).cross(t.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,i),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e),n=t||new o.Vector3;return n.copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return 0>t&&i>0||0>i&&t>0},intersectLine:function(){var e=new o.Vector3;return function(t,i){var n=i||new o.Vector3,r=t.delta(e),s=this.normal.dot(r);if(0==s)return 0==this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/s;return 0>a||a>1?void 0:n.copy(r).multiplyScalar(a).add(t.start)}}(),coplanarPoint:function(e){var t=e||new o.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new o.Vector3,t=new o.Vector3,i=new o.Matrix3;return function(n,o){var r=o||i.getNormalMatrix(n),s=e.copy(this.normal).applyMatrix3(r),a=this.coplanarPoint(t);return a.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(s,a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new o.Plane).copy(this)}},o.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var o=0;36>o;o++)8==o||13==o||18==o||23==o?i[o]="-":14==o?i[o]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,i[o]=t[19==o?3&e|8:e]);return i.join("")}}(),clamp:function(e,t,i){return t>e?t:e>i?i:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,i,n,o){return n+(e-t)*(o-n)/(i-t)},smoothstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))},smootherstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e}},o.Spline=function(e){function t(e,t,i,n,o,r,s){var a=.5*(i-e),l=.5*(n-t);return(2*(t-i)+a+l)*s+(-3*(t-i)-2*a-l)*r+a*o+t}this.points=e;var i,n,r,s,a,l,h,d,c,u=[],p={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return i=(this.points.length-1)*e,n=Math.floor(i),r=i-n,u[0]=0===n?n:n-1,u[1]=n,u[2]=n>this.points.length-2?this.points.length-1:n+1,u[3]=n>this.points.length-3?this.points.length-1:n+2,l=this.points[u[0]],h=this.points[u[1]],d=this.points[u[2]],c=this.points[u[3]],s=r*r,a=r*s,p.x=t(l.x,h.x,d.x,c.x,r,s,a),p.y=t(l.y,h.y,d.y,c.y,r,s,a),p.z=t(l.z,h.z,d.z,c.z,r,s,a),p},this.getControlPointsArray=function(){var e,t,i=this.points.length,n=[];for(e=0;i>e;e++)t=this.points[e],n[e]=[t.x,t.y,t.z];return n},this.getLength=function(e){var t,i,n,r,s=0,a=0,l=0,h=new o.Vector3,d=new o.Vector3,c=[],u=0;for(c[0]=0,e||(e=100),n=this.points.length*e,h.copy(this.points[0]),t=1;n>t;t++)i=t/n,r=this.getPoint(i),d.copy(r),u+=d.distanceTo(h),h.copy(r),s=(this.points.length-1)*i,a=Math.floor(s),a!=l&&(c[a]=u,l=a);return c[c.length]=u,{chunks:c,total:u}},this.reparametrizeByArcLength=function(e){var t,i,n,r,s,a,l,h,d=[],c=new o.Vector3,u=this.getLength();for(d.push(c.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(a=u.chunks[t]-u.chunks[t-1],l=Math.ceil(e*a/u.total),r=(t-1)/(this.points.length-1),s=t/(this.points.length-1),i=1;l-1>i;i++)n=r+i*(1/l)*(s-r),h=this.getPoint(n),d.push(c.copy(h).clone());d.push(c.copy(this.points[t]).clone())}this.points=d}},o.Triangle=function(e,t,i){this.a=void 0!==e?e:new o.Vector3,this.b=void 0!==t?t:new o.Vector3,this.c=void 0!==i?i:new o.Vector3},o.Triangle.normal=function(){var e=new o.Vector3;return function(t,i,n,r){var s=r||new o.Vector3;s.subVectors(n,i),e.subVectors(t,i),s.cross(e);var a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}}(),o.Triangle.barycoordFromPoint=function(){var e=new o.Vector3,t=new o.Vector3,i=new o.Vector3;return function(n,r,s,a,l){e.subVectors(a,r),t.subVectors(s,r),i.subVectors(n,r);var h=e.dot(e),d=e.dot(t),c=e.dot(i),u=t.dot(t),p=t.dot(i),m=h*u-d*d,f=l||new o.Vector3;if(0==m)return f.set(-2,-1,-1);var g=1/m,v=(u*c-d*p)*g,y=(h*p-d*c)*g;return f.set(1-v-y,y,v)}}(),o.Triangle.containsPoint=function(){var e=new o.Vector3;return function(t,i,n,r){var s=o.Triangle.barycoordFromPoint(t,i,n,r,e);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}(),o.Triangle.prototype={constructor:o.Triangle,set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new o.Vector3,t=new o.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new o.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return o.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new o.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return o.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return o.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new o.Triangle).copy(this)}},o.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},o.Clock.prototype={constructor:o.Clock,start:function(){this.startTime=void 0!==n.performance&&void 0!==n.performance.now?n.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==n.performance&&void 0!==n.performance.now?n.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},o.EventDispatcher=function(){},o.EventDispatcher.prototype={constructor:o.EventDispatcher,apply:function(e){e.addEventListener=o.EventDispatcher.prototype.addEventListener,e.hasEventListener=o.EventDispatcher.prototype.hasEventListener,e.removeEventListener=o.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=o.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners,n=i[e];if(void 0!==n){var o=n.indexOf(t);-1!==o&&n.splice(o,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,i=t[e.type];if(void 0!==i){e.target=this;for(var n=[],o=i.length,r=0;o>r;r++)n[r]=i[r];for(var r=0;o>r;r++)n[r].call(this,e)}}}},function(e){e.Raycaster=function(t,i,n,o){this.ray=new e.Ray(t,i),this.near=n||0,this.far=o||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},i=function(e,t,n,o){if(e.raycast(t,n),o===!0)for(var r=e.children,s=0,a=r.length;a>s;s++)i(r[s],t,n,!0)};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},intersectObject:function(e,n){var o=[];return i(e,this,o,n),o.sort(t),o},intersectObjects:function(e,n){var o=[];if(e instanceof Array==!1)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),o;for(var r=0,s=e.length;s>r;r++)i(e[r],this,o,n);return o.sort(t),o}}}(o),o.Object3D=function(){Object.defineProperty(this,"id",{value:o.Object3DIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=o.Object3D.DefaultUp.clone();var e=new o.Vector3,t=new o.Euler,i=new o.Quaternion,n=new o.Vector3(1,1,1),r=function(){i.setFromEuler(t,!1)},s=function(){t.setFromQuaternion(i,void 0,!1)};t.onChange(r),i.onChange(s),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new o.Matrix4,this.matrixWorld=new o.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},o.Object3D.DefaultUp=new o.Vector3(0,1,0),o.Object3D.prototype={constructor:o.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)
},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new o.Quaternion;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new o.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new o.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new o.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new o.Vector3;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new o.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new o.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new o.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new o.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new o.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add:",e,"can't be added as a child of itself."),this):(e instanceof o.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D."),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var i=this.children.indexOf(e);-1!==i&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getChildByName:function(e,t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getObjectById:function(e,t){if(this.id===e)return this;for(var i=0,n=this.children.length;n>i;i++){var o=this.children[i],r=o.getObjectById(e,t);if(void 0!==r)return r}return void 0},getObjectByName:function(e,t){if(this.name===e)return this;for(var i=0,n=this.children.length;n>i;i++){var o=this.children[i],r=o.getObjectByName(e,t);if(void 0!==r)return r}return void 0},getWorldPosition:function(e){var t=e||new o.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new o.Vector3,t=new o.Vector3;return function(i){var n=i||new o.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldRotation:function(){var e=new o.Quaternion;return function(t){var i=t||new o.Euler;return this.getWorldQuaternion(e),i.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new o.Vector3,t=new o.Quaternion;return function(i){var n=i||new o.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new o.Quaternion;return function(t){var i=t||new o.Vector3;return this.getWorldQuaternion(e),i.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverseVisible(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,i=this.children.length;i>t;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},i=function(i){if(void 0===e.geometries&&(e.geometries=[]),void 0===t[i.uuid]){var n=i.toJSON();delete n.metadata,t[i.uuid]=n,e.geometries.push(n)}return i.uuid},n={},r=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===n[t.uuid]){var i=t.toJSON();delete i.metadata,n[t.uuid]=i,e.materials.push(i)}return t.uuid},s=function(e){var t={};if(t.uuid=e.uuid,t.type=e.type,""!==e.name&&(t.name=e.name),"{}"!==JSON.stringify(e.userData)&&(t.userData=e.userData),e.visible!==!0&&(t.visible=e.visible),e instanceof o.PerspectiveCamera?(t.fov=e.fov,t.aspect=e.aspect,t.near=e.near,t.far=e.far):e instanceof o.OrthographicCamera?(t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.near=e.near,t.far=e.far):e instanceof o.AmbientLight?t.color=e.color.getHex():e instanceof o.DirectionalLight?(t.color=e.color.getHex(),t.intensity=e.intensity):e instanceof o.PointLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance):e instanceof o.SpotLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.angle=e.angle,t.exponent=e.exponent):e instanceof o.HemisphereLight?(t.color=e.color.getHex(),t.groundColor=e.groundColor.getHex()):e instanceof o.Mesh?(t.geometry=i(e.geometry),t.material=r(e.material)):e instanceof o.Line?(t.geometry=i(e.geometry),t.material=r(e.material)):e instanceof o.Sprite&&(t.material=r(e.material)),t.matrix=e.matrix.toArray(),e.children.length>0){t.children=[];for(var n=0;n<e.children.length;n++)t.children.push(s(e.children[n]))}return t};return e.object=s(this),e},clone:function(e,t){if(void 0===e&&(e=new o.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),t===!0)for(var i=0;i<this.children.length;i++){var n=this.children[i];e.add(n.clone())}return e}},o.EventDispatcher.prototype.apply(o.Object3D.prototype),o.Object3DIdCount=0,o.Projector=function(){console.warn("THREE.Projector has been moved to /examples/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() has been removed.")}},o.Face3=function(e,t,i,n,r,s){this.a=e,this.b=t,this.c=i,this.normal=n instanceof o.Vector3?n:new o.Vector3,this.vertexNormals=n instanceof Array?n:[],this.color=r instanceof o.Color?r:new o.Color,this.vertexColors=r instanceof Array?r:[],this.vertexTangents=[],this.materialIndex=void 0!==s?s:0},o.Face3.prototype={constructor:o.Face3,clone:function(){var e=new o.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,i=this.vertexNormals.length;i>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(var t=0,i=this.vertexColors.length;i>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(var t=0,i=this.vertexTangents.length;i>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},o.Face4=function(e,t,i,n,r,s,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new o.Face3(e,t,i,r,s,a)},o.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},o.BufferAttribute.prototype={constructor:o.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,o=this.itemSize;o>n;n++)this.array[e+n]=t.array[i+n]},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,o){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=o,this},clone:function(){return new o.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},o.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new o.BufferAttribute(e,t)},o.BufferGeometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},o.BufferGeometry.prototype={constructor:o.BufferGeometry,addAttribute:function(e,t){return t instanceof o.BufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[e]={array:arguments[1],itemSize:arguments[2]})):(this.attributes[e]=t,void(this.attributesKeys=Object.keys(this.attributes)))},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,i){this.drawcalls.push({start:e,count:t,index:void 0!==i?i:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var n=(new o.Matrix3).getNormalMatrix(e);n.applyToVector3Array(i.array),i.needsUpdate=!0}},center:function(){},fromGeometry:function(e,t){t=t||{vertexColors:o.NoColors};var i=e.vertices,n=e.faces,r=e.faceVertexUvs,s=t.vertexColors,a=r[0].length>0,l=3==n[0].vertexNormals.length,h=new Float32Array(3*n.length*3);this.addAttribute("position",new o.BufferAttribute(h,3));var d=new Float32Array(3*n.length*3);if(this.addAttribute("normal",new o.BufferAttribute(d,3)),s!==o.NoColors){var c=new Float32Array(3*n.length*3);this.addAttribute("color",new o.BufferAttribute(c,3))}if(a===!0){var u=new Float32Array(3*n.length*2);this.addAttribute("uv",new o.BufferAttribute(u,2))}for(var p=0,m=0,f=0;p<n.length;p++,m+=6,f+=9){var g=n[p],v=i[g.a],y=i[g.b],b=i[g.c];if(h[f]=v.x,h[f+1]=v.y,h[f+2]=v.z,h[f+3]=y.x,h[f+4]=y.y,h[f+5]=y.z,h[f+6]=b.x,h[f+7]=b.y,h[f+8]=b.z,l===!0){var w=g.vertexNormals[0],x=g.vertexNormals[1],_=g.vertexNormals[2];d[f]=w.x,d[f+1]=w.y,d[f+2]=w.z,d[f+3]=x.x,d[f+4]=x.y,d[f+5]=x.z,d[f+6]=_.x,d[f+7]=_.y,d[f+8]=_.z}else{var k=g.normal;d[f]=k.x,d[f+1]=k.y,d[f+2]=k.z,d[f+3]=k.x,d[f+4]=k.y,d[f+5]=k.z,d[f+6]=k.x,d[f+7]=k.y,d[f+8]=k.z}if(s===o.FaceColors){var M=g.color;c[f]=M.r,c[f+1]=M.g,c[f+2]=M.b,c[f+3]=M.r,c[f+4]=M.g,c[f+5]=M.b,c[f+6]=M.r,c[f+7]=M.g,c[f+8]=M.b}else if(s===o.VertexColors){var E=g.vertexColors[0],S=g.vertexColors[1],T=g.vertexColors[2];c[f]=E.r,c[f+1]=E.g,c[f+2]=E.b,c[f+3]=S.r,c[f+4]=S.g,c[f+5]=S.b,c[f+6]=T.r,c[f+7]=T.g,c[f+8]=T.b}if(a===!0){var C=r[0][p][0],A=r[0][p][1],j=r[0][p][2];u[m]=C.x,u[m+1]=C.y,u[m+2]=A.x,u[m+3]=A.y,u[m+4]=j.x,u[m+5]=j.y}}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var e=new o.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new o.Box3);var t=this.attributes.position.array;if(t){var i=this.boundingBox;i.makeEmpty();for(var n=0,r=t.length;r>n;n+=3)e.set(t[n],t[n+1],t[n+2]),i.expandByPoint(e)}(void 0===t||0===t.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var e=new o.Box3,t=new o.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere);var i=this.attributes.position.array;if(i){e.makeEmpty();for(var n=this.boundingSphere.center,r=0,s=i.length;s>r;r+=3)t.set(i[r],i[r+1],i[r+2]),e.expandByPoint(t);e.center(n);for(var a=0,r=0,s=i.length;s>r;r+=3)t.set(i[r],i[r+1],i[r+2]),a=Math.max(a,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new o.BufferAttribute(new Float32Array(t.length),3));else for(var i=e.normal.array,n=0,r=i.length;r>n;n++)i[n]=0;var s,a,l,i=e.normal.array,h=new o.Vector3,d=new o.Vector3,c=new o.Vector3,u=new o.Vector3,p=new o.Vector3;if(e.index)for(var m=e.index.array,f=this.offsets.length>0?this.offsets:[{start:0,count:m.length,index:0}],g=0,v=f.length;v>g;++g)for(var y=f[g].start,b=f[g].count,w=f[g].index,n=y,r=y+b;r>n;n+=3)s=3*(w+m[n]),a=3*(w+m[n+1]),l=3*(w+m[n+2]),h.fromArray(t,s),d.fromArray(t,a),c.fromArray(t,l),u.subVectors(c,d),p.subVectors(h,d),u.cross(p),i[s]+=u.x,i[s+1]+=u.y,i[s+2]+=u.z,i[a]+=u.x,i[a+1]+=u.y,i[a+2]+=u.z,i[l]+=u.x,i[l+1]+=u.y,i[l+2]+=u.z;else for(var n=0,r=t.length;r>n;n+=9)h.fromArray(t,n),d.fromArray(t,n+3),c.fromArray(t,n+6),u.subVectors(c,d),p.subVectors(h,d),u.cross(p),i[n]=u.x,i[n+1]=u.y,i[n+2]=u.z,i[n+3]=u.x,i[n+4]=u.y,i[n+5]=u.z,i[n+6]=u.x,i[n+7]=u.y,i[n+8]=u.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){function e(e,t,i){j.fromArray(n,3*e),L.fromArray(n,3*t),P.fromArray(n,3*i),R.fromArray(s,2*e),D.fromArray(s,2*t),F.fromArray(s,2*i),u=L.x-j.x,p=P.x-j.x,m=L.y-j.y,f=P.y-j.y,g=L.z-j.z,v=P.z-j.z,y=D.x-R.x,b=F.x-R.x,w=D.y-R.y,x=F.y-R.y,_=1/(y*x-b*w),z.set((x*u-w*p)*_,(x*m-w*f)*_,(x*g-w*v)*_),B.set((y*p-b*u)*_,(y*f-b*m)*_,(y*v-b*g)*_),h[e].add(z),h[t].add(z),h[i].add(z),d[e].add(B),d[t].add(B),d[i].add(B)}function t(e){X.fromArray(r,3*e),Y.copy(X),H=h[e],G.copy(H),G.sub(X.multiplyScalar(X.dot(H))).normalize(),W.crossVectors(Y,H),q=W.dot(d[e]),I=0>q?-1:1,l[4*e]=G.x,l[4*e+1]=G.y,l[4*e+2]=G.z,l[4*e+3]=I}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var i=this.attributes.index.array,n=this.attributes.position.array,r=this.attributes.normal.array,s=this.attributes.uv.array,a=n.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new o.BufferAttribute(new Float32Array(4*a),4));for(var l=this.attributes.tangent.array,h=[],d=[],c=0;a>c;c++)h[c]=new o.Vector3,d[c]=new o.Vector3;var u,p,m,f,g,v,y,b,w,x,_,k,M,E,S,T,C,A,j=new o.Vector3,L=new o.Vector3,P=new o.Vector3,R=new o.Vector2,D=new o.Vector2,F=new o.Vector2,z=new o.Vector3,B=new o.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,i.length,0);var V=this.drawcalls;for(E=0,S=V.length;S>E;++E){var U=V[E].start,O=V[E].count,N=V[E].index;for(k=U,M=U+O;M>k;k+=3)T=N+i[k],C=N+i[k+1],A=N+i[k+2],e(T,C,A)}var I,H,q,G=new o.Vector3,W=new o.Vector3,X=new o.Vector3,Y=new o.Vector3;for(E=0,S=V.length;S>E;++E){var U=V[E].start,O=V[E].count,N=V[E].index;for(k=U,M=U+O;M>k;k+=3)T=N+i[k],C=N+i[k+1],A=N+i[k+2],t(T),t(C),t(A)}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535);for(var i=(Date.now(),this.attributes.index.array),n=this.attributes.position.array,o=(n.length/3,i.length/3),r=new Uint16Array(i.length),s=0,a=0,l=[{start:0,count:0,index:0}],h=l[0],d=0,c=0,u=new Int32Array(6),p=new Int32Array(n.length),m=new Int32Array(n.length),f=0;f<n.length;f++)p[f]=-1,m[f]=-1;for(var g=0;o>g;g++){c=0;for(var v=0;3>v;v++){var y=i[3*g+v];-1==p[y]?(u[2*v]=y,u[2*v+1]=-1,c++):p[y]<h.index?(u[2*v]=y,u[2*v+1]=-1,d++):(u[2*v]=y,u[2*v+1]=p[y])}var b=a+c;if(b>h.index+t){var w={start:s,count:0,index:a};l.push(w),h=w;for(var x=0;6>x;x+=2){var _=u[x+1];_>-1&&_<h.index&&(u[x+1]=-1)}}for(var x=0;6>x;x+=2){var y=u[x],_=u[x+1];-1===_&&(_=a++),p[y]=_,m[_]=y,r[s++]=_-h.index,h.count++}}return this.reorderBuffers(r,m,a),this.offsets=l,l},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var e,t,i,n,o=this.attributes.normal.array,r=0,s=o.length;s>r;r+=3)e=o[r],t=o[r+1],i=o[r+2],n=1/Math.sqrt(e*e+t*t+i*i),o[r]*=n,o[r+1]*=n,o[r+2]*=n},reorderBuffers:function(e,t,i){var n={};for(var o in this.attributes)if("index"!=o){var r=this.attributes[o].array;n[o]=new r.constructor(this.attributes[o].itemSize*i)}for(var s=0;i>s;s++){var a=t[s];for(var o in this.attributes)if("index"!=o)for(var l=this.attributes[o].array,h=this.attributes[o].itemSize,d=n[o],c=0;h>c;c++)d[s*h+c]=l[a*h+c]}this.attributes.index.array=e;for(var o in this.attributes)"index"!=o&&(this.attributes[o].array=n[o],this.attributes[o].numItems=this.attributes[o].itemSize*i)},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},t=this.attributes,i=this.offsets,n=this.boundingSphere;for(var o in t){for(var r=t[o],s=[],a=r.array,l=0,h=a.length;h>l;l++)s[l]=a[l];e.data.attributes[o]={itemSize:r.itemSize,type:r.array.constructor.name,array:s}}return i.length>0&&(e.data.offsets=JSON.parse(JSON.stringify(i))),null!==n&&(e.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),e},clone:function(){var e=new o.BufferGeometry;for(var t in this.attributes){var i=this.attributes[t];e.addAttribute(t,i.clone())}for(var n=0,r=this.offsets.length;r>n;n++){var s=this.offsets[n];e.offsets.push({start:s.start,index:s.index,count:s.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.BufferGeometry.prototype),o.Geometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},o.Geometry.prototype={constructor:o.Geometry,applyMatrix:function(e){for(var t=(new o.Matrix3).getNormalMatrix(e),i=0,n=this.vertices.length;n>i;i++){var r=this.vertices[i];r.applyMatrix4(e)}for(var i=0,n=this.faces.length;n>i;i++){var s=this.faces[i];s.normal.applyMatrix3(t).normalize();for(var a=0,l=s.vertexNormals.length;l>a;a++)s.vertexNormals[a].applyMatrix3(t).normalize()}this.boundingBox instanceof o.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof o.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(e){for(var t=this,i=e.attributes,n=i.position.array,r=void 0!==i.index?i.index.array:void 0,s=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,l=void 0!==i.uv?i.uv.array:void 0,h=[],d=[],c=0,u=0;c<n.length;c+=3,u+=2)t.vertices.push(new o.Vector3(n[c],n[c+1],n[c+2])),void 0!==s&&h.push(new o.Vector3(s[c],s[c+1],s[c+2])),void 0!==a&&t.colors.push(new o.Color(a[c],a[c+1],a[c+2])),void 0!==l&&d.push(new o.Vector2(l[u],l[u+1]));var p=function(e,i,n){var r=void 0!==s?[h[e].clone(),h[i].clone(),h[n].clone()]:[],l=void 0!==a?[t.colors[e].clone(),t.colors[i].clone(),t.colors[n].clone()]:[];t.faces.push(new o.Face3(e,i,n,r,l)),t.faceVertexUvs[0].push([d[e],d[i],d[n]])};if(void 0!==r)for(var c=0;c<r.length;c+=3)p(r[c],r[c+1],r[c+2]);else for(var c=0;c<n.length/3;c+=3)p(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=new o.Vector3;return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-.5),this.applyMatrix((new o.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new o.Vector3,t=new o.Vector3,i=0,n=this.faces.length;n>i;i++){var r=this.faces[i],s=this.vertices[r.a],a=this.vertices[r.b],l=this.vertices[r.c];e.subVectors(l,a),t.subVectors(s,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,i,n,r,s,a;for(a=new Array(this.vertices.length),t=0,i=this.vertices.length;i>t;t++)a[t]=new o.Vector3;if(e){{var l,h,d,c=new o.Vector3,u=new o.Vector3;new o.Vector3,new o.Vector3,new o.Vector3}for(n=0,r=this.faces.length;r>n;n++)s=this.faces[n],l=this.vertices[s.a],h=this.vertices[s.b],d=this.vertices[s.c],c.subVectors(d,h),u.subVectors(l,h),c.cross(u),a[s.a].add(c),a[s.b].add(c),a[s.c].add(c)}else for(n=0,r=this.faces.length;r>n;n++)s=this.faces[n],a[s.a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal);for(t=0,i=this.vertices.length;i>t;t++)a[t].normalize();for(n=0,r=this.faces.length;r>n;n++)s=this.faces[n],s.vertexNormals[0]=a[s.a].clone(),s.vertexNormals[1]=a[s.b].clone(),s.vertexNormals[2]=a[s.c].clone()},computeMorphNormals:function(){var e,t,i,n,r;for(i=0,n=this.faces.length;n>i;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;t>e;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var s=new o.Geometry;for(s.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,l,h=this.morphNormals[e].faceNormals,d=this.morphNormals[e].vertexNormals;for(i=0,n=this.faces.length;n>i;i++)a=new o.Vector3,l={a:new o.Vector3,b:new o.Vector3,c:new o.Vector3},h.push(a),d.push(l)}var c=this.morphNormals[e];s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals();var a,l;for(i=0,n=this.faces.length;n>i;i++)r=this.faces[i],a=c.faceNormals[i],l=c.vertexNormals[i],a.copy(r.normal),l.a.copy(r.vertexNormals[0]),l.b.copy(r.vertexNormals[1]),l.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;n>i;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeTangents:function(){function e(e,t,i,n,o,r,s){d=e.vertices[t],c=e.vertices[i],u=e.vertices[n],p=h[o],m=h[r],f=h[s],g=c.x-d.x,v=u.x-d.x,y=c.y-d.y,b=u.y-d.y,w=c.z-d.z,x=u.z-d.z,_=m.x-p.x,k=f.x-p.x,M=m.y-p.y,E=f.y-p.y,S=1/(_*E-k*M),P.set((E*g-M*v)*S,(E*y-M*b)*S,(E*w-M*x)*S),R.set((_*v-k*g)*S,(_*b-k*y)*S,(_*x-k*w)*S),j[t].add(P),j[i].add(P),j[n].add(P),L[t].add(R),L[i].add(R),L[n].add(R)}var t,i,n,r,s,a,l,h,d,c,u,p,m,f,g,v,y,b,w,x,_,k,M,E,S,T,C,A,j=[],L=[],P=new o.Vector3,R=new o.Vector3,D=new o.Vector3,F=new o.Vector3,z=new o.Vector3;for(n=0,r=this.vertices.length;r>n;n++)j[n]=new o.Vector3,L[n]=new o.Vector3;for(t=0,i=this.faces.length;i>t;t++)l=this.faces[t],h=this.faceVertexUvs[0][t],e(this,l.a,l.b,l.c,0,1,2);var B=["a","b","c","d"];for(t=0,i=this.faces.length;i>t;t++)for(l=this.faces[t],s=0;s<Math.min(l.vertexNormals.length,3);s++)z.copy(l.vertexNormals[s]),a=l[B[s]],T=j[a],D.copy(T),D.sub(z.multiplyScalar(z.dot(T))).normalize(),F.crossVectors(l.vertexNormals[s],T),C=F.dot(L[a]),A=0>C?-1:1,l.vertexTangents[s]=new o.Vector4(D.x,D.y,D.z,A);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,n=t.length;n>i;i++)i>0&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new o.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e instanceof o.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var n,r=this.vertices.length,s=this.vertices,a=e.vertices,l=this.faces,h=e.faces,d=this.faceVertexUvs[0],c=e.faceVertexUvs[0];void 0===i&&(i=0),void 0!==t&&(n=(new o.Matrix3).getNormalMatrix(t));for(var u=0,p=a.length;p>u;u++){var m=a[u],f=m.clone();void 0!==t&&f.applyMatrix4(t),s.push(f)}for(u=0,p=h.length;p>u;u++){var g,v,y,b=h[u],w=b.vertexNormals,x=b.vertexColors;g=new o.Face3(b.a+r,b.b+r,b.c+r),g.normal.copy(b.normal),void 0!==n&&g.normal.applyMatrix3(n).normalize();for(var _=0,k=w.length;k>_;_++)v=w[_].clone(),void 0!==n&&v.applyMatrix3(n).normalize(),g.vertexNormals.push(v);g.color.copy(b.color);for(var _=0,k=x.length;k>_;_++)y=x[_],g.vertexColors.push(y.clone());g.materialIndex=b.materialIndex+i,l.push(g)}for(u=0,p=c.length;p>u;u++){var M=c[u],E=[];if(void 0!==M){for(var _=0,k=M.length;k>_;_++)E.push(new o.Vector2(M[_].x,M[_].y));d.push(E)}}},mergeVertices:function(){var e,t,i,n,o,r,s,a,l={},h=[],d=[],c=4,u=Math.pow(10,c);for(i=0,n=this.vertices.length;n>i;i++)e=this.vertices[i],t=Math.round(e.x*u)+"_"+Math.round(e.y*u)+"_"+Math.round(e.z*u),void 0===l[t]?(l[t]=i,h.push(this.vertices[i]),d[i]=h.length-1):d[i]=d[l[t]];var p=[];for(i=0,n=this.faces.length;n>i;i++){o=this.faces[i],o.a=d[o.a],o.b=d[o.b],o.c=d[o.c],r=[o.a,o.b,o.c];for(var m=-1,f=0;3>f;f++)if(r[f]==r[(f+1)%3]){m=f,p.push(i);break}}for(i=p.length-1;i>=0;i--){var g=p[i];for(this.faces.splice(g,1),s=0,a=this.faceVertexUvs.length;a>s;s++)this.faceVertexUvs[s].splice(g,1)}var v=this.vertices.length-h.length;return this.vertices=h,v},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=c.length/3,c.push(e.x,e.y,e.z),u[t])}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==m[t]?m[t]:(m[t]=p.length,p.push(e.getHex()),m[t])}function n(e){var t=e.x.toString()+e.y.toString();return void 0!==g[t]?g[t]:(g[t]=f.length/2,f.push(e.x,e.y),g[t])}var o={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(o.name=this.name),void 0!==this.parameters){var r=this.parameters;for(var s in r)void 0!==r[s]&&(o[s]=r[s]);return o}for(var a=[],l=0;l<this.vertices.length;l++){var h=this.vertices[l];a.push(h.x,h.y,h.z)}for(var d=[],c=[],u={},p=[],m={},f=[],g={},l=0;l<this.faces.length;l++){var v=this.faces[l],y=!1,b=!1,w=void 0!==this.faceVertexUvs[0][l],x=v.normal.length()>0,_=v.vertexNormals.length>0,k=1!==v.color.r||1!==v.color.g||1!==v.color.b,M=v.vertexColors.length>0,E=0;if(E=e(E,0,0),E=e(E,1,y),E=e(E,2,b),E=e(E,3,w),E=e(E,4,x),E=e(E,5,_),E=e(E,6,k),E=e(E,7,M),d.push(E),d.push(v.a,v.b,v.c),w){var S=this.faceVertexUvs[0][l];d.push(n(S[0]),n(S[1]),n(S[2]))}if(x&&d.push(t(v.normal)),_){var T=v.vertexNormals;d.push(t(T[0]),t(T[1]),t(T[2]))}if(k&&d.push(i(v.color)),M){var C=v.vertexColors;d.push(i(C[0]),i(C[1]),i(C[2]))}}return o.data={},o.data.vertices=a,o.data.normals=c,p.length>0&&(o.data.colors=p),f.length>0&&(o.data.uvs=[f]),o.data.faces=d,o},clone:function(){for(var e=new o.Geometry,t=this.vertices,i=0,n=t.length;n>i;i++)e.vertices.push(t[i].clone());for(var r=this.faces,i=0,n=r.length;n>i;i++)e.faces.push(r[i].clone());for(var s=this.faceVertexUvs[0],i=0,n=s.length;n>i;i++){for(var a=s[i],l=[],h=0,d=a.length;d>h;h++)l.push(new o.Vector2(a[h].x,a[h].y));e.faceVertexUvs[0].push(l)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.Geometry.prototype),o.GeometryIdCount=0,o.Camera=function(){o.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new o.Matrix4,this.projectionMatrix=new o.Matrix4},o.Camera.prototype=Object.create(o.Object3D.prototype),o.Camera.prototype.getWorldDirection=function(){var e=new o.Quaternion;return function(t){var i=t||new o.Vector3;return this.getWorldQuaternion(e),i.set(0,0,-1).applyQuaternion(e)}}(),o.Camera.prototype.lookAt=function(){var e=new o.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),o.Camera.prototype.clone=function(e){return void 0===e&&(e=new o.Camera),o.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},o.CubeCamera=function(e,t,i){o.Object3D.call(this),this.type="CubeCamera";var n=90,r=1,s=new o.PerspectiveCamera(n,r,e,t);s.up.set(0,-1,0),s.lookAt(new o.Vector3(1,0,0)),this.add(s);var a=new o.PerspectiveCamera(n,r,e,t);a.up.set(0,-1,0),a.lookAt(new o.Vector3(-1,0,0)),this.add(a);var l=new o.PerspectiveCamera(n,r,e,t);l.up.set(0,0,1),l.lookAt(new o.Vector3(0,1,0)),this.add(l);var h=new o.PerspectiveCamera(n,r,e,t);h.up.set(0,0,-1),h.lookAt(new o.Vector3(0,-1,0)),this.add(h);var d=new o.PerspectiveCamera(n,r,e,t);d.up.set(0,-1,0),d.lookAt(new o.Vector3(0,0,1)),this.add(d);var c=new o.PerspectiveCamera(n,r,e,t);c.up.set(0,-1,0),c.lookAt(new o.Vector3(0,0,-1)),this.add(c),this.renderTarget=new o.WebGLRenderTargetCube(i,i,{format:o.RGBFormat,magFilter:o.LinearFilter,minFilter:o.LinearFilter}),this.updateCubeMap=function(e,t){var i=this.renderTarget,n=i.generateMipmaps;i.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,s,i),i.activeCubeFace=1,e.render(t,a,i),i.activeCubeFace=2,e.render(t,l,i),i.activeCubeFace=3,e.render(t,h,i),i.activeCubeFace=4,e.render(t,d,i),i.generateMipmaps=n,i.activeCubeFace=5,e.render(t,c,i)}},o.CubeCamera.prototype=Object.create(o.Object3D.prototype),o.OrthographicCamera=function(e,t,i,n,r,s){o.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()
},o.OrthographicCamera.prototype=Object.create(o.Camera.prototype),o.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(i-e,i+e,n+t,n-t,this.near,this.far)},o.OrthographicCamera.prototype.clone=function(){var e=new o.OrthographicCamera;return o.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},o.PerspectiveCamera=function(e,t,i,n){o.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},o.PerspectiveCamera.prototype=Object.create(o.Camera.prototype),o.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*o.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},o.PerspectiveCamera.prototype.setViewOffset=function(e,t,i,n,o,r){this.fullWidth=e,this.fullHeight=t,this.x=i,this.y=n,this.width=o,this.height=r,this.updateProjectionMatrix()},o.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=o.Math.radToDeg(2*Math.atan(Math.tan(.5*o.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,i=Math.tan(o.Math.degToRad(.5*e))*this.near,n=-i,r=t*n,s=t*i,a=Math.abs(s-r),l=Math.abs(i-n);this.projectionMatrix.makeFrustum(r+this.x*a/this.fullWidth,r+(this.x+this.width)*a/this.fullWidth,i-(this.y+this.height)*l/this.fullHeight,i-this.y*l/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},o.PerspectiveCamera.prototype.clone=function(){var e=new o.PerspectiveCamera;return o.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},o.Light=function(e){o.Object3D.call(this),this.type="Light",this.color=new o.Color(e)},o.Light.prototype=Object.create(o.Object3D.prototype),o.Light.prototype.clone=function(e){return void 0===e&&(e=new o.Light),o.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},o.AmbientLight=function(e){o.Light.call(this,e),this.type="AmbientLight"},o.AmbientLight.prototype=Object.create(o.Light.prototype),o.AmbientLight.prototype.clone=function(){var e=new o.AmbientLight;return o.Light.prototype.clone.call(this,e),e},o.AreaLight=function(e,t){o.Light.call(this,e),this.type="AreaLight",this.normal=new o.Vector3(0,-1,0),this.right=new o.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},o.AreaLight.prototype=Object.create(o.Light.prototype),o.DirectionalLight=function(e,t){o.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new o.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new o.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},o.DirectionalLight.prototype=Object.create(o.Light.prototype),o.DirectionalLight.prototype.clone=function(){var e=new o.DirectionalLight;return o.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},o.HemisphereLight=function(e,t,i){o.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new o.Color(t),this.intensity=void 0!==i?i:1},o.HemisphereLight.prototype=Object.create(o.Light.prototype),o.HemisphereLight.prototype.clone=function(){var e=new o.HemisphereLight;return o.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},o.PointLight=function(e,t,i){o.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0},o.PointLight.prototype=Object.create(o.Light.prototype),o.PointLight.prototype.clone=function(){var e=new o.PointLight;return o.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},o.SpotLight=function(e,t,i,n,r){o.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new o.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.exponent=void 0!==r?r:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},o.SpotLight.prototype=Object.create(o.Light.prototype),o.SpotLight.prototype.clone=function(){var e=new o.SpotLight;return o.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},o.Cache=function(){this.files={}},o.Cache.prototype={constructor:o.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},o.Loader=function(e){this.showStatus=e,this.statusDomElement=e?o.Loader.prototype.addStatusElement():null,this.imageLoader=new o.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},o.Loader.prototype={constructor:o.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";t+=e.total?(100*e.loaded/e.total).toFixed(0)+"%":(e.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var i=[],n=0;n<e.length;++n)i[n]=this.createMaterial(e[n],t);return i},needsTangents:function(e){for(var t=0,i=e.length;i>t;t++){var n=e[t];if(n instanceof o.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function i(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function n(e,n,r,a,l,h,d){var c,u=t+r,p=o.Loader.Handlers.get(u);if(null!==p?c=p.load(u):(c=new o.Texture,p=s.imageLoader,p.crossOrigin=s.crossOrigin,p.load(u,function(e){if(o.Math.isPowerOfTwo(e.width)===!1||o.Math.isPowerOfTwo(e.height)===!1){var t=i(e.width),n=i(e.height),r=document.createElement("canvas");r.width=t,r.height=n;var s=r.getContext("2d");s.drawImage(e,0,0,t,n),c.image=r}else c.image=e;c.needsUpdate=!0})),c.sourceFile=r,a&&(c.repeat.set(a[0],a[1]),1!==a[0]&&(c.wrapS=o.RepeatWrapping),1!==a[1]&&(c.wrapT=o.RepeatWrapping)),l&&c.offset.set(l[0],l[1]),h){var m={repeat:o.RepeatWrapping,mirror:o.MirroredRepeatWrapping};void 0!==m[h[0]]&&(c.wrapS=m[h[0]]),void 0!==m[h[1]]&&(c.wrapT=m[h[1]])}d&&(c.anisotropy=d),e[n]=c}function r(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var s=this,a="MeshLambertMaterial",l={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var h=e.shading.toLowerCase();"phong"===h?a="MeshPhongMaterial":"basic"===h&&(a="MeshBasicMaterial")}if(void 0!==e.blending&&void 0!==o[e.blending]&&(l.blending=o[e.blending]),(void 0!==e.transparent||e.opacity<1)&&(l.transparent=e.transparent),void 0!==e.depthTest&&(l.depthTest=e.depthTest),void 0!==e.depthWrite&&(l.depthWrite=e.depthWrite),void 0!==e.visible&&(l.visible=e.visible),void 0!==e.flipSided&&(l.side=o.BackSide),void 0!==e.doubleSided&&(l.side=o.DoubleSide),void 0!==e.wireframe&&(l.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?l.vertexColors=o.FaceColors:e.vertexColors&&(l.vertexColors=o.VertexColors)),e.colorDiffuse?l.color=r(e.colorDiffuse):e.DbgColor&&(l.color=e.DbgColor),e.colorSpecular&&(l.specular=r(e.colorSpecular)),e.colorAmbient&&(l.ambient=r(e.colorAmbient)),e.colorEmissive&&(l.emissive=r(e.colorEmissive)),e.transparency&&(l.opacity=e.transparency),e.specularCoef&&(l.shininess=e.specularCoef),e.mapDiffuse&&t&&n(l,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&n(l,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&n(l,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&n(l,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&n(l,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&n(l,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(l.bumpScale=e.mapBumpScale),e.mapNormal){var d=o.ShaderLib.normalmap,c=o.UniformsUtils.clone(d.uniforms);c.tNormal.value=l.normalMap,e.mapNormalFactor&&c.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),l.map&&(c.tDiffuse.value=l.map,c.enableDiffuse.value=!0),l.specularMap&&(c.tSpecular.value=l.specularMap,c.enableSpecular.value=!0),l.lightMap&&(c.tAO.value=l.lightMap,c.enableAO.value=!0),c.diffuse.value.setHex(l.color),c.specular.value.setHex(l.specular),c.ambient.value.setHex(l.ambient),c.shininess.value=l.shininess,void 0!==l.opacity&&(c.opacity.value=l.opacity);var u={fragmentShader:d.fragmentShader,vertexShader:d.vertexShader,uniforms:c,lights:!0,fog:!0},p=new o.ShaderMaterial(u);l.transparent&&(p.transparent=!0)}else var p=new o[a](l);return void 0!==e.DbgName&&(p.name=e.DbgName),p}},o.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,i=this.handlers.length;i>t;t+=2){var n=this.handlers[t],o=this.handlers[t+1];if(n.test(e))return o}return null}},o.XHRLoader=function(e){this.cache=new o.Cache,this.manager=void 0!==e?e:o.DefaultLoadingManager},o.XHRLoader.prototype={constructor:o.XHRLoader,load:function(e,t,i,n){var o=this,r=o.cache.get(e);if(void 0!==r)return void(t&&t(r));var s=new XMLHttpRequest;s.open("GET",e,!0),s.addEventListener("load",function(){o.cache.add(e,this.response),t&&t(this.response),o.manager.itemEnd(e)},!1),void 0!==i&&s.addEventListener("progress",function(e){i(e)},!1),void 0!==n&&s.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(s.responseType=this.responseType),s.send(null),o.manager.itemStart(e)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},o.ImageLoader=function(e){this.cache=new o.Cache,this.manager=void 0!==e?e:o.DefaultLoadingManager},o.ImageLoader.prototype={constructor:o.ImageLoader,load:function(e,t,i,n){var o=this,r=o.cache.get(e);if(void 0!==r)return void t(r);var s=document.createElement("img");return void 0!==t&&s.addEventListener("load",function(){o.cache.add(e,this),t(this),o.manager.itemEnd(e)},!1),void 0!==i&&s.addEventListener("progress",function(e){i(e)},!1),void 0!==n&&s.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),s.src=e,o.manager.itemStart(e),s},setCrossOrigin:function(e){this.crossOrigin=e}},o.JSONLoader=function(e){o.Loader.call(this,e),this.withCredentials=!1},o.JSONLoader.prototype=Object.create(o.Loader.prototype),o.JSONLoader.prototype.load=function(e,t,i){i=i&&"string"==typeof i?i:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,i)},o.JSONLoader.prototype.loadAjaxJSON=function(e,t,i,n,o){var r=new XMLHttpRequest,s=0;r.onreadystatechange=function(){if(r.readyState===r.DONE)if(200===r.status||0===r.status){if(r.responseText){var a=JSON.parse(r.responseText);if(void 0!==a.metadata&&"scene"===a.metadata.type)return void console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.');var l=e.parse(a,n);i(l.geometry,l.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.');e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+r.status+")");else r.readyState===r.LOADING?o&&(0===s&&(s=r.getResponseHeader("Content-Length")),o({total:s,loaded:r.responseText.length})):r.readyState===r.HEADERS_RECEIVED&&void 0!==o&&(s=r.getResponseHeader("Content-Length"))},r.open("GET",t,!0),r.withCredentials=this.withCredentials,r.send(null)},o.JSONLoader.prototype.parse=function(e,t){function i(t){function i(e,t){return e&1<<t}var n,r,a,l,h,d,c,u,p,m,f,g,v,y,b,w,x,_,k,M,E,S,T,C,A,j,L,P=e.faces,R=e.vertices,D=e.normals,F=e.colors,z=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&z++;for(n=0;z>n;n++)s.faceVertexUvs[n]=[]}for(l=0,h=R.length;h>l;)_=new o.Vector3,_.x=R[l++]*t,_.y=R[l++]*t,_.z=R[l++]*t,s.vertices.push(_);for(l=0,h=P.length;h>l;)if(m=P[l++],f=i(m,0),g=i(m,1),v=i(m,3),y=i(m,4),b=i(m,5),w=i(m,6),x=i(m,7),f){if(M=new o.Face3,M.a=P[l],M.b=P[l+1],M.c=P[l+3],E=new o.Face3,E.a=P[l+1],E.b=P[l+2],E.c=P[l+3],l+=4,g&&(p=P[l++],M.materialIndex=p,E.materialIndex=p),a=s.faces.length,v)for(n=0;z>n;n++)for(C=e.uvs[n],s.faceVertexUvs[n][a]=[],s.faceVertexUvs[n][a+1]=[],r=0;4>r;r++)u=P[l++],j=C[2*u],L=C[2*u+1],A=new o.Vector2(j,L),2!==r&&s.faceVertexUvs[n][a].push(A),0!==r&&s.faceVertexUvs[n][a+1].push(A);if(y&&(c=3*P[l++],M.normal.set(D[c++],D[c++],D[c]),E.normal.copy(M.normal)),b)for(n=0;4>n;n++)c=3*P[l++],T=new o.Vector3(D[c++],D[c++],D[c]),2!==n&&M.vertexNormals.push(T),0!==n&&E.vertexNormals.push(T);if(w&&(d=P[l++],S=F[d],M.color.setHex(S),E.color.setHex(S)),x)for(n=0;4>n;n++)d=P[l++],S=F[d],2!==n&&M.vertexColors.push(new o.Color(S)),0!==n&&E.vertexColors.push(new o.Color(S));s.faces.push(M),s.faces.push(E)}else{if(k=new o.Face3,k.a=P[l++],k.b=P[l++],k.c=P[l++],g&&(p=P[l++],k.materialIndex=p),a=s.faces.length,v)for(n=0;z>n;n++)for(C=e.uvs[n],s.faceVertexUvs[n][a]=[],r=0;3>r;r++)u=P[l++],j=C[2*u],L=C[2*u+1],A=new o.Vector2(j,L),s.faceVertexUvs[n][a].push(A);if(y&&(c=3*P[l++],k.normal.set(D[c++],D[c++],D[c])),b)for(n=0;3>n;n++)c=3*P[l++],T=new o.Vector3(D[c++],D[c++],D[c]),k.vertexNormals.push(T);if(w&&(d=P[l++],k.color.setHex(F[d])),x)for(n=0;3>n;n++)d=P[l++],k.vertexColors.push(new o.Color(F[d]));s.faces.push(k)}}function n(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,n=e.skinWeights.length;n>i;i+=t){var r=e.skinWeights[i],a=t>1?e.skinWeights[i+1]:0,l=t>2?e.skinWeights[i+2]:0,h=t>3?e.skinWeights[i+3]:0;s.skinWeights.push(new o.Vector4(r,a,l,h))}if(e.skinIndices)for(var i=0,n=e.skinIndices.length;n>i;i+=t){var d=e.skinIndices[i],c=t>1?e.skinIndices[i+1]:0,u=t>2?e.skinIndices[i+2]:0,p=t>3?e.skinIndices[i+3]:0;s.skinIndices.push(new o.Vector4(d,c,u,p))}s.bones=e.bones,s.bones&&s.bones.length>0&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match."),s.animation=e.animation,s.animations=e.animations}function r(t){if(void 0!==e.morphTargets){var i,n,r,a,l,h;for(i=0,n=e.morphTargets.length;n>i;i++)for(s.morphTargets[i]={},s.morphTargets[i].name=e.morphTargets[i].name,s.morphTargets[i].vertices=[],l=s.morphTargets[i].vertices,h=e.morphTargets[i].vertices,r=0,a=h.length;a>r;r+=3){var d=new o.Vector3;d.x=h[r]*t,d.y=h[r+1]*t,d.z=h[r+2]*t,l.push(d)}}if(void 0!==e.morphColors){var i,n,c,u,p,m,f;for(i=0,n=e.morphColors.length;n>i;i++)for(s.morphColors[i]={},s.morphColors[i].name=e.morphColors[i].name,s.morphColors[i].colors=[],p=s.morphColors[i].colors,m=e.morphColors[i].colors,c=0,u=m.length;u>c;c+=3)f=new o.Color(16755200),f.setRGB(m[c],m[c+1],m[c+2]),p.push(f)}}var s=new o.Geometry,a=void 0!==e.scale?1/e.scale:1;if(i(a),n(),r(a),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:s};var l=this.initMaterials(e.materials,t);return this.needsTangents(l)&&s.computeTangents(),{geometry:s,materials:l}},o.LoadingManager=function(e,t,i){var n=this,o=0,r=0;this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(){r++},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,r),o===r&&void 0!==n.onLoad&&n.onLoad()}},o.DefaultLoadingManager=new o.LoadingManager,o.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},o.BufferGeometryLoader.prototype={constructor:o.BufferGeometryLoader,load:function(e,t,i,n){var r=this,s=new o.XHRLoader;s.setCrossOrigin(this.crossOrigin),s.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new o.BufferGeometry,i=e.attributes;for(var r in i){var s=i[r],a=new n[s.type](s.array);t.addAttribute(r,new o.BufferAttribute(a,s.itemSize))}var l=e.offsets;void 0!==l&&(t.offsets=JSON.parse(JSON.stringify(l)));var h=e.boundingSphere;if(void 0!==h){var d=new o.Vector3;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new o.Sphere(d,h.radius)}return t}},o.MaterialLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},o.MaterialLoader.prototype={constructor:o.MaterialLoader,load:function(e,t,i,n){var r=this,s=new o.XHRLoader;s.setCrossOrigin(this.crossOrigin),s.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new o[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var i=0,n=e.materials.length;n>i;i++)t.materials.push(this.parse(e.materials[i]));return t}},o.ObjectLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},o.ObjectLoader.prototype={constructor:o.ObjectLoader,load:function(e,t,i,n){var r=this,s=new o.XHRLoader(r.manager);s.setCrossOrigin(this.crossOrigin),s.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),i=this.parseMaterials(e.materials),n=this.parseObject(e.object,t,i);return n},parseGeometries:function(e){var t={};if(void 0!==e)for(var i=new o.JSONLoader,n=new o.BufferGeometryLoader,r=0,s=e.length;s>r;r++){var a,l=e[r];switch(l.type){case"PlaneGeometry":a=new o.PlaneGeometry(l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new o.BoxGeometry(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":a=new o.CircleGeometry(l.radius,l.segments);break;case"CylinderGeometry":a=new o.CylinderGeometry(l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded);break;case"SphereGeometry":a=new o.SphereGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"IcosahedronGeometry":a=new o.IcosahedronGeometry(l.radius,l.detail);break;case"TorusGeometry":a=new o.TorusGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":a=new o.TorusKnotGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.p,l.q,l.heightScale);break;case"BufferGeometry":a=n.parse(l.data);break;case"Geometry":a=i.parse(l.data).geometry}a.uuid=l.uuid,void 0!==l.name&&(a.name=l.name),t[l.uuid]=a}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var i=new o.MaterialLoader,n=0,r=e.length;r>n;n++){var s=e[n],a=i.parse(s);a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseObject:function(){var e=new o.Matrix4;return function(t,i,n){var r;switch(t.type){case"Scene":r=new o.Scene;break;case"PerspectiveCamera":r=new o.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":r=new o.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":r=new o.AmbientLight(t.color);break;case"DirectionalLight":r=new o.DirectionalLight(t.color,t.intensity);break;case"PointLight":r=new o.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":r=new o.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":r=new o.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=i[t.geometry],a=n[t.material];void 0===s&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),r=new o.Mesh(s,a);break;case"Line":var s=i[t.geometry],a=n[t.material];void 0===s&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),r=new o.Line(s,a);break;case"Sprite":var a=n[t.material];void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),r=new o.Sprite(a);break;case"Group":r=new o.Group;break;default:r=new o.Object3D}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.children)for(var l in t.children)r.add(this.parseObject(t.children[l],i,n));return r}}()},o.TextureLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},o.TextureLoader.prototype={constructor:o.TextureLoader,load:function(e,t,i,n){var r=this,s=new o.ImageLoader(r.manager);s.setCrossOrigin(this.crossOrigin),s.load(e,function(e){var i=new o.Texture(e);i.needsUpdate=!0,void 0!==t&&t(i)},i,n)},setCrossOrigin:function(e){this.crossOrigin=e}},o.CompressedTextureLoader=function(){this._parser=null},o.CompressedTextureLoader.prototype={constructor:o.CompressedTextureLoader,load:function(e,t){var i=this,n=[],r=new o.CompressedTexture;r.image=n;var s=new o.XHRLoader;if(s.setResponseType("arraybuffer"),e instanceof Array)for(var a=0,l=function(l){s.load(e[l],function(e){var s=i._parser(e,!0);n[l]={width:s.width,height:s.height,format:s.format,mipmaps:s.mipmaps},a+=1,6===a&&(1==s.mipmapCount&&(r.minFilter=o.LinearFilter),r.format=s.format,r.needsUpdate=!0,t&&t(r))})},h=0,d=e.length;d>h;++h)l(h);else s.load(e,function(e){var s=i._parser(e,!0);if(s.isCubemap)for(var a=s.mipmaps.length/s.mipmapCount,l=0;a>l;l++){n[l]={mipmaps:[]};for(var h=0;h<s.mipmapCount;h++)n[l].mipmaps.push(s.mipmaps[l*s.mipmapCount+h]),n[l].format=s.format,n[l].width=s.width,n[l].height=s.height}else r.image.width=s.width,r.image.height=s.height,r.mipmaps=s.mipmaps;1===s.mipmapCount&&(r.minFilter=o.LinearFilter),r.format=s.format,r.needsUpdate=!0,t&&t(r)});return r}},o.Material=function(){Object.defineProperty(this,"id",{value:o.MaterialIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Material",this.side=o.FrontSide,this.opacity=1,this.transparent=!1,this.blending=o.NormalBlending,this.blendSrc=o.SrcAlphaFactor,this.blendDst=o.OneMinusSrcAlphaFactor,this.blendEquation=o.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},o.Material.prototype={constructor:o.Material,setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){if(t in this){var n=this[t];n instanceof o.Color?n.set(i):n instanceof o.Vector3&&i instanceof o.Vector3?n.copy(i):this[t]="overdraw"==t?Number(i):i}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof o.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==o.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==o.NormalBlending&&(e.blending=this.blending),this.side!==o.FrontSide&&(e.side=this.side)):this instanceof o.MeshLambertMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==o.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==o.NormalBlending&&(e.blending=this.blending),this.side!==o.FrontSide&&(e.side=this.side)):this instanceof o.MeshPhongMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==o.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==o.NormalBlending&&(e.blending=this.blending),this.side!==o.FrontSide&&(e.side=this.side)):this instanceof o.MeshNormalMaterial?(this.shading!==o.FlatShading&&(e.shading=this.shading),this.blending!==o.NormalBlending&&(e.blending=this.blending),this.side!==o.FrontSide&&(e.side=this.side)):this instanceof o.MeshDepthMaterial?(this.blending!==o.NormalBlending&&(e.blending=this.blending),this.side!==o.FrontSide&&(e.side=this.side)):this instanceof o.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof o.SpriteMaterial&&(e.color=this.color.getHex()),this.opacity<1&&(e.opacity=this.opacity),this.transparent!==!1&&(e.transparent=this.transparent),this.wireframe!==!1&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new o.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.Material.prototype),o.MaterialIdCount=0,o.LineBasicMaterial=function(e){o.Material.call(this),this.type="LineBasicMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=o.NoColors,this.fog=!0,this.setValues(e)},o.LineBasicMaterial.prototype=Object.create(o.Material.prototype),o.LineBasicMaterial.prototype.clone=function(){var e=new o.LineBasicMaterial;return o.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},o.LineDashedMaterial=function(e){o.Material.call(this),this.type="LineDashedMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},o.LineDashedMaterial.prototype=Object.create(o.Material.prototype),o.LineDashedMaterial.prototype.clone=function(){var e=new o.LineDashedMaterial;return o.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},o.MeshBasicMaterial=function(e){o.Material.call(this),this.type="MeshBasicMaterial",this.color=new o.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=o.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},o.MeshBasicMaterial.prototype=Object.create(o.Material.prototype),o.MeshBasicMaterial.prototype.clone=function(){var e=new o.MeshBasicMaterial;return o.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},o.MeshLambertMaterial=function(e){o.Material.call(this),this.type="MeshLambertMaterial",this.color=new o.Color(16777215),this.ambient=new o.Color(16777215),this.emissive=new o.Color(0),this.wrapAround=!1,this.wrapRGB=new o.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=o.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},o.MeshLambertMaterial.prototype=Object.create(o.Material.prototype),o.MeshLambertMaterial.prototype.clone=function(){var e=new o.MeshLambertMaterial;
return o.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},o.MeshPhongMaterial=function(e){o.Material.call(this),this.type="MeshPhongMaterial",this.color=new o.Color(16777215),this.ambient=new o.Color(16777215),this.emissive=new o.Color(0),this.specular=new o.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new o.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=o.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},o.MeshPhongMaterial.prototype=Object.create(o.Material.prototype),o.MeshPhongMaterial.prototype.clone=function(){var e=new o.MeshPhongMaterial;return o.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},o.MeshDepthMaterial=function(e){o.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},o.MeshDepthMaterial.prototype=Object.create(o.Material.prototype),o.MeshDepthMaterial.prototype.clone=function(){var e=new o.MeshDepthMaterial;return o.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},o.MeshNormalMaterial=function(e){o.Material.call(this,e),this.type="MeshNormalMaterial",this.shading=o.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},o.MeshNormalMaterial.prototype=Object.create(o.Material.prototype),o.MeshNormalMaterial.prototype.clone=function(){var e=new o.MeshNormalMaterial;return o.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},o.MeshFaceMaterial=function(e){this.uuid=o.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},o.MeshFaceMaterial.prototype={constructor:o.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,i=this.materials.length;i>t;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new o.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},o.PointCloudMaterial=function(e){o.Material.call(this),this.type="PointCloudMaterial",this.color=new o.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=o.NoColors,this.fog=!0,this.setValues(e)},o.PointCloudMaterial.prototype=Object.create(o.Material.prototype),o.PointCloudMaterial.prototype.clone=function(){var e=new o.PointCloudMaterial;return o.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},o.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new o.PointCloudMaterial(e)},o.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new o.PointCloudMaterial(e)},o.ShaderMaterial=function(e){o.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=o.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=o.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},o.ShaderMaterial.prototype=Object.create(o.Material.prototype),o.ShaderMaterial.prototype.clone=function(){var e=new o.ShaderMaterial;return o.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=o.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},o.RawShaderMaterial=function(e){o.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},o.RawShaderMaterial.prototype=Object.create(o.ShaderMaterial.prototype),o.RawShaderMaterial.prototype.clone=function(){var e=new o.RawShaderMaterial;return o.ShaderMaterial.prototype.clone.call(this,e),e},o.SpriteMaterial=function(e){o.Material.call(this),this.type="SpriteMaterial",this.color=new o.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},o.SpriteMaterial.prototype=Object.create(o.Material.prototype),o.SpriteMaterial.prototype.clone=function(){var e=new o.SpriteMaterial;return o.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},o.Texture=function(e,t,i,n,r,s,a,l,h){Object.defineProperty(this,"id",{value:o.TextureIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.image=void 0!==e?e:o.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:o.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:o.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:o.ClampToEdgeWrapping,this.magFilter=void 0!==r?r:o.LinearFilter,this.minFilter=void 0!==s?s:o.LinearMipMapLinearFilter,this.anisotropy=void 0!==h?h:1,this.format=void 0!==a?a:o.RGBAFormat,this.type=void 0!==l?l:o.UnsignedByteType,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},o.Texture.DEFAULT_IMAGE=void 0,o.Texture.DEFAULT_MAPPING=new o.UVMapping,o.Texture.prototype={constructor:o.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new o.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.Texture.prototype),o.TextureIdCount=0,o.CubeTexture=function(e,t,i,n,r,s,a,l,h){o.Texture.call(this,e,t,i,n,r,s,a,l,h),this.images=e},o.CubeTexture.prototype=Object.create(o.Texture.prototype),o.CubeTexture.clone=function(e){return void 0===e&&(e=new o.CubeTexture),o.Texture.prototype.clone.call(this,e),e.images=this.images,e},o.CompressedTexture=function(e,t,i,n,r,s,a,l,h,d,c){o.Texture.call(this,null,s,a,l,h,d,n,r,c),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},o.CompressedTexture.prototype=Object.create(o.Texture.prototype),o.CompressedTexture.prototype.clone=function(){var e=new o.CompressedTexture;return o.Texture.prototype.clone.call(this,e),e},o.DataTexture=function(e,t,i,n,r,s,a,l,h,d,c){o.Texture.call(this,null,s,a,l,h,d,n,r,c),this.image={data:e,width:t,height:i}},o.DataTexture.prototype=Object.create(o.Texture.prototype),o.DataTexture.prototype.clone=function(){var e=new o.DataTexture;return o.Texture.prototype.clone.call(this,e),e},o.VideoTexture=function(e,t,i,n,r,s,a,l,h){o.Texture.call(this,e,t,i,n,r,s,a,l,h),this.generateMipmaps=!1;var d=this,c=function(){requestAnimationFrame(c),e.readyState===e.HAVE_ENOUGH_DATA&&(d.needsUpdate=!0)};c()},o.VideoTexture.prototype=Object.create(o.Texture.prototype),o.Group=function(){o.Object3D.call(this),this.type="Group"},o.Group.prototype=Object.create(o.Object3D.prototype),o.PointCloud=function(e,t){o.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new o.Geometry,this.material=void 0!==t?t:new o.PointCloudMaterial({color:16777215*Math.random()}),this.sortParticles=!1},o.PointCloud.prototype=Object.create(o.Object3D.prototype),o.PointCloud.prototype.raycast=function(){var e=new o.Matrix4,t=new o.Ray;return function(i,n){var r=this,s=r.geometry,a=i.params.PointCloud.threshold;if(e.getInverse(this.matrixWorld),t.copy(i.ray).applyMatrix4(e),null===s.boundingBox||t.isIntersectionBox(s.boundingBox)!==!1){var l=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=new o.Vector3,d=function(e,o){var s=t.distanceToPoint(e);if(l>s){var a=t.closestPointToPoint(e);a.applyMatrix4(r.matrixWorld);var h=i.ray.origin.distanceTo(a);n.push({distance:h,distanceToRay:s,point:a.clone(),index:o,face:null,object:r})}};if(s instanceof o.BufferGeometry){var c=s.attributes,u=c.position.array;if(void 0!==c.index){var p=c.index.array,m=s.offsets;if(0===m.length){var f={start:0,count:p.length,index:0};m=[f]}for(var g=0,v=m.length;v>g;++g)for(var y=m[g].start,b=m[g].count,w=m[g].index,x=y,_=y+b;_>x;x++){var k=w+p[x];h.fromArray(u,3*k),d(h,k)}}else for(var M=u.length/3,x=0;M>x;x++)h.set(u[3*x],u[3*x+1],u[3*x+2]),d(h,x)}else for(var E=this.geometry.vertices,x=0;x<E.length;x++)d(E[x],x)}}}(),o.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new o.PointCloud(this.geometry,this.material)),e.sortParticles=this.sortParticles,o.Object3D.prototype.clone.call(this,e),e},o.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new o.PointCloud(e,t)},o.Line=function(e,t,i){o.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new o.Geometry,this.material=void 0!==t?t:new o.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==i?i:o.LineStrip},o.LineStrip=0,o.LinePieces=1,o.Line.prototype=Object.create(o.Object3D.prototype),o.Line.prototype.raycast=function(){var e=new o.Matrix4,t=new o.Ray,i=new o.Sphere;return function(n,r){var s=n.linePrecision,a=s*s,l=this.geometry;if(null===l.boundingSphere&&l.computeBoundingSphere(),i.copy(l.boundingSphere),i.applyMatrix4(this.matrixWorld),n.ray.isIntersectionSphere(i)!==!1&&(e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e),l instanceof o.Geometry))for(var h=l.vertices,d=h.length,c=new o.Vector3,u=new o.Vector3,p=this.mode===o.LineStrip?1:2,m=0;d-1>m;m+=p){var f=t.distanceSqToSegment(h[m],h[m+1],u,c);if(!(f>a)){var g=t.origin.distanceTo(u);g<n.near||g>n.far||r.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}}(),o.Line.prototype.clone=function(e){return void 0===e&&(e=new o.Line(this.geometry,this.material,this.mode)),o.Object3D.prototype.clone.call(this,e),e},o.Mesh=function(e,t){o.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new o.Geometry,this.material=void 0!==t?t:new o.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},o.Mesh.prototype=Object.create(o.Object3D.prototype),o.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},o.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},o.Mesh.prototype.raycast=function(){var e=new o.Matrix4,t=new o.Ray,i=new o.Sphere,n=new o.Vector3,r=new o.Vector3,s=new o.Vector3;return function(a,l){var h=this.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),i.copy(h.boundingSphere),i.applyMatrix4(this.matrixWorld),a.ray.isIntersectionSphere(i)!==!1&&(e.getInverse(this.matrixWorld),t.copy(a.ray).applyMatrix4(e),null===h.boundingBox||t.isIntersectionBox(h.boundingBox)!==!1))if(h instanceof o.BufferGeometry){var d=this.material;if(void 0===d)return;var c,u,p,m=h.attributes,f=a.precision;if(void 0!==m.index){var g=m.index.array,v=m.position.array,y=h.offsets;0===y.length&&(y=[{start:0,count:g.length,index:0}]);for(var b=0,w=y.length;w>b;++b)for(var x=y[b].start,_=y[b].count,k=y[b].index,M=x,E=x+_;E>M;M+=3){if(c=k+g[M],u=k+g[M+1],p=k+g[M+2],n.fromArray(v,3*c),r.fromArray(v,3*u),s.fromArray(v,3*p),d.side===o.BackSide)var S=t.intersectTriangle(s,r,n,!0);else var S=t.intersectTriangle(n,r,s,d.side!==o.DoubleSide);if(null!==S){S.applyMatrix4(this.matrixWorld);var T=a.ray.origin.distanceTo(S);f>T||T<a.near||T>a.far||l.push({distance:T,point:S,face:new o.Face3(c,u,p,o.Triangle.normal(n,r,s)),faceIndex:null,object:this})}}}else for(var v=m.position.array,M=0,C=0,E=v.length;E>M;M+=3,C+=9){if(c=M,u=M+1,p=M+2,n.fromArray(v,C),r.fromArray(v,C+3),s.fromArray(v,C+6),d.side===o.BackSide)var S=t.intersectTriangle(s,r,n,!0);else var S=t.intersectTriangle(n,r,s,d.side!==o.DoubleSide);if(null!==S){S.applyMatrix4(this.matrixWorld);var T=a.ray.origin.distanceTo(S);f>T||T<a.near||T>a.far||l.push({distance:T,point:S,face:new o.Face3(c,u,p,o.Triangle.normal(n,r,s)),faceIndex:null,object:this})}}}else if(h instanceof o.Geometry)for(var c,u,p,A=this.material instanceof o.MeshFaceMaterial,j=A===!0?this.material.materials:null,f=a.precision,L=h.vertices,P=0,R=h.faces.length;R>P;P++){var D=h.faces[P],d=A===!0?j[D.materialIndex]:this.material;if(void 0!==d){if(c=L[D.a],u=L[D.b],p=L[D.c],d.morphTargets===!0){var F=h.morphTargets,z=this.morphTargetInfluences;n.set(0,0,0),r.set(0,0,0),s.set(0,0,0);for(var B=0,V=F.length;V>B;B++){var U=z[B];if(0!==U){var O=F[B].vertices;n.x+=(O[D.a].x-c.x)*U,n.y+=(O[D.a].y-c.y)*U,n.z+=(O[D.a].z-c.z)*U,r.x+=(O[D.b].x-u.x)*U,r.y+=(O[D.b].y-u.y)*U,r.z+=(O[D.b].z-u.z)*U,s.x+=(O[D.c].x-p.x)*U,s.y+=(O[D.c].y-p.y)*U,s.z+=(O[D.c].z-p.z)*U}}n.add(c),r.add(u),s.add(p),c=n,u=r,p=s}if(d.side===o.BackSide)var S=t.intersectTriangle(p,u,c,!0);else var S=t.intersectTriangle(c,u,p,d.side!==o.DoubleSide);if(null!==S){S.applyMatrix4(this.matrixWorld);var T=a.ray.origin.distanceTo(S);f>T||T<a.near||T>a.far||l.push({distance:T,point:S,face:D,faceIndex:P,object:this})}}}}}(),o.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new o.Mesh(this.geometry,this.material)),o.Object3D.prototype.clone.call(this,e,t),e},o.Bone=function(e){o.Object3D.call(this),this.skin=e},o.Bone.prototype=Object.create(o.Object3D.prototype),o.Skeleton=function(e,t,i){if(this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new o.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var n;n=this.bones.length>256?64:this.bones.length>64?32:this.bones.length>16?16:8,this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new o.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,o.RGBAFormat,o.FloatType),this.boneTexture.minFilter=o.NearestFilter,this.boneTexture.magFilter=o.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var r=0,s=this.bones.length;s>r;r++)this.boneInverses.push(new o.Matrix4)}},o.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var i=new o.Matrix4;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},o.Skeleton.prototype.pose=function(){for(var e,t=0,i=this.bones.length;i>t;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,i=this.bones.length;i>t;t++)e=this.bones[t],e&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},o.Skeleton.prototype.update=function(){var e=new o.Matrix4;return function(){for(var t=0,i=this.bones.length;i>t;t++){var n=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(n,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),o.SkinnedMesh=function(e,t,i){o.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o.Matrix4,this.bindMatrixInverse=new o.Matrix4;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,s,a,l,h,d=0,c=this.geometry.bones.length;c>d;++d)s=this.geometry.bones[d],a=s.pos,l=s.rotq,h=s.scl,r=new o.Bone(this),n.push(r),r.name=s.name,r.position.set(a[0],a[1],a[2]),r.quaternion.set(l[0],l[1],l[2],l[3]),void 0!==h?r.scale.set(h[0],h[1],h[2]):r.scale.set(1,1,1);for(var d=0,c=this.geometry.bones.length;c>d;++d)s=this.geometry.bones[d],-1!==s.parent?n[s.parent].add(n[d]):this.add(n[d])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new o.Skeleton(n,void 0,i))},o.SkinnedMesh.prototype=Object.create(o.Mesh.prototype),o.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},o.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},o.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof o.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],i=1/t.lengthManhattan();1/0!==i?t.multiplyScalar(i):t.set(1)}},o.SkinnedMesh.prototype.updateMatrixWorld=function(){o.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},o.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new o.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),o.Mesh.prototype.clone.call(this,e),e},o.MorphAnimMesh=function(e,t){o.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},o.MorphAnimMesh.prototype=Object.create(o.Mesh.prototype),o.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},o.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},o.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},o.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,i=e.animations,n=/([a-z]+)_?(\d+)/,o=0,r=e.morphTargets.length;r>o;o++){var s=e.morphTargets[o],a=s.name.match(n);if(a&&a.length>1){{var l=a[1];a[2]}i[l]||(i[l]={start:1/0,end:-1/0});var h=i[l];o<h.start&&(h.start=o),o>h.end&&(h.end=o),t||(t=l)}}e.firstAnimation=t},o.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:i}},o.MorphAnimMesh.prototype.playAnimation=function(e,t){var i=this.geometry.animations[e];i?(this.setFrameRange(i.start,i.end),this.duration=1e3*((i.end-i.start)/t),this.time=0):console.warn("animation["+e+"] undefined")},o.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var i=this.startKeyframe+o.Math.clamp(Math.floor(this.time/t),0,this.length-1);i!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[i]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=i);var n=this.time%t/t;this.directionBackwards&&(n=1-n),this.morphTargetInfluences[this.currentKeyframe]=n,this.morphTargetInfluences[this.lastKeyframe]=1-n},o.MorphAnimMesh.prototype.interpolateTargets=function(e,t,i){for(var n=this.morphTargetInfluences,o=0,r=n.length;r>o;o++)n[o]=0;e>-1&&(n[e]=1-i),t>-1&&(n[t]=i)},o.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new o.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,o.Mesh.prototype.clone.call(this,e),e},o.LOD=function(){o.Object3D.call(this),this.objects=[]},o.LOD.prototype=Object.create(o.Object3D.prototype),o.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=0;i<this.objects.length&&!(t<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:t,object:e}),this.add(e)},o.LOD.prototype.getObjectForDistance=function(e){for(var t=1,i=this.objects.length;i>t&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},o.LOD.prototype.raycast=function(){var e=new o.Vector3;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,i)}}(),o.LOD.prototype.update=function(){var e=new o.Vector3,t=new o.Vector3;return function(i){if(this.objects.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);this.objects[0].object.visible=!0;for(var o=1,r=this.objects.length;r>o&&n>=this.objects[o].distance;o++)this.objects[o-1].object.visible=!1,this.objects[o].object.visible=!0;for(;r>o;o++)this.objects[o].object.visible=!1}}}(),o.LOD.prototype.clone=function(e){void 0===e&&(e=new o.LOD),o.Object3D.prototype.clone.call(this,e);for(var t=0,i=this.objects.length;i>t;t++){var n=this.objects[t].object.clone();n.visible=0===t,e.addLevel(n,this.objects[t].distance)}return e},o.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),i=new Float32Array([0,0,1,0,1,1,0,1]),n=new o.BufferGeometry;return n.addAttribute("index",new o.BufferAttribute(e,1)),n.addAttribute("position",new o.BufferAttribute(t,3)),n.addAttribute("uv",new o.BufferAttribute(i,2)),function(e){o.Object3D.call(this),this.type="Sprite",this.geometry=n,this.material=void 0!==e?e:new o.SpriteMaterial}}(),o.Sprite.prototype=Object.create(o.Object3D.prototype),o.Sprite.prototype.raycast=function(){var e=new o.Vector3;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.distanceToPoint(e);n>this.scale.x||i.push({distance:n,point:this.position,face:null,object:this})}}(),o.Sprite.prototype.clone=function(e){return void 0===e&&(e=new o.Sprite(this.material)),o.Object3D.prototype.clone.call(this,e),e},o.Particle=o.Sprite,o.LensFlare=function(e,t,i,n,r){o.Object3D.call(this),this.lensFlares=[],this.positionScreen=new o.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,i,n,r)},o.LensFlare.prototype=Object.create(o.Object3D.prototype),o.LensFlare.prototype.add=function(e,t,i,n,r,s){void 0===t&&(t=-1),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=new o.Color(16777215)),void 0===n&&(n=o.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:s,color:r,blending:n})},o.LensFlare.prototype.updateLensFlares=function(){var e,t,i=this.lensFlares.length,n=2*-this.positionScreen.x,o=2*-this.positionScreen.y;for(e=0;i>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+n*t.distance,t.y=this.positionScreen.y+o*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},o.Scene=function(){o.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},o.Scene.prototype=Object.create(o.Object3D.prototype),o.Scene.prototype.clone=function(e){return void 0===e&&(e=new o.Scene),o.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},o.Fog=function(e,t,i){this.name="",this.color=new o.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3},o.Fog.prototype.clone=function(){return new o.Fog(this.color.getHex(),this.near,this.far)},o.FogExp2=function(e,t){this.name="",this.color=new o.Color(e),this.density=void 0!==t?t:25e-5},o.FogExp2.prototype.clone=function(){return new o.FogExp2(this.color.getHex(),this.density)},o.ShaderChunk={},o.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",o.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",o.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",o.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n	mvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;",o.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",o.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",o.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",o.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",o.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",o.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",o.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",o.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	uniform samplerCube envMap;\n	uniform float flipEnvMap;\n	uniform int combine;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform bool useRefract;\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif",o.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",o.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",o.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",o.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",o.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",o.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",o.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",o.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",o.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",o.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",o.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",o.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",o.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n	uniform bool useRefract;\n\n#endif\n",o.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",o.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",o.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",o.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",o.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	vec3 reflectVec;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		if ( useRefract ) {\n\n			reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		} else { \n\n			reflectVec = reflect( cameraToVertex, worldNormal );\n\n		}\n\n	#else\n\n		reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n		vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#else\n\n		vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		cubeColor.xyz *= cubeColor.xyz;\n\n	#endif\n\n	if ( combine == 1 ) {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n	} else if ( combine == 2 ) {\n\n		gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n	} else {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n	}\n\n#endif",o.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",o.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",o.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",o.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",o.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",o.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",o.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n	objectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n	objectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n	objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;",o.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",o.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",o.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",o.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",o.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",o.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",o.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",o.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	if ( useRefract ) {\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	} else {\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	}\n\n#endif",o.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",o.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#endif\n\n	#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#endif\n\n	#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif",o.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",o.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",o.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",o.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",o.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",o.UniformsUtils={merge:function(e){for(var t={},i=0;i<e.length;i++){var n=this.clone(e[i]);
for(var o in n)t[o]=n[o]}return t},clone:function(e){var t={};for(var i in e){t[i]={};for(var n in e[i]){var r=e[i][n];t[i][n]=r instanceof o.Color||r instanceof o.Vector2||r instanceof o.Vector3||r instanceof o.Vector4||r instanceof o.Matrix4||r instanceof o.Texture?r.clone():r instanceof Array?r.slice():r}}return t}},o.UniformsLib={common:{diffuse:{type:"c",value:new o.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new o.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new o.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new o.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new o.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new o.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},o.ShaderLib={basic:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,o.UniformsLib.shadowmap]),vertexShader:[o.ShaderChunk.map_pars_vertex,o.ShaderChunk.lightmap_pars_vertex,o.ShaderChunk.envmap_pars_vertex,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.map_vertex,o.ShaderChunk.lightmap_vertex,o.ShaderChunk.color_vertex,o.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",o.ShaderChunk.morphnormal_vertex,o.ShaderChunk.skinnormal_vertex,o.ShaderChunk.defaultnormal_vertex,"	#endif",o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.default_vertex,o.ShaderChunk.logdepthbuf_vertex,o.ShaderChunk.worldpos_vertex,o.ShaderChunk.envmap_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",o.ShaderChunk.color_pars_fragment,o.ShaderChunk.map_pars_fragment,o.ShaderChunk.alphamap_pars_fragment,o.ShaderChunk.lightmap_pars_fragment,o.ShaderChunk.envmap_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.specularmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( diffuse, opacity );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_fragment,o.ShaderChunk.alphamap_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.specularmap_fragment,o.ShaderChunk.lightmap_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.envmap_fragment,o.ShaderChunk.shadowmap_fragment,o.ShaderChunk.linear_to_gamma_fragment,o.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,o.UniformsLib.lights,o.UniformsLib.shadowmap,{ambient:{type:"c",value:new o.Color(16777215)},emissive:{type:"c",value:new o.Color(0)},wrapRGB:{type:"v3",value:new o.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",o.ShaderChunk.map_pars_vertex,o.ShaderChunk.lightmap_pars_vertex,o.ShaderChunk.envmap_pars_vertex,o.ShaderChunk.lights_lambert_pars_vertex,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.map_vertex,o.ShaderChunk.lightmap_vertex,o.ShaderChunk.color_vertex,o.ShaderChunk.morphnormal_vertex,o.ShaderChunk.skinbase_vertex,o.ShaderChunk.skinnormal_vertex,o.ShaderChunk.defaultnormal_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.default_vertex,o.ShaderChunk.logdepthbuf_vertex,o.ShaderChunk.worldpos_vertex,o.ShaderChunk.envmap_vertex,o.ShaderChunk.lights_lambert_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",o.ShaderChunk.color_pars_fragment,o.ShaderChunk.map_pars_fragment,o.ShaderChunk.alphamap_pars_fragment,o.ShaderChunk.lightmap_pars_fragment,o.ShaderChunk.envmap_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.specularmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_fragment,o.ShaderChunk.alphamap_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			gl_FragColor.xyz *= vLightFront;","		else","			gl_FragColor.xyz *= vLightBack;","	#else","		gl_FragColor.xyz *= vLightFront;","	#endif",o.ShaderChunk.lightmap_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.envmap_fragment,o.ShaderChunk.shadowmap_fragment,o.ShaderChunk.linear_to_gamma_fragment,o.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.bump,o.UniformsLib.normalmap,o.UniformsLib.fog,o.UniformsLib.lights,o.UniformsLib.shadowmap,{ambient:{type:"c",value:new o.Color(16777215)},emissive:{type:"c",value:new o.Color(0)},specular:{type:"c",value:new o.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new o.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",o.ShaderChunk.map_pars_vertex,o.ShaderChunk.lightmap_pars_vertex,o.ShaderChunk.envmap_pars_vertex,o.ShaderChunk.lights_phong_pars_vertex,o.ShaderChunk.color_pars_vertex,o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.map_vertex,o.ShaderChunk.lightmap_vertex,o.ShaderChunk.color_vertex,o.ShaderChunk.morphnormal_vertex,o.ShaderChunk.skinbase_vertex,o.ShaderChunk.skinnormal_vertex,o.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.default_vertex,o.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",o.ShaderChunk.worldpos_vertex,o.ShaderChunk.envmap_vertex,o.ShaderChunk.lights_phong_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",o.ShaderChunk.color_pars_fragment,o.ShaderChunk.map_pars_fragment,o.ShaderChunk.alphamap_pars_fragment,o.ShaderChunk.lightmap_pars_fragment,o.ShaderChunk.envmap_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.lights_phong_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.bumpmap_pars_fragment,o.ShaderChunk.normalmap_pars_fragment,o.ShaderChunk.specularmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_fragment,o.ShaderChunk.alphamap_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.specularmap_fragment,o.ShaderChunk.lights_phong_fragment,o.ShaderChunk.lightmap_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.envmap_fragment,o.ShaderChunk.shadowmap_fragment,o.ShaderChunk.linear_to_gamma_fragment,o.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:o.UniformsUtils.merge([o.UniformsLib.particle,o.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",o.ShaderChunk.color_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",o.ShaderChunk.logdepthbuf_vertex,o.ShaderChunk.worldpos_vertex,o.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",o.ShaderChunk.color_pars_fragment,o.ShaderChunk.map_particle_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( psColor, opacity );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.map_particle_fragment,o.ShaderChunk.alphatest_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.shadowmap_fragment,o.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",o.ShaderChunk.color_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",o.ShaderChunk.color_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	gl_FragColor = vec4( diffuse, opacity );",o.ShaderChunk.logdepthbuf_fragment,o.ShaderChunk.color_fragment,o.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.default_vertex,o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",o.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.default_vertex,o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",o.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:o.UniformsUtils.merge([o.UniformsLib.fog,o.UniformsLib.lights,o.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new o.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new o.Color(16777215)},specular:{type:"c",value:new o.Color(1118481)},ambient:{type:"c",value:new o.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new o.Vector2(0,0)},uRepeat:{type:"v2",value:new o.Vector2(1,1)},wrapRGB:{type:"v3",value:new o.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","	uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",o.ShaderChunk.shadowmap_pars_fragment,o.ShaderChunk.fog_pars_fragment,o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",o.ShaderChunk.logdepthbuf_fragment,"	gl_FragColor = vec4( vec3( 1.0 ), opacity );","	vec3 specularTex = vec3( 1.0 );","	vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","	normalTex.xy *= uNormalScale;","	normalTex = normalize( normalTex );","	if( enableDiffuse ) {","		#ifdef GAMMA_INPUT","			vec4 texelColor = texture2D( tDiffuse, vUv );","			texelColor.xyz *= texelColor.xyz;","			gl_FragColor = gl_FragColor * texelColor;","		#else","			gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","		#endif","	}","	if( enableAO ) {","		#ifdef GAMMA_INPUT","			vec4 aoColor = texture2D( tAO, vUv );","			aoColor.xyz *= aoColor.xyz;","			gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","		#else","			gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","		#endif","	}",o.ShaderChunk.alphatest_fragment,"	if( enableSpecular )","		specularTex = texture2D( tSpecular, vUv ).xyz;","	mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","	vec3 finalNormal = tsb * normalTex;","	#ifdef FLIP_SIDED","		finalNormal = -finalNormal;","	#endif","	vec3 normal = normalize( finalNormal );","	vec3 viewPosition = normalize( vViewPosition );","	#if MAX_POINT_LIGHTS > 0","		vec3 pointDiffuse = vec3( 0.0 );","		vec3 pointSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","			vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","			float pointDistance = 1.0;","			if ( pointLightDistance[ i ] > 0.0 )","				pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","			pointVector = normalize( pointVector );","			#ifdef WRAP_AROUND","				float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","				float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","				vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","			#else","				float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","			#endif","			pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","			vec3 pointHalfVector = normalize( pointVector + viewPosition );","			float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","			float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );","			pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","		}","	#endif","	#if MAX_SPOT_LIGHTS > 0","		vec3 spotDiffuse = vec3( 0.0 );","		vec3 spotSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","			vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","			float spotDistance = 1.0;","			if ( spotLightDistance[ i ] > 0.0 )","				spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","			spotVector = normalize( spotVector );","			float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","			if ( spotEffect > spotLightAngleCos[ i ] ) {","				spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );","				#ifdef WRAP_AROUND","					float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","					float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","					vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","				#else","					float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","				#endif","				spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","				vec3 spotHalfVector = normalize( spotVector + viewPosition );","				float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","				float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","				float specularNormalization = ( shininess + 2.0 ) / 8.0;","				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );","				spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","			}","		}","	#endif","	#if MAX_DIR_LIGHTS > 0","		vec3 dirDiffuse = vec3( 0.0 );","		vec3 dirSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","			vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","			vec3 dirVector = normalize( lDirection.xyz );","			#ifdef WRAP_AROUND","				float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","				float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","				vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","			#else","				float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","			#endif","			dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","			vec3 dirHalfVector = normalize( dirVector + viewPosition );","			float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","			float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );","			dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","		}","	#endif","	#if MAX_HEMI_LIGHTS > 0","		vec3 hemiDiffuse = vec3( 0.0 );","		vec3 hemiSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","			vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","			vec3 lVector = normalize( lDirection.xyz );","			float dotProduct = dot( normal, lVector );","			float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","			vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","			hemiDiffuse += diffuse * hemiColor;","			vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","			float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","			float hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );","			vec3 lVectorGround = -lVector;","			vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","			float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","			float hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );","			float dotProductGround = dot( normal, lVectorGround );","			float specularNormalization = ( shininess + 2.0 ) / 8.0;","			vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );","			vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );","			hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","		}","	#endif","	vec3 totalDiffuse = vec3( 0.0 );","	vec3 totalSpecular = vec3( 0.0 );","	#if MAX_DIR_LIGHTS > 0","		totalDiffuse += dirDiffuse;","		totalSpecular += dirSpecular;","	#endif","	#if MAX_HEMI_LIGHTS > 0","		totalDiffuse += hemiDiffuse;","		totalSpecular += hemiSpecular;","	#endif","	#if MAX_POINT_LIGHTS > 0","		totalDiffuse += pointDiffuse;","		totalSpecular += pointSpecular;","	#endif","	#if MAX_SPOT_LIGHTS > 0","		totalDiffuse += spotDiffuse;","		totalSpecular += spotSpecular;","	#endif","	#ifdef METAL","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","	#else","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","	#endif","	if ( enableReflection ) {","		vec3 vReflect;","		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","		if ( useRefract ) {","			vReflect = refract( cameraToVertex, normal, refractionRatio );","		} else {","			vReflect = reflect( cameraToVertex, normal );","		}","		vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","		#ifdef GAMMA_INPUT","			cubeColor.xyz *= cubeColor.xyz;","		#endif","		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );","	}",o.ShaderChunk.shadowmap_fragment,o.ShaderChunk.linear_to_gamma_fragment,o.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","	uniform sampler2D tDisplacement;","	uniform float uDisplacementScale;","	uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.shadowmap_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.skinbase_vertex,o.ShaderChunk.skinnormal_vertex,"	#ifdef USE_SKINNING","		vNormal = normalize( normalMatrix * skinnedNormal.xyz );","		vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","		vTangent = normalize( normalMatrix * skinnedTangent.xyz );","	#else","		vNormal = normalize( normalMatrix * normal );","		vTangent = normalize( normalMatrix * tangent.xyz );","	#endif","	vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","	vUv = uv * uRepeat + uOffset;","	vec3 displacedPosition;","	#ifdef VERTEX_TEXTURES","		if ( enableDisplacement ) {","			vec3 dv = texture2D( tDisplacement, uv ).xyz;","			float df = uDisplacementScale * dv.x + uDisplacementBias;","			displacedPosition = position + normalize( normal ) * df;","		} else {","			#ifdef USE_SKINNING","				vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","				vec4 skinned = vec4( 0.0 );","				skinned += boneMatX * skinVertex * skinWeight.x;","				skinned += boneMatY * skinVertex * skinWeight.y;","				skinned += boneMatZ * skinVertex * skinWeight.z;","				skinned += boneMatW * skinVertex * skinWeight.w;","				skinned  = bindMatrixInverse * skinned;","				displacedPosition = skinned.xyz;","			#else","				displacedPosition = position;","			#endif","		}","	#else","		#ifdef USE_SKINNING","			vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","			vec4 skinned = vec4( 0.0 );","			skinned += boneMatX * skinVertex * skinWeight.x;","			skinned += boneMatY * skinVertex * skinWeight.y;","			skinned += boneMatZ * skinVertex * skinWeight.z;","			skinned += boneMatW * skinVertex * skinWeight.w;","			skinned  = bindMatrixInverse * skinned;","			displacedPosition = skinned.xyz;","		#else","			displacedPosition = position;","		#endif","	#endif","	vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","	vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",o.ShaderChunk.logdepthbuf_vertex,"	vWorldPosition = worldPosition.xyz;","	vViewPosition = -mvPosition.xyz;","	#ifdef USE_SHADOWMAP","		for( int i = 0; i < MAX_SHADOWS; i ++ ) {","			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","		}","	#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",o.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",o.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[o.ShaderChunk.morphtarget_pars_vertex,o.ShaderChunk.skinning_pars_vertex,o.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",o.ShaderChunk.skinbase_vertex,o.ShaderChunk.morphtarget_vertex,o.ShaderChunk.skinning_vertex,o.ShaderChunk.default_vertex,o.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[o.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",o.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")}},o.WebGLRenderer=function(e){function t(){Vt.clearColor(0,0,0,1),Vt.clearDepth(1),Vt.clearStencil(0),Vt.enable(Vt.DEPTH_TEST),Vt.depthFunc(Vt.LEQUAL),Vt.frontFace(Vt.CCW),Vt.cullFace(Vt.BACK),Vt.enable(Vt.CULL_FACE),Vt.enable(Vt.BLEND),Vt.blendEquation(Vt.FUNC_ADD),Vt.blendFunc(Vt.SRC_ALPHA,Vt.ONE_MINUS_SRC_ALPHA),Vt.viewport(ri,si,ai,li),Vt.clearColor(At.r,At.g,At.b,jt)}function i(e){e.__webglVertexBuffer=Vt.createBuffer(),e.__webglColorBuffer=Vt.createBuffer(),Ut.info.memory.geometries++}function r(e){e.__webglVertexBuffer=Vt.createBuffer(),e.__webglColorBuffer=Vt.createBuffer(),e.__webglLineDistanceBuffer=Vt.createBuffer(),Ut.info.memory.geometries++}function s(e){e.__webglVertexBuffer=Vt.createBuffer(),e.__webglNormalBuffer=Vt.createBuffer(),e.__webglTangentBuffer=Vt.createBuffer(),e.__webglColorBuffer=Vt.createBuffer(),e.__webglUVBuffer=Vt.createBuffer(),e.__webglUV2Buffer=Vt.createBuffer(),e.__webglSkinIndicesBuffer=Vt.createBuffer(),e.__webglSkinWeightsBuffer=Vt.createBuffer(),e.__webglFaceBuffer=Vt.createBuffer(),e.__webglLineBuffer=Vt.createBuffer();var t,i;if(e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,i=e.numMorphTargets;i>t;t++)e.__webglMorphTargetsBuffers.push(Vt.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,i=e.numMorphNormals;i>t;t++)e.__webglMorphNormalsBuffers.push(Vt.createBuffer());Ut.info.memory.geometries++}function a(e){var t=e.geometry,i=e.material,n=t.vertices.length;if(i.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var o in i.attributes){var r=i.attributes[o];if(!r.__webglInitialized||r.createUniqueBuffers){r.__webglInitialized=!0;var s=1;"v2"===r.type?s=2:"v3"===r.type?s=3:"v4"===r.type?s=4:"c"===r.type&&(s=3),r.size=s,r.array=new Float32Array(n*s),r.buffer=Vt.createBuffer(),r.buffer.belongsToAttribute=o,r.needsUpdate=!0}t.__webglCustomAttributesList.push(r)}}}function l(e,t){var i=e.vertices.length;e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__sortArray=[],e.__webglParticleCount=i,a(t)}function h(e,t){var i=e.vertices.length;e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__lineDistanceArray=new Float32Array(1*i),e.__webglLineCount=i,a(t)}function d(e,t){var i=t.geometry,n=e.faces3,o=3*n.length,r=1*n.length,s=3*n.length,a=c(t,e);e.__vertexArray=new Float32Array(3*o),e.__normalArray=new Float32Array(3*o),e.__colorArray=new Float32Array(3*o),e.__uvArray=new Float32Array(2*o),i.faceVertexUvs.length>1&&(e.__uv2Array=new Float32Array(2*o)),i.hasTangents&&(e.__tangentArray=new Float32Array(4*o)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*o),e.__skinWeightArray=new Float32Array(4*o));var l=null!==_i.get("OES_element_index_uint")&&r>21845?Uint32Array:Uint16Array;e.__typeArray=l,e.__faceArray=new l(3*r),e.__lineArray=new l(2*s);var h,d;if(e.numMorphTargets)for(e.__morphTargetsArrays=[],h=0,d=e.numMorphTargets;d>h;h++)e.__morphTargetsArrays.push(new Float32Array(3*o));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],h=0,d=e.numMorphNormals;d>h;h++)e.__morphNormalsArrays.push(new Float32Array(3*o));if(e.__webglFaceCount=3*r,e.__webglLineCount=2*s,a.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var u in a.attributes){var p=a.attributes[u],m={};for(var f in p)m[f]=p[f];if(!m.__webglInitialized||m.createUniqueBuffers){m.__webglInitialized=!0;var g=1;"v2"===m.type?g=2:"v3"===m.type?g=3:"v4"===m.type?g=4:"c"===m.type&&(g=3),m.size=g,m.array=new Float32Array(o*g),m.buffer=Vt.createBuffer(),m.buffer.belongsToAttribute=u,p.needsUpdate=!0,m.__original=p
}e.__webglCustomAttributesList.push(m)}}e.__inittedArrays=!0}function c(e,t){return e.material instanceof o.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function u(e){return e&&void 0!==e.shading&&e.shading===o.SmoothShading}function p(e,t,i){var n,o,r,s,a,l,h,d,c,u,p,m,f=e.vertices,g=f.length,v=e.colors,y=v.length,b=e.__vertexArray,w=e.__colorArray,x=e.__sortArray,_=e.verticesNeedUpdate,k=(e.elementsNeedUpdate,e.colorsNeedUpdate),E=e.__webglCustomAttributesList;if(i.sortParticles){for(fi.copy(mi),fi.multiply(i.matrixWorld),n=0;g>n;n++)r=f[n],gi.copy(r),gi.applyProjection(fi),x[n]=[gi.z,n];for(x.sort(M),n=0;g>n;n++)r=f[x[n][1]],s=3*n,b[s]=r.x,b[s+1]=r.y,b[s+2]=r.z;for(o=0;y>o;o++)s=3*o,l=v[x[o][1]],w[s]=l.r,w[s+1]=l.g,w[s+2]=l.b;if(E)for(h=0,d=E.length;d>h;h++)if(m=E[h],void 0===m.boundTo||"vertices"===m.boundTo)if(s=0,u=m.value.length,1===m.size)for(c=0;u>c;c++)a=x[c][1],m.array[c]=m.value[a];else if(2===m.size)for(c=0;u>c;c++)a=x[c][1],p=m.value[a],m.array[s]=p.x,m.array[s+1]=p.y,s+=2;else if(3===m.size)if("c"===m.type)for(c=0;u>c;c++)a=x[c][1],p=m.value[a],m.array[s]=p.r,m.array[s+1]=p.g,m.array[s+2]=p.b,s+=3;else for(c=0;u>c;c++)a=x[c][1],p=m.value[a],m.array[s]=p.x,m.array[s+1]=p.y,m.array[s+2]=p.z,s+=3;else if(4===m.size)for(c=0;u>c;c++)a=x[c][1],p=m.value[a],m.array[s]=p.x,m.array[s+1]=p.y,m.array[s+2]=p.z,m.array[s+3]=p.w,s+=4}else{if(_)for(n=0;g>n;n++)r=f[n],s=3*n,b[s]=r.x,b[s+1]=r.y,b[s+2]=r.z;if(k)for(o=0;y>o;o++)l=v[o],s=3*o,w[s]=l.r,w[s+1]=l.g,w[s+2]=l.b;if(E)for(h=0,d=E.length;d>h;h++)if(m=E[h],m.needsUpdate&&(void 0===m.boundTo||"vertices"===m.boundTo))if(u=m.value.length,s=0,1===m.size)for(c=0;u>c;c++)m.array[c]=m.value[c];else if(2===m.size)for(c=0;u>c;c++)p=m.value[c],m.array[s]=p.x,m.array[s+1]=p.y,s+=2;else if(3===m.size)if("c"===m.type)for(c=0;u>c;c++)p=m.value[c],m.array[s]=p.r,m.array[s+1]=p.g,m.array[s+2]=p.b,s+=3;else for(c=0;u>c;c++)p=m.value[c],m.array[s]=p.x,m.array[s+1]=p.y,m.array[s+2]=p.z,s+=3;else if(4===m.size)for(c=0;u>c;c++)p=m.value[c],m.array[s]=p.x,m.array[s+1]=p.y,m.array[s+2]=p.z,m.array[s+3]=p.w,s+=4}if((_||i.sortParticles)&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglVertexBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,b,t)),(k||i.sortParticles)&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglColorBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,w,t)),E)for(h=0,d=E.length;d>h;h++)m=E[h],(m.needsUpdate||i.sortParticles)&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,m.buffer),Vt.bufferData(Vt.ARRAY_BUFFER,m.array,t))}function m(e,t){var i,n,o,r,s,a,l,h,d,c,u,p,m=e.vertices,f=e.colors,g=e.lineDistances,v=m.length,y=f.length,b=g.length,w=e.__vertexArray,x=e.__colorArray,_=e.__lineDistanceArray,k=e.verticesNeedUpdate,M=e.colorsNeedUpdate,E=e.lineDistancesNeedUpdate,S=e.__webglCustomAttributesList;if(k){for(i=0;v>i;i++)r=m[i],s=3*i,w[s]=r.x,w[s+1]=r.y,w[s+2]=r.z;Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglVertexBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,w,t)}if(M){for(n=0;y>n;n++)a=f[n],s=3*n,x[s]=a.r,x[s+1]=a.g,x[s+2]=a.b;Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglColorBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,x,t)}if(E){for(o=0;b>o;o++)_[o]=g[o];Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,_,t)}if(S)for(l=0,h=S.length;h>l;l++)if(p=S[l],p.needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo)){if(s=0,c=p.value.length,1===p.size)for(d=0;c>d;d++)p.array[d]=p.value[d];else if(2===p.size)for(d=0;c>d;d++)u=p.value[d],p.array[s]=u.x,p.array[s+1]=u.y,s+=2;else if(3===p.size)if("c"===p.type)for(d=0;c>d;d++)u=p.value[d],p.array[s]=u.r,p.array[s+1]=u.g,p.array[s+2]=u.b,s+=3;else for(d=0;c>d;d++)u=p.value[d],p.array[s]=u.x,p.array[s+1]=u.y,p.array[s+2]=u.z,s+=3;else if(4===p.size)for(d=0;c>d;d++)u=p.value[d],p.array[s]=u.x,p.array[s+1]=u.y,p.array[s+2]=u.z,p.array[s+3]=u.w,s+=4;Vt.bindBuffer(Vt.ARRAY_BUFFER,p.buffer),Vt.bufferData(Vt.ARRAY_BUFFER,p.array,t)}}function f(e,t,i,n,r){if(e.__inittedArrays){var s,a,l,h,d,c,p,m,f,g,v,y,b,w,x,_,k,M,E,S,T,C,A,j,L,P,R,D,F,z,B,V,U,O,N,I,H,q,G,W,X,Y,K=u(r),Z=0,Q=0,$=0,J=0,et=0,tt=0,it=0,nt=0,ot=0,rt=0,st=0,at=0,lt=0,ht=e.__vertexArray,dt=e.__uvArray,ct=e.__uv2Array,ut=e.__normalArray,pt=e.__tangentArray,mt=e.__colorArray,ft=e.__skinIndexArray,gt=e.__skinWeightArray,vt=e.__morphTargetsArrays,yt=e.__morphNormalsArrays,bt=e.__webglCustomAttributesList,wt=e.__faceArray,xt=e.__lineArray,_t=t.geometry,kt=_t.verticesNeedUpdate,Mt=_t.elementsNeedUpdate,Et=_t.uvsNeedUpdate,St=_t.normalsNeedUpdate,Tt=_t.tangentsNeedUpdate,Ct=_t.colorsNeedUpdate,At=_t.morphTargetsNeedUpdate,jt=_t.vertices,Lt=e.faces3,Pt=_t.faces,Rt=_t.faceVertexUvs[0],Dt=_t.faceVertexUvs[1],Ft=(_t.colors,_t.skinIndices),zt=_t.skinWeights,Bt=_t.morphTargets,Ut=_t.morphNormals;if(kt){for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],y=jt[h.a],b=jt[h.b],w=jt[h.c],ht[Q]=y.x,ht[Q+1]=y.y,ht[Q+2]=y.z,ht[Q+3]=b.x,ht[Q+4]=b.y,ht[Q+5]=b.z,ht[Q+6]=w.x,ht[Q+7]=w.y,ht[Q+8]=w.z,Q+=9;Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglVertexBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,ht,i)}if(At)for(N=0,I=Bt.length;I>N;N++){for(st=0,s=0,a=Lt.length;a>s;s++)G=Lt[s],h=Pt[G],y=Bt[N].vertices[h.a],b=Bt[N].vertices[h.b],w=Bt[N].vertices[h.c],H=vt[N],H[st]=y.x,H[st+1]=y.y,H[st+2]=y.z,H[st+3]=b.x,H[st+4]=b.y,H[st+5]=b.z,H[st+6]=w.x,H[st+7]=w.y,H[st+8]=w.z,r.morphNormals&&(K?(W=Ut[N].vertexNormals[G],M=W.a,E=W.b,S=W.c):(M=Ut[N].faceNormals[G],E=M,S=M),q=yt[N],q[st]=M.x,q[st+1]=M.y,q[st+2]=M.z,q[st+3]=E.x,q[st+4]=E.y,q[st+5]=E.z,q[st+6]=S.x,q[st+7]=S.y,q[st+8]=S.z),st+=9;Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[N]),Vt.bufferData(Vt.ARRAY_BUFFER,vt[N],i),r.morphNormals&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[N]),Vt.bufferData(Vt.ARRAY_BUFFER,yt[N],i))}if(zt.length){for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],j=zt[h.a],L=zt[h.b],P=zt[h.c],gt[rt]=j.x,gt[rt+1]=j.y,gt[rt+2]=j.z,gt[rt+3]=j.w,gt[rt+4]=L.x,gt[rt+5]=L.y,gt[rt+6]=L.z,gt[rt+7]=L.w,gt[rt+8]=P.x,gt[rt+9]=P.y,gt[rt+10]=P.z,gt[rt+11]=P.w,R=Ft[h.a],D=Ft[h.b],F=Ft[h.c],ft[rt]=R.x,ft[rt+1]=R.y,ft[rt+2]=R.z,ft[rt+3]=R.w,ft[rt+4]=D.x,ft[rt+5]=D.y,ft[rt+6]=D.z,ft[rt+7]=D.w,ft[rt+8]=F.x,ft[rt+9]=F.y,ft[rt+10]=F.z,ft[rt+11]=F.w,rt+=12;rt>0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,ft,i),Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,gt,i))}if(Ct){for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],p=h.vertexColors,m=h.color,3===p.length&&r.vertexColors===o.VertexColors?(T=p[0],C=p[1],A=p[2]):(T=m,C=m,A=m),mt[ot]=T.r,mt[ot+1]=T.g,mt[ot+2]=T.b,mt[ot+3]=C.r,mt[ot+4]=C.g,mt[ot+5]=C.b,mt[ot+6]=A.r,mt[ot+7]=A.g,mt[ot+8]=A.b,ot+=9;ot>0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglColorBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,mt,i))}if(Tt&&_t.hasTangents){for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],f=h.vertexTangents,x=f[0],_=f[1],k=f[2],pt[it]=x.x,pt[it+1]=x.y,pt[it+2]=x.z,pt[it+3]=x.w,pt[it+4]=_.x,pt[it+5]=_.y,pt[it+6]=_.z,pt[it+7]=_.w,pt[it+8]=k.x,pt[it+9]=k.y,pt[it+10]=k.z,pt[it+11]=k.w,it+=12;Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglTangentBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,pt,i)}if(St){for(s=0,a=Lt.length;a>s;s++)if(h=Pt[Lt[s]],d=h.vertexNormals,c=h.normal,3===d.length&&K)for(z=0;3>z;z++)V=d[z],ut[tt]=V.x,ut[tt+1]=V.y,ut[tt+2]=V.z,tt+=3;else for(z=0;3>z;z++)ut[tt]=c.x,ut[tt+1]=c.y,ut[tt+2]=c.z,tt+=3;Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglNormalBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,ut,i)}if(Et&&Rt){for(s=0,a=Lt.length;a>s;s++)if(l=Lt[s],g=Rt[l],void 0!==g)for(z=0;3>z;z++)U=g[z],dt[$]=U.x,dt[$+1]=U.y,$+=2;$>0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglUVBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,dt,i))}if(Et&&Dt){for(s=0,a=Lt.length;a>s;s++)if(l=Lt[s],v=Dt[l],void 0!==v)for(z=0;3>z;z++)O=v[z],ct[J]=O.x,ct[J+1]=O.y,J+=2;J>0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglUV2Buffer),Vt.bufferData(Vt.ARRAY_BUFFER,ct,i))}if(Mt){for(s=0,a=Lt.length;a>s;s++)wt[et]=Z,wt[et+1]=Z+1,wt[et+2]=Z+2,et+=3,xt[nt]=Z,xt[nt+1]=Z+1,xt[nt+2]=Z,xt[nt+3]=Z+2,xt[nt+4]=Z+1,xt[nt+5]=Z+2,nt+=6,Z+=3;Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Vt.bufferData(Vt.ELEMENT_ARRAY_BUFFER,wt,i),Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Vt.bufferData(Vt.ELEMENT_ARRAY_BUFFER,xt,i)}if(bt)for(z=0,B=bt.length;B>z;z++)if(Y=bt[z],Y.__original.needsUpdate){if(at=0,lt=0,1===Y.size){if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],Y.array[at]=Y.value[h.a],Y.array[at+1]=Y.value[h.b],Y.array[at+2]=Y.value[h.c],at+=3;else if("faces"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)X=Y.value[Lt[s]],Y.array[at]=X,Y.array[at+1]=X,Y.array[at+2]=X,at+=3}else if(2===Y.size){if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],y=Y.value[h.a],b=Y.value[h.b],w=Y.value[h.c],Y.array[at]=y.x,Y.array[at+1]=y.y,Y.array[at+2]=b.x,Y.array[at+3]=b.y,Y.array[at+4]=w.x,Y.array[at+5]=w.y,at+=6;else if("faces"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)X=Y.value[Lt[s]],y=X,b=X,w=X,Y.array[at]=y.x,Y.array[at+1]=y.y,Y.array[at+2]=b.x,Y.array[at+3]=b.y,Y.array[at+4]=w.x,Y.array[at+5]=w.y,at+=6}else if(3===Y.size){var Ot;if(Ot="c"===Y.type?["r","g","b"]:["x","y","z"],void 0===Y.boundTo||"vertices"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],y=Y.value[h.a],b=Y.value[h.b],w=Y.value[h.c],Y.array[at]=y[Ot[0]],Y.array[at+1]=y[Ot[1]],Y.array[at+2]=y[Ot[2]],Y.array[at+3]=b[Ot[0]],Y.array[at+4]=b[Ot[1]],Y.array[at+5]=b[Ot[2]],Y.array[at+6]=w[Ot[0]],Y.array[at+7]=w[Ot[1]],Y.array[at+8]=w[Ot[2]],at+=9;else if("faces"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)X=Y.value[Lt[s]],y=X,b=X,w=X,Y.array[at]=y[Ot[0]],Y.array[at+1]=y[Ot[1]],Y.array[at+2]=y[Ot[2]],Y.array[at+3]=b[Ot[0]],Y.array[at+4]=b[Ot[1]],Y.array[at+5]=b[Ot[2]],Y.array[at+6]=w[Ot[0]],Y.array[at+7]=w[Ot[1]],Y.array[at+8]=w[Ot[2]],at+=9;else if("faceVertices"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)X=Y.value[Lt[s]],y=X[0],b=X[1],w=X[2],Y.array[at]=y[Ot[0]],Y.array[at+1]=y[Ot[1]],Y.array[at+2]=y[Ot[2]],Y.array[at+3]=b[Ot[0]],Y.array[at+4]=b[Ot[1]],Y.array[at+5]=b[Ot[2]],Y.array[at+6]=w[Ot[0]],Y.array[at+7]=w[Ot[1]],Y.array[at+8]=w[Ot[2]],at+=9}else if(4===Y.size)if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)h=Pt[Lt[s]],y=Y.value[h.a],b=Y.value[h.b],w=Y.value[h.c],Y.array[at]=y.x,Y.array[at+1]=y.y,Y.array[at+2]=y.z,Y.array[at+3]=y.w,Y.array[at+4]=b.x,Y.array[at+5]=b.y,Y.array[at+6]=b.z,Y.array[at+7]=b.w,Y.array[at+8]=w.x,Y.array[at+9]=w.y,Y.array[at+10]=w.z,Y.array[at+11]=w.w,at+=12;else if("faces"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)X=Y.value[Lt[s]],y=X,b=X,w=X,Y.array[at]=y.x,Y.array[at+1]=y.y,Y.array[at+2]=y.z,Y.array[at+3]=y.w,Y.array[at+4]=b.x,Y.array[at+5]=b.y,Y.array[at+6]=b.z,Y.array[at+7]=b.w,Y.array[at+8]=w.x,Y.array[at+9]=w.y,Y.array[at+10]=w.z,Y.array[at+11]=w.w,at+=12;else if("faceVertices"===Y.boundTo)for(s=0,a=Lt.length;a>s;s++)X=Y.value[Lt[s]],y=X[0],b=X[1],w=X[2],Y.array[at]=y.x,Y.array[at+1]=y.y,Y.array[at+2]=y.z,Y.array[at+3]=y.w,Y.array[at+4]=b.x,Y.array[at+5]=b.y,Y.array[at+6]=b.z,Y.array[at+7]=b.w,Y.array[at+8]=w.x,Y.array[at+9]=w.y,Y.array[at+10]=w.z,Y.array[at+11]=w.w,at+=12;Vt.bindBuffer(Vt.ARRAY_BUFFER,Y.buffer),Vt.bufferData(Vt.ARRAY_BUFFER,Y.array,i)}n&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function g(e){for(var t=e.attributes,i=e.attributesKeys,n=0,o=i.length;o>n;n++){var r=i[n],s=t[r];if(void 0===s.buffer&&(s.buffer=Vt.createBuffer(),s.needsUpdate=!0),s.needsUpdate===!0){var a="index"===r?Vt.ELEMENT_ARRAY_BUFFER:Vt.ARRAY_BUFFER;Vt.bindBuffer(a,s.buffer),Vt.bufferData(a,s.array,Vt.STATIC_DRAW),s.needsUpdate=!1}}}function v(e,t,i,n){for(var o=i.attributes,r=t.attributes,s=t.attributesKeys,a=0,l=s.length;l>a;a++){var h=s[a],d=r[h];if(d>=0){var c=o[h];if(void 0!==c){var u=c.itemSize;Vt.bindBuffer(Vt.ARRAY_BUFFER,c.buffer),b(d),Vt.vertexAttribPointer(d,u,Vt.FLOAT,!1,0,n*u*4)}else void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[h].length?Vt.vertexAttrib2fv(d,e.defaultAttributeValues[h]):3===e.defaultAttributeValues[h].length&&Vt.vertexAttrib3fv(d,e.defaultAttributeValues[h]))}}w()}function y(){for(var e=0,t=ci.length;t>e;e++)ci[e]=0}function b(e){ci[e]=1,0===ui[e]&&(Vt.enableVertexAttribArray(e),ui[e]=1)}function w(){for(var e=0,t=ui.length;t>e;e++)ui[e]!==ci[e]&&(Vt.disableVertexAttribArray(e),ui[e]=0)}function x(e,t,i){var n=e.program.attributes;if(-1!==i.morphTargetBase&&n.position>=0?(Vt.bindBuffer(Vt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[i.morphTargetBase]),b(n.position),Vt.vertexAttribPointer(n.position,3,Vt.FLOAT,!1,0,0)):n.position>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,t.__webglVertexBuffer),b(n.position),Vt.vertexAttribPointer(n.position,3,Vt.FLOAT,!1,0,0)),i.morphTargetForcedOrder.length)for(var o=0,r=i.morphTargetForcedOrder,s=i.morphTargetInfluences;o<e.numSupportedMorphTargets&&o<r.length;)n["morphTarget"+o]>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[r[o]]),b(n["morphTarget"+o]),Vt.vertexAttribPointer(n["morphTarget"+o],3,Vt.FLOAT,!1,0,0)),n["morphNormal"+o]>=0&&e.morphNormals&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[r[o]]),b(n["morphNormal"+o]),Vt.vertexAttribPointer(n["morphNormal"+o],3,Vt.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[o]=s[r[o]],o++;else{var a,l,h=[],s=i.morphTargetInfluences,d=s.length;for(l=0;d>l;l++)a=s[l],a>0&&h.push([a,l]);h.length>e.numSupportedMorphTargets?(h.sort(M),h.length=e.numSupportedMorphTargets):h.length>e.numSupportedMorphNormals?h.sort(M):0===h.length&&h.push([0,0]);for(var c,o=0;o<e.numSupportedMorphTargets;)h[o]?(c=h[o][1],n["morphTarget"+o]>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[c]),b(n["morphTarget"+o]),Vt.vertexAttribPointer(n["morphTarget"+o],3,Vt.FLOAT,!1,0,0)),n["morphNormal"+o]>=0&&e.morphNormals&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[c]),b(n["morphNormal"+o]),Vt.vertexAttribPointer(n["morphNormal"+o],3,Vt.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[o]=s[c]):i.__webglMorphTargetInfluences[o]=0,o++}null!==e.program.uniforms.morphTargetInfluences&&Vt.uniform1fv(e.program.uniforms.morphTargetInfluences,i.__webglMorphTargetInfluences)}function _(e,t){return e.material.id!==t.material.id?t.material.id-e.material.id:e.z!==t.z?t.z-e.z:e.id-t.id}function k(e,t){return e.z!==t.z?e.z-t.z:e.id-t.id}function M(e,t){return t[0]-e[0]}function E(e,t){if(t.visible!==!1){if(t instanceof o.Scene||t instanceof o.Group);else if(j(t,e),t instanceof o.Light)Lt.push(t);else if(t instanceof o.Sprite)zt.push(t);else if(t instanceof o.LensFlare)Bt.push(t);else{var i=Pt[t.id];if(i&&(t.frustumCulled===!1||pi.intersectsObject(t)===!0)){F(t,e);for(var n=0,r=i.length;r>n;n++){var s=i[n];A(s),s.render=!0,Ut.sortObjects===!0&&(null!==t.renderDepth?s.z=t.renderDepth:(gi.setFromMatrixPosition(t.matrixWorld),gi.applyProjection(mi),s.z=gi.z))}}}for(var n=0,r=t.children.length;r>n;n++)E(e,t.children[n])}}function S(e,t,i,n,r,s){for(var a,l=e.length-1;-1!==l;l--){var h=e[l],d=h.object,c=h.buffer;if(tt(d,t),s)a=s;else{if(a=h.material,!a)continue;r&&Ut.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),Ut.setDepthTest(a.depthTest),Ut.setDepthWrite(a.depthWrite),st(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}Ut.setMaterialFaces(a),c instanceof o.BufferGeometry?Ut.renderBufferDirect(t,i,n,a,c,d):Ut.renderBuffer(t,i,n,a,c,d)}}function T(e,t,i,n,o,r,s){for(var a,l=0,h=e.length;h>l;l++){var d=e[l],c=d.object;if(c.visible){if(s)a=s;else{if(a=d[t],!a)continue;r&&Ut.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),Ut.setDepthTest(a.depthTest),Ut.setDepthWrite(a.depthWrite),st(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}Ut.renderImmediateObject(i,n,o,a,c)}}}function C(e){var t=e.object,i=t.material;i.transparent?(e.transparent=i,e.opaque=null):(e.opaque=i,e.transparent=null)}function A(e){var t=e.object,i=e.buffer,n=t.geometry,r=t.material;if(r instanceof o.MeshFaceMaterial){var s=n instanceof o.BufferGeometry?0:i.materialIndex;r=r.materials[s],e.material=r,r.transparent?Ft.push(e):Dt.push(e)}else r&&(e.material=r,r.transparent?Ft.push(e):Dt.push(e))}function j(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new o.Matrix4,e._normalMatrix=new o.Matrix3,e.addEventListener("removed",Ui));var n=e.geometry;if(void 0===n||void 0===n.__webglInit&&(n.__webglInit=!0,n.addEventListener("dispose",Oi),n instanceof o.BufferGeometry||(e instanceof o.Mesh?P(t,e,n):e instanceof o.Line?void 0===n.__webglVertexBuffer&&(r(n),h(n,e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0,n.lineDistancesNeedUpdate=!0):e instanceof o.PointCloud&&void 0===n.__webglVertexBuffer&&(i(n),l(n,e),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0))),void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof o.Mesh){if(n instanceof o.BufferGeometry)R(Pt,n,e);else if(n instanceof o.Geometry)for(var s=Ki[n.id],a=0,d=s.length;d>a;a++)R(Pt,s[a],e)}else e instanceof o.Line||e instanceof o.PointCloud?R(Pt,n,e):(e instanceof o.ImmediateRenderObject||e.immediateRenderCallback)&&D(Rt,e)}function L(e,t){for(var i,n,o=_i.get("OES_element_index_uint")?4294967296:65535,r={},s=e.morphTargets.length,a=e.morphNormals.length,l={},h=[],d=0,c=e.faces.length;c>d;d++){var u=e.faces[d],p=t?u.materialIndex:0;p in r||(r[p]={hash:p,counter:0}),i=r[p].hash+"_"+r[p].counter,i in l||(n={id:Zi++,faces3:[],materialIndex:p,vertices:0,numMorphTargets:s,numMorphNormals:a},l[i]=n,h.push(n)),l[i].vertices+3>o&&(r[p].counter+=1,i=r[p].hash+"_"+r[p].counter,i in l||(n={id:Zi++,faces3:[],materialIndex:p,vertices:0,numMorphTargets:s,numMorphNormals:a},l[i]=n,h.push(n))),l[i].faces3.push(d),l[i].vertices+=3}return h}function P(e,t,i){var n=t.material,r=!1;(void 0===Ki[i.id]||i.groupsNeedUpdate===!0)&&(delete Pt[t.id],Ki[i.id]=L(i,n instanceof o.MeshFaceMaterial),i.groupsNeedUpdate=!1);for(var a=Ki[i.id],l=0,h=a.length;h>l;l++){var c=a[l];void 0===c.__webglVertexBuffer?(s(c),d(c,t),i.verticesNeedUpdate=!0,i.morphTargetsNeedUpdate=!0,i.elementsNeedUpdate=!0,i.uvsNeedUpdate=!0,i.normalsNeedUpdate=!0,i.tangentsNeedUpdate=!0,i.colorsNeedUpdate=!0,r=!0):r=!1,(r||void 0===t.__webglActive)&&R(Pt,c,t)}t.__webglActive=!0}function R(e,t,i){var n=i.id;e[n]=e[n]||[],e[n].push({id:n,buffer:t,object:i,material:null,z:0})}function D(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function F(e,t){var i,n,r=e.geometry;if(r instanceof o.BufferGeometry)g(r);else if(e instanceof o.Mesh){r.groupsNeedUpdate===!0&&P(t,e,r);for(var s=Ki[r.id],a=0,l=s.length;l>a;a++){var h=s[a];n=c(e,h),r.groupsNeedUpdate===!0&&d(h,e),i=n.attributes&&z(n),(r.verticesNeedUpdate||r.morphTargetsNeedUpdate||r.elementsNeedUpdate||r.uvsNeedUpdate||r.normalsNeedUpdate||r.colorsNeedUpdate||r.tangentsNeedUpdate||i)&&f(h,e,Vt.DYNAMIC_DRAW,!r.dynamic,n)}r.verticesNeedUpdate=!1,r.morphTargetsNeedUpdate=!1,r.elementsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.tangentsNeedUpdate=!1,n.attributes&&B(n)}else e instanceof o.Line?(n=c(e,r),i=n.attributes&&z(n),(r.verticesNeedUpdate||r.colorsNeedUpdate||r.lineDistancesNeedUpdate||i)&&m(r,Vt.DYNAMIC_DRAW),r.verticesNeedUpdate=!1,r.colorsNeedUpdate=!1,r.lineDistancesNeedUpdate=!1,n.attributes&&B(n)):e instanceof o.PointCloud&&(n=c(e,r),i=n.attributes&&z(n),(r.verticesNeedUpdate||r.colorsNeedUpdate||e.sortParticles||i)&&p(r,Vt.DYNAMIC_DRAW,e),r.verticesNeedUpdate=!1,r.colorsNeedUpdate=!1,n.attributes&&B(n))}function z(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function B(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function V(e){e instanceof o.Mesh||e instanceof o.PointCloud||e instanceof o.Line?delete Pt[e.id]:(e instanceof o.ImmediateRenderObject||e.immediateRenderCallback)&&U(Rt,e),delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive}function U(e,t){for(var i=e.length-1;i>=0;i--)e[i].object===t&&e.splice(i,1)}function O(e,t,i,n){e.addEventListener("dispose",Hi);var r;if(e instanceof o.MeshDepthMaterial?r="depth":e instanceof o.MeshNormalMaterial?r="normal":e instanceof o.MeshBasicMaterial?r="basic":e instanceof o.MeshLambertMaterial?r="lambert":e instanceof o.MeshPhongMaterial?r="phong":e instanceof o.LineBasicMaterial?r="basic":e instanceof o.LineDashedMaterial?r="dashed":e instanceof o.PointCloudMaterial&&(r="particle_basic"),r){var s=o.ShaderLib[r];e.__webglShader={uniforms:o.UniformsUtils.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}}else e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};var a=vt(t),l=yt(t),h=gt(n),d={precision:xt,supportsVertexTextures:Ti,map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,vertexColors:e.vertexColors,fog:i,useFog:e.fog,fogExp:i instanceof o.FogExp2,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:Ct,skinning:e.skinning,maxBones:h,useVertexTexture:Ci&&n&&n.skeleton&&n.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:Ut.maxMorphTargets,maxMorphNormals:Ut.maxMorphNormals,maxDirLights:a.directional,maxPointLights:a.point,maxSpotLights:a.spot,maxHemiLights:a.hemi,maxShadows:l,shadowMapEnabled:Ut.shadowMapEnabled&&n.receiveShadow&&l>0,shadowMapType:Ut.shadowMapType,shadowMapDebug:Ut.shadowMapDebug,shadowMapCascade:Ut.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===o.DoubleSide,flipSided:e.side===o.BackSide},c=[];if(r?c.push(r):(c.push(e.fragmentShader),c.push(e.vertexShader)),void 0!==e.defines)for(var u in e.defines)c.push(u),c.push(e.defines[u]);for(var u in d)c.push(u),c.push(d[u]);for(var p,m=c.join(),f=0,g=Ot.length;g>f;f++){var v=Ot[f];if(v.code===m){p=v,p.usedTimes++;break}}void 0===p&&(p=new o.WebGLProgram(Ut,m,e,d),Ot.push(p),Ut.info.memory.programs=Ot.length),e.program=p;var y=p.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;for(var b,w="morphTarget",x=0;x<Ut.maxMorphTargets;x++)b=w+x,y[b]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;var b,w="morphNormal";for(x=0;x<Ut.maxMorphNormals;x++)b=w+x,y[b]>=0&&e.numSupportedMorphNormals++}e.uniformsList=[];for(var _ in e.__webglShader.uniforms){var k=e.program.uniforms[_];k&&e.uniformsList.push([e.__webglShader.uniforms[_],k])}}function N(e,t,i,n,r){Wt=0,n.needsUpdate&&(n.program&&Yi(n),O(n,t,i,r),n.needsUpdate=!1),n.morphTargets&&(r.__webglMorphTargetInfluences||(r.__webglMorphTargetInfluences=new Float32Array(Ut.maxMorphTargets)));var s=!1,a=!1,l=!1,h=n.program,d=h.uniforms,c=n.__webglShader.uniforms;if(h.id!==Nt&&(Vt.useProgram(h.program),Nt=h.id,s=!0,a=!0,l=!0),n.id!==Ht&&(-1===Ht&&(l=!0),Ht=n.id,a=!0),(s||e!==Gt)&&(Vt.uniformMatrix4fv(d.projectionMatrix,!1,e.projectionMatrix.elements),Ct&&Vt.uniform1f(d.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==Gt&&(Gt=e),(n instanceof o.ShaderMaterial||n instanceof o.MeshPhongMaterial||n.envMap)&&null!==d.cameraPosition&&(gi.setFromMatrixPosition(e.matrixWorld),Vt.uniform3f(d.cameraPosition,gi.x,gi.y,gi.z)),(n instanceof o.MeshPhongMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.ShaderMaterial||n.skinning)&&null!==d.viewMatrix&&Vt.uniformMatrix4fv(d.viewMatrix,!1,e.matrixWorldInverse.elements)),n.skinning)if(r.bindMatrix&&null!==d.bindMatrix&&Vt.uniformMatrix4fv(d.bindMatrix,!1,r.bindMatrix.elements),r.bindMatrixInverse&&null!==d.bindMatrixInverse&&Vt.uniformMatrix4fv(d.bindMatrixInverse,!1,r.bindMatrixInverse.elements),Ci&&r.skeleton&&r.skeleton.useVertexTexture){if(null!==d.boneTexture){var u=J();Vt.uniform1i(d.boneTexture,u),Ut.setTexture(r.skeleton.boneTexture,u)}null!==d.boneTextureWidth&&Vt.uniform1i(d.boneTextureWidth,r.skeleton.boneTextureWidth),null!==d.boneTextureHeight&&Vt.uniform1i(d.boneTextureHeight,r.skeleton.boneTextureHeight)}else r.skeleton&&r.skeleton.boneMatrices&&null!==d.boneGlobalMatrices&&Vt.uniformMatrix4fv(d.boneGlobalMatrices,!1,r.skeleton.boneMatrices);return a&&(i&&n.fog&&W(c,i),(n instanceof o.MeshPhongMaterial||n instanceof o.MeshLambertMaterial||n.lights)&&(yi&&(l=!0,ot(t),yi=!1),l?(K(c,bi),Z(c,!0)):Z(c,!1)),(n instanceof o.MeshBasicMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.MeshPhongMaterial)&&I(c,n),n instanceof o.LineBasicMaterial?H(c,n):n instanceof o.LineDashedMaterial?(H(c,n),q(c,n)):n instanceof o.PointCloudMaterial?G(c,n):n instanceof o.MeshPhongMaterial?X(c,n):n instanceof o.MeshLambertMaterial?Y(c,n):n instanceof o.MeshDepthMaterial?(c.mNear.value=e.near,c.mFar.value=e.far,c.opacity.value=n.opacity):n instanceof o.MeshNormalMaterial&&(c.opacity.value=n.opacity),r.receiveShadow&&!n._shadowPass&&Q(c,t),et(n.uniformsList)),$(d,r),null!==d.modelMatrix&&Vt.uniformMatrix4fv(d.modelMatrix,!1,r.matrixWorld.elements),h}function I(e,t){e.opacity.value=t.opacity,Ut.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var i;if(t.map?i=t.map:t.specularMap?i=t.specularMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.alphaMap&&(i=t.alphaMap),void 0!==i){var n=i.offset,r=i.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof o.WebGLRenderTargetCube?1:-1,e.reflectivity.value=Ut.gammaInput?t.reflectivity:t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof o.CubeRefractionMapping}function H(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function q(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function G(e,t){e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=bt.height/2,e.map.value=t.map}function W(e,t){e.fogColor.value=t.color,t instanceof o.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof o.FogExp2&&(e.fogDensity.value=t.density)}function X(e,t){e.shininess.value=t.shininess,Ut.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function Y(e,t){Ut.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function K(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function Z(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function Q(e,t){if(e.shadowMatrix)for(var i=0,n=0,r=t.length;r>n;n++){var s=t[n];s.castShadow&&(s instanceof o.SpotLight||s instanceof o.DirectionalLight&&!s.shadowCascade)&&(e.shadowMap.value[i]=s.shadowMap,e.shadowMapSize.value[i]=s.shadowMapSize,e.shadowMatrix.value[i]=s.shadowMatrix,e.shadowDarkness.value[i]=s.shadowDarkness,e.shadowBias.value[i]=s.shadowBias,i++)}}function $(e,t){Vt.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&Vt.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}function J(){var e=Wt;return e>=ki&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+ki),Wt+=1,e}function et(e){for(var t,i,n,r=0,s=e.length;s>r;r++){var a=e[r][0];if(a.needsUpdate!==!1){var l=a.type,h=a.value,d=e[r][1];switch(l){case"1i":Vt.uniform1i(d,h);break;case"1f":Vt.uniform1f(d,h);break;case"2f":Vt.uniform2f(d,h[0],h[1]);break;case"3f":Vt.uniform3f(d,h[0],h[1],h[2]);break;case"4f":Vt.uniform4f(d,h[0],h[1],h[2],h[3]);break;case"1iv":Vt.uniform1iv(d,h);break;case"3iv":Vt.uniform3iv(d,h);break;case"1fv":Vt.uniform1fv(d,h);break;case"2fv":Vt.uniform2fv(d,h);break;case"3fv":Vt.uniform3fv(d,h);break;case"4fv":Vt.uniform4fv(d,h);break;case"Matrix3fv":Vt.uniformMatrix3fv(d,!1,h);break;case"Matrix4fv":Vt.uniformMatrix4fv(d,!1,h);break;case"i":Vt.uniform1i(d,h);break;case"f":Vt.uniform1f(d,h);break;case"v2":Vt.uniform2f(d,h.x,h.y);break;case"v3":Vt.uniform3f(d,h.x,h.y,h.z);break;case"v4":Vt.uniform4f(d,h.x,h.y,h.z,h.w);break;case"c":Vt.uniform3f(d,h.r,h.g,h.b);break;case"iv1":Vt.uniform1iv(d,h);break;case"iv":Vt.uniform3iv(d,h);break;case"fv1":Vt.uniform1fv(d,h);break;case"fv":Vt.uniform3fv(d,h);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*h.length));for(var c=0,u=h.length;u>c;c++)n=2*c,a._array[n]=h[c].x,a._array[n+1]=h[c].y;Vt.uniform2fv(d,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*h.length));for(var c=0,u=h.length;u>c;c++)n=3*c,a._array[n]=h[c].x,a._array[n+1]=h[c].y,a._array[n+2]=h[c].z;Vt.uniform3fv(d,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*h.length));for(var c=0,u=h.length;u>c;c++)n=4*c,a._array[n]=h[c].x,a._array[n+1]=h[c].y,a._array[n+2]=h[c].z,a._array[n+3]=h[c].w;Vt.uniform4fv(d,a._array);break;case"m3":Vt.uniformMatrix3fv(d,!1,h.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*h.length));for(var c=0,u=h.length;u>c;c++)h[c].flattenToArrayOffset(a._array,9*c);Vt.uniformMatrix3fv(d,!1,a._array);break;case"m4":Vt.uniformMatrix4fv(d,!1,h.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*h.length));for(var c=0,u=h.length;u>c;c++)h[c].flattenToArrayOffset(a._array,16*c);Vt.uniformMatrix4fv(d,!1,a._array);break;case"t":if(t=h,i=J(),Vt.uniform1i(d,i),!t)continue;t instanceof o.CubeTexture||t.image instanceof Array&&6===t.image.length?ht(t,i):t instanceof o.WebGLRenderTargetCube?dt(t,i):Ut.setTexture(t,i);break;case"tv":void 0===a._array&&(a._array=[]);for(var c=0,u=a.value.length;u>c;c++)a._array[c]=J();Vt.uniform1iv(d,a._array);for(var c=0,u=a.value.length;u>c;c++)t=a.value[c],i=a._array[c],t&&Ut.setTexture(t,i);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+l)}}}}function tt(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function it(e,t,i,n){e[t]=i.r*i.r*n,e[t+1]=i.g*i.g*n,e[t+2]=i.b*i.b*n}function nt(e,t,i,n){e[t]=i.r*n,e[t+1]=i.g*n,e[t+2]=i.b*n}function ot(e){var t,i,n,r,s,a,l,h,d,c=0,u=0,p=0,m=bi,f=m.directional.colors,g=m.directional.positions,v=m.point.colors,y=m.point.positions,b=m.point.distances,w=m.spot.colors,x=m.spot.positions,_=m.spot.distances,k=m.spot.directions,M=m.spot.anglesCos,E=m.spot.exponents,S=m.hemi.skyColors,T=m.hemi.groundColors,C=m.hemi.positions,A=0,j=0,L=0,P=0,R=0,D=0,F=0,z=0,B=0,V=0,U=0,O=0;for(t=0,i=e.length;i>t;t++)if(n=e[t],!n.onlyShadow)if(r=n.color,l=n.intensity,d=n.distance,n instanceof o.AmbientLight){if(!n.visible)continue;
Ut.gammaInput?(c+=r.r*r.r,u+=r.g*r.g,p+=r.b*r.b):(c+=r.r,u+=r.g,p+=r.b)}else if(n instanceof o.DirectionalLight){if(R+=1,!n.visible)continue;vi.setFromMatrixPosition(n.matrixWorld),gi.setFromMatrixPosition(n.target.matrixWorld),vi.sub(gi),vi.normalize(),B=3*A,g[B]=vi.x,g[B+1]=vi.y,g[B+2]=vi.z,Ut.gammaInput?it(f,B,r,l*l):nt(f,B,r,l),A+=1}else if(n instanceof o.PointLight){if(D+=1,!n.visible)continue;V=3*j,Ut.gammaInput?it(v,V,r,l*l):nt(v,V,r,l),gi.setFromMatrixPosition(n.matrixWorld),y[V]=gi.x,y[V+1]=gi.y,y[V+2]=gi.z,b[j]=d,j+=1}else if(n instanceof o.SpotLight){if(F+=1,!n.visible)continue;U=3*L,Ut.gammaInput?it(w,U,r,l*l):nt(w,U,r,l),vi.setFromMatrixPosition(n.matrixWorld),x[U]=vi.x,x[U+1]=vi.y,x[U+2]=vi.z,_[L]=d,gi.setFromMatrixPosition(n.target.matrixWorld),vi.sub(gi),vi.normalize(),k[U]=vi.x,k[U+1]=vi.y,k[U+2]=vi.z,M[L]=Math.cos(n.angle),E[L]=n.exponent,L+=1}else if(n instanceof o.HemisphereLight){if(z+=1,!n.visible)continue;vi.setFromMatrixPosition(n.matrixWorld),vi.normalize(),O=3*P,C[O]=vi.x,C[O+1]=vi.y,C[O+2]=vi.z,s=n.color,a=n.groundColor,Ut.gammaInput?(h=l*l,it(S,O,s,h),it(T,O,a,h)):(nt(S,O,s,l),nt(T,O,a,l)),P+=1}for(t=3*A,i=Math.max(f.length,3*R);i>t;t++)f[t]=0;for(t=3*j,i=Math.max(v.length,3*D);i>t;t++)v[t]=0;for(t=3*L,i=Math.max(w.length,3*F);i>t;t++)w[t]=0;for(t=3*P,i=Math.max(S.length,3*z);i>t;t++)S[t]=0;for(t=3*P,i=Math.max(T.length,3*z);i>t;t++)T[t]=0;m.directional.length=A,m.point.length=j,m.spot.length=L,m.hemi.length=P,m.ambient[0]=c,m.ambient[1]=u,m.ambient[2]=p}function rt(e){e!==oi&&(Vt.lineWidth(e),oi=e)}function st(e,t,i){ti!==e&&(e?Vt.enable(Vt.POLYGON_OFFSET_FILL):Vt.disable(Vt.POLYGON_OFFSET_FILL),ti=e),!e||ii===t&&ni===i||(Vt.polygonOffset(t,i),ii=t,ni=i)}function at(e,t,i){var n;i?(Vt.texParameteri(e,Vt.TEXTURE_WRAP_S,ft(t.wrapS)),Vt.texParameteri(e,Vt.TEXTURE_WRAP_T,ft(t.wrapT)),Vt.texParameteri(e,Vt.TEXTURE_MAG_FILTER,ft(t.magFilter)),Vt.texParameteri(e,Vt.TEXTURE_MIN_FILTER,ft(t.minFilter))):(Vt.texParameteri(e,Vt.TEXTURE_WRAP_S,Vt.CLAMP_TO_EDGE),Vt.texParameteri(e,Vt.TEXTURE_WRAP_T,Vt.CLAMP_TO_EDGE),Vt.texParameteri(e,Vt.TEXTURE_MAG_FILTER,mt(t.magFilter)),Vt.texParameteri(e,Vt.TEXTURE_MIN_FILTER,mt(t.minFilter))),n=_i.get("EXT_texture_filter_anisotropic"),n&&t.type!==o.FloatType&&(t.anisotropy>1||t.__oldAnisotropy)&&(Vt.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Ut.getMaxAnisotropy())),t.__oldAnisotropy=t.anisotropy)}function lt(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height),n=document.createElement("canvas");n.width=Math.floor(e.width*i),n.height=Math.floor(e.height*i);var o=n.getContext("2d");return o.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.log("THREE.WebGLRenderer:",e,"is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height+"."),n}return e}function ht(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",Ni),e.image.__webglTextureCube=Vt.createTexture(),Ut.info.memory.textures++),Vt.activeTexture(Vt.TEXTURE0+t),Vt.bindTexture(Vt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Vt.pixelStorei(Vt.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var i=e instanceof o.CompressedTexture,n=e.image[0]instanceof o.DataTexture,r=[],s=0;6>s;s++)r[s]=!Ut.autoScaleCubemaps||i||n?n?e.image[s].image:e.image[s]:lt(e.image[s],Si);var a=r[0],l=o.Math.isPowerOfTwo(a.width)&&o.Math.isPowerOfTwo(a.height),h=ft(e.format),d=ft(e.type);at(Vt.TEXTURE_CUBE_MAP,e,l);for(var s=0;6>s;s++)if(i)for(var c,u=r[s].mipmaps,p=0,m=u.length;m>p;p++)c=u[p],e.format!==o.RGBAFormat&&e.format!==o.RGBFormat?Ri().indexOf(h)>-1?Vt.compressedTexImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+s,p,h,c.width,c.height,0,c.data):console.warn("Attempt to load unsupported compressed texture format"):Vt.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+s,p,h,c.width,c.height,0,h,d,c.data);else n?Vt.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,h,r[s].width,r[s].height,0,h,d,r[s].data):Vt.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,h,h,d,r[s]);e.generateMipmaps&&l&&Vt.generateMipmap(Vt.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Vt.activeTexture(Vt.TEXTURE0+t),Vt.bindTexture(Vt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function dt(e,t){Vt.activeTexture(Vt.TEXTURE0+t),Vt.bindTexture(Vt.TEXTURE_CUBE_MAP,e.__webglTexture)}function ct(e,t,i){Vt.bindFramebuffer(Vt.FRAMEBUFFER,e),Vt.framebufferTexture2D(Vt.FRAMEBUFFER,Vt.COLOR_ATTACHMENT0,i,t.__webglTexture,0)}function ut(e,t){Vt.bindRenderbuffer(Vt.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Vt.renderbufferStorage(Vt.RENDERBUFFER,Vt.DEPTH_COMPONENT16,t.width,t.height),Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_ATTACHMENT,Vt.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Vt.renderbufferStorage(Vt.RENDERBUFFER,Vt.DEPTH_STENCIL,t.width,t.height),Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_STENCIL_ATTACHMENT,Vt.RENDERBUFFER,e)):Vt.renderbufferStorage(Vt.RENDERBUFFER,Vt.RGBA4,t.width,t.height)}function pt(e){e instanceof o.WebGLRenderTargetCube?(Vt.bindTexture(Vt.TEXTURE_CUBE_MAP,e.__webglTexture),Vt.generateMipmap(Vt.TEXTURE_CUBE_MAP),Vt.bindTexture(Vt.TEXTURE_CUBE_MAP,null)):(Vt.bindTexture(Vt.TEXTURE_2D,e.__webglTexture),Vt.generateMipmap(Vt.TEXTURE_2D),Vt.bindTexture(Vt.TEXTURE_2D,null))}function mt(e){return e===o.NearestFilter||e===o.NearestMipMapNearestFilter||e===o.NearestMipMapLinearFilter?Vt.NEAREST:Vt.LINEAR}function ft(e){var t;if(e===o.RepeatWrapping)return Vt.REPEAT;if(e===o.ClampToEdgeWrapping)return Vt.CLAMP_TO_EDGE;if(e===o.MirroredRepeatWrapping)return Vt.MIRRORED_REPEAT;if(e===o.NearestFilter)return Vt.NEAREST;if(e===o.NearestMipMapNearestFilter)return Vt.NEAREST_MIPMAP_NEAREST;if(e===o.NearestMipMapLinearFilter)return Vt.NEAREST_MIPMAP_LINEAR;if(e===o.LinearFilter)return Vt.LINEAR;if(e===o.LinearMipMapNearestFilter)return Vt.LINEAR_MIPMAP_NEAREST;if(e===o.LinearMipMapLinearFilter)return Vt.LINEAR_MIPMAP_LINEAR;if(e===o.UnsignedByteType)return Vt.UNSIGNED_BYTE;if(e===o.UnsignedShort4444Type)return Vt.UNSIGNED_SHORT_4_4_4_4;if(e===o.UnsignedShort5551Type)return Vt.UNSIGNED_SHORT_5_5_5_1;if(e===o.UnsignedShort565Type)return Vt.UNSIGNED_SHORT_5_6_5;if(e===o.ByteType)return Vt.BYTE;if(e===o.ShortType)return Vt.SHORT;if(e===o.UnsignedShortType)return Vt.UNSIGNED_SHORT;if(e===o.IntType)return Vt.INT;if(e===o.UnsignedIntType)return Vt.UNSIGNED_INT;if(e===o.FloatType)return Vt.FLOAT;if(e===o.AlphaFormat)return Vt.ALPHA;if(e===o.RGBFormat)return Vt.RGB;if(e===o.RGBAFormat)return Vt.RGBA;if(e===o.LuminanceFormat)return Vt.LUMINANCE;if(e===o.LuminanceAlphaFormat)return Vt.LUMINANCE_ALPHA;if(e===o.AddEquation)return Vt.FUNC_ADD;if(e===o.SubtractEquation)return Vt.FUNC_SUBTRACT;if(e===o.ReverseSubtractEquation)return Vt.FUNC_REVERSE_SUBTRACT;if(e===o.ZeroFactor)return Vt.ZERO;if(e===o.OneFactor)return Vt.ONE;if(e===o.SrcColorFactor)return Vt.SRC_COLOR;if(e===o.OneMinusSrcColorFactor)return Vt.ONE_MINUS_SRC_COLOR;if(e===o.SrcAlphaFactor)return Vt.SRC_ALPHA;if(e===o.OneMinusSrcAlphaFactor)return Vt.ONE_MINUS_SRC_ALPHA;if(e===o.DstAlphaFactor)return Vt.DST_ALPHA;if(e===o.OneMinusDstAlphaFactor)return Vt.ONE_MINUS_DST_ALPHA;if(e===o.DstColorFactor)return Vt.DST_COLOR;if(e===o.OneMinusDstColorFactor)return Vt.ONE_MINUS_DST_COLOR;if(e===o.SrcAlphaSaturateFactor)return Vt.SRC_ALPHA_SATURATE;if(t=_i.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===o.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===o.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===o.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===o.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=_i.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===o.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===o.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===o.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===o.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=_i.get("EXT_blend_minmax"),null!==t){if(e===o.MinEquation)return t.MIN_EXT;if(e===o.MaxEquation)return t.MAX_EXT}return 0}function gt(e){if(Ci&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var t=Vt.getParameter(Vt.MAX_VERTEX_UNIFORM_VECTORS),i=Math.floor((t-20)/4),n=i;return void 0!==e&&e instanceof o.SkinnedMesh&&(n=Math.min(e.skeleton.bones.length,n),n<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")),n}function vt(e){for(var t=0,i=0,n=0,r=0,s=0,a=e.length;a>s;s++){var l=e[s];l.onlyShadow||l.visible===!1||(l instanceof o.DirectionalLight&&t++,l instanceof o.PointLight&&i++,l instanceof o.SpotLight&&n++,l instanceof o.HemisphereLight&&r++)}return{directional:t,point:i,spot:n,hemi:r}}function yt(e){for(var t=0,i=0,n=e.length;n>i;i++){var r=e[i];r.castShadow&&(r instanceof o.SpotLight&&t++,r instanceof o.DirectionalLight&&!r.shadowCascade&&t++)}return t}console.log("THREE.WebGLRenderer",o.REVISION),e=e||{};var bt=void 0!==e.canvas?e.canvas:document.createElement("canvas"),wt=void 0!==e.context?e.context:null,xt=void 0!==e.precision?e.precision:"highp",_t=void 0!==e.alpha?e.alpha:!1,kt=void 0!==e.depth?e.depth:!0,Mt=void 0!==e.stencil?e.stencil:!0,Et=void 0!==e.antialias?e.antialias:!1,St=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,Tt=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,Ct=void 0!==e.logarithmicDepthBuffer?e.logarithmicDepthBuffer:!1,At=new o.Color(0),jt=0,Lt=[],Pt={},Rt=[],Dt=[],Ft=[],zt=[],Bt=[];this.domElement=bt,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==n.devicePixelRatio?n.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=o.PCFShadowMap,this.shadowMapCullFace=o.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Vt,Ut=this,Ot=[],Nt=null,It=null,Ht=-1,qt=-1,Gt=null,Wt=0,Xt=-1,Yt=-1,Kt=-1,Zt=-1,Qt=-1,$t=-1,Jt=-1,ei=-1,ti=null,ii=null,ni=null,oi=null,ri=0,si=0,ai=bt.width,li=bt.height,hi=0,di=0,ci=new Uint8Array(16),ui=new Uint8Array(16),pi=new o.Frustum,mi=new o.Matrix4,fi=new o.Matrix4,gi=new o.Vector3,vi=new o.Vector3,yi=!0,bi={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var wi={alpha:_t,depth:kt,stencil:Mt,antialias:Et,premultipliedAlpha:St,preserveDrawingBuffer:Tt};if(Vt=wt||bt.getContext("webgl",wi)||bt.getContext("experimental-webgl",wi),null===Vt)throw null!==bt.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context."}catch(xi){console.error(xi)}void 0===Vt.getShaderPrecisionFormat&&(Vt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var _i=new o.WebGLExtensions(Vt);_i.get("OES_texture_float"),_i.get("OES_texture_float_linear"),_i.get("OES_standard_derivatives"),Ct&&_i.get("EXT_frag_depth"),t(),this.context=Vt;var ki=Vt.getParameter(Vt.MAX_TEXTURE_IMAGE_UNITS),Mi=Vt.getParameter(Vt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Ei=Vt.getParameter(Vt.MAX_TEXTURE_SIZE),Si=Vt.getParameter(Vt.MAX_CUBE_MAP_TEXTURE_SIZE),Ti=Mi>0,Ci=Ti&&_i.get("OES_texture_float"),Ai=Vt.getShaderPrecisionFormat(Vt.VERTEX_SHADER,Vt.HIGH_FLOAT),ji=Vt.getShaderPrecisionFormat(Vt.VERTEX_SHADER,Vt.MEDIUM_FLOAT),Li=(Vt.getShaderPrecisionFormat(Vt.VERTEX_SHADER,Vt.LOW_FLOAT),Vt.getShaderPrecisionFormat(Vt.FRAGMENT_SHADER,Vt.HIGH_FLOAT)),Pi=Vt.getShaderPrecisionFormat(Vt.FRAGMENT_SHADER,Vt.MEDIUM_FLOAT),Ri=(Vt.getShaderPrecisionFormat(Vt.FRAGMENT_SHADER,Vt.LOW_FLOAT),function(){var e;return function(){if(void 0!==e)return e;if(e=[],_i.get("WEBGL_compressed_texture_pvrtc")||_i.get("WEBGL_compressed_texture_s3tc"))for(var t=Vt.getParameter(Vt.COMPRESSED_TEXTURE_FORMATS),i=0;i<t.length;i++)e.push(t[i]);return e}}()),Di=Ai.precision>0&&Li.precision>0,Fi=ji.precision>0&&Pi.precision>0;"highp"!==xt||Di||(Fi?(xt="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(xt="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==xt||Fi||(xt="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var zi=new o.ShadowMapPlugin(this,Lt,Pt,Rt),Bi=new o.SpritePlugin(this,zt),Vi=new o.LensFlarePlugin(this,Bt);this.getContext=function(){return Vt},this.supportsVertexTextures=function(){return Ti},this.supportsFloatTextures=function(){return _i.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return _i.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return _i.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return _i.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return _i.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=_i.get("EXT_texture_filter_anisotropic");return e=null!==t?Vt.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return xt},this.setSize=function(e,t,i){bt.width=e*this.devicePixelRatio,bt.height=t*this.devicePixelRatio,i!==!1&&(bt.style.width=e+"px",bt.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,n){ri=e*this.devicePixelRatio,si=t*this.devicePixelRatio,ai=i*this.devicePixelRatio,li=n*this.devicePixelRatio,Vt.viewport(ri,si,ai,li)},this.setScissor=function(e,t,i,n){Vt.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,i*this.devicePixelRatio,n*this.devicePixelRatio)},this.enableScissorTest=function(e){e?Vt.enable(Vt.SCISSOR_TEST):Vt.disable(Vt.SCISSOR_TEST)},this.setClearColor=function(e,t){At.set(e),jt=void 0!==t?t:1,Vt.clearColor(At.r,At.g,At.b,jt)},this.setClearColorHex=function(e,t){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return At},this.getClearAlpha=function(){return jt},this.clear=function(e,t,i){var n=0;(void 0===e||e)&&(n|=Vt.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=Vt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=Vt.STENCIL_BUFFER_BIT),Vt.clear(n)},this.clearColor=function(){Vt.clear(Vt.COLOR_BUFFER_BIT)},this.clearDepth=function(){Vt.clear(Vt.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Vt.clear(Vt.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,i,n){this.setRenderTarget(e),this.clear(t,i,n)},this.resetGLState=function(){Nt=null,Gt=null,Kt=-1,Jt=-1,ei=-1,Xt=-1,Yt=-1,qt=-1,Ht=-1,yi=!0};var Ui=function(e){var t=e.target;t.traverse(function(e){e.removeEventListener("remove",Ui),V(e)})},Oi=function(e){var t=e.target;t.removeEventListener("dispose",Oi),Gi(t)},Ni=function(e){var t=e.target;t.removeEventListener("dispose",Ni),Wi(t),Ut.info.memory.textures--},Ii=function(e){var t=e.target;t.removeEventListener("dispose",Ii),Xi(t),Ut.info.memory.textures--},Hi=function(e){var t=e.target;t.removeEventListener("dispose",Hi),Yi(t)},qi=function(e){for(var t=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],i=0,n=t.length;n>i;i++){var o=t[i];void 0!==e[o]&&(Vt.deleteBuffer(e[o]),delete e[o])}if(void 0!==e.__webglCustomAttributesList){for(var o in e.__webglCustomAttributesList)Vt.deleteBuffer(e.__webglCustomAttributesList[o].buffer);delete e.__webglCustomAttributesList}Ut.info.memory.geometries--},Gi=function(e){if(delete e.__webglInit,e instanceof o.BufferGeometry){for(var t in e.attributes){var i=e.attributes[t];void 0!==i.buffer&&(Vt.deleteBuffer(i.buffer),delete i.buffer)}Ut.info.memory.geometries--}else{var n=Ki[e.id];if(void 0!==n){for(var r=0,s=n.length;s>r;r++){var a=n[r];if(void 0!==a.numMorphTargets){for(var l=0,h=a.numMorphTargets;h>l;l++)Vt.deleteBuffer(a.__webglMorphTargetsBuffers[l]);delete a.__webglMorphTargetsBuffers}if(void 0!==a.numMorphNormals){for(var l=0,h=a.numMorphNormals;h>l;l++)Vt.deleteBuffer(a.__webglMorphNormalsBuffers[l]);delete a.__webglMorphNormalsBuffers}qi(a)}delete Ki[e.id]}else qi(e)}qt=-1},Wi=function(e){if(e.image&&e.image.__webglTextureCube)Vt.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube;else{if(void 0===e.__webglInit)return;Vt.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit}},Xi=function(e){if(e&&void 0!==e.__webglTexture){if(Vt.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof o.WebGLRenderTargetCube)for(var t=0;6>t;t++)Vt.deleteFramebuffer(e.__webglFramebuffer[t]),Vt.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Vt.deleteFramebuffer(e.__webglFramebuffer),Vt.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}},Yi=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var i,n,o,r=!1;for(i=0,n=Ot.length;n>i;i++)if(o=Ot[i],o.program===t){o.usedTimes--,0===o.usedTimes&&(r=!0);break}if(r===!0){var s=[];for(i=0,n=Ot.length;n>i;i++)o=Ot[i],o.program!==t&&s.push(o);Ot=s,Vt.deleteProgram(t),Ut.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,i){if(y(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Vt.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Vt.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Vt.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Vt.createBuffer()),e.hasPositions&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglVertexBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,e.positionArray,Vt.DYNAMIC_DRAW),b(t.attributes.position),Vt.vertexAttribPointer(t.attributes.position,3,Vt.FLOAT,!1,0,0)),e.hasNormals){if(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglNormalBuffer),i.shading===o.FlatShading){var n,r,s,a,l,h,d,c,u,p,m,f,g,v,x=3*e.count;for(v=0;x>v;v+=9)g=e.normalArray,a=g[v],d=g[v+1],p=g[v+2],l=g[v+3],c=g[v+4],m=g[v+5],h=g[v+6],u=g[v+7],f=g[v+8],n=(a+l+h)/3,r=(d+c+u)/3,s=(p+m+f)/3,g[v]=n,g[v+1]=r,g[v+2]=s,g[v+3]=n,g[v+4]=r,g[v+5]=s,g[v+6]=n,g[v+7]=r,g[v+8]=s}Vt.bufferData(Vt.ARRAY_BUFFER,e.normalArray,Vt.DYNAMIC_DRAW),b(t.attributes.normal),Vt.vertexAttribPointer(t.attributes.normal,3,Vt.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglUvBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,e.uvArray,Vt.DYNAMIC_DRAW),b(t.attributes.uv),Vt.vertexAttribPointer(t.attributes.uv,2,Vt.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==o.NoColors&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,e.__webglColorBuffer),Vt.bufferData(Vt.ARRAY_BUFFER,e.colorArray,Vt.DYNAMIC_DRAW),b(t.attributes.color),Vt.vertexAttribPointer(t.attributes.color,3,Vt.FLOAT,!1,0,0)),w(),Vt.drawArrays(Vt.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,r,s){if(n.visible!==!1){var a=N(e,t,i,n,s),l=!1,h=n.wireframe?1:0,d=16777215*r.id+2*a.id+h;if(d!==qt&&(qt=d,l=!0),l&&y(),s instanceof o.Mesh){var c=n.wireframe===!0?Vt.LINES:Vt.TRIANGLES,u=r.attributes.index;if(u){var p,m;u.array instanceof Uint32Array&&_i.get("OES_element_index_uint")?(p=Vt.UNSIGNED_INT,m=4):(p=Vt.UNSIGNED_SHORT,m=2);var f=r.offsets;if(0===f.length)l&&(v(n,a,r,0),Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,u.buffer)),Vt.drawElements(c,u.array.length,p,0),Ut.info.render.calls++,Ut.info.render.vertices+=u.array.length,Ut.info.render.faces+=u.array.length/3;else{l=!0;for(var g=0,b=f.length;b>g;g++){var w=f[g].index;l&&(v(n,a,r,w),Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,u.buffer)),Vt.drawElements(c,f[g].count,p,f[g].start*m),Ut.info.render.calls++,Ut.info.render.vertices+=f[g].count,Ut.info.render.faces+=f[g].count/3}}}else{l&&v(n,a,r,0);var x=r.attributes.position;Vt.drawArrays(c,0,x.array.length/3),Ut.info.render.calls++,Ut.info.render.vertices+=x.array.length/3,Ut.info.render.faces+=x.array.length/9}}else if(s instanceof o.PointCloud){l&&v(n,a,r,0);var x=r.attributes.position;Vt.drawArrays(Vt.POINTS,0,x.array.length/3),Ut.info.render.calls++,Ut.info.render.points+=x.array.length/3}else if(s instanceof o.Line){var c=s.mode===o.LineStrip?Vt.LINE_STRIP:Vt.LINES;rt(n.linewidth);var u=r.attributes.index;if(u){var p,m;u.array instanceof Uint32Array?(p=Vt.UNSIGNED_INT,m=4):(p=Vt.UNSIGNED_SHORT,m=2);var f=r.offsets;if(0===f.length)l&&(v(n,a,r,0),Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,u.buffer)),Vt.drawElements(c,u.array.length,p,0),Ut.info.render.calls++,Ut.info.render.vertices+=u.array.length;else{f.length>1&&(l=!0);for(var g=0,b=f.length;b>g;g++){var w=f[g].index;l&&(v(n,a,r,w),Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,u.buffer)),Vt.drawElements(c,f[g].count,p,f[g].start*m),Ut.info.render.calls++,Ut.info.render.vertices+=f[g].count}}}else{l&&v(n,a,r,0);var x=r.attributes.position;Vt.drawArrays(c,0,x.array.length/3),Ut.info.render.calls++,Ut.info.render.points+=x.array.length/3}}}},this.renderBuffer=function(e,t,i,n,r,s){if(n.visible!==!1){var a=N(e,t,i,n,s),l=a.attributes,h=!1,d=n.wireframe?1:0,c=16777215*r.id+2*a.id+d;if(c!==qt&&(qt=c,h=!0),h&&y(),!n.morphTargets&&l.position>=0?h&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglVertexBuffer),b(l.position),Vt.vertexAttribPointer(l.position,3,Vt.FLOAT,!1,0,0)):s.morphTargetBase&&x(n,r,s),h){if(r.__webglCustomAttributesList)for(var u=0,p=r.__webglCustomAttributesList.length;p>u;u++){var m=r.__webglCustomAttributesList[u];l[m.buffer.belongsToAttribute]>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,m.buffer),b(l[m.buffer.belongsToAttribute]),Vt.vertexAttribPointer(l[m.buffer.belongsToAttribute],m.size,Vt.FLOAT,!1,0,0))}l.color>=0&&(s.geometry.colors.length>0||s.geometry.faces.length>0?(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglColorBuffer),b(l.color),Vt.vertexAttribPointer(l.color,3,Vt.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&Vt.vertexAttrib3fv(l.color,n.defaultAttributeValues.color)),l.normal>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglNormalBuffer),b(l.normal),Vt.vertexAttribPointer(l.normal,3,Vt.FLOAT,!1,0,0)),l.tangent>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglTangentBuffer),b(l.tangent),Vt.vertexAttribPointer(l.tangent,4,Vt.FLOAT,!1,0,0)),l.uv>=0&&(s.geometry.faceVertexUvs[0]?(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglUVBuffer),b(l.uv),Vt.vertexAttribPointer(l.uv,2,Vt.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&Vt.vertexAttrib2fv(l.uv,n.defaultAttributeValues.uv)),l.uv2>=0&&(s.geometry.faceVertexUvs[1]?(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglUV2Buffer),b(l.uv2),Vt.vertexAttribPointer(l.uv2,2,Vt.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&Vt.vertexAttrib2fv(l.uv2,n.defaultAttributeValues.uv2)),n.skinning&&l.skinIndex>=0&&l.skinWeight>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglSkinIndicesBuffer),b(l.skinIndex),Vt.vertexAttribPointer(l.skinIndex,4,Vt.FLOAT,!1,0,0),Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglSkinWeightsBuffer),b(l.skinWeight),Vt.vertexAttribPointer(l.skinWeight,4,Vt.FLOAT,!1,0,0)),l.lineDistance>=0&&(Vt.bindBuffer(Vt.ARRAY_BUFFER,r.__webglLineDistanceBuffer),b(l.lineDistance),Vt.vertexAttribPointer(l.lineDistance,1,Vt.FLOAT,!1,0,0))}if(w(),s instanceof o.Mesh){var f=r.__typeArray===Uint32Array?Vt.UNSIGNED_INT:Vt.UNSIGNED_SHORT;n.wireframe?(rt(n.wireframeLinewidth),h&&Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,r.__webglLineBuffer),Vt.drawElements(Vt.LINES,r.__webglLineCount,f,0)):(h&&Vt.bindBuffer(Vt.ELEMENT_ARRAY_BUFFER,r.__webglFaceBuffer),Vt.drawElements(Vt.TRIANGLES,r.__webglFaceCount,f,0)),Ut.info.render.calls++,Ut.info.render.vertices+=r.__webglFaceCount,Ut.info.render.faces+=r.__webglFaceCount/3}else if(s instanceof o.Line){var g=s.mode===o.LineStrip?Vt.LINE_STRIP:Vt.LINES;rt(n.linewidth),Vt.drawArrays(g,0,r.__webglLineCount),Ut.info.render.calls++}else s instanceof o.PointCloud&&(Vt.drawArrays(Vt.POINTS,0,r.__webglParticleCount),Ut.info.render.calls++,Ut.info.render.points+=r.__webglParticleCount)}},this.render=function(e,t,i,n){if(t instanceof o.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var r=e.fog;qt=-1,Ht=-1,Gt=null,yi=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof o.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),mi.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),pi.setFromMatrix(mi),Lt.length=0,Dt.length=0,Ft.length=0,zt.length=0,Bt.length=0,E(e,e),Ut.sortObjects===!0&&(Dt.sort(_),Ft.sort(k)),zi.render(e,t),Ut.info.render.calls=0,Ut.info.render.vertices=0,Ut.info.render.faces=0,Ut.info.render.points=0,this.setRenderTarget(i),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var s=0,a=Rt.length;a>s;s++){var l=Rt[s],h=l.object;h.visible&&(tt(h,t),C(l))}if(e.overrideMaterial){var d=e.overrideMaterial;this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),st(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),S(Dt,t,Lt,r,!0,d),S(Ft,t,Lt,r,!0,d),T(Rt,"",t,Lt,r,!1,d)}else{var d=null;this.setBlending(o.NoBlending),S(Dt,t,Lt,r,!1,d),T(Rt,"opaque",t,Lt,r,!1,d),S(Ft,t,Lt,r,!0,d),T(Rt,"transparent",t,Lt,r,!0,d)}Bi.render(e,t),Vi.render(e,t,hi,di),i&&i.generateMipmaps&&i.minFilter!==o.NearestFilter&&i.minFilter!==o.LinearFilter&&pt(i),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(e,t,i,n,o){var r=N(e,t,i,n,o);qt=-1,Ut.setMaterialFaces(n),o.immediateRenderCallback?o.immediateRenderCallback(r,Vt,pi):o.render(function(e){Ut.renderBufferImmediate(e,r,n)})};var Ki={},Zi=0;this.setFaceCulling=function(e,t){e===o.CullFaceNone?Vt.disable(Vt.CULL_FACE):(Vt.frontFace(t===o.FrontFaceDirectionCW?Vt.CW:Vt.CCW),Vt.cullFace(e===o.CullFaceBack?Vt.BACK:e===o.CullFaceFront?Vt.FRONT:Vt.FRONT_AND_BACK),Vt.enable(Vt.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===o.DoubleSide,i=e.side===o.BackSide;Xt!==t&&(t?Vt.disable(Vt.CULL_FACE):Vt.enable(Vt.CULL_FACE),Xt=t),Yt!==i&&(Vt.frontFace(i?Vt.CW:Vt.CCW),Yt=i)},this.setDepthTest=function(e){Jt!==e&&(e?Vt.enable(Vt.DEPTH_TEST):Vt.disable(Vt.DEPTH_TEST),Jt=e)},this.setDepthWrite=function(e){ei!==e&&(Vt.depthMask(e),ei=e)},this.setBlending=function(e,t,i,n){e!==Kt&&(e===o.NoBlending?Vt.disable(Vt.BLEND):e===o.AdditiveBlending?(Vt.enable(Vt.BLEND),Vt.blendEquation(Vt.FUNC_ADD),Vt.blendFunc(Vt.SRC_ALPHA,Vt.ONE)):e===o.SubtractiveBlending?(Vt.enable(Vt.BLEND),Vt.blendEquation(Vt.FUNC_ADD),Vt.blendFunc(Vt.ZERO,Vt.ONE_MINUS_SRC_COLOR)):e===o.MultiplyBlending?(Vt.enable(Vt.BLEND),Vt.blendEquation(Vt.FUNC_ADD),Vt.blendFunc(Vt.ZERO,Vt.SRC_COLOR)):e===o.CustomBlending?Vt.enable(Vt.BLEND):(Vt.enable(Vt.BLEND),Vt.blendEquationSeparate(Vt.FUNC_ADD,Vt.FUNC_ADD),Vt.blendFuncSeparate(Vt.SRC_ALPHA,Vt.ONE_MINUS_SRC_ALPHA,Vt.ONE,Vt.ONE_MINUS_SRC_ALPHA)),Kt=e),e===o.CustomBlending?(t!==Zt&&(Vt.blendEquation(ft(t)),Zt=t),(i!==Qt||n!==$t)&&(Vt.blendFunc(ft(i),ft(n)),Qt=i,$t=n)):(Zt=null,Qt=null,$t=null)},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",Ni),e.__webglTexture=Vt.createTexture(),Ut.info.memory.textures++),Vt.bindTexture(Vt.TEXTURE_2D,e.__webglTexture),Vt.pixelStorei(Vt.UNPACK_FLIP_Y_WEBGL,e.flipY),Vt.pixelStorei(Vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Vt.pixelStorei(Vt.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=lt(e.image,Ei);var t=e.image,i=o.Math.isPowerOfTwo(t.width)&&o.Math.isPowerOfTwo(t.height),n=ft(e.format),r=ft(e.type);at(Vt.TEXTURE_2D,e,i);var s,a=e.mipmaps;if(e instanceof o.DataTexture)if(a.length>0&&i){for(var l=0,h=a.length;h>l;l++)s=a[l],Vt.texImage2D(Vt.TEXTURE_2D,l,n,s.width,s.height,0,n,r,s.data);e.generateMipmaps=!1}else Vt.texImage2D(Vt.TEXTURE_2D,0,n,t.width,t.height,0,n,r,t.data);else if(e instanceof o.CompressedTexture)for(var l=0,h=a.length;h>l;l++)s=a[l],e.format!==o.RGBAFormat&&e.format!==o.RGBFormat?Ri().indexOf(n)>-1?Vt.compressedTexImage2D(Vt.TEXTURE_2D,l,n,s.width,s.height,0,s.data):console.warn("Attempt to load unsupported compressed texture format"):Vt.texImage2D(Vt.TEXTURE_2D,l,n,s.width,s.height,0,n,r,s.data);else if(a.length>0&&i){for(var l=0,h=a.length;h>l;l++)s=a[l],Vt.texImage2D(Vt.TEXTURE_2D,l,n,n,r,s);e.generateMipmaps=!1}else Vt.texImage2D(Vt.TEXTURE_2D,0,n,n,r,e.image);e.generateMipmaps&&i&&Vt.generateMipmap(Vt.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){Vt.activeTexture(Vt.TEXTURE0+t),e.needsUpdate?Ut.uploadTexture(e):Vt.bindTexture(Vt.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof o.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",Ii),e.__webglTexture=Vt.createTexture(),Ut.info.memory.textures++;var i=o.Math.isPowerOfTwo(e.width)&&o.Math.isPowerOfTwo(e.height),n=ft(e.format),r=ft(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Vt.bindTexture(Vt.TEXTURE_CUBE_MAP,e.__webglTexture),at(Vt.TEXTURE_CUBE_MAP,e,i);for(var s=0;6>s;s++)e.__webglFramebuffer[s]=Vt.createFramebuffer(),e.__webglRenderbuffer[s]=Vt.createRenderbuffer(),Vt.texImage2D(Vt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,n,e.width,e.height,0,n,r,null),ct(e.__webglFramebuffer[s],e,Vt.TEXTURE_CUBE_MAP_POSITIVE_X+s),ut(e.__webglRenderbuffer[s],e);i&&Vt.generateMipmap(Vt.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Vt.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Vt.createRenderbuffer(),Vt.bindTexture(Vt.TEXTURE_2D,e.__webglTexture),at(Vt.TEXTURE_2D,e,i),Vt.texImage2D(Vt.TEXTURE_2D,0,n,e.width,e.height,0,n,r,null),ct(e.__webglFramebuffer,e,Vt.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_ATTACHMENT,Vt.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Vt.framebufferRenderbuffer(Vt.FRAMEBUFFER,Vt.DEPTH_STENCIL_ATTACHMENT,Vt.RENDERBUFFER,e.__webglRenderbuffer):ut(e.__webglRenderbuffer,e),i&&Vt.generateMipmap(Vt.TEXTURE_2D);t?Vt.bindTexture(Vt.TEXTURE_CUBE_MAP,null):Vt.bindTexture(Vt.TEXTURE_2D,null),Vt.bindRenderbuffer(Vt.RENDERBUFFER,null),Vt.bindFramebuffer(Vt.FRAMEBUFFER,null)}var a,l,h,d,c;e?(a=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,l=e.width,h=e.height,d=0,c=0):(a=null,l=ai,h=li,d=ri,c=si),a!==It&&(Vt.bindFramebuffer(Vt.FRAMEBUFFER,a),Vt.viewport(d,c,l,h),It=a),hi=l,di=h},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},o.WebGLRenderTarget=function(e,t,i){this.width=e,this.height=t,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:o.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:o.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:o.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:o.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.format=void 0!==i.format?i.format:o.RGBAFormat,this.type=void 0!==i.type?i.type:o.UnsignedByteType,this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},o.WebGLRenderTarget.prototype={constructor:o.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t
},clone:function(){var e=new o.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},o.EventDispatcher.prototype.apply(o.WebGLRenderTarget.prototype),o.WebGLRenderTargetCube=function(e,t,i){o.WebGLRenderTarget.call(this,e,t,i),this.activeCubeFace=0},o.WebGLRenderTargetCube.prototype=Object.create(o.WebGLRenderTarget.prototype),o.WebGLExtensions=function(e){var t={};this.get=function(i){if(void 0!==t[i])return t[i];var n;switch(i){case"OES_texture_float":n=e.getExtension("OES_texture_float");break;case"OES_texture_float_linear":n=e.getExtension("OES_texture_float_linear");break;case"OES_standard_derivatives":n=e.getExtension("OES_standard_derivatives");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"OES_element_index_uint":n=e.getExtension("OES_element_index_uint");break;case"EXT_blend_minmax":n=e.getExtension("EXT_blend_minmax");break;case"EXT_frag_depth":n=e.getExtension("EXT_frag_depth")}return null===n&&console.log("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=n,n}},o.WebGLProgram=function(){var e=0,t=function(e){var t,i,n=[];for(var o in e)t=e[o],t!==!1&&(i="#define "+o+" "+t,n.push(i));return n.join("\n")},i=function(e,t,i){for(var n={},o=0,r=i.length;r>o;o++){var s=i[o];n[s]=e.getUniformLocation(t,s)}return n},n=function(e,t,i){for(var n={},o=0,r=i.length;r>o;o++){var s=i[o];n[s]=e.getAttribLocation(t,s)}return n};return function(r,s,a,l){var h=r,d=h.context,c=a.defines,u=a.__webglShader.uniforms,p=a.attributes,m=a.__webglShader.vertexShader,f=a.__webglShader.fragmentShader,g=a.index0AttributeName;void 0===g&&l.morphTargets===!0&&(g="position");var v="SHADOWMAP_TYPE_BASIC";l.shadowMapType===o.PCFShadowMap?v="SHADOWMAP_TYPE_PCF":l.shadowMapType===o.PCFSoftShadowMap&&(v="SHADOWMAP_TYPE_PCF_SOFT");var y,b,w=t(c),x=d.createProgram();a instanceof o.RawShaderMaterial?(y="",b=""):(y=["precision "+l.precision+" float;","precision "+l.precision+" int;",w,l.supportsVertexTextures?"#define VERTEX_TEXTURES":"",h.gammaInput?"#define GAMMA_INPUT":"",h.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+l.maxDirLights,"#define MAX_POINT_LIGHTS "+l.maxPointLights,"#define MAX_SPOT_LIGHTS "+l.maxSpotLights,"#define MAX_HEMI_LIGHTS "+l.maxHemiLights,"#define MAX_SHADOWS "+l.maxShadows,"#define MAX_BONES "+l.maxBones,l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.lightMap?"#define USE_LIGHTMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.skinning?"#define USE_SKINNING":"",l.useVertexTexture?"#define BONE_TEXTURE":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals?"#define USE_MORPHNORMALS":"",l.wrapAround?"#define WRAP_AROUND":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+v:"",l.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",l.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join("\n"),b=["precision "+l.precision+" float;","precision "+l.precision+" int;",l.bumpMap||l.normalMap?"#extension GL_OES_standard_derivatives : enable":"",w,"#define MAX_DIR_LIGHTS "+l.maxDirLights,"#define MAX_POINT_LIGHTS "+l.maxPointLights,"#define MAX_SPOT_LIGHTS "+l.maxSpotLights,"#define MAX_HEMI_LIGHTS "+l.maxHemiLights,"#define MAX_SHADOWS "+l.maxShadows,l.alphaTest?"#define ALPHATEST "+l.alphaTest:"",h.gammaInput?"#define GAMMA_INPUT":"",h.gammaOutput?"#define GAMMA_OUTPUT":"",l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.lightMap?"#define USE_LIGHTMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.metal?"#define METAL":"",l.wrapAround?"#define WRAP_AROUND":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+v:"",l.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",l.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var _=new o.WebGLShader(d,d.VERTEX_SHADER,y+m),k=new o.WebGLShader(d,d.FRAGMENT_SHADER,b+f);d.attachShader(x,_),d.attachShader(x,k),void 0!==g&&d.bindAttribLocation(x,0,g),d.linkProgram(x),d.getProgramParameter(x,d.LINK_STATUS)===!1&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",d.getProgramParameter(x,d.VALIDATE_STATUS)),console.error("gl.getError()",d.getError())),""!==d.getProgramInfoLog(x)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",d.getProgramInfoLog(x)),d.deleteShader(_),d.deleteShader(k);var M=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];l.useVertexTexture?(M.push("boneTexture"),M.push("boneTextureWidth"),M.push("boneTextureHeight")):M.push("boneGlobalMatrices"),l.logarithmicDepthBuffer&&M.push("logDepthBufFC");for(var E in u)M.push(E);this.uniforms=i(d,x,M),M=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var S=0;S<l.maxMorphTargets;S++)M.push("morphTarget"+S);for(var S=0;S<l.maxMorphNormals;S++)M.push("morphNormal"+S);for(var T in p)M.push(T);return this.attributes=n(d,x,M),this.attributesKeys=Object.keys(this.attributes),this.id=e++,this.code=s,this.usedTimes=1,this.program=x,this.vertexShader=_,this.fragmentShader=k,this}}(),o.WebGLShader=function(){var e=function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")};return function(t,i,n){var o=t.createShader(i);return t.shaderSource(o,n),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(o)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(o)),console.warn(e(n))),o}}(),o.LensFlarePlugin=function(e,t){function i(t){var i=u.createProgram(),n=u.createShader(u.FRAGMENT_SHADER),o=u.createShader(u.VERTEX_SHADER),r="precision "+e.getPrecision()+" float;\n";return u.shaderSource(n,r+t.fragmentShader),u.shaderSource(o,r+t.vertexShader),u.compileShader(n),u.compileShader(o),u.attachShader(i,n),u.attachShader(i,o),u.linkProgram(i),i}var n,r,s,a,l,h,d,c,u=e.context,p=function(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);n=u.createBuffer(),r=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,n),u.bufferData(u.ARRAY_BUFFER,e,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),u.bufferData(u.ELEMENT_ARRAY_BUFFER,t,u.STATIC_DRAW),d=u.createTexture(),c=u.createTexture(),u.bindTexture(u.TEXTURE_2D,d),u.texImage2D(u.TEXTURE_2D,0,u.RGB,16,16,0,u.RGB,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.bindTexture(u.TEXTURE_2D,c),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,16,16,0,u.RGBA,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),h=u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var o;o=h?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},s=i(o),a={vertex:u.getAttribLocation(s,"position"),uv:u.getAttribLocation(s,"uv")},l={renderType:u.getUniformLocation(s,"renderType"),map:u.getUniformLocation(s,"map"),occlusionMap:u.getUniformLocation(s,"occlusionMap"),opacity:u.getUniformLocation(s,"opacity"),color:u.getUniformLocation(s,"color"),scale:u.getUniformLocation(s,"scale"),rotation:u.getUniformLocation(s,"rotation"),screenPosition:u.getUniformLocation(s,"screenPosition")}};this.render=function(i,m,f,g){if(0!==t.length){var v=new o.Vector3,y=g/f,b=.5*f,w=.5*g,x=16/g,_=new o.Vector2(x*y,x),k=new o.Vector3(1,1,0),M=new o.Vector2(1,1);void 0===s&&p(),u.useProgram(s),u.enableVertexAttribArray(a.vertex),u.enableVertexAttribArray(a.uv),u.uniform1i(l.occlusionMap,0),u.uniform1i(l.map,1),u.bindBuffer(u.ARRAY_BUFFER,n),u.vertexAttribPointer(a.vertex,2,u.FLOAT,!1,16,0),u.vertexAttribPointer(a.uv,2,u.FLOAT,!1,16,8),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),u.disable(u.CULL_FACE),u.depthMask(!1);for(var E=0,S=t.length;S>E;E++){x=16/g,_.set(x*y,x);var T=t[E];if(v.set(T.matrixWorld.elements[12],T.matrixWorld.elements[13],T.matrixWorld.elements[14]),v.applyMatrix4(m.matrixWorldInverse),v.applyProjection(m.projectionMatrix),k.copy(v),M.x=k.x*b+b,M.y=k.y*w+w,h||M.x>0&&M.x<f&&M.y>0&&M.y<g){u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,d),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGB,M.x-8,M.y-8,16,16,0),u.uniform1i(l.renderType,0),u.uniform2f(l.scale,_.x,_.y),u.uniform3f(l.screenPosition,k.x,k.y,k.z),u.disable(u.BLEND),u.enable(u.DEPTH_TEST),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,M.x-8,M.y-8,16,16,0),u.uniform1i(l.renderType,1),u.disable(u.DEPTH_TEST),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,d),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),T.positionScreen.copy(k),T.customUpdateCallback?T.customUpdateCallback(T):T.updateLensFlares(),u.uniform1i(l.renderType,2),u.enable(u.BLEND);for(var C=0,A=T.lensFlares.length;A>C;C++){var j=T.lensFlares[C];j.opacity>.001&&j.scale>.001&&(k.x=j.x,k.y=j.y,k.z=j.z,x=j.size*j.scale/g,_.x=x*y,_.y=x,u.uniform3f(l.screenPosition,k.x,k.y,k.z),u.uniform2f(l.scale,_.x,_.y),u.uniform1f(l.rotation,j.rotation),u.uniform1f(l.opacity,j.opacity),u.uniform3f(l.color,j.color.r,j.color.g,j.color.b),e.setBlending(j.blending,j.blendEquation,j.blendSrc,j.blendDst),e.setTexture(j.texture,1),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0))}}}u.enable(u.CULL_FACE),u.enable(u.DEPTH_TEST),u.depthMask(!0),e.resetGLState()}}},o.ShadowMapPlugin=function(e,t,i,n){function r(e,t,n){if(t.visible){var o=i[t.id];if(o&&t.castShadow&&(t.frustumCulled===!1||f.intersectsObject(t)===!0))for(var s=0,a=o.length;a>s;s++){var l=o[s];t._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),w.push(l)}for(var s=0,a=t.children.length;a>s;s++)r(e,t.children[s],n)}}function s(e,t){var i=new o.DirectionalLight;i.isVirtual=!0,i.onlyShadow=!0,i.castShadow=!0,i.shadowCameraNear=e.shadowCameraNear,i.shadowCameraFar=e.shadowCameraFar,i.shadowCameraLeft=e.shadowCameraLeft,i.shadowCameraRight=e.shadowCameraRight,i.shadowCameraBottom=e.shadowCameraBottom,i.shadowCameraTop=e.shadowCameraTop,i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t],i.shadowMapWidth=e.shadowCascadeWidth[t],i.shadowMapHeight=e.shadowCascadeHeight[t],i.pointsWorld=[],i.pointsFrustum=[];for(var n=i.pointsWorld,r=i.pointsFrustum,s=0;8>s;s++)n[s]=new o.Vector3,r[s]=new o.Vector3;var a=e.shadowCascadeNearZ[t],l=e.shadowCascadeFarZ[t];return r[0].set(-1,-1,a),r[1].set(1,-1,a),r[2].set(-1,1,a),r[3].set(1,1,a),r[4].set(-1,-1,l),r[5].set(1,-1,l),r[6].set(-1,1,l),r[7].set(1,1,l),i}function a(e,t){var i=e.shadowCascadeArray[t];i.position.copy(e.position),i.target.position.copy(e.target.position),i.lookAt(i.target),i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t];var n=e.shadowCascadeNearZ[t],o=e.shadowCascadeFarZ[t],r=i.pointsFrustum;r[0].z=n,r[1].z=n,r[2].z=n,r[3].z=n,r[4].z=o,r[5].z=o,r[6].z=o,r[7].z=o}function l(e,t){var i=t.shadowCamera,n=t.pointsFrustum,o=t.pointsWorld;v.set(1/0,1/0,1/0),y.set(-1/0,-1/0,-1/0);for(var r=0;8>r;r++){var s=o[r];s.copy(n[r]),s.unproject(e),s.applyMatrix4(i.matrixWorldInverse),s.x<v.x&&(v.x=s.x),s.x>y.x&&(y.x=s.x),s.y<v.y&&(v.y=s.y),s.y>y.y&&(y.y=s.y),s.z<v.z&&(v.z=s.z),s.z>y.z&&(y.z=s.z)}i.left=v.x,i.right=y.x,i.top=y.y,i.bottom=v.y,i.updateProjectionMatrix()}function h(e){return e.material instanceof o.MeshFaceMaterial?e.material.materials[0]:e.material}var d,c,u,p,m=e.context,f=new o.Frustum,g=new o.Matrix4,v=new o.Vector3,y=new o.Vector3,b=new o.Vector3,w=[],x=o.ShaderLib.depthRGBA,_=o.UniformsUtils.clone(x.uniforms);d=new o.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader}),c=new o.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,morphTargets:!0}),u=new o.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,skinning:!0}),p=new o.ShaderMaterial({uniforms:_,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,morphTargets:!0,skinning:!0}),d._shadowPass=!0,c._shadowPass=!0,u._shadowPass=!0,p._shadowPass=!0,this.render=function(i,v){if(e.shadowMapEnabled!==!1){var y,x,_,k,M,E,S,T,C,A,j,L,P,R=[],D=0,F=null;for(m.clearColor(1,1,1,1),m.disable(m.BLEND),m.enable(m.CULL_FACE),m.frontFace(m.CCW),m.cullFace(e.shadowMapCullFace===o.CullFaceFront?m.FRONT:m.BACK),e.setDepthTest(!0),y=0,x=t.length;x>y;y++)if(P=t[y],P.castShadow)if(P instanceof o.DirectionalLight&&P.shadowCascade)for(M=0;M<P.shadowCascadeCount;M++){var z;if(P.shadowCascadeArray[M])z=P.shadowCascadeArray[M];else{z=s(P,M),z.originalCamera=v;var B=new o.Gyroscope;B.position.copy(P.shadowCascadeOffset),B.add(z),B.add(z.target),v.add(B),P.shadowCascadeArray[M]=z,console.log("Created virtualLight",z)}a(P,M),R[D]=z,D++}else R[D]=P,D++;for(y=0,x=R.length;x>y;y++){if(P=R[y],!P.shadowMap){var V=o.LinearFilter;e.shadowMapType===o.PCFSoftShadowMap&&(V=o.NearestFilter);var U={minFilter:V,magFilter:V,format:o.RGBAFormat};P.shadowMap=new o.WebGLRenderTarget(P.shadowMapWidth,P.shadowMapHeight,U),P.shadowMapSize=new o.Vector2(P.shadowMapWidth,P.shadowMapHeight),P.shadowMatrix=new o.Matrix4}if(!P.shadowCamera){if(P instanceof o.SpotLight)P.shadowCamera=new o.PerspectiveCamera(P.shadowCameraFov,P.shadowMapWidth/P.shadowMapHeight,P.shadowCameraNear,P.shadowCameraFar);else{if(!(P instanceof o.DirectionalLight)){console.error("Unsupported light type for shadow");continue}P.shadowCamera=new o.OrthographicCamera(P.shadowCameraLeft,P.shadowCameraRight,P.shadowCameraTop,P.shadowCameraBottom,P.shadowCameraNear,P.shadowCameraFar)}i.add(P.shadowCamera),i.autoUpdate===!0&&i.updateMatrixWorld()}P.shadowCameraVisible&&!P.cameraHelper&&(P.cameraHelper=new o.CameraHelper(P.shadowCamera),i.add(P.cameraHelper)),P.isVirtual&&z.originalCamera==v&&l(v,P),E=P.shadowMap,S=P.shadowMatrix,T=P.shadowCamera,T.position.setFromMatrixPosition(P.matrixWorld),b.setFromMatrixPosition(P.target.matrixWorld),T.lookAt(b),T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),P.cameraHelper&&(P.cameraHelper.visible=P.shadowCameraVisible),P.shadowCameraVisible&&P.cameraHelper.update(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(T.projectionMatrix),S.multiply(T.matrixWorldInverse),g.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),f.setFromMatrix(g),e.setRenderTarget(E),e.clear(),w.length=0,r(i,i,T);var O,N,I;for(_=0,k=w.length;k>_;_++)j=w[_],L=j.object,C=j.buffer,O=h(L),N=void 0!==L.geometry.morphTargets&&L.geometry.morphTargets.length>0&&O.morphTargets,I=L instanceof o.SkinnedMesh&&O.skinning,A=L.customDepthMaterial?L.customDepthMaterial:I?N?p:u:N?c:d,e.setMaterialFaces(O),C instanceof o.BufferGeometry?e.renderBufferDirect(T,t,F,A,C,L):e.renderBuffer(T,t,F,A,C,L);for(_=0,k=n.length;k>_;_++)j=n[_],L=j.object,L.visible&&L.castShadow&&(L._modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,L.matrixWorld),e.renderImmediateObject(T,t,F,d,L))}var H=e.getClearColor(),q=e.getClearAlpha();m.clearColor(H.r,H.g,H.b,q),m.enable(m.BLEND),e.shadowMapCullFace===o.CullFaceFront&&m.cullFace(m.BACK),e.resetGLState()}}},o.SpritePlugin=function(e,t){function i(){var t=c.createProgram(),i=c.createShader(c.VERTEX_SHADER),n=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),c.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),c.compileShader(i),c.compileShader(n),c.attachShader(t,i),c.attachShader(t,n),c.linkProgram(t),t}function n(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var r,s,a,l,h,d,c=e.context,u=function(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);r=c.createBuffer(),s=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,r),c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,s),c.bufferData(c.ELEMENT_ARRAY_BUFFER,t,c.STATIC_DRAW),a=i(),l={position:c.getAttribLocation(a,"position"),uv:c.getAttribLocation(a,"uv")},h={uvOffset:c.getUniformLocation(a,"uvOffset"),uvScale:c.getUniformLocation(a,"uvScale"),rotation:c.getUniformLocation(a,"rotation"),scale:c.getUniformLocation(a,"scale"),color:c.getUniformLocation(a,"color"),map:c.getUniformLocation(a,"map"),opacity:c.getUniformLocation(a,"opacity"),modelViewMatrix:c.getUniformLocation(a,"modelViewMatrix"),projectionMatrix:c.getUniformLocation(a,"projectionMatrix"),fogType:c.getUniformLocation(a,"fogType"),fogDensity:c.getUniformLocation(a,"fogDensity"),fogNear:c.getUniformLocation(a,"fogNear"),fogFar:c.getUniformLocation(a,"fogFar"),fogColor:c.getUniformLocation(a,"fogColor"),alphaTest:c.getUniformLocation(a,"alphaTest")};var n=document.createElement("canvas");n.width=8,n.height=8;var u=n.getContext("2d");u.fillStyle="white",u.fillRect(0,0,8,8),d=new o.Texture(n),d.needsUpdate=!0};this.render=function(i,p){if(0!==t.length){void 0===a&&u(),c.useProgram(a),c.enableVertexAttribArray(l.position),c.enableVertexAttribArray(l.uv),c.disable(c.CULL_FACE),c.enable(c.BLEND),c.bindBuffer(c.ARRAY_BUFFER,r),c.vertexAttribPointer(l.position,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(l.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,s),c.uniformMatrix4fv(h.projectionMatrix,!1,p.projectionMatrix.elements),c.activeTexture(c.TEXTURE0),c.uniform1i(h.map,0);var m=0,f=0,g=i.fog;g?(c.uniform3f(h.fogColor,g.color.r,g.color.g,g.color.b),g instanceof o.Fog?(c.uniform1f(h.fogNear,g.near),c.uniform1f(h.fogFar,g.far),c.uniform1i(h.fogType,1),m=1,f=1):g instanceof o.FogExp2&&(c.uniform1f(h.fogDensity,g.density),c.uniform1i(h.fogType,2),m=2,f=2)):(c.uniform1i(h.fogType,0),m=0,f=0);for(var v=0,y=t.length;y>v;v++){var b=t[v];b._modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,b.matrixWorld),b.z=null===b.renderDepth?-b._modelViewMatrix.elements[14]:b.renderDepth}t.sort(n);for(var w=[],v=0,y=t.length;y>v;v++){var b=t[v],x=b.material;c.uniform1f(h.alphaTest,x.alphaTest),c.uniformMatrix4fv(h.modelViewMatrix,!1,b._modelViewMatrix.elements),w[0]=b.scale.x,w[1]=b.scale.y;var _=0;i.fog&&x.fog&&(_=f),m!==_&&(c.uniform1i(h.fogType,_),m=_),null!==x.map?(c.uniform2f(h.uvOffset,x.map.offset.x,x.map.offset.y),c.uniform2f(h.uvScale,x.map.repeat.x,x.map.repeat.y)):(c.uniform2f(h.uvOffset,0,0),c.uniform2f(h.uvScale,1,1)),c.uniform1f(h.opacity,x.opacity),c.uniform3f(h.color,x.color.r,x.color.g,x.color.b),c.uniform1f(h.rotation,x.rotation),c.uniform2fv(h.scale,w),e.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst),e.setDepthTest(x.depthTest),e.setDepthWrite(x.depthWrite),x.map&&x.map.image&&x.map.image.width?e.setTexture(x.map,0):e.setTexture(d,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}c.enable(c.CULL_FACE),e.resetGLState()}}},o.GeometryUtils={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;t instanceof o.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},o.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,i,n){var r=new o.ImageLoader;r.crossOrigin=this.crossOrigin;var s=new o.Texture(void 0,t);return r.load(e,function(e){s.image=e,s.needsUpdate=!0,i&&i(s)},void 0,function(e){n&&n(e)}),s.sourceFile=e,s},loadTextureCube:function(e,t,i){var n=[],r=new o.ImageLoader;r.crossOrigin=this.crossOrigin;var s=new o.CubeTexture(n,t);s.flipY=!1;for(var a=0,l=function(t){r.load(e[t],function(e){s.images[t]=e,a+=1,6===a&&(s.needsUpdate=!0,i&&i(s))})},h=0,d=e.length;d>h;++h)l(h);return s},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var i=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},n=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},o=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t=1|t;var r=e.width,s=e.height,a=document.createElement("canvas");a.width=r,a.height=s;var l=a.getContext("2d");l.drawImage(e,0,0);for(var h=l.getImageData(0,0,r,s).data,d=l.createImageData(r,s),c=d.data,u=0;r>u;u++)for(var p=0;s>p;p++){var m=0>p-1?0:p-1,f=p+1>s-1?s-1:p+1,g=0>u-1?0:u-1,v=u+1>r-1?r-1:u+1,y=[],b=[0,0,h[4*(p*r+u)]/255*t];y.push([-1,0,h[4*(p*r+g)]/255*t]),y.push([-1,-1,h[4*(m*r+g)]/255*t]),y.push([0,-1,h[4*(m*r+u)]/255*t]),y.push([1,-1,h[4*(m*r+v)]/255*t]),y.push([1,0,h[4*(p*r+v)]/255*t]),y.push([1,1,h[4*(f*r+v)]/255*t]),y.push([0,1,h[4*(f*r+u)]/255*t]),y.push([-1,1,h[4*(f*r+g)]/255*t]);for(var w=[],x=y.length,_=0;x>_;_++){var k=y[_],M=y[(_+1)%x];k=n(k,b),M=n(M,b),w.push(o(i(k,M)))}for(var E=[0,0,0],_=0;_<w.length;_++)E[0]+=w[_][0],E[1]+=w[_][1],E[2]+=w[_][2];E[0]/=w.length,E[1]/=w.length,E[2]/=w.length;var S=4*(p*r+u);c[S]=(E[0]+1)/2*255|0,c[S+1]=(E[1]+1)/2*255|0,c[S+2]=255*E[2]|0,c[S+3]=255}return l.putImageData(d,0,0),a},generateDataTexture:function(e,t,i){for(var n=e*t,r=new Uint8Array(3*n),s=Math.floor(255*i.r),a=Math.floor(255*i.g),l=Math.floor(255*i.b),h=0;n>h;h++)r[3*h]=s,r[3*h+1]=a,r[3*h+2]=l;var d=new o.DataTexture(r,e,t,o.RGBFormat);return d.needsUpdate=!0,d}},o.SceneUtils={createMultiMaterialObject:function(e,t){for(var i=new o.Object3D,n=0,r=t.length;r>n;n++)i.add(new o.Mesh(e,t[n]));return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attach:function(e,t,i){var n=new o.Matrix4;n.getInverse(i.matrixWorld),e.applyMatrix(n),t.remove(e),i.add(e)}},o.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase(),i=this;i.faces[t]=i.faces[t]||{},i.faces[t][e.cssFontWeight]=i.faces[t][e.cssFontWeight]||{},i.faces[t][e.cssFontWeight][e.cssFontStyle]=e;i.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t,i=this.getFace(),n=this.size/i.resolution,r=0,s=String(e).split(""),a=s.length,l=[];for(t=0;a>t;t++){var h=new o.Path,d=this.extractGlyphPoints(s[t],i,n,r,h);r+=d.offset,l.push(d.path)}var c=r/2;return{paths:l,offset:c}},extractGlyphPoints:function(e,t,i,n,r){var s,a,l,h,d,c,u,p,m,f,g,v,y,b,w,x,_,k,M,E=[],S=t.glyphs[e]||t.glyphs["?"];if(S){if(S.o)for(h=S._cachedOutline||(S._cachedOutline=S.o.split(" ")),c=h.length,u=i,p=i,s=0;c>s;)switch(d=h[s++]){case"m":m=h[s++]*u+n,f=h[s++]*p,r.moveTo(m,f);break;case"l":m=h[s++]*u+n,f=h[s++]*p,r.lineTo(m,f);break;case"q":if(g=h[s++]*u+n,v=h[s++]*p,w=h[s++]*u+n,x=h[s++]*p,r.quadraticCurveTo(w,x,g,v),M=E[E.length-1])for(y=M.x,b=M.y,a=1,l=this.divisions;l>=a;a++){var T=a/l;o.Shape.Utils.b2(T,y,w,g),o.Shape.Utils.b2(T,b,x,v)}break;case"b":if(g=h[s++]*u+n,v=h[s++]*p,w=h[s++]*u+n,x=h[s++]*p,_=h[s++]*u+n,k=h[s++]*p,r.bezierCurveTo(w,x,_,k,g,v),M=E[E.length-1])for(y=M.x,b=M.y,a=1,l=this.divisions;l>=a;a++){var T=a/l;o.Shape.Utils.b3(T,y,w,_,g),o.Shape.Utils.b3(T,b,x,k,v)}}return{offset:S.ha*i,path:r}}}},o.FontUtils.generateShapes=function(e,t){t=t||{};var i=void 0!==t.size?t.size:100,n=void 0!==t.curveSegments?t.curveSegments:4,r=void 0!==t.font?t.font:"helvetiker",s=void 0!==t.weight?t.weight:"normal",a=void 0!==t.style?t.style:"normal";o.FontUtils.size=i,o.FontUtils.divisions=n,o.FontUtils.face=r,o.FontUtils.weight=s,o.FontUtils.style=a;for(var l=o.FontUtils.drawText(e),h=l.paths,d=[],c=0,u=h.length;u>c;c++)Array.prototype.push.apply(d,h[c].toShapes());return d},function(e){var t=1e-10,i=function(e,t){var i=e.length;if(3>i)return null;var r,s,a,l=[],h=[],d=[];if(n(e)>0)for(s=0;i>s;s++)h[s]=s;else for(s=0;i>s;s++)h[s]=i-1-s;var c=i,u=2*c;for(s=c-1;c>2;){if(u--<=0)return console.log("Warning, unable to triangulate polygon!"),t?d:l;if(r=s,r>=c&&(r=0),s=r+1,s>=c&&(s=0),a=s+1,a>=c&&(a=0),o(e,r,s,a,c,h)){var p,m,f,g,v;for(p=h[r],m=h[s],f=h[a],l.push([e[p],e[m],e[f]]),d.push([h[r],h[s],h[a]]),g=s,v=s+1;c>v;g++,v++)h[g]=h[v];c--,u=2*c}}return t?d:l},n=function(e){for(var t=e.length,i=0,n=t-1,o=0;t>o;n=o++)i+=e[n].x*e[o].y-e[o].x*e[n].y;return.5*i},o=function(e,i,n,o,r,s){var a,l,h,d,c,u,p,m,f;if(l=e[s[i]].x,h=e[s[i]].y,d=e[s[n]].x,c=e[s[n]].y,u=e[s[o]].x,p=e[s[o]].y,t>(d-l)*(p-h)-(c-h)*(u-l))return!1;
var g,v,y,b,w,x,_,k,M,E,S,T,C,A,j;for(g=u-d,v=p-c,y=l-u,b=h-p,w=d-l,x=c-h,a=0;r>a;a++)if(m=e[s[a]].x,f=e[s[a]].y,!(m===l&&f===h||m===d&&f===c||m===u&&f===p)&&(_=m-l,k=f-h,M=m-d,E=f-c,S=m-u,T=f-p,j=g*E-v*M,C=w*k-x*_,A=y*T-b*S,j>=-t&&A>=-t&&C>=-t))return!1;return!0};return e.Triangulate=i,e.Triangulate.area=n,e}(o.FontUtils),n._typeface_js={faces:o.FontUtils.faces,loadFace:o.FontUtils.loadFace},o.typeface_js=n._typeface_js,o.Audio=function(e){o.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},o.Audio.prototype=Object.create(o.Object3D.prototype),o.Audio.prototype.load=function(e){var t=this,i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.source.connect(t.panner),t.source.start(0)})},i.send(),this},o.Audio.prototype.setLoop=function(e){this.source.loop=e},o.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},o.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},o.Audio.prototype.updateMatrixWorld=function(){var e=new o.Vector3;return function(t){o.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),o.AudioListener=function(){o.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},o.AudioListener.prototype=Object.create(o.Object3D.prototype),o.AudioListener.prototype.updateMatrixWorld=function(){var e=new o.Vector3,t=new o.Quaternion,i=new o.Vector3,n=new o.Vector3,r=new o.Vector3,s=new o.Vector3;return function(a){o.Object3D.prototype.updateMatrixWorld.call(this,a);var l=this.context.listener;this.matrixWorld.decompose(e,t,i),n.set(0,0,-1).applyQuaternion(t),r.subVectors(e,s),l.setPosition(e.x,e.y,e.z),l.setOrientation(n.x,n.y,n.z,this.up.x,this.up.y,this.up.z),l.setVelocity(r.x,r.y,r.z),s.copy(e)}}(),o.Curve=function(){},o.Curve.prototype.getPoint=function(){return console.log("Warning, getPoint() not implemented!"),null},o.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},o.Curve.prototype.getPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPoint(t/e));return i},o.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPointAt(t/e));return i},o.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},o.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,n=[],o=this.getPoint(0),r=0;for(n.push(0),i=1;e>=i;i++)t=this.getPoint(i/e),r+=t.distanceTo(o),n.push(r),o=t;return this.cacheArcLengths=n,n},o.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},o.Curve.prototype.getUtoTmapping=function(e,t){var i,n=this.getLengths(),o=0,r=n.length;i=t?t:e*n[r-1];for(var s,a=0,l=r-1;l>=a;)if(o=Math.floor(a+(l-a)/2),s=n[o]-i,0>s)a=o+1;else{if(!(s>0)){l=o;break}l=o-1}if(o=l,n[o]==i){var h=o/(r-1);return h}var d=n[o],c=n[o+1],u=c-d,p=(i-d)/u,h=(o+p)/(r-1);return h},o.Curve.prototype.getTangent=function(e){var t=1e-4,i=e-t,n=e+t;0>i&&(i=0),n>1&&(n=1);var o=this.getPoint(i),r=this.getPoint(n),s=r.clone().sub(o);return s.normalize()},o.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},o.Curve.Utils={tangentQuadraticBezier:function(e,t,i,n){return 2*(1-e)*(i-t)+2*e*(n-i)},tangentCubicBezier:function(e,t,i,n,o){return-3*t*(1-e)*(1-e)+3*i*(1-e)*(1-e)-6*e*i*(1-e)+6*e*n*(1-e)-3*e*e*n+3*e*e*o},tangentSpline:function(e){var t=6*e*e-6*e,i=3*e*e-4*e+1,n=-6*e*e+6*e,o=3*e*e-2*e;return t+i+n+o},interpolate:function(e,t,i,n,o){var r=.5*(i-e),s=.5*(n-t),a=o*o,l=o*a;return(2*t-2*i+r+s)*l+(-3*t+3*i-2*r-s)*a+r*o+t}},o.Curve.create=function(e,t){return e.prototype=Object.create(o.Curve.prototype),e.prototype.getPoint=t,e},o.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},o.CurvePath.prototype=Object.create(o.Curve.prototype),o.CurvePath.prototype.add=function(e){this.curves.push(e)},o.CurvePath.prototype.checkConnection=function(){},o.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new o.LineCurve(t,e))},o.CurvePath.prototype.getPoint=function(e){for(var t,i,n=e*this.getLength(),o=this.getCurveLengths(),r=0;r<o.length;){if(o[r]>=n){t=o[r]-n,i=this.curves[r];var s=1-t/i.getLength();return i.getPointAt(s)}r++}return null},o.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},o.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],i=0,n=this.curves.length;for(e=0;n>e;e++)i+=this.curves[e].getLength(),t.push(i);return this.cacheLengths=t,t},o.CurvePath.prototype.getBoundingBox=function(){var e,t,i,n,r,s,a=this.getPoints();e=t=Number.NEGATIVE_INFINITY,n=r=Number.POSITIVE_INFINITY;var l,h,d,c,u=a[0]instanceof o.Vector3;for(c=u?new o.Vector3:new o.Vector2,h=0,d=a.length;d>h;h++)l=a[h],l.x>e?e=l.x:l.x<n&&(n=l.x),l.y>t?t=l.y:l.y<r&&(r=l.y),u&&(l.z>i?i=l.z:l.z<s&&(s=l.z)),c.add(l);var p={minX:n,minY:r,maxX:e,maxY:t};return u&&(p.maxZ=i,p.minZ=s),p},o.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},o.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},o.CurvePath.prototype.createGeometry=function(e){for(var t=new o.Geometry,i=0;i<e.length;i++)t.vertices.push(new o.Vector3(e[i].x,e[i].y,e[i].z||0));return t},o.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},o.CurvePath.prototype.getTransformedPoints=function(e,t){var i,n,o=this.getPoints(e);for(t||(t=this.bends),i=0,n=t.length;n>i;i++)o=this.getWrapPoints(o,t[i]);return o},o.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var i,n,o=this.getSpacedPoints(e);for(t||(t=this.bends),i=0,n=t.length;n>i;i++)o=this.getWrapPoints(o,t[i]);return o},o.CurvePath.prototype.getWrapPoints=function(e,t){var i,n,o,r,s,a,l=this.getBoundingBox();for(i=0,n=e.length;n>i;i++){o=e[i],r=o.x,s=o.y,a=r/l.maxX,a=t.getUtoTmapping(a,r);var h=t.getPoint(a),d=t.getTangent(a);d.set(-d.y,d.x).multiplyScalar(s),o.x=h.x+d.x,o.y=h.y+d.y}return e},o.Gyroscope=function(){o.Object3D.call(this)},o.Gyroscope.prototype=Object.create(o.Object3D.prototype),o.Gyroscope.prototype.updateMatrixWorld=function(){var e=new o.Vector3,t=new o.Quaternion,i=new o.Vector3,n=new o.Vector3,r=new o.Quaternion,s=new o.Vector3;return function(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(n,r,s),this.matrix.decompose(e,t,i),this.matrixWorld.compose(n,t,s)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);for(var a=0,l=this.children.length;l>a;a++)this.children[a].updateMatrixWorld(o)}}(),o.Path=function(e){o.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},o.Path.prototype=Object.create(o.CurvePath.prototype),o.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},o.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;i>t;t++)this.lineTo(e[t].x,e[t].y)},o.Path.prototype.moveTo=function(){var e=Array.prototype.slice.call(arguments);this.actions.push({action:o.PathActions.MOVE_TO,args:e})},o.Path.prototype.lineTo=function(e,t){var i=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],s=n[n.length-1],a=new o.LineCurve(new o.Vector2(r,s),new o.Vector2(e,t));this.curves.push(a),this.actions.push({action:o.PathActions.LINE_TO,args:i})},o.Path.prototype.quadraticCurveTo=function(e,t,i,n){var r=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,a=s[s.length-2],l=s[s.length-1],h=new o.QuadraticBezierCurve(new o.Vector2(a,l),new o.Vector2(e,t),new o.Vector2(i,n));this.curves.push(h),this.actions.push({action:o.PathActions.QUADRATIC_CURVE_TO,args:r})},o.Path.prototype.bezierCurveTo=function(e,t,i,n,r,s){var a=Array.prototype.slice.call(arguments),l=this.actions[this.actions.length-1].args,h=l[l.length-2],d=l[l.length-1],c=new o.CubicBezierCurve(new o.Vector2(h,d),new o.Vector2(e,t),new o.Vector2(i,n),new o.Vector2(r,s));this.curves.push(c),this.actions.push({action:o.PathActions.BEZIER_CURVE_TO,args:a})},o.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,n=i[i.length-2],r=i[i.length-1],s=[new o.Vector2(n,r)];Array.prototype.push.apply(s,e);var a=new o.SplineCurve(s);this.curves.push(a),this.actions.push({action:o.PathActions.CSPLINE_THRU,args:t})},o.Path.prototype.arc=function(e,t,i,n,o,r){var s=this.actions[this.actions.length-1].args,a=s[s.length-2],l=s[s.length-1];this.absarc(e+a,t+l,i,n,o,r)},o.Path.prototype.absarc=function(e,t,i,n,o,r){this.absellipse(e,t,i,i,n,o,r)},o.Path.prototype.ellipse=function(e,t,i,n,o,r,s){var a=this.actions[this.actions.length-1].args,l=a[a.length-2],h=a[a.length-1];this.absellipse(e+l,t+h,i,n,o,r,s)},o.Path.prototype.absellipse=function(e,t,i,n,r,s,a){var l=Array.prototype.slice.call(arguments),h=new o.EllipseCurve(e,t,i,n,r,s,a);this.curves.push(h);var d=h.getPoint(1);l.push(d.x),l.push(d.y),this.actions.push({action:o.PathActions.ELLIPSE,args:l})},o.Path.prototype.getSpacedPoints=function(e){e||(e=40);for(var t=[],i=0;e>i;i++)t.push(this.getPoint(i/e));return t},o.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var i,n,r,s,a,l,h,d,c,u,p,m,f,g,v,y,b,w,x=[];for(i=0,n=this.actions.length;n>i;i++)switch(r=this.actions[i],s=r.action,a=r.args,s){case o.PathActions.MOVE_TO:x.push(new o.Vector2(a[0],a[1]));break;case o.PathActions.LINE_TO:x.push(new o.Vector2(a[0],a[1]));break;case o.PathActions.QUADRATIC_CURVE_TO:for(l=a[2],h=a[3],u=a[0],p=a[1],x.length>0?(g=x[x.length-1],m=g.x,f=g.y):(g=this.actions[i-1].args,m=g[g.length-2],f=g[g.length-1]),v=1;e>=v;v++)y=v/e,b=o.Shape.Utils.b2(y,m,u,l),w=o.Shape.Utils.b2(y,f,p,h),x.push(new o.Vector2(b,w));break;case o.PathActions.BEZIER_CURVE_TO:for(l=a[4],h=a[5],u=a[0],p=a[1],d=a[2],c=a[3],x.length>0?(g=x[x.length-1],m=g.x,f=g.y):(g=this.actions[i-1].args,m=g[g.length-2],f=g[g.length-1]),v=1;e>=v;v++)y=v/e,b=o.Shape.Utils.b3(y,m,u,d,l),w=o.Shape.Utils.b3(y,f,p,c,h),x.push(new o.Vector2(b,w));break;case o.PathActions.CSPLINE_THRU:g=this.actions[i-1].args;var _=new o.Vector2(g[g.length-2],g[g.length-1]),k=[_],M=e*a[0].length;k=k.concat(a[0]);var E=new o.SplineCurve(k);for(v=1;M>=v;v++)x.push(E.getPointAt(v/M));break;case o.PathActions.ARC:var S,T=a[0],C=a[1],A=a[2],j=a[3],L=a[4],P=!!a[5],R=L-j,D=2*e;for(v=1;D>=v;v++)y=v/D,P||(y=1-y),S=j+y*R,b=T+A*Math.cos(S),w=C+A*Math.sin(S),x.push(new o.Vector2(b,w));break;case o.PathActions.ELLIPSE:var S,T=a[0],C=a[1],F=a[2],z=a[3],j=a[4],L=a[5],P=!!a[6],R=L-j,D=2*e;for(v=1;D>=v;v++)y=v/D,P||(y=1-y),S=j+y*R,b=T+F*Math.cos(S),w=C+z*Math.sin(S),x.push(new o.Vector2(b,w))}var B=x[x.length-1],V=1e-10;return Math.abs(B.x-x[0].x)<V&&Math.abs(B.y-x[0].y)<V&&x.splice(x.length-1,1),t&&x.push(x[0]),x},o.Path.prototype.toShapes=function(e,t){function i(e){var t,i,n,r,s,a=[],l=new o.Path;for(t=0,i=e.length;i>t;t++)n=e[t],s=n.args,r=n.action,r==o.PathActions.MOVE_TO&&0!=l.actions.length&&(a.push(l),l=new o.Path),l[r].apply(l,s);return 0!=l.actions.length&&a.push(l),a}function n(e){for(var t=[],i=0,n=e.length;n>i;i++){var r=e[i],s=new o.Shape;s.actions=r.actions,s.curves=r.curves,t.push(s)}return t}function r(e,t){for(var i=1e-10,n=t.length,o=!1,r=n-1,s=0;n>s;r=s++){var a=t[r],l=t[s],h=l.x-a.x,d=l.y-a.y;if(Math.abs(d)>i){if(0>d&&(a=t[s],h=-h,l=t[r],d=-d),e.y<a.y||e.y>l.y)continue;if(e.y==a.y){if(e.x==a.x)return!0}else{var c=d*(e.x-a.x)-h*(e.y-a.y);if(0==c)return!0;if(0>c)continue;o=!o}}else{if(e.y!=a.y)continue;if(l.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=l.x)return!0}}return o}var s=i(this.actions);if(0==s.length)return[];if(t===!0)return n(s);var a,l,h,d=[];if(1==s.length)return l=s[0],h=new o.Shape,h.actions=l.actions,h.curves=l.curves,d.push(h),d;var c=!o.Shape.Utils.isClockWise(s[0].getPoints());c=e?!c:c;var u,p=[],m=[],f=[],g=0;m[g]=void 0,f[g]=[];var v,y;for(v=0,y=s.length;y>v;v++)l=s[v],u=l.getPoints(),a=o.Shape.Utils.isClockWise(u),a=e?!a:a,a?(!c&&m[g]&&g++,m[g]={s:new o.Shape,p:u},m[g].s.actions=l.actions,m[g].s.curves=l.curves,c&&g++,f[g]=[]):f[g].push({h:l,p:u[0]});if(!m[0])return n(s);if(m.length>1){for(var b=!1,w=[],x=0,_=m.length;_>x;x++)p[x]=[];for(var x=0,_=m.length;_>x;x++)for(var k=(m[x],f[x]),M=0;M<k.length;M++){for(var E=k[M],S=!0,T=0;T<m.length;T++)r(E.p,m[T].p)&&(x!=T&&w.push({froms:x,tos:T,hole:M}),S?(S=!1,p[T].push(E)):b=!0);S&&p[x].push(E)}w.length>0&&(b||(f=p))}var C,A,j;for(v=0,y=m.length;y>v;v++)for(h=m[v].s,d.push(h),C=f[v],A=0,j=C.length;j>A;A++)h.holes.push(C[A].h);return d},o.Shape=function(){o.Path.apply(this,arguments),this.holes=[]},o.Shape.prototype=Object.create(o.Path.prototype),o.Shape.prototype.extrude=function(e){var t=new o.ExtrudeGeometry(this,e);return t},o.Shape.prototype.makeGeometry=function(e){var t=new o.ShapeGeometry(this,e);return t},o.Shape.prototype.getPointsHoles=function(e){var t,i=this.holes.length,n=[];for(t=0;i>t;t++)n[t]=this.holes[t].getTransformedPoints(e,this.bends);return n},o.Shape.prototype.getSpacedPointsHoles=function(e){var t,i=this.holes.length,n=[];for(t=0;i>t;t++)n[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return n},o.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},o.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},o.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},o.Shape.Utils={triangulateShape:function(e,t){function i(e,t,i){return e.x!=t.x?e.x<t.x?e.x<=i.x&&i.x<=t.x:t.x<=i.x&&i.x<=e.x:e.y<t.y?e.y<=i.y&&i.y<=t.y:t.y<=i.y&&i.y<=e.y}function n(e,t,n,o,r){var s=1e-10,a=t.x-e.x,l=t.y-e.y,h=o.x-n.x,d=o.y-n.y,c=e.x-n.x,u=e.y-n.y,p=l*h-a*d,m=l*c-a*u;if(Math.abs(p)>s){var f;if(p>0){if(0>m||m>p)return[];if(f=d*c-h*u,0>f||f>p)return[]}else{if(m>0||p>m)return[];if(f=d*c-h*u,f>0||p>f)return[]}if(0==f)return!r||0!=m&&m!=p?[e]:[];if(f==p)return!r||0!=m&&m!=p?[t]:[];if(0==m)return[n];if(m==p)return[o];var g=f/p;return[{x:e.x+g*a,y:e.y+g*l}]}if(0!=m||d*c!=h*u)return[];var v=0==a&&0==l,y=0==h&&0==d;if(v&&y)return e.x!=n.x||e.y!=n.y?[]:[e];if(v)return i(n,o,e)?[e]:[];if(y)return i(e,t,n)?[n]:[];var b,w,x,_,k,M,E,S;return 0!=a?(e.x<t.x?(b=e,x=e.x,w=t,_=t.x):(b=t,x=t.x,w=e,_=e.x),n.x<o.x?(k=n,E=n.x,M=o,S=o.x):(k=o,E=o.x,M=n,S=n.x)):(e.y<t.y?(b=e,x=e.y,w=t,_=t.y):(b=t,x=t.y,w=e,_=e.y),n.y<o.y?(k=n,E=n.y,M=o,S=o.y):(k=o,E=o.y,M=n,S=n.y)),E>=x?E>_?[]:_==E?r?[]:[k]:S>=_?[k,w]:[k,M]:x>S?[]:x==S?r?[]:[b]:S>=_?[b,w]:[b,M]}function r(e,t,i,n){var o=1e-10,r=t.x-e.x,s=t.y-e.y,a=i.x-e.x,l=i.y-e.y,h=n.x-e.x,d=n.y-e.y,c=r*l-s*a,u=r*d-s*h;if(Math.abs(c)>o){var p=h*l-d*a;return c>0?u>=0&&p>=0:u>=0||p>=0}return u>0}function s(e,t){function i(e,t){var i=y.length-1,n=e-1;0>n&&(n=i);var o=e+1;o>i&&(o=0);var s=r(y[e],y[n],y[o],a[t]);if(!s)return!1;var l=a.length-1,h=t-1;0>h&&(h=l);var d=t+1;return d>l&&(d=0),s=r(a[t],a[h],a[d],y[e]),s?!0:!1}function o(e,t){var i,o,r;for(i=0;i<y.length;i++)if(o=i+1,o%=y.length,r=n(e,t,y[i],y[o],!0),r.length>0)return!0;return!1}function s(e,i){var o,r,s,a,l;for(o=0;o<b.length;o++)for(r=t[b[o]],s=0;s<r.length;s++)if(a=s+1,a%=r.length,l=n(e,i,r[s],r[a],!0),l.length>0)return!0;return!1}for(var a,l,h,d,c,u,p,m,f,g,v,y=e.concat(),b=[],w=[],x=0,_=t.length;_>x;x++)b.push(x);for(var k=0,M=2*b.length;b.length>0;){if(M--,0>M){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(h=k;h<y.length;h++){d=y[h],l=-1;for(var x=0;x<b.length;x++)if(u=b[x],p=d.x+":"+d.y+":"+u,void 0===w[p]){a=t[u];for(var E=0;E<a.length;E++)if(c=a[E],i(h,E)&&!o(d,c)&&!s(d,c)){l=E,b.splice(x,1),m=y.slice(0,h+1),f=y.slice(h),g=a.slice(l),v=a.slice(0,l+1),y=m.concat(g).concat(v).concat(f),k=h;break}if(l>=0)break;w[p]=!0}if(l>=0)break}}return y}for(var a,l,h,d,c,u,p={},m=e.concat(),f=0,g=t.length;g>f;f++)Array.prototype.push.apply(m,t[f]);for(a=0,l=m.length;l>a;a++)c=m[a].x+":"+m[a].y,void 0!==p[c]&&console.log("Duplicate point",c),p[c]=a;var v=s(e,t),y=o.FontUtils.Triangulate(v,!1);for(a=0,l=y.length;l>a;a++)for(d=y[a],h=0;3>h;h++)c=d[h].x+":"+d[h].y,u=p[c],void 0!==u&&(d[h]=u);return y.concat()},isClockWise:function(e){return o.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var i=1-e;return i*i*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,i,n){return this.b2p0(e,t)+this.b2p1(e,i)+this.b2p2(e,n)},b3p0:function(e,t){var i=1-e;return i*i*i*t},b3p1:function(e,t){var i=1-e;return 3*i*i*e*t},b3p2:function(e,t){var i=1-e;return 3*i*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,i,n,o){return this.b3p0(e,t)+this.b3p1(e,i)+this.b3p2(e,n)+this.b3p3(e,o)}},o.LineCurve=function(e,t){this.v1=e,this.v2=t},o.LineCurve.prototype=Object.create(o.Curve.prototype),o.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},o.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},o.LineCurve.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},o.QuadraticBezierCurve=function(e,t,i){this.v0=e,this.v1=t,this.v2=i},o.QuadraticBezierCurve.prototype=Object.create(o.Curve.prototype),o.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new o.Vector2;return t.x=o.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=o.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},o.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new o.Vector2;return t.x=o.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=o.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},o.CubicBezierCurve=function(e,t,i,n){this.v0=e,this.v1=t,this.v2=i,this.v3=n},o.CubicBezierCurve.prototype=Object.create(o.Curve.prototype),o.CubicBezierCurve.prototype.getPoint=function(e){var t,i;return t=o.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=o.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new o.Vector2(t,i)},o.CubicBezierCurve.prototype.getTangent=function(e){var t,i;t=o.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=o.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var n=new o.Vector2(t,i);return n.normalize(),n},o.SplineCurve=function(e){this.points=void 0==e?[]:e},o.SplineCurve.prototype=Object.create(o.Curve.prototype),o.SplineCurve.prototype.getPoint=function(e){var t=this.points,i=(t.length-1)*e,n=Math.floor(i),r=i-n,s=t[0==n?n:n-1],a=t[n],l=t[n>t.length-2?t.length-1:n+1],h=t[n>t.length-3?t.length-1:n+2],d=new o.Vector2;return d.x=o.Curve.Utils.interpolate(s.x,a.x,l.x,h.x,r),d.y=o.Curve.Utils.interpolate(s.y,a.y,l.y,h.y,r),d},o.EllipseCurve=function(e,t,i,n,o,r,s){this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=o,this.aEndAngle=r,this.aClockwise=s},o.EllipseCurve.prototype=Object.create(o.Curve.prototype),o.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI);var i;i=this.aClockwise===!0?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t;var n=new o.Vector2;return n.x=this.aX+this.xRadius*Math.cos(i),n.y=this.aY+this.yRadius*Math.sin(i),n},o.ArcCurve=function(e,t,i,n,r,s){o.EllipseCurve.call(this,e,t,i,i,n,r,s)},o.ArcCurve.prototype=Object.create(o.EllipseCurve.prototype),o.LineCurve3=o.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new o.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),o.QuadraticBezierCurve3=o.Curve.create(function(e,t,i){this.v0=e,this.v1=t,this.v2=i},function(e){var t=new o.Vector3;return t.x=o.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=o.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=o.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),o.CubicBezierCurve3=o.Curve.create(function(e,t,i,n){this.v0=e,this.v1=t,this.v2=i,this.v3=n},function(e){var t=new o.Vector3;return t.x=o.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=o.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=o.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),o.SplineCurve3=o.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,i=(t.length-1)*e,n=Math.floor(i),r=i-n,s=t[0==n?n:n-1],a=t[n],l=t[n>t.length-2?t.length-1:n+1],h=t[n>t.length-3?t.length-1:n+2],d=new o.Vector3;return d.x=o.Curve.Utils.interpolate(s.x,a.x,l.x,h.x,r),d.y=o.Curve.Utils.interpolate(s.y,a.y,l.y,h.y,r),d.z=o.Curve.Utils.interpolate(s.z,a.z,l.z,h.z,r),d}),o.ClosedSplineCurve3=o.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,i=(t.length-0)*e,n=Math.floor(i),r=i-n;n+=n>0?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length;var s=t[(n-1)%t.length],a=t[n%t.length],l=t[(n+1)%t.length],h=t[(n+2)%t.length],d=new o.Vector3;return d.x=o.Curve.Utils.interpolate(s.x,a.x,l.x,h.x,r),d.y=o.Curve.Utils.interpolate(s.y,a.y,l.y,h.y,r),d.z=o.Curve.Utils.interpolate(s.z,a.z,l.z,h.z,r),d}),o.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(e.initialized!==!0){for(var t=0;t<e.hierarchy.length;t++){for(var i=0;i<e.hierarchy[t].keys.length;i++)if(e.hierarchy[t].keys[i].time<0&&(e.hierarchy[t].keys[i].time=0),void 0!==e.hierarchy[t].keys[i].rot&&!(e.hierarchy[t].keys[i].rot instanceof o.Quaternion)){var n=e.hierarchy[t].keys[i].rot;e.hierarchy[t].keys[i].rot=(new o.Quaternion).fromArray(n)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var r={},i=0;i<e.hierarchy[t].keys.length;i++)for(var s=0;s<e.hierarchy[t].keys[i].morphTargets.length;s++){var a=e.hierarchy[t].keys[i].morphTargets[s];r[a]=-1}e.hierarchy[t].usedMorphTargets=r;for(var i=0;i<e.hierarchy[t].keys.length;i++){var l={};for(var a in r){for(var s=0;s<e.hierarchy[t].keys[i].morphTargets.length;s++)if(e.hierarchy[t].keys[i].morphTargets[s]===a){l[a]=e.hierarchy[t].keys[i].morphTargetsInfluences[s];break}s===e.hierarchy[t].keys[i].morphTargets.length&&(l[a]=0)}e.hierarchy[t].keys[i].morphTargetsInfluences=l}}for(var i=1;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].time===e.hierarchy[t].keys[i-1].time&&(e.hierarchy[t].keys.splice(i,1),i--);for(var i=0;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].index=i}return e.initialized=!0,e}},parse:function(e){var t=function(e,i){i.push(e);for(var n=0;n<e.children.length;n++)t(e.children[n],i)},i=[];if(e instanceof o.SkinnedMesh)for(var n=0;n<e.skeleton.bones.length;n++)i.push(e.skeleton.bones[n]);else t(e,i);return i},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){var t=this.animations.indexOf(e);-1!==t&&this.animations.splice(t,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(var t=0;t<this.animations.length;t++)this.animations[t].update(e)}},o.Animation=function(e,t){this.root=e,this.data=o.AnimationHandler.init(t),this.hierarchy=o.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=o.AnimationHandler.LINEAR},o.Animation.prototype.keyTypes=["pos","rot","scl"],o.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),o.AnimationHandler.play(this)},o.Animation.prototype.stop=function(){this.isPlaying=!1,o.AnimationHandler.stop(this)},o.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e];i.matrixAutoUpdate=!0,void 0===i.animationCache&&(i.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===i.animationCache.animations[this.data.name]&&(i.animationCache.animations[this.data.name]={},i.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},i.animationCache.animations[this.data.name].originalMatrix=i.matrix);for(var n=i.animationCache.animations[this.data.name],o=0;3>o;o++){for(var r=this.keyTypes[o],s=this.data.hierarchy[e].keys[0],a=this.getNextKeyWith(r,e,1);a.time<this.currentTime&&a.index>s.index;)s=a,a=this.getNextKeyWith(r,e,a.index+1);n.prevKey[r]=s,n.nextKey[r]=a}}},o.Animation.prototype.resetBlendWeights=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e];void 0!==i.animationCache&&(i.animationCache.blending.positionWeight=0,i.animationCache.blending.quaternionWeight=0,i.animationCache.blending.scaleWeight=0)}},o.Animation.prototype.update=function(){var e=[],t=new o.Vector3,i=new o.Vector3,n=new o.Quaternion,r=function(e,t){var i,n,o,r,a,l,h,d,c,u=[],p=[];return i=(e.length-1)*t,n=Math.floor(i),o=i-n,u[0]=0===n?n:n-1,u[1]=n,u[2]=n>e.length-2?n:n+1,u[3]=n>e.length-3?n:n+2,l=e[u[0]],h=e[u[1]],d=e[u[2]],c=e[u[3]],r=o*o,a=o*r,p[0]=s(l[0],h[0],d[0],c[0],o,r,a),p[1]=s(l[1],h[1],d[1],c[1],o,r,a),p[2]=s(l[2],h[2],d[2],c[2],o,r,a),p},s=function(e,t,i,n,o,r,s){var a=.5*(i-e),l=.5*(n-t);return(2*(t-i)+a+l)*s+(-3*(t-i)-2*a-l)*r+a*o+t};return function(s){if(this.isPlaying!==!1&&(this.currentTime+=s*this.timeScale,0!==this.weight)){var a=this.data.length;if(this.currentTime>a||this.currentTime<0){if(!this.loop)return void this.stop();this.currentTime%=a,this.currentTime<0&&(this.currentTime+=a),this.reset()}for(var l=0,h=this.hierarchy.length;h>l;l++)for(var d=this.hierarchy[l],c=d.animationCache.animations[this.data.name],u=d.animationCache.blending,p=0;3>p;p++){var m=this.keyTypes[p],f=c.prevKey[m],g=c.nextKey[m];if(this.timeScale>0&&g.time<=this.currentTime||this.timeScale<0&&f.time>=this.currentTime){for(f=this.data.hierarchy[l].keys[0],g=this.getNextKeyWith(m,l,1);g.time<this.currentTime&&g.index>f.index;)f=g,g=this.getNextKeyWith(m,l,g.index+1);c.prevKey[m]=f,c.nextKey[m]=g}d.matrixAutoUpdate=!0,d.matrixWorldNeedsUpdate=!0;var v=(this.currentTime-f.time)/(g.time-f.time),y=f[m],b=g[m];if(0>v&&(v=0),v>1&&(v=1),"pos"===m){if(this.interpolationType===o.AnimationHandler.LINEAR){i.x=y[0]+(b[0]-y[0])*v,i.y=y[1]+(b[1]-y[1])*v,i.z=y[2]+(b[2]-y[2])*v;var w=this.weight/(this.weight+u.positionWeight);d.position.lerp(i,w),u.positionWeight+=this.weight}else if(this.interpolationType===o.AnimationHandler.CATMULLROM||this.interpolationType===o.AnimationHandler.CATMULLROM_FORWARD){e[0]=this.getPrevKeyWith("pos",l,f.index-1).pos,e[1]=y,e[2]=b,e[3]=this.getNextKeyWith("pos",l,g.index+1).pos,v=.33*v+.33;var x=r(e,v),w=this.weight/(this.weight+u.positionWeight);u.positionWeight+=this.weight;var _=d.position;if(_.x=_.x+(x[0]-_.x)*w,_.y=_.y+(x[1]-_.y)*w,_.z=_.z+(x[2]-_.z)*w,this.interpolationType===o.AnimationHandler.CATMULLROM_FORWARD){var k=r(e,1.01*v);t.set(k[0],k[1],k[2]),t.sub(_),t.y=0,t.normalize();var M=Math.atan2(t.x,t.z);d.rotation.set(0,M,0)}}}else if("rot"===m)if(o.Quaternion.slerp(y,b,n,v),0===u.quaternionWeight)d.quaternion.copy(n),u.quaternionWeight=this.weight;else{var w=this.weight/(this.weight+u.quaternionWeight);o.Quaternion.slerp(d.quaternion,n,d.quaternion,w),u.quaternionWeight+=this.weight}else if("scl"===m){i.x=y[0]+(b[0]-y[0])*v,i.y=y[1]+(b[1]-y[1])*v,i.z=y[2]+(b[2]-y[2])*v;var w=this.weight/(this.weight+u.scaleWeight);d.scale.lerp(i,w),u.scaleWeight+=this.weight}}return!0}}}(),o.Animation.prototype.getNextKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys;for(this.interpolationType===o.AnimationHandler.CATMULLROM||this.interpolationType===o.AnimationHandler.CATMULLROM_FORWARD?i=i<n.length-1?i:n.length-1:i%=n.length;i<n.length;i++)if(void 0!==n[i][e])return n[i];return this.data.hierarchy[t].keys[0]},o.Animation.prototype.getPrevKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys;for(i=this.interpolationType===o.AnimationHandler.CATMULLROM||this.interpolationType===o.AnimationHandler.CATMULLROM_FORWARD?i>0?i:0:i>=0?i:i+n.length;i>=0;i--)if(void 0!==n[i][e])return n[i];return this.data.hierarchy[t].keys[n.length-1]},o.KeyFrameAnimation=function(e){this.root=e.node,this.data=o.AnimationHandler.init(e),this.hierarchy=o.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var t=0,i=this.hierarchy.length;i>t;t++){var n=this.data.hierarchy[t].keys,r=this.data.hierarchy[t].sids,s=this.hierarchy[t];if(n.length&&r){for(var a=0;a<r.length;a++){var l=r[a],h=this.getNextKeyWith(l,t,0);h&&h.apply(l)}s.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),s.matrixWorldNeedsUpdate=!0}}},o.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,this.isPlaying===!1){this.isPlaying=!0;var t,i,n,r=this.hierarchy.length;for(t=0;r>t;t++){i=this.hierarchy[t],n=this.data.hierarchy[t],void 0===n.animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=i.matrix);var s=this.data.hierarchy[t].keys;s.length&&(n.animationCache.prevKey=s[0],n.animationCache.nextKey=s[1],this.startTime=Math.min(s[0].time,this.startTime),this.endTime=Math.max(s[s.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,o.AnimationHandler.play(this)},o.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,o.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],i=this.data.hierarchy[e];if(void 0!==i.animationCache){var n=i.animationCache.originalMatrix;n.copy(t.matrix),t.matrix=n,delete i.animationCache}}},o.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying!==!1){this.currentTime+=e*this.timeScale;var t=this.data.length;this.loop===!0&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t);for(var i=0,n=this.hierarchy.length;n>i;i++){var o=this.hierarchy[i],r=this.data.hierarchy[i],s=r.keys,a=r.animationCache;if(s.length){var l=a.prevKey,h=a.nextKey;if(h.time<=this.currentTime){for(;h.time<this.currentTime&&h.index>l.index;)l=h,h=s[l.index+1];a.prevKey=l,a.nextKey=h}h.time>=this.currentTime?l.interpolate(h,this.currentTime):l.interpolate(h,h.time),this.data.hierarchy[i].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}}},o.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys;for(i%=n.length;i<n.length;i++)if(n[i].hasTarget(e))return n[i];return n[0]},o.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,i){var n=this.data.hierarchy[t].keys;for(i=i>=0?i:i+n.length;i>=0;i--)if(n[i].hasTarget(e))return n[i];return n[n.length-1]},o.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},o.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1
},update:function(){var e=0,t=0;return function(i){if(this.isPlaying!==!1){this.currentTime+=i,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var n=this.duration/this.frames,o=Math.floor(this.currentTime/n);o!=t&&(this.mesh.morphTargetInfluences[e]=0,this.mesh.morphTargetInfluences[t]=1,this.mesh.morphTargetInfluences[o]=0,e=t,t=o),this.mesh.morphTargetInfluences[o]=this.currentTime%n/n,this.mesh.morphTargetInfluences[e]=1-this.mesh.morphTargetInfluences[o]}}}()},o.BoxGeometry=function(e,t,i,n,r,s){function a(e,t,i,n,r,s,a,h){var d,c,u,p=l.widthSegments,m=l.heightSegments,f=r/2,g=s/2,v=l.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?d="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(d="y",m=l.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(d="x",p=l.depthSegments);var y=p+1,b=m+1,w=r/p,x=s/m,_=new o.Vector3;for(_[d]=a>0?1:-1,u=0;b>u;u++)for(c=0;y>c;c++){var k=new o.Vector3;k[e]=(c*w-f)*i,k[t]=(u*x-g)*n,k[d]=a,l.vertices.push(k)}for(u=0;m>u;u++)for(c=0;p>c;c++){var M=c+y*u,E=c+y*(u+1),S=c+1+y*(u+1),T=c+1+y*u,C=new o.Vector2(c/p,1-u/m),A=new o.Vector2(c/p,1-(u+1)/m),j=new o.Vector2((c+1)/p,1-(u+1)/m),L=new o.Vector2((c+1)/p,1-u/m),P=new o.Face3(M+v,E+v,T+v);P.normal.copy(_),P.vertexNormals.push(_.clone(),_.clone(),_.clone()),P.materialIndex=h,l.faces.push(P),l.faceVertexUvs[0].push([C,A,L]),P=new o.Face3(E+v,S+v,T+v),P.normal.copy(_),P.vertexNormals.push(_.clone(),_.clone(),_.clone()),P.materialIndex=h,l.faces.push(P),l.faceVertexUvs[0].push([A.clone(),j,L.clone()])}}o.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:s},this.widthSegments=n||1,this.heightSegments=r||1,this.depthSegments=s||1;var l=this,h=e/2,d=t/2,c=i/2;a("z","y",-1,-1,i,t,h,0),a("z","y",1,-1,i,t,-h,1),a("x","z",1,1,e,i,d,2),a("x","z",1,-1,e,i,-d,3),a("x","y",1,-1,e,t,c,4),a("x","y",-1,-1,e,t,-c,5),this.mergeVertices()},o.BoxGeometry.prototype=Object.create(o.Geometry.prototype),o.CircleGeometry=function(e,t,i,n){o.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},e=e||50,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,s=[],a=new o.Vector3,l=new o.Vector2(.5,.5);for(this.vertices.push(a),s.push(l),r=0;t>=r;r++){var h=new o.Vector3,d=i+r/t*n;h.x=e*Math.cos(d),h.y=e*Math.sin(d),this.vertices.push(h),s.push(new o.Vector2((h.x/e+1)/2,(h.y/e+1)/2))}var c=new o.Vector3(0,0,1);for(r=1;t>=r;r++)this.faces.push(new o.Face3(r,r+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([s[r].clone(),s[r+1].clone(),l.clone()]);this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,e)},o.CircleGeometry.prototype=Object.create(o.Geometry.prototype),o.CubeGeometry=function(e,t,i,n,r,s){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new o.BoxGeometry(e,t,i,n,r,s)},o.CylinderGeometry=function(e,t,i,n,r,s){o.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:s},e=void 0!==e?e:20,t=void 0!==t?t:20,i=void 0!==i?i:100,n=n||8,r=r||1,s=void 0!==s?s:!1;var a,l,h=i/2,d=[],c=[];for(l=0;r>=l;l++){var u=[],p=[],m=l/r,f=m*(t-e)+e;for(a=0;n>=a;a++){var g=a/n,v=new o.Vector3;v.x=f*Math.sin(g*Math.PI*2),v.y=-m*i+h,v.z=f*Math.cos(g*Math.PI*2),this.vertices.push(v),u.push(this.vertices.length-1),p.push(new o.Vector2(g,1-m))}d.push(u),c.push(p)}var y,b,w=(t-e)/i;for(a=0;n>a;a++)for(0!==e?(y=this.vertices[d[0][a]].clone(),b=this.vertices[d[0][a+1]].clone()):(y=this.vertices[d[1][a]].clone(),b=this.vertices[d[1][a+1]].clone()),y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*w).normalize(),b.setY(Math.sqrt(b.x*b.x+b.z*b.z)*w).normalize(),l=0;r>l;l++){var x=d[l][a],_=d[l+1][a],k=d[l+1][a+1],M=d[l][a+1],E=y.clone(),S=y.clone(),T=b.clone(),C=b.clone(),A=c[l][a].clone(),j=c[l+1][a].clone(),L=c[l+1][a+1].clone(),P=c[l][a+1].clone();this.faces.push(new o.Face3(x,_,M,[E,S,C])),this.faceVertexUvs[0].push([A,j,P]),this.faces.push(new o.Face3(_,k,M,[S.clone(),T,C.clone()])),this.faceVertexUvs[0].push([j.clone(),L,P.clone()])}if(s===!1&&e>0)for(this.vertices.push(new o.Vector3(0,h,0)),a=0;n>a;a++){var x=d[0][a],_=d[0][a+1],k=this.vertices.length-1,E=new o.Vector3(0,1,0),S=new o.Vector3(0,1,0),T=new o.Vector3(0,1,0),A=c[0][a].clone(),j=c[0][a+1].clone(),L=new o.Vector2(j.x,0);this.faces.push(new o.Face3(x,_,k,[E,S,T])),this.faceVertexUvs[0].push([A,j,L])}if(s===!1&&t>0)for(this.vertices.push(new o.Vector3(0,-h,0)),a=0;n>a;a++){var x=d[l][a+1],_=d[l][a],k=this.vertices.length-1,E=new o.Vector3(0,-1,0),S=new o.Vector3(0,-1,0),T=new o.Vector3(0,-1,0),A=c[l][a+1].clone(),j=c[l][a].clone(),L=new o.Vector2(j.x,1);this.faces.push(new o.Face3(x,_,k,[E,S,T])),this.faceVertexUvs[0].push([A,j,L])}this.computeFaceNormals()},o.CylinderGeometry.prototype=Object.create(o.Geometry.prototype),o.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?void(e=[]):(o.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())},o.ExtrudeGeometry.prototype=Object.create(o.Geometry.prototype),o.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var i=e.length,n=0;i>n;n++){var o=e[n];this.addShape(o,t)}},o.ExtrudeGeometry.prototype.addShape=function(e,t){function i(e,t,i){return t||console.log("die"),t.clone().multiplyScalar(i).add(e)}function n(e,t,i){var n,r,s=1e-10,a=1,l=e.x-t.x,h=e.y-t.y,d=i.x-e.x,c=i.y-e.y,u=l*l+h*h,p=l*c-h*d;if(Math.abs(p)>s){var m=Math.sqrt(u),f=Math.sqrt(d*d+c*c),g=t.x-h/m,v=t.y+l/m,y=i.x-c/f,b=i.y+d/f,w=((y-g)*c-(b-v)*d)/(l*c-h*d);n=g+l*w-e.x,r=v+h*w-e.y;var x=n*n+r*r;if(2>=x)return new o.Vector2(n,r);a=Math.sqrt(x/2)}else{var _=!1;l>s?d>s&&(_=!0):-s>l?-s>d&&(_=!0):Math.sign(h)==Math.sign(c)&&(_=!0),_?(n=-h,r=l,a=Math.sqrt(u)):(n=l,r=h,a=Math.sqrt(u/2))}return new o.Vector2(n/a,r/a)}function r(){if(w){var e=0,t=G*e;for(Y=0;W>Y;Y++)q=B[Y],h(q[2]+t,q[1]+t,q[0]+t);for(e=_+2*b,t=G*e,Y=0;W>Y;Y++)q=B[Y],h(q[0]+t,q[1]+t,q[2]+t)}else{for(Y=0;W>Y;Y++)q=B[Y],h(q[2],q[1],q[0]);for(Y=0;W>Y;Y++)q=B[Y],h(q[0]+G*_,q[1]+G*_,q[2]+G*_)}}function s(){var e=0;for(a(V,e),e+=V.length,A=0,j=F.length;j>A;A++)C=F[A],a(C,e),e+=C.length}function a(e,t){var i,n;for(Y=e.length;--Y>=0;){i=Y,n=Y-1,0>n&&(n=e.length-1);var o=0,r=_+2*b;for(o=0;r>o;o++){var s=G*o,a=G*(o+1),l=t+i+s,h=t+n+s,c=t+n+a,u=t+i+a;d(l,h,c,u,e,o,r,i,n)}}}function l(e,t,i){L.vertices.push(new o.Vector3(e,t,i))}function h(e,t,i){e+=P,t+=P,i+=P,L.faces.push(new o.Face3(e,t,i,null,null,E));var n=T.generateTopUV(L,e,t,i);L.faceVertexUvs[0].push(n)}function d(e,t,i,n){e+=P,t+=P,i+=P,n+=P,L.faces.push(new o.Face3(e,t,n,null,null,S)),L.faces.push(new o.Face3(t,i,n,null,null,S));var r=T.generateSideWallUV(L,e,t,i,n);L.faceVertexUvs[0].push([r[0],r[1],r[3]]),L.faceVertexUvs[0].push([r[1],r[2],r[3]])}var c,u,p,m,f,g=void 0!==t.amount?t.amount:100,v=void 0!==t.bevelThickness?t.bevelThickness:6,y=void 0!==t.bevelSize?t.bevelSize:v-2,b=void 0!==t.bevelSegments?t.bevelSegments:3,w=void 0!==t.bevelEnabled?t.bevelEnabled:!0,x=void 0!==t.curveSegments?t.curveSegments:12,_=void 0!==t.steps?t.steps:1,k=t.extrudePath,M=!1,E=t.material,S=t.extrudeMaterial,T=void 0!==t.UVGenerator?t.UVGenerator:o.ExtrudeGeometry.WorldUVGenerator;k&&(c=k.getSpacedPoints(_),M=!0,w=!1,u=void 0!==t.frames?t.frames:new o.TubeGeometry.FrenetFrames(k,_,!1),p=new o.Vector3,m=new o.Vector3,f=new o.Vector3),w||(b=0,v=0,y=0);var C,A,j,L=this,P=this.vertices.length,R=e.extractPoints(x),D=R.shape,F=R.holes,z=!o.Shape.Utils.isClockWise(D);if(z){for(D=D.reverse(),A=0,j=F.length;j>A;A++)C=F[A],o.Shape.Utils.isClockWise(C)&&(F[A]=C.reverse());z=!1}var B=o.Shape.Utils.triangulateShape(D,F),V=D;for(A=0,j=F.length;j>A;A++)C=F[A],D=D.concat(C);for(var U,O,N,I,H,q,G=D.length,W=B.length,X=(V.length,180/Math.PI,[]),Y=0,K=V.length,Z=K-1,Q=Y+1;K>Y;Y++,Z++,Q++){Z===K&&(Z=0),Q===K&&(Q=0);{V[Y],V[Z],V[Q]}X[Y]=n(V[Y],V[Z],V[Q])}var $,J=[],et=X.concat();for(A=0,j=F.length;j>A;A++){for(C=F[A],$=[],Y=0,K=C.length,Z=K-1,Q=Y+1;K>Y;Y++,Z++,Q++)Z===K&&(Z=0),Q===K&&(Q=0),$[Y]=n(C[Y],C[Z],C[Q]);J.push($),et=et.concat($)}for(U=0;b>U;U++){for(N=U/b,I=v*(1-N),O=y*Math.sin(N*Math.PI/2),Y=0,K=V.length;K>Y;Y++)H=i(V[Y],X[Y],O),l(H.x,H.y,-I);for(A=0,j=F.length;j>A;A++)for(C=F[A],$=J[A],Y=0,K=C.length;K>Y;Y++)H=i(C[Y],$[Y],O),l(H.x,H.y,-I)}for(O=y,Y=0;G>Y;Y++)H=w?i(D[Y],et[Y],O):D[Y],M?(m.copy(u.normals[0]).multiplyScalar(H.x),p.copy(u.binormals[0]).multiplyScalar(H.y),f.copy(c[0]).add(m).add(p),l(f.x,f.y,f.z)):l(H.x,H.y,0);var tt;for(tt=1;_>=tt;tt++)for(Y=0;G>Y;Y++)H=w?i(D[Y],et[Y],O):D[Y],M?(m.copy(u.normals[tt]).multiplyScalar(H.x),p.copy(u.binormals[tt]).multiplyScalar(H.y),f.copy(c[tt]).add(m).add(p),l(f.x,f.y,f.z)):l(H.x,H.y,g/_*tt);for(U=b-1;U>=0;U--){for(N=U/b,I=v*(1-N),O=y*Math.sin(N*Math.PI/2),Y=0,K=V.length;K>Y;Y++)H=i(V[Y],X[Y],O),l(H.x,H.y,g+I);for(A=0,j=F.length;j>A;A++)for(C=F[A],$=J[A],Y=0,K=C.length;K>Y;Y++)H=i(C[Y],$[Y],O),M?l(H.x,H.y+c[_-1].y,c[_-1].x+I):l(H.x,H.y,g+I)}r(),s()},o.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,i,n){var r=e.vertices,s=r[t],a=r[i],l=r[n];return[new o.Vector2(s.x,s.y),new o.Vector2(a.x,a.y),new o.Vector2(l.x,l.y)]},generateSideWallUV:function(e,t,i,n,r){var s=e.vertices,a=s[t],l=s[i],h=s[n],d=s[r];return Math.abs(a.y-l.y)<.01?[new o.Vector2(a.x,1-a.z),new o.Vector2(l.x,1-l.z),new o.Vector2(h.x,1-h.z),new o.Vector2(d.x,1-d.z)]:[new o.Vector2(a.y,1-a.z),new o.Vector2(l.y,1-l.z),new o.Vector2(h.y,1-h.z),new o.Vector2(d.y,1-d.z)]}},o.ShapeGeometry=function(e,t){o.Geometry.call(this),this.type="ShapeGeometry",e instanceof Array==!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},o.ShapeGeometry.prototype=Object.create(o.Geometry.prototype),o.ShapeGeometry.prototype.addShapeList=function(e,t){for(var i=0,n=e.length;n>i;i++)this.addShape(e[i],t);return this},o.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var i,n,r,s=void 0!==t.curveSegments?t.curveSegments:12,a=t.material,l=void 0===t.UVGenerator?o.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,h=this.vertices.length,d=e.extractPoints(s),c=d.shape,u=d.holes,p=!o.Shape.Utils.isClockWise(c);if(p){for(c=c.reverse(),i=0,n=u.length;n>i;i++)r=u[i],o.Shape.Utils.isClockWise(r)&&(u[i]=r.reverse());p=!1}var m=o.Shape.Utils.triangulateShape(c,u),f=c;for(i=0,n=u.length;n>i;i++)r=u[i],c=c.concat(r);{var g,v,y=c.length,b=m.length;f.length}for(i=0;y>i;i++)g=c[i],this.vertices.push(new o.Vector3(g.x,g.y,0));for(i=0;b>i;i++){v=m[i];var w=v[0]+h,x=v[1]+h,_=v[2]+h;this.faces.push(new o.Face3(w,x,_,null,null,a)),this.faceVertexUvs[0].push(l.generateTopUV(this,w,x,_))}},o.LatheGeometry=function(e,t,i,n){o.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=t||12,i=i||0,n=n||2*Math.PI;for(var r=1/(e.length-1),s=1/t,a=0,l=t;l>=a;a++)for(var h=i+a*s*n,d=Math.cos(h),c=Math.sin(h),u=0,p=e.length;p>u;u++){var m=e[u],f=new o.Vector3;f.x=d*m.x-c*m.y,f.y=c*m.x+d*m.y,f.z=m.z,this.vertices.push(f)}for(var g=e.length,a=0,l=t;l>a;a++)for(var u=0,p=e.length-1;p>u;u++){var v=u+g*a,y=v,b=v+g,d=v+1+g,w=v+1,x=a*s,_=u*r,k=x+s,M=_+r;this.faces.push(new o.Face3(y,b,w)),this.faceVertexUvs[0].push([new o.Vector2(x,_),new o.Vector2(k,_),new o.Vector2(x,M)]),this.faces.push(new o.Face3(b,d,w)),this.faceVertexUvs[0].push([new o.Vector2(k,_),new o.Vector2(k,M),new o.Vector2(x,M)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},o.LatheGeometry.prototype=Object.create(o.Geometry.prototype),o.PlaneGeometry=function(e,t,i,n){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),o.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new o.PlaneBufferGeometry(e,t,i,n))},o.PlaneGeometry.prototype=Object.create(o.Geometry.prototype),o.PlaneBufferGeometry=function(e,t,i,n){o.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};for(var r=e/2,s=t/2,a=i||1,l=n||1,h=a+1,d=l+1,c=e/a,u=t/l,p=new Float32Array(h*d*3),m=new Float32Array(h*d*3),f=new Float32Array(h*d*2),g=0,v=0,y=0;d>y;y++)for(var b=y*u-s,w=0;h>w;w++){var x=w*c-r;p[g]=x,p[g+1]=-b,m[g+2]=1,f[v]=w/a,f[v+1]=1-y/l,g+=3,v+=2}g=0;for(var _=new(p.length/3>65535?Uint32Array:Uint16Array)(a*l*6),y=0;l>y;y++)for(var w=0;a>w;w++){var k=w+h*y,M=w+h*(y+1),E=w+1+h*(y+1),S=w+1+h*y;_[g]=k,_[g+1]=M,_[g+2]=S,_[g+3]=M,_[g+4]=E,_[g+5]=S,g+=6}this.addAttribute("index",new o.BufferAttribute(_,1)),this.addAttribute("position",new o.BufferAttribute(p,3)),this.addAttribute("normal",new o.BufferAttribute(m,3)),this.addAttribute("uv",new o.BufferAttribute(f,2))},o.PlaneBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.RingGeometry=function(e,t,i,n,r,s){o.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:s},e=e||0,t=t||50,r=void 0!==r?r:0,s=void 0!==s?s:2*Math.PI,i=void 0!==i?Math.max(3,i):8,n=void 0!==n?Math.max(1,n):8;var a,l,h=[],d=e,c=(t-e)/n;for(a=0;n+1>a;a++){for(l=0;i+1>l;l++){var u=new o.Vector3,p=r+l/i*s;u.x=d*Math.cos(p),u.y=d*Math.sin(p),this.vertices.push(u),h.push(new o.Vector2((u.x/t+1)/2,(u.y/t+1)/2))}d+=c}var m=new o.Vector3(0,0,1);for(a=0;n>a;a++){var f=a*(i+1);for(l=0;i>l;l++){var p=l+f,g=p,v=p+i+1,y=p+i+2;this.faces.push(new o.Face3(g,v,y,[m.clone(),m.clone(),m.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[v].clone(),h[y].clone()]),g=p,v=p+i+2,y=p+1,this.faces.push(new o.Face3(g,v,y,[m.clone(),m.clone(),m.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[v].clone(),h[y].clone()])}}this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,d)},o.RingGeometry.prototype=Object.create(o.Geometry.prototype),o.SphereGeometry=function(e,t,i,n,r,s,a){o.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,s=void 0!==s?s:0,a=void 0!==a?a:Math.PI;var l,h,d=[],c=[];for(h=0;i>=h;h++){var u=[],p=[];for(l=0;t>=l;l++){var m=l/t,f=h/i,g=new o.Vector3;g.x=-e*Math.cos(n+m*r)*Math.sin(s+f*a),g.y=e*Math.cos(s+f*a),g.z=e*Math.sin(n+m*r)*Math.sin(s+f*a),this.vertices.push(g),u.push(this.vertices.length-1),p.push(new o.Vector2(m,1-f))}d.push(u),c.push(p)}for(h=0;i>h;h++)for(l=0;t>l;l++){var v=d[h][l+1],y=d[h][l],b=d[h+1][l],w=d[h+1][l+1],x=this.vertices[v].clone().normalize(),_=this.vertices[y].clone().normalize(),k=this.vertices[b].clone().normalize(),M=this.vertices[w].clone().normalize(),E=c[h][l+1].clone(),S=c[h][l].clone(),T=c[h+1][l].clone(),C=c[h+1][l+1].clone();Math.abs(this.vertices[v].y)===e?(E.x=(E.x+S.x)/2,this.faces.push(new o.Face3(v,b,w,[x,k,M])),this.faceVertexUvs[0].push([E,T,C])):Math.abs(this.vertices[b].y)===e?(T.x=(T.x+C.x)/2,this.faces.push(new o.Face3(v,y,b,[x,_,k])),this.faceVertexUvs[0].push([E,S,T])):(this.faces.push(new o.Face3(v,y,w,[x,_,M])),this.faceVertexUvs[0].push([E,S,C]),this.faces.push(new o.Face3(y,b,w,[_.clone(),k,M.clone()])),this.faceVertexUvs[0].push([S.clone(),T,C.clone()]))}this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,e)},o.SphereGeometry.prototype=Object.create(o.Geometry.prototype),o.TextGeometry=function(e,t){t=t||{};var i=o.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),o.ExtrudeGeometry.call(this,i,t),this.type="TextGeometry"},o.TextGeometry.prototype=Object.create(o.ExtrudeGeometry.prototype),o.TorusGeometry=function(e,t,i,n,r){o.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},e=e||100,t=t||40,i=i||8,n=n||6,r=r||2*Math.PI;for(var s=new o.Vector3,a=[],l=[],h=0;i>=h;h++)for(var d=0;n>=d;d++){var c=d/n*r,u=h/i*Math.PI*2;s.x=e*Math.cos(c),s.y=e*Math.sin(c);var p=new o.Vector3;p.x=(e+t*Math.cos(u))*Math.cos(c),p.y=(e+t*Math.cos(u))*Math.sin(c),p.z=t*Math.sin(u),this.vertices.push(p),a.push(new o.Vector2(d/n,h/i)),l.push(p.clone().sub(s).normalize())}for(var h=1;i>=h;h++)for(var d=1;n>=d;d++){var m=(n+1)*h+d-1,f=(n+1)*(h-1)+d-1,g=(n+1)*(h-1)+d,v=(n+1)*h+d,y=new o.Face3(m,f,v,[l[m].clone(),l[f].clone(),l[v].clone()]);this.faces.push(y),this.faceVertexUvs[0].push([a[m].clone(),a[f].clone(),a[v].clone()]),y=new o.Face3(f,g,v,[l[f].clone(),l[g].clone(),l[v].clone()]),this.faces.push(y),this.faceVertexUvs[0].push([a[f].clone(),a[g].clone(),a[v].clone()])}this.computeFaceNormals()},o.TorusGeometry.prototype=Object.create(o.Geometry.prototype),o.TorusKnotGeometry=function(e,t,i,n,r,s,a){function l(e,t,i,n,r){var s=Math.cos(e),a=Math.sin(e),l=t/i*e,h=Math.cos(l),d=n*(2+h)*.5*s,c=n*(2+h)*a*.5,u=r*n*Math.sin(l)*.5;return new o.Vector3(d,c,u)}o.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,p:r,q:s,heightScale:a},e=e||100,t=t||40,i=i||64,n=n||8,r=r||2,s=s||3,a=a||1;for(var h=new Array(i),d=new o.Vector3,c=new o.Vector3,u=new o.Vector3,p=0;i>p;++p){h[p]=new Array(n);var m=p/i*2*r*Math.PI,f=l(m,s,r,e,a),g=l(m+.01,s,r,e,a);d.subVectors(g,f),c.addVectors(g,f),u.crossVectors(d,c),c.crossVectors(u,d),u.normalize(),c.normalize();for(var v=0;n>v;++v){var y=v/n*2*Math.PI,b=-t*Math.cos(y),w=t*Math.sin(y),x=new o.Vector3;x.x=f.x+b*c.x+w*u.x,x.y=f.y+b*c.y+w*u.y,x.z=f.z+b*c.z+w*u.z,h[p][v]=this.vertices.push(x)-1}}for(var p=0;i>p;++p)for(var v=0;n>v;++v){var _=(p+1)%i,k=(v+1)%n,M=h[p][v],E=h[_][v],S=h[_][k],T=h[p][k],C=new o.Vector2(p/i,v/n),A=new o.Vector2((p+1)/i,v/n),j=new o.Vector2((p+1)/i,(v+1)/n),L=new o.Vector2(p/i,(v+1)/n);this.faces.push(new o.Face3(M,E,T)),this.faceVertexUvs[0].push([C,A,L]),this.faces.push(new o.Face3(E,S,T)),this.faceVertexUvs[0].push([A.clone(),j,L.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},o.TorusKnotGeometry.prototype=Object.create(o.Geometry.prototype),o.TubeGeometry=function(e,t,i,n,r){function s(e,t,i){return C.vertices.push(new o.Vector3(e,t,i))-1}o.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:i,radialSegments:n,closed:r},t=t||64,i=i||1,n=n||8,r=r||!1;var a,l,h,d,c,u,p,m,f,g,v,y,b,w,x,_,k,M,E,S,T=[],C=this,A=t+1,j=new o.Vector3,L=new o.TubeGeometry.FrenetFrames(e,t,r),P=L.tangents,R=L.normals,D=L.binormals;for(this.tangents=P,this.normals=R,this.binormals=D,f=0;A>f;f++)for(T[f]=[],d=f/(A-1),m=e.getPointAt(d),a=P[f],l=R[f],h=D[f],g=0;n>g;g++)c=g/n*2*Math.PI,u=-i*Math.cos(c),p=i*Math.sin(c),j.copy(m),j.x+=u*l.x+p*h.x,j.y+=u*l.y+p*h.y,j.z+=u*l.z+p*h.z,T[f][g]=s(j.x,j.y,j.z);for(f=0;t>f;f++)for(g=0;n>g;g++)v=r?(f+1)%t:f+1,y=(g+1)%n,b=T[f][g],w=T[v][g],x=T[v][y],_=T[f][y],k=new o.Vector2(f/t,g/n),M=new o.Vector2((f+1)/t,g/n),E=new o.Vector2((f+1)/t,(g+1)/n),S=new o.Vector2(f/t,(g+1)/n),this.faces.push(new o.Face3(b,w,_)),this.faceVertexUvs[0].push([k,M,S]),this.faces.push(new o.Face3(w,x,_)),this.faceVertexUvs[0].push([M.clone(),E,S.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.TubeGeometry.prototype=Object.create(o.Geometry.prototype),o.TubeGeometry.FrenetFrames=function(e,t,i){function n(){m[0]=new o.Vector3,f[0]=new o.Vector3,s=Number.MAX_VALUE,a=Math.abs(p[0].x),l=Math.abs(p[0].y),h=Math.abs(p[0].z),s>=a&&(s=a,u.set(1,0,0)),s>=l&&(s=l,u.set(0,1,0)),s>=h&&u.set(0,0,1),g.crossVectors(p[0],u).normalize(),m[0].crossVectors(p[0],g),f[0].crossVectors(p[0],m[0])}var r,s,a,l,h,d,c,u=(new o.Vector3,new o.Vector3),p=(new o.Vector3,[]),m=[],f=[],g=new o.Vector3,v=new o.Matrix4,y=t+1,b=1e-4;for(this.tangents=p,this.normals=m,this.binormals=f,d=0;y>d;d++)c=d/(y-1),p[d]=e.getTangentAt(c),p[d].normalize();for(n(),d=1;y>d;d++)m[d]=m[d-1].clone(),f[d]=f[d-1].clone(),g.crossVectors(p[d-1],p[d]),g.length()>b&&(g.normalize(),r=Math.acos(o.Math.clamp(p[d-1].dot(p[d]),-1,1)),m[d].applyMatrix4(v.makeRotationAxis(g,r))),f[d].crossVectors(p[d],m[d]);if(i)for(r=Math.acos(o.Math.clamp(m[0].dot(m[y-1]),-1,1)),r/=y-1,p[0].dot(g.crossVectors(m[0],m[y-1]))>0&&(r=-r),d=1;y>d;d++)m[d].applyMatrix4(v.makeRotationAxis(p[d],r*d)),f[d].crossVectors(p[d],m[d])},o.PolyhedronGeometry=function(e,t,i,n){function r(e){var t=e.normalize().clone();t.index=c.vertices.push(t)-1;var i=l(e)/2/Math.PI+.5,n=h(e)/Math.PI+.5;return t.uv=new o.Vector2(i,1-n),t}function s(e,t,i){var n=new o.Face3(e.index,t.index,i.index,[e.clone(),t.clone(),i.clone()]);c.faces.push(n),w.copy(e).add(t).add(i).divideScalar(3);var r=l(w);c.faceVertexUvs[0].push([d(e.uv,e,r),d(t.uv,t,r),d(i.uv,i,r)])}function a(e,t){for(var i=Math.pow(2,t),n=(Math.pow(4,t),r(c.vertices[e.a])),o=r(c.vertices[e.b]),a=r(c.vertices[e.c]),l=[],h=0;i>=h;h++){l[h]=[];for(var d=r(n.clone().lerp(a,h/i)),u=r(o.clone().lerp(a,h/i)),p=i-h,m=0;p>=m;m++)l[h][m]=0==m&&h==i?d:r(d.clone().lerp(u,m/p))}for(var h=0;i>h;h++)for(var m=0;2*(i-h)-1>m;m++){var f=Math.floor(m/2);m%2==0?s(l[h][f+1],l[h+1][f],l[h][f]):s(l[h][f+1],l[h+1][f+1],l[h+1][f])}}function l(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function d(e,t,i){return 0>i&&1===e.x&&(e=new o.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new o.Vector2(i/2/Math.PI+.5,e.y)),e.clone()}o.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1,n=n||0;for(var c=this,u=0,p=e.length;p>u;u+=3)r(new o.Vector3(e[u],e[u+1],e[u+2]));for(var m=this.vertices,f=[],u=0,g=0,p=t.length;p>u;u+=3,g++){var v=m[t[u]],y=m[t[u+1]],b=m[t[u+2]];f[g]=new o.Face3(v.index,y.index,b.index,[v.clone(),y.clone(),b.clone()])}for(var w=new o.Vector3,u=0,p=f.length;p>u;u++)a(f[u],n);for(var u=0,p=this.faceVertexUvs[0].length;p>u;u++){var x=this.faceVertexUvs[0][u],_=x[0].x,k=x[1].x,M=x[2].x,E=Math.max(_,Math.max(k,M)),S=Math.min(_,Math.min(k,M));E>.9&&.1>S&&(.2>_&&(x[0].x+=1),.2>k&&(x[1].x+=1),.2>M&&(x[2].x+=1))}for(var u=0,p=this.vertices.length;p>u;u++)this.vertices[u].multiplyScalar(i);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,i)},o.PolyhedronGeometry.prototype=Object.create(o.Geometry.prototype),o.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];o.PolyhedronGeometry.call(this,r,s,e,t)},o.DodecahedronGeometry.prototype=Object.create(o.Geometry.prototype),o.IcosahedronGeometry=function(e,t){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];o.PolyhedronGeometry.call(this,n,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},o.IcosahedronGeometry.prototype=Object.create(o.Geometry.prototype),o.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];o.PolyhedronGeometry.call(this,i,n,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},o.OctahedronGeometry.prototype=Object.create(o.Geometry.prototype),o.TetrahedronGeometry=function(e,t){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];o.PolyhedronGeometry.call(this,i,n,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},o.TetrahedronGeometry.prototype=Object.create(o.Geometry.prototype),o.ParametricGeometry=function(e,t,i){o.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i};var n,r,s,a,l,h=this.vertices,d=this.faces,c=this.faceVertexUvs[0],u=t+1;for(n=0;i>=n;n++)for(l=n/i,r=0;t>=r;r++)a=r/t,s=e(a,l),h.push(s);var p,m,f,g,v,y,b,w;for(n=0;i>n;n++)for(r=0;t>r;r++)p=n*u+r,m=n*u+r+1,f=(n+1)*u+r+1,g=(n+1)*u+r,v=new o.Vector2(r/t,n/i),y=new o.Vector2((r+1)/t,n/i),b=new o.Vector2((r+1)/t,(n+1)/i),w=new o.Vector2(r/t,(n+1)/i),d.push(new o.Face3(p,m,g)),c.push([v,y,w]),d.push(new o.Face3(m,f,g)),c.push([y.clone(),b,w.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.ParametricGeometry.prototype=Object.create(o.Geometry.prototype),o.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new o.BufferGeometry;n.addAttribute("position",new o.BufferAttribute(t,3)),n.addAttribute("color",new o.BufferAttribute(i,3));var r=new o.LineBasicMaterial({vertexColors:o.VertexColors});o.Line.call(this,n,r,o.LinePieces)},o.AxisHelper.prototype=Object.create(o.Line.prototype),o.ArrowHelper=function(){var e=new o.Geometry;e.vertices.push(new o.Vector3(0,0,0),new o.Vector3(0,1,0));var t=new o.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new o.Matrix4).makeTranslation(0,-.5,0)),function(i,n,r,s,a,l){o.Object3D.call(this),void 0===s&&(s=16776960),void 0===r&&(r=1),void 0===a&&(a=.2*r),void 0===l&&(l=.2*a),this.position.copy(n),this.line=new o.Line(e,new o.LineBasicMaterial({color:s})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new o.Mesh(t,new o.MeshBasicMaterial({color:s})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(r,a,l)}}(),o.ArrowHelper.prototype=Object.create(o.Object3D.prototype),o.ArrowHelper.prototype.setDirection=function(){var e,t=new o.Vector3;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),o.ArrowHelper.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},o.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},o.BoxHelper=function(e){var t=new o.BufferGeometry;t.addAttribute("position",new o.BufferAttribute(new Float32Array(72),3)),o.Line.call(this,t,new o.LineBasicMaterial({color:16776960}),o.LinePieces),void 0!==e&&this.update(e)},o.BoxHelper.prototype=Object.create(o.Line.prototype),o.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var i=t.boundingBox.min,n=t.boundingBox.max,o=this.geometry.attributes.position.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=i.x,o[4]=n.y,o[5]=n.z,o[6]=i.x,o[7]=n.y,o[8]=n.z,o[9]=i.x,o[10]=i.y,o[11]=n.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=i.y,o[20]=n.z,o[21]=n.x,o[22]=n.y,o[23]=n.z,o[24]=n.x,o[25]=n.y,o[26]=i.z,o[27]=i.x,o[28]=n.y,o[29]=i.z,o[30]=i.x,o[31]=n.y,o[32]=i.z,o[33]=i.x,o[34]=i.y,o[35]=i.z,o[36]=i.x,o[37]=i.y,o[38]=i.z,o[39]=n.x,o[40]=i.y,o[41]=i.z,o[42]=n.x,o[43]=i.y,o[44]=i.z,o[45]=n.x,o[46]=n.y,o[47]=i.z,o[48]=n.x,o[49]=n.y,o[50]=n.z,o[51]=n.x,o[52]=n.y,o[53]=i.z,o[54]=i.x,o[55]=n.y,o[56]=n.z,o[57]=i.x,o[58]=n.y,o[59]=i.z,o[60]=i.x,o[61]=i.y,o[62]=n.z,o[63]=i.x,o[64]=i.y,o[65]=i.z,o[66]=n.x,o[67]=i.y,o[68]=n.z,o[69]=n.x,o[70]=i.y,o[71]=i.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},o.BoundingBoxHelper=function(e,t){var i=void 0!==t?t:8947848;this.object=e,this.box=new o.Box3,o.Mesh.call(this,new o.BoxGeometry(1,1,1),new o.MeshBasicMaterial({color:i,wireframe:!0}))},o.BoundingBoxHelper.prototype=Object.create(o.Mesh.prototype),o.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},o.CameraHelper=function(e){function t(e,t,n){i(e,n),i(t,n)}function i(e,t){n.vertices.push(new o.Vector3),n.colors.push(new o.Color(t)),void 0===s[e]&&(s[e]=[]),s[e].push(n.vertices.length-1)}var n=new o.Geometry,r=new o.LineBasicMaterial({color:16777215,vertexColors:o.FaceColors}),s={},a=16755200,l=16711680,h=43775,d=16777215,c=3355443;t("n1","n2",a),t("n2","n4",a),t("n4","n3",a),t("n3","n1",a),t("f1","f2",a),t("f2","f4",a),t("f4","f3",a),t("f3","f1",a),t("n1","f1",a),t("n2","f2",a),t("n3","f3",a),t("n4","f4",a),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",h),t("u2","u3",h),t("u3","u1",h),t("c","t",d),t("p","c",c),t("cn1","cn2",c),t("cn3","cn4",c),t("cf1","cf2",c),t("cf3","cf4",c),o.Line.call(this,n,r,o.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()},o.CameraHelper.prototype=Object.create(o.Line.prototype),o.CameraHelper.prototype.update=function(){var e,t,i=new o.Vector3,n=new o.Camera,r=function(o,r,s,a){i.set(r,s,a).unproject(n);var l=t[o];if(void 0!==l)for(var h=0,d=l.length;d>h;h++)e.vertices[l[h]].copy(i)};return function(){e=this.geometry,t=this.pointMap;var i=1,o=1;n.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-i,-o,-1),r("n2",i,-o,-1),r("n3",-i,o,-1),r("n4",i,o,-1),r("f1",-i,-o,1),r("f2",i,-o,1),r("f3",-i,o,1),r("f4",i,o,1),r("u1",.7*i,1.1*o,-1),r("u2",.7*-i,1.1*o,-1),r("u3",0,2*o,-1),r("cf1",-i,0,1),r("cf2",i,0,1),r("cf3",0,-o,1),r("cf4",0,o,1),r("cn1",-i,0,-1),r("cn2",i,0,-1),r("cn3",0,-o,-1),r("cn4",0,o,-1),e.verticesNeedUpdate=!0}}(),o.DirectionalLightHelper=function(e,t){o.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var i=new o.Geometry;i.vertices.push(new o.Vector3(-t,t,0),new o.Vector3(t,t,0),new o.Vector3(t,-t,0),new o.Vector3(-t,-t,0),new o.Vector3(-t,t,0));var n=new o.LineBasicMaterial({fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new o.Line(i,n),this.add(this.lightPlane),i=new o.Geometry,i.vertices.push(new o.Vector3,new o.Vector3),n=new o.LineBasicMaterial({fog:!1}),n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new o.Line(i,n),this.add(this.targetLine),this.update()},o.DirectionalLightHelper.prototype=Object.create(o.Object3D.prototype),o.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},o.DirectionalLightHelper.prototype.update=function(){var e=new o.Vector3,t=new o.Vector3,i=new o.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),o.EdgesHelper=function(e,t){var i=void 0!==t?t:16777215,n=[0,0],r={},s=function(e,t){return e-t},a=["a","b","c"],l=new o.BufferGeometry,h=e.geometry.clone();h.mergeVertices(),h.computeFaceNormals();for(var d=h.vertices,c=h.faces,u=0,p=0,m=c.length;m>p;p++)for(var f=c[p],g=0;3>g;g++){n[0]=f[a[g]],n[1]=f[a[(g+1)%3]],n.sort(s);var v=n.toString();void 0===r[v]?(r[v]={vert1:n[0],vert2:n[1],face1:p,face2:void 0},u++):r[v].face2=p}var y=new Float32Array(2*u*3),b=0;for(var v in r){var w=r[v];if(void 0===w.face2||c[w.face1].normal.dot(c[w.face2].normal)<.9999){var x=d[w.vert1];y[b++]=x.x,y[b++]=x.y,y[b++]=x.z,x=d[w.vert2],y[b++]=x.x,y[b++]=x.y,y[b++]=x.z
}}l.addAttribute("position",new o.BufferAttribute(y,3)),o.Line.call(this,l,new o.LineBasicMaterial({color:i}),o.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},o.EdgesHelper.prototype=Object.create(o.Line.prototype),o.FaceNormalsHelper=function(e,t,i,n){this.object=e,this.size=void 0!==t?t:1;for(var r=void 0!==i?i:16776960,s=void 0!==n?n:1,a=new o.Geometry,l=this.object.geometry.faces,h=0,d=l.length;d>h;h++)a.vertices.push(new o.Vector3,new o.Vector3);o.Line.call(this,a,new o.LineBasicMaterial({color:r,linewidth:s}),o.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new o.Matrix3,this.update()},o.FaceNormalsHelper.prototype=Object.create(o.Line.prototype),o.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,i=t.geometry.vertices,n=t.geometry.faces,o=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(o);for(var r=0,s=0,a=n.length;a>r;r++,s+=2){var l=n[r];e[s].copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(o),e[s+1].copy(l.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[s])}return this.geometry.verticesNeedUpdate=!0,this},o.GridHelper=function(e,t){var i=new o.Geometry,n=new o.LineBasicMaterial({vertexColors:o.VertexColors});this.color1=new o.Color(4473924),this.color2=new o.Color(8947848);for(var r=-e;e>=r;r+=t){i.vertices.push(new o.Vector3(-e,0,r),new o.Vector3(e,0,r),new o.Vector3(r,0,-e),new o.Vector3(r,0,e));var s=0===r?this.color1:this.color2;i.colors.push(s,s,s,s)}o.Line.call(this,i,n,o.LinePieces)},o.GridHelper.prototype=Object.create(o.Line.prototype),o.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},o.HemisphereLightHelper=function(e,t){o.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new o.Color,new o.Color];var i=new o.SphereGeometry(t,4,2);i.applyMatrix((new o.Matrix4).makeRotationX(-Math.PI/2));for(var n=0,r=8;r>n;n++)i.faces[n].color=this.colors[4>n?0:1];var s=new o.MeshBasicMaterial({vertexColors:o.FaceColors,wireframe:!0});this.lightSphere=new o.Mesh(i,s),this.add(this.lightSphere),this.update()},o.HemisphereLightHelper.prototype=Object.create(o.Object3D.prototype),o.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},o.HemisphereLightHelper.prototype.update=function(){var e=new o.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),o.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var i=new o.SphereGeometry(t,4,2),n=new o.MeshBasicMaterial({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),o.Mesh.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},o.PointLightHelper.prototype=Object.create(o.Mesh.prototype),o.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},o.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},o.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new o.Geometry,i=0;i<this.bones.length;i++){var n=this.bones[i];n.parent instanceof o.Bone&&(t.vertices.push(new o.Vector3),t.vertices.push(new o.Vector3),t.colors.push(new o.Color(0,0,1)),t.colors.push(new o.Color(0,1,0)))}var r=new o.LineBasicMaterial({vertexColors:o.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});o.Line.call(this,t,r,o.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},o.SkeletonHelper.prototype=Object.create(o.Line.prototype),o.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof o.Bone&&t.push(e);for(var i=0;i<e.children.length;i++)t.push.apply(t,this.getBoneList(e.children[i]));return t},o.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new o.Matrix4).getInverse(this.root.matrixWorld),i=new o.Matrix4,n=0,r=0;r<this.bones.length;r++){var s=this.bones[r];s.parent instanceof o.Bone&&(i.multiplyMatrices(t,s.matrixWorld),e.vertices[n].setFromMatrixPosition(i),i.multiplyMatrices(t,s.parent.matrixWorld),e.vertices[n+1].setFromMatrixPosition(i),n+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},o.SpotLightHelper=function(e){o.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new o.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new o.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new o.Matrix4).makeRotationX(-Math.PI/2));var i=new o.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new o.Mesh(t,i),this.add(this.cone),this.update()},o.SpotLightHelper.prototype=Object.create(o.Object3D.prototype),o.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},o.SpotLightHelper.prototype.update=function(){var e=new o.Vector3,t=new o.Vector3;return function(){var i=this.light.distance?this.light.distance:1e4,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),o.VertexNormalsHelper=function(e,t,i,n){this.object=e,this.size=void 0!==t?t:1;for(var r=void 0!==i?i:16711680,s=void 0!==n?n:1,a=new o.Geometry,l=(e.geometry.vertices,e.geometry.faces),h=0,d=l.length;d>h;h++)for(var c=l[h],u=0,p=c.vertexNormals.length;p>u;u++)a.vertices.push(new o.Vector3,new o.Vector3);o.Line.call(this,a,new o.LineBasicMaterial({color:r,linewidth:s}),o.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new o.Matrix3,this.update()},o.VertexNormalsHelper.prototype=Object.create(o.Line.prototype),o.VertexNormalsHelper.prototype.update=function(){var e=new o.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var i=this.geometry.vertices,n=this.object.geometry.vertices,o=this.object.geometry.faces,r=this.object.matrixWorld,s=0,a=0,l=o.length;l>a;a++)for(var h=o[a],d=0,c=h.vertexNormals.length;c>d;d++){var u=h[t[d]],p=n[u],m=h.vertexNormals[d];i[s].copy(p).applyMatrix4(r),e.copy(m).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(i[s]),s+=1,i[s].copy(e),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),o.VertexTangentsHelper=function(e,t,i,n){this.object=e,this.size=void 0!==t?t:1;for(var r=void 0!==i?i:255,s=void 0!==n?n:1,a=new o.Geometry,l=(e.geometry.vertices,e.geometry.faces),h=0,d=l.length;d>h;h++)for(var c=l[h],u=0,p=c.vertexTangents.length;p>u;u++)a.vertices.push(new o.Vector3),a.vertices.push(new o.Vector3);o.Line.call(this,a,new o.LineBasicMaterial({color:r,linewidth:s}),o.LinePieces),this.matrixAutoUpdate=!1,this.update()},o.VertexTangentsHelper.prototype=Object.create(o.Line.prototype),o.VertexTangentsHelper.prototype.update=function(){var e=new o.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var i=this.geometry.vertices,n=this.object.geometry.vertices,o=this.object.geometry.faces,r=this.object.matrixWorld,s=0,a=0,l=o.length;l>a;a++)for(var h=o[a],d=0,c=h.vertexTangents.length;c>d;d++){var u=h[t[d]],p=n[u],m=h.vertexTangents[d];i[s].copy(p).applyMatrix4(r),e.copy(m).transformDirection(r).multiplyScalar(this.size),e.add(i[s]),s+=1,i[s].copy(e),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),o.WireframeHelper=function(e,t){var i=void 0!==t?t:16777215,n=[0,0],r={},s=function(e,t){return e-t},a=["a","b","c"],l=new o.BufferGeometry;if(e.geometry instanceof o.Geometry){for(var h=e.geometry.vertices,d=e.geometry.faces,c=0,u=new Uint32Array(6*d.length),p=0,m=d.length;m>p;p++)for(var f=d[p],g=0;3>g;g++){n[0]=f[a[g]],n[1]=f[a[(g+1)%3]],n.sort(s);var v=n.toString();void 0===r[v]&&(u[2*c]=n[0],u[2*c+1]=n[1],r[v]=!0,c++)}for(var y=new Float32Array(2*c*3),p=0,m=c;m>p;p++)for(var g=0;2>g;g++){var b=h[u[2*p+g]],w=6*p+3*g;y[w+0]=b.x,y[w+1]=b.y,y[w+2]=b.z}l.addAttribute("position",new o.BufferAttribute(y,3))}else if(e.geometry instanceof o.BufferGeometry)if(void 0!==e.geometry.attributes.index){var h=e.geometry.attributes.position.array,x=e.geometry.attributes.index.array,_=e.geometry.drawcalls,c=0;0===_.length&&(_=[{count:x.length,index:0,start:0}]);for(var u=new Uint32Array(2*x.length),k=0,M=_.length;M>k;++k)for(var E=_[k].start,S=_[k].count,w=_[k].index,p=E,T=E+S;T>p;p+=3)for(var g=0;3>g;g++){n[0]=w+x[p+g],n[1]=w+x[p+(g+1)%3],n.sort(s);var v=n.toString();void 0===r[v]&&(u[2*c]=n[0],u[2*c+1]=n[1],r[v]=!0,c++)}for(var y=new Float32Array(2*c*3),p=0,m=c;m>p;p++)for(var g=0;2>g;g++){var w=6*p+3*g,C=3*u[2*p+g];y[w+0]=h[C],y[w+1]=h[C+1],y[w+2]=h[C+2]}l.addAttribute("position",new o.BufferAttribute(y,3))}else{for(var h=e.geometry.attributes.position.array,c=h.length/3,A=c/3,y=new Float32Array(2*c*3),p=0,m=A;m>p;p++)for(var g=0;3>g;g++){var w=18*p+6*g,j=9*p+3*g;y[w+0]=h[j],y[w+1]=h[j+1],y[w+2]=h[j+2];var C=9*p+3*((g+1)%3);y[w+3]=h[C],y[w+4]=h[C+1],y[w+5]=h[C+2]}l.addAttribute("position",new o.BufferAttribute(y,3))}o.Line.call(this,l,new o.LineBasicMaterial({color:i}),o.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},o.WireframeHelper.prototype=Object.create(o.Line.prototype),o.ImmediateRenderObject=function(){o.Object3D.call(this),this.render=function(){}},o.ImmediateRenderObject.prototype=Object.create(o.Object3D.prototype),o.MorphBlendMesh=function(e,t){o.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,n="__default",r=0,s=i-1,a=i/1;this.createAnimation(n,r,s,a),this.setAnimationWeight(n,1)},o.MorphBlendMesh.prototype=Object.create(o.Mesh.prototype),o.MorphBlendMesh.prototype.createAnimation=function(e,t,i,n){var o={startFrame:t,endFrame:i,length:i-t+1,fps:n,duration:(i-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=o,this.animationsList.push(o)},o.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,i=/([a-z]+)_?(\d+)/,n={},o=this.geometry,r=0,s=o.morphTargets.length;s>r;r++){var a=o.morphTargets[r],l=a.name.match(i);if(l&&l.length>1){{var h=l[1];l[2]}n[h]||(n[h]={start:1/0,end:-1/0});var d=n[h];r<d.start&&(d.start=r),r>d.end&&(d.end=r),t||(t=h)}}for(var h in n){var d=n[h];this.createAnimation(h,d.start,d.end,e)}this.firstAnimation=t},o.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},o.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},o.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e];i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)},o.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e];i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)},o.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e];i&&(i.weight=t)},o.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e];i&&(i.time=t)},o.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,i=this.animationsMap[e];return i&&(t=i.time),t},o.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,i=this.animationsMap[e];return i&&(t=i.duration),t},o.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},o.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},o.MorphBlendMesh.prototype.update=function(e){for(var t=0,i=this.animationsList.length;i>t;t++){var n=this.animationsList[t];if(n.active){var r=n.duration/n.length;n.time+=n.direction*e,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var s=n.startFrame+o.Math.clamp(Math.floor(n.time/r),0,n.length-1),a=n.weight;s!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*a,this.morphTargetInfluences[s]=0,n.lastFrame=n.currentFrame,n.currentFrame=s);var l=n.time%r/r;n.directionBackwards&&(l=1-l),this.morphTargetInfluences[n.currentFrame]=l*a,this.morphTargetInfluences[n.lastFrame]=(1-l)*a}}},"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=o),i.THREE=o):this.THREE=o},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js":[function(e,t,i){(function(){var e=this,n=e._,o=Array.prototype,r=Object.prototype,s=Function.prototype,a=o.push,l=o.slice,h=o.concat,d=r.toString,c=r.hasOwnProperty,u=Array.isArray,p=Object.keys,m=s.bind,f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=f),i._=f):e._=f,f.VERSION="1.7.0";var g=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,r){return e.call(t,i,n,o,r)}}return function(){return e.apply(t,arguments)}};f.iteratee=function(e,t,i){return null==e?f.identity:f.isFunction(e)?g(e,t,i):f.isObject(e)?f.matches(e):f.property(e)},f.each=f.forEach=function(e,t,i){if(null==e)return e;t=g(t,i);var n,o=e.length;if(o===+o)for(n=0;o>n;n++)t(e[n],n,e);else{var r=f.keys(e);for(n=0,o=r.length;o>n;n++)t(e[r[n]],r[n],e)}return e},f.map=f.collect=function(e,t,i){if(null==e)return[];t=f.iteratee(t,i);for(var n,o=e.length!==+e.length&&f.keys(e),r=(o||e).length,s=Array(r),a=0;r>a;a++)n=o?o[a]:a,s[a]=t(e[n],n,e);return s};var v="Reduce of empty array with no initial value";f.reduce=f.foldl=f.inject=function(e,t,i,n){null==e&&(e=[]),t=g(t,n,4);var o,r=e.length!==+e.length&&f.keys(e),s=(r||e).length,a=0;if(arguments.length<3){if(!s)throw new TypeError(v);i=e[r?r[a++]:a++]}for(;s>a;a++)o=r?r[a]:a,i=t(i,e[o],o,e);return i},f.reduceRight=f.foldr=function(e,t,i,n){null==e&&(e=[]),t=g(t,n,4);var o,r=e.length!==+e.length&&f.keys(e),s=(r||e).length;if(arguments.length<3){if(!s)throw new TypeError(v);i=e[r?r[--s]:--s]}for(;s--;)o=r?r[s]:s,i=t(i,e[o],o,e);return i},f.find=f.detect=function(e,t,i){var n;return t=f.iteratee(t,i),f.some(e,function(e,i,o){return t(e,i,o)?(n=e,!0):void 0}),n},f.filter=f.select=function(e,t,i){var n=[];return null==e?n:(t=f.iteratee(t,i),f.each(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n)},f.reject=function(e,t,i){return f.filter(e,f.negate(f.iteratee(t)),i)},f.every=f.all=function(e,t,i){if(null==e)return!0;t=f.iteratee(t,i);var n,o,r=e.length!==+e.length&&f.keys(e),s=(r||e).length;for(n=0;s>n;n++)if(o=r?r[n]:n,!t(e[o],o,e))return!1;return!0},f.some=f.any=function(e,t,i){if(null==e)return!1;t=f.iteratee(t,i);var n,o,r=e.length!==+e.length&&f.keys(e),s=(r||e).length;for(n=0;s>n;n++)if(o=r?r[n]:n,t(e[o],o,e))return!0;return!1},f.contains=f.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=f.values(e)),f.indexOf(e,t)>=0)},f.invoke=function(e,t){var i=l.call(arguments,2),n=f.isFunction(t);return f.map(e,function(e){return(n?t:e[t]).apply(e,i)})},f.pluck=function(e,t){return f.map(e,f.property(t))},f.where=function(e,t){return f.filter(e,f.matches(t))},f.findWhere=function(e,t){return f.find(e,f.matches(t))},f.max=function(e,t,i){var n,o,r=-1/0,s=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:f.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],n>r&&(r=n)}else t=f.iteratee(t,i),f.each(e,function(e,i,n){o=t(e,i,n),(o>s||o===-1/0&&r===-1/0)&&(r=e,s=o)});return r},f.min=function(e,t,i){var n,o,r=1/0,s=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:f.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],r>n&&(r=n)}else t=f.iteratee(t,i),f.each(e,function(e,i,n){o=t(e,i,n),(s>o||1/0===o&&1/0===r)&&(r=e,s=o)});return r},f.shuffle=function(e){for(var t,i=e&&e.length===+e.length?e:f.values(e),n=i.length,o=Array(n),r=0;n>r;r++)t=f.random(0,r),t!==r&&(o[r]=o[t]),o[t]=i[r];return o},f.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=f.values(e)),e[f.random(e.length-1)]):f.shuffle(e).slice(0,Math.max(0,t))},f.sortBy=function(e,t,i){return t=f.iteratee(t,i),f.pluck(f.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var y=function(e){return function(t,i,n){var o={};return i=f.iteratee(i,n),f.each(t,function(n,r){var s=i(n,r,t);e(o,n,s)}),o}};f.groupBy=y(function(e,t,i){f.has(e,i)?e[i].push(t):e[i]=[t]}),f.indexBy=y(function(e,t,i){e[i]=t}),f.countBy=y(function(e,t,i){f.has(e,i)?e[i]++:e[i]=1}),f.sortedIndex=function(e,t,i,n){i=f.iteratee(i,n,1);for(var o=i(t),r=0,s=e.length;s>r;){var a=r+s>>>1;i(e[a])<o?r=a+1:s=a}return r},f.toArray=function(e){return e?f.isArray(e)?l.call(e):e.length===+e.length?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:e.length===+e.length?e.length:f.keys(e).length},f.partition=function(e,t,i){t=f.iteratee(t,i);var n=[],o=[];return f.each(e,function(e,i,r){(t(e,i,r)?n:o).push(e)}),[n,o]},f.first=f.head=f.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:l.call(e,0,t)},f.initial=function(e,t,i){return l.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},f.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},f.rest=f.tail=f.drop=function(e,t,i){return l.call(e,null==t||i?1:t)},f.compact=function(e){return f.filter(e,f.identity)};var b=function(e,t,i,n){if(t&&f.every(e,f.isArray))return h.apply(n,e);for(var o=0,r=e.length;r>o;o++){var s=e[o];f.isArray(s)||f.isArguments(s)?t?a.apply(n,s):b(s,t,i,n):i||n.push(s)}return n};f.flatten=function(e,t){return b(e,t,!1,[])},f.without=function(e){return f.difference(e,l.call(arguments,1))},f.uniq=f.unique=function(e,t,i,n){if(null==e)return[];f.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=f.iteratee(i,n));for(var o=[],r=[],s=0,a=e.length;a>s;s++){var l=e[s];if(t)s&&r===l||o.push(l),r=l;else if(i){var h=i(l,s,e);f.indexOf(r,h)<0&&(r.push(h),o.push(l))}else f.indexOf(o,l)<0&&o.push(l)}return o},f.union=function(){return f.uniq(b(arguments,!0,!0,[]))},f.intersection=function(e){if(null==e)return[];for(var t=[],i=arguments.length,n=0,o=e.length;o>n;n++){var r=e[n];if(!f.contains(t,r)){for(var s=1;i>s&&f.contains(arguments[s],r);s++);s===i&&t.push(r)}}return t},f.difference=function(e){var t=b(l.call(arguments,1),!0,!0,[]);return f.filter(e,function(e){return!f.contains(t,e)})},f.zip=function(e){if(null==e)return[];for(var t=f.max(arguments,"length").length,i=Array(t),n=0;t>n;n++)i[n]=f.pluck(arguments,n);return i},f.object=function(e,t){if(null==e)return{};for(var i={},n=0,o=e.length;o>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},f.indexOf=function(e,t,i){if(null==e)return-1;var n=0,o=e.length;if(i){if("number"!=typeof i)return n=f.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,o+i):i}for(;o>n;n++)if(e[n]===t)return n;return-1},f.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=e.length;for("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1));--n>=0;)if(e[n]===t)return n;return-1},f.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=Array(n),r=0;n>r;r++,e+=i)o[r]=e;return o};var w=function(){};f.bind=function(e,t){var i,n;if(m&&e.bind===m)return m.apply(e,l.call(arguments,1));if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");return i=l.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(l.call(arguments)));w.prototype=e.prototype;var o=new w;w.prototype=null;var r=e.apply(o,i.concat(l.call(arguments)));return f.isObject(r)?r:o}},f.partial=function(e){var t=l.call(arguments,1);return function(){for(var i=0,n=t.slice(),o=0,r=n.length;r>o;o++)n[o]===f&&(n[o]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},f.bindAll=function(e){var t,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)i=arguments[t],e[i]=f.bind(e[i],e);return e},f.memoize=function(e,t){var i=function(n){var o=i.cache,r=t?t.apply(this,arguments):n;return f.has(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return i.cache={},i},f.delay=function(e,t){var i=l.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},f.defer=function(e){return f.delay.apply(f,[e,1].concat(l.call(arguments,1)))},f.throttle=function(e,t,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:f.now(),s=null,r=e.apply(n,o),s||(n=o=null)};return function(){var h=f.now();a||i.leading!==!1||(a=h);var d=t-(h-a);return n=this,o=arguments,0>=d||d>t?(clearTimeout(s),s=null,a=h,r=e.apply(n,o),s||(n=o=null)):s||i.trailing===!1||(s=setTimeout(l,d)),r}},f.debounce=function(e,t,i){var n,o,r,s,a,l=function(){var h=f.now()-s;t>h&&h>0?n=setTimeout(l,t-h):(n=null,i||(a=e.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,s=f.now();var h=i&&!n;return n||(n=setTimeout(l,t)),h&&(a=e.apply(r,o),r=o=null),a}},f.wrap=function(e,t){return f.partial(t,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},f.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},f.before=function(e,t){var i;return function(){return--e>0?i=t.apply(this,arguments):t=null,i}},f.once=f.partial(f.before,2),f.keys=function(e){if(!f.isObject(e))return[];if(p)return p(e);var t=[];for(var i in e)f.has(e,i)&&t.push(i);return t},f.values=function(e){for(var t=f.keys(e),i=t.length,n=Array(i),o=0;i>o;o++)n[o]=e[t[o]];return n},f.pairs=function(e){for(var t=f.keys(e),i=t.length,n=Array(i),o=0;i>o;o++)n[o]=[t[o],e[t[o]]];return n},f.invert=function(e){for(var t={},i=f.keys(e),n=0,o=i.length;o>n;n++)t[e[i[n]]]=i[n];return t},f.functions=f.methods=function(e){var t=[];for(var i in e)f.isFunction(e[i])&&t.push(i);return t.sort()},f.extend=function(e){if(!f.isObject(e))return e;for(var t,i,n=1,o=arguments.length;o>n;n++){t=arguments[n];for(i in t)c.call(t,i)&&(e[i]=t[i])}return e},f.pick=function(e,t,i){var n,o={};if(null==e)return o;if(f.isFunction(t)){t=g(t,i);for(n in e){var r=e[n];t(r,n,e)&&(o[n]=r)}}else{var s=h.apply([],l.call(arguments,1));e=new Object(e);for(var a=0,d=s.length;d>a;a++)n=s[a],n in e&&(o[n]=e[n])}return o},f.omit=function(e,t,i){if(f.isFunction(t))t=f.negate(t);else{var n=f.map(h.apply([],l.call(arguments,1)),String);t=function(e,t){return!f.contains(n,t)}}return f.pick(e,t,i)},f.defaults=function(e){if(!f.isObject(e))return e;for(var t=1,i=arguments.length;i>t;t++){var n=arguments[t];for(var o in n)void 0===e[o]&&(e[o]=n[o])}return e},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,t){return t(e),e};var x=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof f&&(e=e._wrapped),t instanceof f&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=i.length;r--;)if(i[r]===e)return n[r]===t;var s=e.constructor,a=t.constructor;if(s!==a&&"constructor"in e&&"constructor"in t&&!(f.isFunction(s)&&s instanceof s&&f.isFunction(a)&&a instanceof a))return!1;i.push(e),n.push(t);var l,h;if("[object Array]"===o){if(l=e.length,h=l===t.length)for(;l--&&(h=x(e[l],t[l],i,n)););}else{var c,u=f.keys(e);if(l=u.length,h=f.keys(t).length===l)for(;l--&&(c=u[l],h=f.has(t,c)&&x(e[c],t[c],i,n)););}return i.pop(),n.pop(),h};f.isEqual=function(e,t){return x(e,t,[],[])},f.isEmpty=function(e){if(null==e)return!0;if(f.isArray(e)||f.isString(e)||f.isArguments(e))return 0===e.length;for(var t in e)if(f.has(e,t))return!1;return!0},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=u||function(e){return"[object Array]"===d.call(e)},f.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){f["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return f.has(e,"callee")}),"function"!=typeof/./&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&e!==+e},f.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,t){return null!=e&&c.call(e,t)},f.noConflict=function(){return e._=n,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=function(e){return function(t){return t[e]}},f.matches=function(e){var t=f.pairs(e),i=t.length;return function(e){if(null==e)return!i;e=new Object(e);for(var n=0;i>n;n++){var o=t[n],r=o[0];if(o[1]!==e[r]||!(r in e))return!1}return!0}},f.times=function(e,t,i){var n=Array(Math.max(0,e));t=g(t,i,1);for(var o=0;e>o;o++)n[o]=t(o);return n},f.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=f.invert(_),M=function(e){var t=function(t){return e[t]},i="(?:"+f.keys(e).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}};f.escape=M(_),f.unescape=M(k),f.result=function(e,t){if(null==e)return void 0;var i=e[t];return f.isFunction(i)?e[t]():i};var E=0;f.uniqueId=function(e){var t=++E+"";return e?e+t:t},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var S=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\u2028|\u2029/g,A=function(e){return"\\"+T[e]};f.template=function(e,t,i){!t&&i&&(t=i),t=f.defaults({},t,f.templateSettings);var n=RegExp([(t.escape||S).source,(t.interpolate||S).source,(t.evaluate||S).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(n,function(t,i,n,s,a){return r+=e.slice(o,a).replace(C,A),o=a+t.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(t.variable||"obj","_",r)}catch(a){throw a.source=r,a}var l=function(e){return s.call(this,e,f)},h=t.variable||"obj";return l.source="function("+h+"){\n"+r+"}",l},f.chain=function(e){var t=f(e);return t._chain=!0,t};var j=function(e){return this._chain?f(e).chain():e};f.mixin=function(e){f.each(f.functions(e),function(t){var i=f[t]=e[t];f.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),j.call(this,i.apply(f,e))}})},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];f.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],j.call(this,i)}}),f.each(["concat","join","slice"],function(e){var t=o[e];f.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}).call(this)},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/index.js":[function(e,t){"use strict";function i(e,t,l){if(!(this instanceof i))return new i(e,t,l);var h,d,c,u,p=s.test(e),m=typeof t,f=this,g=0;for("object"!==m&&"string"!==m&&(l=t,t=null),l&&"function"!=typeof l&&(l=r.parse),t=o(t);g<a.length;g++)d=a[g],h=d[0],u=d[1],h!==h?f[u]=e:"string"==typeof h?~(c=e.indexOf(h))&&("number"==typeof d[2]?(f[u]=e.slice(0,c),e=e.slice(c+d[2])):(f[u]=e.slice(c),e=e.slice(0,c))):(c=h.exec(e))&&(f[u]=c[1],e=e.slice(0,e.length-c[0].length)),f[u]=f[u]||(d[3]||"port"===u&&p?t[u]||"":""),d[4]&&(f[u]=f[u].toLowerCase());l&&(f.query=l(f.query)),n(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(d=f.auth.split(":"),f.username=d[0]||"",f.password=d[1]||""),f.href=f.toString()}var n=e("requires-port"),o=e("./lolcation"),r=e("querystringify"),s=/^\/(?!\/)/,a=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[0/0,"host",void 0,1,1],[/\:(\d+)$/,"port"],[0/0,"hostname",void 0,1,1]];i.prototype.set=function(e,t,i){var o=this;return"query"===e?("string"==typeof t&&(t=(i||r.parse)(t)),o[e]=t):"port"===e?(o[e]=t,n(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="")):"hostname"===e?(o[e]=t,o.port&&(t+=":"+o.port),o.host=t):"host"===e?(o[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),o.hostname=t[0],o.port=t[1])):o[e]=t,o.href=o.toString(),o},i.prototype.toString=function(e){e&&"function"==typeof e||(e=r.stringify);var t,i=this,n=i.protocol+"//";return i.username&&(n+=i.username+":"+i.password+"@"),n+=i.hostname,i.port&&(n+=":"+i.port),n+=i.pathname,i.query&&(t="object"==typeof i.query?e(i.query):i.query,n+=("?"===t.charAt(0)?"":"?")+t),i.hash&&(n+=i.hash),n},i.qs=r,i.location=o,t.exports=i},{"./lolcation":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/lolcation.js",querystringify:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/node_modules/querystringify/index.js","requires-port":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/node_modules/requires-port/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/lolcation.js":[function(e,t){(function(i){"use strict";var n,o={hash:1,query:1};t.exports=function(t){t=t||i.location||{},n=n||e("./");var r,s={},a=typeof t;if("blob:"===t.protocol)s=new n(unescape(t.pathname),{});else if("string"===a){s=new n(t,{});for(r in o)delete s[r]}else if("object"===a)for(r in t)r in o||(s[r]=t[r]);return s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/node_modules/querystringify/index.js":[function(e,t,i){"use strict";function n(e){for(var t,i=/([^=?&]+)=([^&]*)/g,n={};t=i.exec(e);n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return n}function o(e,t){t=t||"";var i=[];"string"!=typeof t&&(t="?");for(var n in e)r.call(e,n)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t+i.join("&")}var r=Object.prototype.hasOwnProperty;i.stringify=o,i.parse=n},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/url-parse/node_modules/requires-port/index.js":[function(e,t){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;
case"file":return!1}return 0!==e}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/index.js":[function(e,t,i){function n(e,t,i){if(!(this instanceof n))return new n(e,t,i);var o,r=typeof e;if("number"===r)o=e>0?e>>>0:0;else if("string"===r)o=n.byteLength(e,t);else{if("object"!==r||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&z(e.data)&&(e=e.data),o=+e.length>0?Math.floor(+e.length):0}if(o>B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");var s;n.TYPED_ARRAY_SUPPORT?s=n._augment(new Uint8Array(o)):(s=this,s.length=o,s._isBuffer=!0);var a;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)s._set(e);else if(S(e))if(n.isBuffer(e))for(a=0;o>a;a++)s[a]=e.readUInt8(a);else for(a=0;o>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===r)s.write(e,0,t);else if("number"===r&&!n.TYPED_ARRAY_SUPPORT&&!i)for(a=0;o>a;a++)s[a]=0;return o>0&&o<=n.poolSize&&(s.parent=V),s}function o(e,t,i){if(!(this instanceof o))return new o(e,t,i);var r=new n(e,t,i);return delete r.parent,r}function r(e,t,i,n){i=Number(i)||0;var o=e.length-i;n?(n=Number(n),n>o&&(n=o)):n=o;var r=t.length;if(r%2!==0)throw new Error("Invalid hex string");n>r/2&&(n=r/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[i+s]=a}return s}function s(e,t,i,n){var o=P(C(t,e.length-i),e,i,n);return o}function a(e,t,i,n){var o=P(A(t),e,i,n);return o}function l(e,t,i,n){return a(e,t,i,n)}function h(e,t,i,n){var o=P(L(t),e,i,n);return o}function d(e,t,i,n){var o=P(j(t,e.length-i),e,i,n,2);return o}function c(e,t,i){return D.fromByteArray(0===t&&i===e.length?e:e.slice(t,i))}function u(e,t,i){var n="",o="";i=Math.min(e.length,i);for(var r=t;i>r;r++)e[r]<=127?(n+=R(o)+String.fromCharCode(e[r]),o=""):o+="%"+e[r].toString(16);return n+R(o)}function p(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;i>o;o++)n+=String.fromCharCode(127&e[o]);return n}function m(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;i>o;o++)n+=String.fromCharCode(e[o]);return n}function f(e,t,i){var n=e.length;(!t||0>t)&&(t=0),(!i||0>i||i>n)&&(i=n);for(var o="",r=t;i>r;r++)o+=T(e[r]);return o}function g(e,t,i){for(var n=e.slice(t,i),o="",r=0;r<n.length;r+=2)o+=String.fromCharCode(n[r]+256*n[r+1]);return o}function v(e,t,i){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function y(e,t,i,o,r,s){if(!n.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>r||s>t)throw new RangeError("value is out of bounds");if(i+o>e.length)throw new RangeError("index out of range")}function b(e,t,i,n){0>t&&(t=65535+t+1);for(var o=0,r=Math.min(e.length-i,2);r>o;o++)e[i+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function w(e,t,i,n){0>t&&(t=4294967295+t+1);for(var o=0,r=Math.min(e.length-i,4);r>o;o++)e[i+o]=t>>>8*(n?o:3-o)&255}function x(e,t,i,n,o,r){if(t>o||r>t)throw new RangeError("value is out of bounds");if(i+n>e.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function _(e,t,i,n,o){return o||x(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),F.write(e,t,i,n,23,4),i+4}function k(e,t,i,n,o){return o||x(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),F.write(e,t,i,n,52,8),i+8}function M(e){if(e=E(e).replace(O,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function E(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(e){return z(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function T(e){return 16>e?"0"+e.toString(16):e.toString(16)}function C(e,t){var i,n=e.length,o=null;t=t||1/0;for(var r=[],s=0;n>s;s++){if(i=e.charCodeAt(s),i>55295&&57344>i){if(!o){if(i>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&r.push(239,191,189);continue}o=i;continue}if(56320>i){(t-=3)>-1&&r.push(239,191,189),o=i;continue}i=o-55296<<10|i-56320|65536,o=null}else o&&((t-=3)>-1&&r.push(239,191,189),o=null);if(128>i){if((t-=1)<0)break;r.push(i)}else if(2048>i){if((t-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(65536>i){if((t-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(2097152>i))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function A(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t}function j(e,t){for(var i,n,o,r=[],s=0;s<e.length&&!((t-=2)<0);s++)i=e.charCodeAt(s),n=i>>8,o=i%256,r.push(o),r.push(n);return r}function L(e){return D.toByteArray(M(e))}function P(e,t,i,n,o){o&&(n-=n%o);for(var r=0;n>r&&!(r+i>=t.length||r>=e.length);r++)t[r+i]=e[r];return r}function R(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var D=e("base64-js"),F=e("ieee754"),z=e("is-array");i.Buffer=n,i.SlowBuffer=o,i.INSPECT_MAX_BYTES=50,n.poolSize=8192;var B=1073741823,V={};n.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(i){return!1}}(),n.isBuffer=function(e){return!(null==e||!e._isBuffer)},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var i=e.length,o=t.length,r=0,s=Math.min(i,o);s>r&&e[r]===t[r];r++);return r!==s&&(i=e[r],o=t[r]),o>i?-1:i>o?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!z(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new n(0);if(1===e.length)return e[0];var i;if(void 0===t)for(t=0,i=0;i<e.length;i++)t+=e[i].length;var o=new n(t),r=0;for(i=0;i<e.length;i++){var s=e[i];s.copy(o,r),r+=s.length}return o},n.byteLength=function(e,t){var i;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":i=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=2*e.length;break;case"hex":i=e.length>>>1;break;case"utf8":case"utf-8":i=C(e).length;break;case"base64":i=L(e).length;break;default:i=e.length}return i},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(e,t,i){var n=!1;if(t>>>=0,i=void 0===i||1/0===i?this.length:i>>>0,e||(e="utf8"),0>t&&(t=0),i>this.length&&(i=this.length),t>=i)return"";for(;;)switch(e){case"hex":return f(this,t,i);case"utf8":case"utf-8":return u(this,t,i);case"ascii":return p(this,t,i);case"binary":return m(this,t,i);case"base64":return c(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return n.compare(this,e)},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.write=function(e,t,i,n){if(isFinite(t))isFinite(i)||(n=i,i=void 0);else{var o=n;n=t,t=i,i=o}if(t=Number(t)||0,0>i||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var c=this.length-t;i?(i=Number(i),i>c&&(i=c)):i=c,n=String(n||"utf8").toLowerCase();var u;switch(n){case"hex":u=r(this,e,t,i);break;case"utf8":case"utf-8":u=s(this,e,t,i);break;case"ascii":u=a(this,e,t,i);break;case"binary":u=l(this,e,t,i);break;case"base64":u=h(this,e,t,i);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":u=d(this,e,t,i);break;default:throw new TypeError("Unknown encoding: "+n)}return u},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),e>t&&(t=e);var o;if(n.TYPED_ARRAY_SUPPORT)o=n._augment(this.subarray(e,t));else{var r=t-e;o=new n(r,void 0,!0);for(var s=0;r>s;s++)o[s]=this[s+e]}return o.length&&(o.parent=this.parent||this),o},n.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return n},n.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},n.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var n=t,o=1,r=this[e+--n];n>0&&(o*=256);)r+=this[e+--n]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},n.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},n.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},n.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),F.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),F.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),F.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),F.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||y(this,e,t,i,Math.pow(2,8*i),0);var o=1,r=0;for(this[t]=255&e;++r<i&&(o*=256);)this[t+r]=e/o>>>0&255;return t+i},n.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||y(this,e,t,i,Math.pow(2,8*i),0);var o=i-1,r=1;for(this[t+o]=255&e;--o>=0&&(r*=256);)this[t+o]=e/r>>>0&255;return t+i},n.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,1,255,0),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},n.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},n.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2},n.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):w(this,e,t,!0),t+4},n.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},n.prototype.writeIntLE=function(e,t,i,n){e=+e,t>>>=0,n||y(this,e,t,i,Math.pow(2,8*i-1)-1,-Math.pow(2,8*i-1));var o=0,r=1,s=0>e?1:0;for(this[t]=255&e;++o<i&&(r*=256);)this[t+o]=(e/r>>0)-s&255;return t+i},n.prototype.writeIntBE=function(e,t,i,n){e=+e,t>>>=0,n||y(this,e,t,i,Math.pow(2,8*i-1)-1,-Math.pow(2,8*i-1));var o=i-1,r=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(r*=256);)this[t+o]=(e/r>>0)-s&255;return t+i},n.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,1,127,-128),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},n.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},n.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2},n.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},n.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||y(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},n.prototype.writeFloatLE=function(e,t,i){return _(this,e,t,!0,i)},n.prototype.writeFloatBE=function(e,t,i){return _(this,e,t,!1,i)},n.prototype.writeDoubleLE=function(e,t,i){return k(this,e,t,!0,i)},n.prototype.writeDoubleBE=function(e,t,i){return k(this,e,t,!1,i)},n.prototype.copy=function(e,t,i,o){var r=this;if(i||(i=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&i>o&&(o=i),o===i)return 0;if(0===e.length||0===r.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>i||i>=r.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-i&&(o=e.length-t+i);var s=o-i;if(1e3>s||!n.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)e[a+t]=this[a+i];else e._set(this.subarray(i,i+s),t);return s},n.prototype.fill=function(e,t,i){if(e||(e=0),t||(t=0),i||(i=this.length),t>i)throw new RangeError("end < start");if(i!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof e)for(n=t;i>n;n++)this[n]=e;else{var o=C(e.toString()),r=o.length;for(n=t;i>n;n++)this[n]=o[n%r]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,i=e.length;i>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var U=n.prototype;n._augment=function(e){return e.constructor=n,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=U.get,e.set=U.set,e.write=U.write,e.toString=U.toString,e.toLocaleString=U.toString,e.toJSON=U.toJSON,e.equals=U.equals,e.compare=U.compare,e.copy=U.copy,e.slice=U.slice,e.readUIntLE=U.readUIntLE,e.readUIntBE=U.readUIntBE,e.readUInt8=U.readUInt8,e.readUInt16LE=U.readUInt16LE,e.readUInt16BE=U.readUInt16BE,e.readUInt32LE=U.readUInt32LE,e.readUInt32BE=U.readUInt32BE,e.readIntLE=U.readIntLE,e.readIntBE=U.readIntBE,e.readInt8=U.readInt8,e.readInt16LE=U.readInt16LE,e.readInt16BE=U.readInt16BE,e.readInt32LE=U.readInt32LE,e.readInt32BE=U.readInt32BE,e.readFloatLE=U.readFloatLE,e.readFloatBE=U.readFloatBE,e.readDoubleLE=U.readDoubleLE,e.readDoubleBE=U.readDoubleBE,e.writeUInt8=U.writeUInt8,e.writeUIntLE=U.writeUIntLE,e.writeUIntBE=U.writeUIntBE,e.writeUInt16LE=U.writeUInt16LE,e.writeUInt16BE=U.writeUInt16BE,e.writeUInt32LE=U.writeUInt32LE,e.writeUInt32BE=U.writeUInt32BE,e.writeIntLE=U.writeIntLE,e.writeIntBE=U.writeIntBE,e.writeInt8=U.writeInt8,e.writeInt16LE=U.writeInt16LE,e.writeInt16BE=U.writeInt16BE,e.writeInt32LE=U.writeInt32LE,e.writeInt32BE=U.writeInt32BE,e.writeFloatLE=U.writeFloatLE,e.writeFloatBE=U.writeFloatBE,e.writeDoubleLE=U.writeDoubleLE,e.writeDoubleBE=U.writeDoubleBE,e.fill=U.fill,e.inspect=U.inspect,e.toArrayBuffer=U.toArrayBuffer,e};var O=/[^+\/0-9A-z\-]/g},{"base64-js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js",ieee754:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","is-array":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js":[function(e,t,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===c?62:t===a||t===u?63:l>t?-1:l+10>t?t-l+26+26:d+26>t?t-d:h+26>t?t-h+26:void 0}function i(e){function i(e){h[c++]=e}var n,o,s,a,l,h;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=e.length;l="="===e.charAt(d-2)?2:"="===e.charAt(d-1)?1:0,h=new r(3*e.length/4-l),s=l>0?e.length-4:e.length;var c=0;for(n=0,o=0;s>n;n+=4,o+=3)a=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),i((16711680&a)>>16),i((65280&a)>>8),i(255&a);return 2===l?(a=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,i(255&a)):1===l&&(a=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,i(a>>8&255),i(255&a)),h}function o(e){function t(e){return n.charAt(e)}function i(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var o,r,s,a=e.length%3,l="";for(o=0,s=e.length-a;s>o;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],l+=i(r);switch(a){case 1:r=e[e.length-1],l+=t(r>>2),l+=t(r<<4&63),l+="==";break;case 2:r=(e[e.length-2]<<8)+e[e.length-1],l+=t(r>>10),l+=t(r>>4&63),l+=t(r<<2&63),l+="="}return l}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),h="a".charCodeAt(0),d="A".charCodeAt(0),c="-".charCodeAt(0),u="_".charCodeAt(0);e.toByteArray=i,e.fromByteArray=o}("undefined"==typeof i?this.base64js={}:i)},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js":[function(e,t,i){i.read=function(e,t,i,n,o){var r,s,a=8*o-n-1,l=(1<<a)-1,h=l>>1,d=-7,c=i?o-1:0,u=i?-1:1,p=e[t+c];for(c+=u,r=p&(1<<-d)-1,p>>=-d,d+=a;d>0;r=256*r+e[t+c],c+=u,d-=8);for(s=r&(1<<-d)-1,r>>=-d,d+=n;d>0;s=256*s+e[t+c],c+=u,d-=8);if(0===r)r=1-h;else{if(r===l)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,n),r-=h}return(p?-1:1)*s*Math.pow(2,r-n)},i.write=function(e,t,i,n,o,r){var s,a,l,h=8*r-o-1,d=(1<<h)-1,c=d>>1,u=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:r-1,m=n?1:-1,f=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+c>=1?u/l:u*Math.pow(2,1-c),t*l>=2&&(s++,l/=2),s+c>=d?(a=0,s=d):s+c>=1?(a=(t*l-1)*Math.pow(2,o),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,o),s=0));o>=8;e[i+p]=255&a,p+=m,a/=256,o-=8);for(s=s<<o|a,h+=o;h>0;e[i+p]=255&s,p+=m,s/=256,h-=8);e[i+p-m]|=128*f}},{}],"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js":[function(e,t){t.exports=e("/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/is-array/index.js")},{"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/is-array/index.js":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-collection/node_modules/is-array/index.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/select/model-collection.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("ampersand-form-view"),s=(e("ampersand-select-view"),e("ampersand-input-view"),e("./model")),a=e("../models/model"),l=(e("ampersand-checkbox-view"),e("../forms/paginated-collection-view")),h=(e("../forms/tests.js"),r.extend({submitCallback:function(e){var t=!1;"spatial"==e&&(e="population",t=!0);for(var n=this.collection.models.length,o="model"+n,r=this.collection.map(function(e){return e.name});i.contains(r,o);)n+=1,o="model"+n;var s=new a({name:o,units:e,type:"massaction",isSpatial:t,mesh:this.meshCollection.at(0)});this.collection.add(s).save(),this.selectView.select(s,!0)},validCallback:function(e){e?this.button.prop("disabled",!1):this.button.prop("disabled",!0)},initialize:function(e){this.collection=e.collection,this.meshCollection=e.meshCollection,this.selectView=e.selectView},render:function(){r.prototype.render.apply(this,arguments),n(this.el).find("input").prop("autocomplete","off"),this.buttonTemplate='<div class="btn-group">   <a class="btn btn-large btn-primary dropdown-toggle" data-toggle="dropdown" href="#">     Add Model     <span class="caret"></span>   </a>   <ul class="dropdown-menu">     <li><a data-hook="concentration" tabindex="-1" href="#">Concentration, Well-mixed</a></li>     <li><a data-hook="population" tabindex="-1" href="#">Population, Well-mixed</a></li>     <li><a data-hook="spatial" tabindex="-1" href="#">Population, Spatial</a></li>   </ul> </div>',this.button=n(this.buttonTemplate).appendTo(n(this.el)),n(this.el).find("[data-hook=concentration]").click(i.bind(i.partial(this.submitCallback,"concentration"),this)),n(this.el).find("[data-hook=population]").click(i.bind(i.partial(this.submitCallback,"population"),this)),n(this.el).find("[data-hook=spatial]").click(i.bind(i.partial(this.submitCallback,"spatial"),this))}})),d=o.extend({template:"<div>   <div data-hook='modelCollection'></div>   <br />   <form data-hook='addModelForm'></form> </div>",props:{selected:"object",valid:"boolean",message:"string"},updateValid:function(){this.selectView?(this.selectView.updateValid(),this.valid=this.selectView.valid,this.message=this.selectView.message):(this.valid=!0,this.message="")},update:function(){this.parent&&this.parent.update&&this.parent.update()},initialize:function(e,t){o.prototype.initialize.call(this,e,t),this.meshCollection=e.meshCollection},select:function(e){e instanceof a?this.selectView.select(e):this.selected=this.selectView.value},render:function(){var e="<div>   <table data-hook='table' class='table table-bordered'>     <thead>       <th width='25px'></th><th width='170px'>Name</th><th>Properties</th><th width='25px'>Delete</th>     </thead>     <tbody data-hook='items'></tbody>   </table>   <div data-hook='nav'>     <button class='btn' data-hook='previous'>&lt;&lt;</button>     [ <span data-hook='leftPosition'></span> - <span data-hook='rightPosition'></span> of <span data-hook='total'></span> ]     <button class='btn' data-hook='next'>&gt;&gt;</button>   </div> </div>";return o.prototype.render.apply(this,arguments),this.selectView=this.renderSubview(new l({template:e,collection:this.collection,viewModel:s,parent:this,limit:10,value:this.selected,autoSelect:!1}),this.queryByHook("modelCollection")),this.listenToAndRun(this.selectView,"change:value",i.bind(this.select,this)),this.addForm=new h({el:this.el.querySelector("[data-hook=addModelForm]"),selectView:this.selectView,meshCollection:this.meshCollection,collection:this.collection}),this}});t.exports=d},{"../forms/paginated-collection-view":"/home/bbales2/stochssModel/app/static/modelEditor/forms/paginated-collection-view.js","../forms/tests.js":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","../models/model":"/home/bbales2/stochssModel/app/static/modelEditor/models/model.js","./model":"/home/bbales2/stochssModel/app/static/modelEditor/select/model.js","ampersand-checkbox-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-checkbox-view/ampersand-checkbox-view.js","ampersand-form-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-form-view/ampersand-form-view.js","ampersand-input-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-input-view/ampersand-input-view.js","ampersand-select-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-select-view/ampersand-select-view.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}],"/home/bbales2/stochssModel/app/static/modelEditor/select/model.js":[function(e,t){var i=e("underscore"),n=e("jquery"),o=e("ampersand-view"),r=e("../forms/tests");t.exports=o.extend({template:'<tr data-hook="row">   <td>     <button data-hook="edit" class="btn-small btn">Select</button>   </td>   <td data-hook="name">   </td>   <td data-hook="type">   </td>   <td>     <button type="button" class="btn btn-default" data-hook="delete">       x     </button>   </td> </tr>',props:{valid:"boolean",message:"string"},bindings:{invalid:{type:"booleanClass",name:"invalidRow",hook:"row"},textType:{type:"text",hook:"type"}},derived:{textType:{deps:["model.units","model.type","model.isSpatial"],fn:function(){var e="";return e+="massaction"==this.model.type?"Mass action, ":"Non-mass action, ",e+="concentration"==this.model.units?"concentration, non-spatial":this.model.isSpatial?"population, spatial":"population, non-spatial"}},invalid:{deps:["valid"],fn:function(){return!this.valid}}},events:{"click [data-hook=edit]":"selectSelf","click [data-hook=delete]":"removeModel"},updateValid:function(){this.valid=!this.nameBox||this.nameBox.valid,this.message="",this.nameBox&&!this.nameBox.valid&&(this.message="Model name invalid")},update:function(){this.updateValid(),this.parent&&this.parent.update&&this.parent.update(),this.parent&&this.parent.parent&&this.parent.parent.update&&this.parent.parent.update()},selectSelf:function(){this.parent.parent.select(this.model)},deSelect:function(){n(this.queryByHook("edit")).removeClass("btn-success"),n(this.queryByHook("name")).find("input").prop("disabled",!0)},select:function(){n(this.queryByHook("edit")).addClass("btn-success"),n(this.queryByHook("name")).find("input").prop("disabled",!1)},removeModel:function(){if(confirm("Are you sure you want to delete this model?")){var e=n('[data-hook="saveMessage"]');e.removeClass("alert-success alert-error"),e.text("Deleting model..."),this.model.destroy({success:i.bind(this.modelDeleted,this),error:i.bind(this.modelFailedToDelete,this)})}},modelDeleted:function(){var e=n('[data-hook="saveMessage"]');e.removeClass("alert-error"),e.addClass("alert-success"),e.text("Model deleted")},modelFailedToDelete:function(){var e=n('[data-hook="saveMessage"]');e.removeClass("alert-success"),e.addClass("alert-error"),e.text("Model not saved to local library!")},initialize:function(){o.prototype.initialize.apply(this,arguments),this.updateValid()},render:function(){o.prototype.render.apply(this,arguments),this.nameBox=this.renderSubview(new ModifyingInputView({label:"",name:"name",value:this.model.name,required:!1,parent:this,placeholder:"Name",model:this.model,tests:[].concat(r.naming(this.model.collection,this.model))}),this.el.querySelector("[data-hook='name']"));this.model;return this.deSelect(),this.updateValid(),this}})},{"../forms/tests":"/home/bbales2/stochssModel/app/static/modelEditor/forms/tests.js","ampersand-view":"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/ampersand-view/ampersand-view.js",jquery:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/jquery/dist/jquery.js",underscore:"/home/bbales2/stochssModel/app/static/modelEditor/node_modules/underscore/underscore.js"}]},{},["/home/bbales2/stochssModel/app/static/modelEditor/app.js"]);
